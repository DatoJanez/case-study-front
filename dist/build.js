"use strict";var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function isFunction(e){return"function"==typeof e}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;_enable_super_gross_mode_that_will_cause_bad_things=e},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(e){setTimeout(function(){throw e})}var empty={closed:!0,next:function(e){},error:function(e){if(config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)},complete:function(){}},isArray=Array.isArray||function(e){return e&&"number"==typeof e.length};function isObject(e){return null!=e&&"object"==typeof e}var tryCatchTarget,errorObject={e:{}};function tryCatcher(){try{return tryCatchTarget.apply(this,arguments)}catch(e){return errorObject.e=e,errorObject}}function tryCatch(e){return tryCatchTarget=e,tryCatcher}var UnsubscriptionError=function(n){function r(e){var t=n.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"")||this;return t.errors=e,t.name="UnsubscriptionError",Object.setPrototypeOf(t,r.prototype),t}return __extends(r,n),r}(Error),Subscription=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return r.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,r=n._parent,i=n._parents,o=n._unsubscribe,s=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,u=i?i.length:0;r;)r.remove(this),r=++c<u&&i[c]||null;if(isFunction(o))tryCatch(o).call(this)===errorObject&&(t=!0,e=e||(errorObject.e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(errorObject.e.errors):[errorObject.e]));if(isArray(s))for(c=-1,u=s.length;++c<u;){var a=s[c];if(isObject(a))if(tryCatch(a.unsubscribe).call(a)===errorObject){t=!0,e=e||[];var l=errorObject.e;l instanceof UnsubscriptionError?e=e.concat(flattenUnsubscriptionErrors(l.errors)):e.push(l)}}if(t)throw new UnsubscriptionError(e)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if("function"!=typeof t._addParent){var n=t;(t=new r)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},r.EMPTY=((e=new r).closed=!0,e),r}();function flattenUnsubscriptionErrors(e){return e.reduce(function(e,t){return e.concat(t instanceof UnsubscriptionError?t.errors:t)},[])}var rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",Subscriber=function(o){function i(e,t,n){var r=o.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=empty;break;case 1:if(!e){r.destination=empty;break}if("object"==typeof e){if(isTrustedSubscriber(e)){var i=e[rxSubscriber]();r.syncErrorThrowable=i.syncErrorThrowable,(r.destination=i).add(r)}else r.syncErrorThrowable=!0,r.destination=new SafeSubscriber(r,e);break}default:r.syncErrorThrowable=!0,r.destination=new SafeSubscriber(r,e,t,n)}return r}return __extends(i,o),i.prototype[rxSubscriber]=function(){return this},i.create=function(e,t,n){var r=new i(e,t,n);return r.syncErrorThrowable=!1,r},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},i}(Subscription),SafeSubscriber=function(c){function e(e,t,n,r){var i,o=c.call(this)||this;o._parentSubscriber=e;var s=o;return isFunction(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==empty&&(isFunction((s=Object.create(t)).unsubscribe)&&o.add(s.unsubscribe.bind(s)),s.unsubscribe=o.unsubscribe.bind(o))),o._context=s,o._next=i,o._error=n,o._complete=r,o}return __extends(e,c),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;hostReportError(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),config.useDeprecatedSynchronousErrorHandling)throw e;hostReportError(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(Subscriber);function isTrustedSubscriber(e){return e instanceof Subscriber||"syncErrorThrowable"in e&&e[rxSubscriber]}function toSubscriber(e,t,n){if(e){if(e instanceof Subscriber)return e;if(e[rxSubscriber])return e[rxSubscriber]()}return e||t||n?new Subscriber(e,t,n):new Subscriber(empty)}var observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function noop(){}function pipeFromArray(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:noop}var Observable=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,i=toSubscriber(e,t,n);if(r?r.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),config.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=getPromiseCtor(e))(function(e,t){var n;n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[observable]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:pipeFromArray(e)(this)},n.prototype.toPromise=function(e){var r=this;return new(e=getPromiseCtor(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function getPromiseCtor(e){if(e||(e=config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var ObjectUnsubscribedError=function(t){function n(){var e=t.call(this,"object unsubscribed")||this;return e.name="ObjectUnsubscribedError",Object.setPrototypeOf(e,n.prototype),e}return __extends(n,t),n}(Error),SubjectSubscription=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return __extends(e,r),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},e}(Subscription),SubjectSubscriber=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return __extends(e,n),e}(Subscriber),Subject=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return __extends(e,t),e.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},e.prototype.lift=function(e){var t=new AnonymousSubject(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Subscription.EMPTY):this.isStopped?(e.complete(),Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription(this,e))},e.prototype.asObservable=function(){var e=new Observable;return e.source=this,e},e.create=function(e,t){return new AnonymousSubject(e,t)},e}(Observable),AnonymousSubject=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return __extends(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Subscription.EMPTY},e}(Subject);function refCount(){return function(e){return e.lift(new RefCountOperator(e))}}var RefCountOperator=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new RefCountSubscriber(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),RefCountSubscriber=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return __extends(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(Subscriber),ConnectableObservable=function(r){function e(e,t){var n=r.call(this)||this;return n.source=e,n.subjectFactory=t,n._refCount=0,n._isComplete=!1,n}return __extends(e,r),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Subscription).add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),e.closed?(this._connection=null,e=Subscription.EMPTY):this._connection=e),e},e.prototype.refCount=function(){return refCount()(this)},e}(Observable),ConnectableSubscriber=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return __extends(e,r),e.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},e}(SubjectSubscriber),RefCountSubscriber$1=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return __extends(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(Subscriber),GroupBySubscriber=function(s){function e(e,t,n,r,i){var o=s.call(this,e)||this;return o.keySelector=t,o.elementSelector=n,o.durationSelector=r,o.subjectSelector=i,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return __extends(e,s),e.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},e.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new Subject,n.set(t,i);var o=new GroupedObservable(t,i,this);if(this.destination.next(o),this.durationSelector){var s=void 0;try{s=this.durationSelector(new GroupedObservable(t,i))}catch(e){return void this.error(e)}this.add(s.subscribe(new GroupDurationSubscriber(t,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(n){var e=this.groups;e&&(e.forEach(function(e,t){e.error(n)}),e.clear()),this.destination.error(n)},e.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},e.prototype.removeGroup=function(e){this.groups.delete(e)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&s.prototype.unsubscribe.call(this))},e}(Subscriber),GroupDurationSubscriber=function(i){function e(e,t,n){var r=i.call(this,t)||this;return r.key=e,r.group=t,r.parent=n,r}return __extends(e,i),e.prototype._next=function(e){this.complete()},e.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},e}(Subscriber),GroupedObservable=function(i){function e(e,t,n){var r=i.call(this)||this;return r.key=e,r.groupSubject=t,r.refCountSubscription=n,r}return __extends(e,i),e.prototype._subscribe=function(e){var t=new Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new InnerRefCountSubscription(n)),t.add(r.subscribe(e)),t},e}(Observable),InnerRefCountSubscription=function(n){function e(e){var t=n.call(this)||this;return(t.parent=e).count++,t}return __extends(e,n),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(n.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(Subscription),BehaviorSubject=function(n){function e(e){var t=n.call(this)||this;return t._value=e,t}return __extends(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=n.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},e}(Subject),Action=function(n){function e(e,t){return n.call(this)||this}return __extends(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(Subscription),AsyncAction=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.pending=!1,n}return __extends(e,r),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(Action),QueueAction=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return __extends(e,r),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?r.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?r.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,e,t,n):e.flush(this)},e}(AsyncAction),Scheduler=function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},n.now=Date.now?Date.now:function(){return+new Date},n}(),AsyncScheduler=function(r){function i(e,t){void 0===t&&(t=Scheduler.now);var n=r.call(this,e,function(){return i.delegate&&i.delegate!==n?i.delegate.now():t()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return __extends(i,r),i.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):r.prototype.schedule.call(this,e,t,n)},i.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},i}(Scheduler),QueueScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(AsyncScheduler),queue=new QueueScheduler(QueueAction),EMPTY=new Observable(function(e){return e.complete()});function empty$1(e){return e?emptyScheduled(e):EMPTY}function emptyScheduled(t){return new Observable(function(e){return t.schedule(function(){return e.complete()})})}function isScheduler(e){return e&&"function"==typeof e.schedule}var subscribeToArray=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.closed||e.complete()}};function fromArray(r,i){return new Observable(i?function(e){var t=new Subscription,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t}:subscribeToArray(r))}function scalar(t){var e=new Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function of(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];switch(isScheduler(n)?e.pop():n=void 0,e.length){case 0:return empty$1(n);case 1:return n?fromArray(e,n):scalar(e[0]);default:return fromArray(e,n)}}function throwError(t,n){return new Observable(n?function(e){return n.schedule(dispatch,0,{error:t,subscriber:e})}:function(e){return e.error(t)})}function dispatch(e){var t=e.error;e.subscriber.error(t)}var Notification=function(){function t(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),ObserveOnSubscriber=function(i){function t(e,t,n){void 0===n&&(n=0);var r=i.call(this,e)||this;return r.scheduler=t,r.delay=n,r}return __extends(t,i),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new ObserveOnMessage(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(Notification.createComplete())},t}(Subscriber),ObserveOnMessage=function(){return function(e,t){this.notification=e,this.destination=t}}(),ReplaySubject=function(i){function e(e,t,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var r=i.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return __extends(e,i),e.prototype.nextInfiniteTimeWindow=function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),i.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new ReplayEvent(this._getNow(),e)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=Subscription.EMPTY:(this.observers.push(e),t=new SubjectSubscription(this,e)),i&&e.add(e=new ObserveOnSubscriber(e,i)),n)for(var s=0;s<o&&!e.closed;s++)e.next(r[s]);else for(s=0;s<o&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},e.prototype._getNow=function(){return(this.scheduler||queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return t<i&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},e}(Subject),ReplayEvent=function(){return function(e,t){this.time=e,this.value=t}}(),AsyncSubject=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return __extends(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(Subject),nextHandle=1,tasksByHandle={};function runIfPresent(e){var t=tasksByHandle[e];t&&t()}var Immediate={setImmediate:function(e){var t=nextHandle++;return tasksByHandle[t]=e,Promise.resolve().then(function(){return runIfPresent(t)}),t},clearImmediate:function(e){delete tasksByHandle[e]}},AsapAction=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return __extends(e,r),e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n?r.prototype.requestAsyncId.call(this,e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay)return r.prototype.recycleAsyncId.call(this,e,t,n);0===e.actions.length&&(Immediate.clearImmediate(t),e.scheduled=void 0)},e}(AsyncAction),AsapScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),asap=new AsapScheduler(AsapAction),async=new AsyncScheduler(AsyncAction),AnimationFrameAction=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return __extends(e,r),e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n?r.prototype.requestAsyncId.call(this,e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay)return r.prototype.recycleAsyncId.call(this,e,t,n);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)},e}(AsyncAction),AnimationFrameScheduler=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(AsyncScheduler),animationFrame=new AnimationFrameScheduler(AnimationFrameAction),VirtualTimeScheduler=function(r){function e(e,t){void 0===e&&(e=VirtualAction),void 0===t&&(t=Number.POSITIVE_INFINITY);var n=r.call(this,e,function(){return n.frame})||this;return n.maxFrames=t,n.frame=0,n.index=-1,n}return __extends(e,r),e.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n.shift())&&(this.frame=t.delay)<=r&&!(e=t.execute(t.state,t.delay)););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},e.frameTimeFactor=10,e}(AsyncScheduler),VirtualAction=function(i){function o(e,t,n){void 0===n&&(n=e.index+=1);var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.index=n,r.active=!0,r.index=e.index=n,r}return __extends(o,i),o.prototype.schedule=function(e,t){if(void 0===t&&(t=0),!this.id)return i.prototype.schedule.call(this,e,t);this.active=!1;var n=new o(this.scheduler,this.work);return this.add(n),n.schedule(e,t)},o.prototype.requestAsyncId=function(e,t,n){void 0===n&&(n=0),this.delay=e.frame+n;var r=e.actions;return r.push(this),r.sort(o.sortActions),!0},o.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},o.prototype._execute=function(e,t){if(!0===this.active)return i.prototype._execute.call(this,e,t)},o.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},o}(AsyncAction),ArgumentOutOfRangeError=function(t){function n(){var e=t.call(this,"argument out of range")||this;return e.name="ArgumentOutOfRangeError",Object.setPrototypeOf(e,n.prototype),e}return __extends(n,t),n}(Error),EmptyError=function(t){function n(){var e=t.call(this,"no elements in sequence")||this;return e.name="EmptyError",Object.setPrototypeOf(e,n.prototype),e}return __extends(n,t),n}(Error),TimeoutError=function(t){function n(){var e=t.call(this,"Timeout has occurred")||this;return Object.setPrototypeOf(e,n.prototype),e}return __extends(n,t),n}(Error),MapSubscriber=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}return __extends(e,i),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(Subscriber),OuterSubscriber=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Subscriber),InnerSubscriber=function(i){function e(e,t,n){var r=i.call(this)||this;return r.parent=e,r.outerValue=t,r.outerIndex=n,r.index=0,r}return __extends(e,i),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(Subscriber),subscribeToPromise=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,hostReportError),t}};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var iterator=getSymbolIterator(),subscribeToIterable=function(r){return function(e){for(var t=r[iterator]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}},subscribeToObservable=function(n){return function(e){var t=n[observable]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},isArrayLike=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function isPromise(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var subscribeTo=function(t){if(t instanceof Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(isArrayLike(t))return subscribeToArray(t);if(isPromise(t))return subscribeToPromise(t);if(t&&"function"==typeof t[iterator])return subscribeToIterable(t);if(t&&"function"==typeof t[observable])return subscribeToObservable(t);var e=isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function subscribeToResult(e,t,n,r){var i=new InnerSubscriber(e,n,r);return subscribeTo(t)(i)}var NONE={},CombineLatestSubscriber=function(r){function e(e,t){var n=r.call(this,e)||this;return n.resultSelector=t,n.active=0,n.values=[],n.observables=[],n}return __extends(e,r),e.prototype._next=function(e){this.values.push(NONE),this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],c=this.toRespond?s===NONE?--this.toRespond:this.toRespond:0;o[n]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(OuterSubscriber),MergeMapSubscriber=function(i){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=i.call(this,e)||this;return r.project=t,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return __extends(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){this.add(subscribeToResult(this,e,t,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(OuterSubscriber),ForkJoinSubscriber=function(s){function e(e,t){var n=s.call(this,e)||this;n.sources=t,n.completed=0,n.haveValues=0;var r=t.length;n.values=new Array(r);for(var i=0;i<r;i++){var o=subscribeToResult(n,t[i],null,i);o&&n.add(o)}return n}return __extends(e,s),e.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(e){var t=this.destination,n=this.haveValues,r=this.values,i=r.length;e._hasValue?(this.completed++,this.completed===i&&(n===i&&t.next(r),t.complete())):t.complete()},e}(OuterSubscriber),RaceSubscriber=function(n){function e(e){var t=n.call(this,e)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}return __extends(e,n),e.prototype._next=function(e){this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},e}(OuterSubscriber),ZipSubscriber=function(i){function e(e,t,n){void 0===n&&(n=Object.create(null));var r=i.call(this,e)||this;return r.iterators=[],r.active=0,r.resultSelector="function"==typeof t?t:null,r.values=n,r}return __extends(e,i),e.prototype._next=function(e){var t=this.iterators;isArray(e)?t.push(new StaticArrayIterator(e)):"function"==typeof e[iterator]?t.push(new StaticIterator(e[iterator]())):t.push(new ZipBufferIterator(this.destination,this,e))},e.prototype._complete=function(){var e=this.iterators,t=e.length;if(0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var s,c=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),c.done)return void n.complete();o.push(c.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(Subscriber),StaticIterator=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),StaticArrayIterator=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),ZipBufferIterator=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.parent=t,r.observable=n,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return __extends(e,i),e.prototype[iterator]=function(){return this},e.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},e.prototype.hasValue=function(){return 0<this.buffer.length},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(e,t){return subscribeToResult(this,this.observable,this,t)},e}(OuterSubscriber);function __extends$1(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Annyang=function(){function e(){var n=this;this.convertRequst$=new Subject,this.activated$=new BehaviorSubject(!1),this.annyang=window.annyang,this.commands={"*one *currencyFrom to *currencyTo":function(){return n.CommandMatch1},"*one *two *currencyFrom to *currencyTo":function(){return n.CommandMatch2},"*one *two *two *currencyFrom to *currencyTo":function(){return n.CommandMatch3},"*one_and_currencyFrom to *currencyTo":function(e,t){return n.CommandMatch0(e,t)}},this.annyang.addCommands(this.commands),this.annyang.addCallback("error",function(){return n.abort()}),this.annyang.addCallback("errorNetwork",function(){return n.abort()}),this.annyang.addCallback("errorPermissionBlocked",function(){return n.abort()}),this.annyang.addCallback("errorPermissionDenied",function(){return n.abort()}),this.annyang.addCallback("end",function(){return n.abort()}),this.annyang.addCallback("result",function(){return n.abort()}),this.annyang.addCallback("resultMatch",function(){return n.abort()})}return e.prototype.start=function(){this.annyang&&(this.annyang.isListening()&&this.abort(),this.annyang.start({autoRestart:!0,continuous:!1}),this.activated$.next(!0))},e.prototype.abort=function(){this.annyang&&(this.annyang.abort(),this.activated$.next(!1))},e.prototype.CommandMatch0=function(e,t){var n,r,i;if(0===e.indexOf("$"))n=e.replace("$",""),r=parseInt(n,2),i="USD";else{if(0!==e.indexOf("€"))return;n=e.replace("€",""),r=parseInt(n,2),i="EUR"}if(r.toString()===n){var o={amount:r,currencyFrom:i,currencyTo:t};o.currencyTo="euro"===o.currencyTo?"EUR":o.currencyTo,this.convertRequst$.next(o)}},e.prototype.CommandMatch1=function(e,t,n){},e.prototype.CommandMatch2=function(e,t,n,r){},e.prototype.CommandMatch3=function(e,t,n,r,i){},e}(),Converter=function(){function e(e,t,n){var r=this;this.dom=e,this.annyang=t,this.dataCollector=n,this.annyang.convertRequst$.subscribe(function(e){return r.convert(e)}),this.dom.convertRequst$.subscribe(function(e){return r.convert(e)})}return e.prototype.convert=function(e){var t=this.dataCollector.rates[e.currencyFrom],n=this.dataCollector.rates[e.currencyTo],r=e.amount*(n/t);return this.dom.elements.get("result").innerHTML=r.toFixed(2),r},e}(),DataCollector=function(){function e(e){this.dexye=e,this.fetchRates()}return e.prototype.fetchRates=function(){var n=this;this.dexye.getLatestResponce().then(function(e){return{last:e,isValid:n.dexye.isCachedDataValid(e)}}).then(function(t){if(t.isValid)return n.rates=t.last.rates;fetch("http://data.fixer.io/api/latest?access_key=8d981abfaca9f2e4162521b9ecf540db").then(function(e){return e.json()}).then(function(e){n.rates=n.dexye.latestResponce(e,t.last).rates}).catch(function(){n.rates=t.last.rates})})},e}(),keys=Object.keys,isArray$1=Array.isArray,_global="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function extend(t,n){return"object"!=typeof n||keys(n).forEach(function(e){t[e]=n[e]}),t}var getProto=Object.getPrototypeOf,_hasOwn={}.hasOwnProperty;function hasOwn(e,t){return _hasOwn.call(e,t)}function props(t,n){"function"==typeof n&&(n=n(getProto(t))),keys(n).forEach(function(e){setProp(t,e,n[e])})}var defineProperty=Object.defineProperty;function setProp(e,t,n,r){defineProperty(e,t,extend(n&&hasOwn(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function derive(t){return{from:function(e){return t.prototype=Object.create(e.prototype),setProp(t.prototype,"constructor",t),{extend:props.bind(null,t.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(e,t){var n;return getOwnPropertyDescriptor(e,t)||(n=getProto(e))&&getPropertyDescriptor(n,t)}var _slice=[].slice;function slice(e,t,n){return _slice.call(e,t,n)}function override(e,t){return t(e)}function assert(e){if(!e)throw new Error("Assertion Failed")}function asap$1(e){_global.setImmediate?setImmediate(e):setTimeout(e,0)}function arrayToObject(e,i){return e.reduce(function(e,t,n){var r=i(t,n);return r&&(e[r[0]]=r[1]),e},{})}function trycatcher(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function tryCatch$1(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function getByKeyPath(e,t){if(hasOwn(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=getByKeyPath(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var c=e[t.substr(0,s)];return void 0===c?void 0:getByKeyPath(c,t.substr(s+1))}}function setByKeyPath(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){assert("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)setByKeyPath(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),c=t.substr(o+1);if(""===c)void 0===n?delete e[s]:e[s]=n;else{var u=e[s];u||(u=e[s]={}),setByKeyPath(u,c,n)}}else void 0===n?delete e[t]:e[t]=n}}function delByKeyPath(t,e){"string"==typeof e?setByKeyPath(t,e,void 0):"length"in e&&[].map.call(e,function(e){setByKeyPath(t,e,void 0)})}function shallowClone(e){var t={};for(var n in e)hasOwn(e,n)&&(t[n]=e[n]);return t}var concat$1=[].concat;function flatten(e){return concat$1.apply([],e)}var intrinsicTypes="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(flatten([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(e){return _global[e]}).map(function(e){return _global[e]});function deepClone(e){if(!e||"object"!=typeof e)return e;var t;if(isArray$1(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(deepClone(e[n]))}else if(0<=intrinsicTypes.indexOf(e.constructor))t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)hasOwn(e,i)&&(t[i]=deepClone(e[i]));return t}function getObjectDiff(r,i,o,s){return o=o||{},s=s||"",keys(r).forEach(function(e){if(hasOwn(i,e)){var t=r[e],n=i[e];"object"==typeof t&&"object"==typeof n&&t&&n&&""+t.constructor==""+n.constructor?getObjectDiff(t,n,o,s+e+"."):t!==n&&(o[s+e]=i[e])}else o[s+e]=void 0}),keys(i).forEach(function(e){hasOwn(r,e)||(o[s+e]=i[e])}),o}var iteratorSymbol="undefined"!=typeof Symbol&&Symbol.iterator,getIteratorOf=iteratorSymbol?function(e){var t;return null!=e&&(t=e[iteratorSymbol])&&t.apply(e)}:function(){return null},NO_CHAR_ARRAY={};function getArrayOf(e){var t,n,r,i;if(1===arguments.length){if(isArray$1(e))return e.slice();if(this===NO_CHAR_ARRAY&&"string"==typeof e)return[e];if(i=getIteratorOf(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var debug="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){debug=e,libraryFilter=t}var libraryFilter=function(){return!0},NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw new Error}catch(e){return e}return new Error}function prettyStack(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(libraryFilter).map(function(e){return"\n"+e}).join("")):""}function deprecated(e,t){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+prettyStack(getErrorWithStack(),1)),t.apply(this,arguments)}}var dexieErrorNames=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],errorList=dexieErrorNames.concat(idbDomErrorNames),defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function DexieError(e,t){this._e=getErrorWithStack(),this.name=e,this.message=t}function getMultiErrorMessage(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function ModifyError(e,t,n,r){this._e=getErrorWithStack(),this.failures=t,this.failedKeys=r,this.successCount=n}function BulkError(e,t){this._e=getErrorWithStack(),this.name="BulkError",this.failures=t,this.message=getMultiErrorMessage(e,t)}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}}),derive(ModifyError).from(DexieError),derive(BulkError).from(DexieError);var errnames=errorList.reduce(function(e,t){return e[t]=t+"Error",e},{}),BaseException=DexieError,exceptions=errorList.reduce(function(e,n){var r=n+"Error";function t(e,t){this._e=getErrorWithStack(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=t||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=defaultTexts[n]||r,this.inner=null)}return derive(t).from(BaseException),e[n]=t,e},{});exceptions.Syntax=SyntaxError,exceptions.Type=TypeError,exceptions.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce(function(e,t){return e[t+"Error"]=exceptions[t],e},{});function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!exceptionMap[e.name])return e;var n=new exceptionMap[e.name](t||e.message,e);return"stack"in e&&setProp(n,"stack",{get:function(){return this.inner.stack}}),n}var fullNameExceptions=errorList.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=exceptions[t]),e},{});function nop(){}function mirror(e){return e}function pureFunctionChain(t,n){return null==t||t===mirror?n:function(e){return n(t(e))}}function callBoth(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function hookCreatingChain(i,o){return i===nop?o:function(){var e=i.apply(this,arguments);void 0!==e&&(arguments[0]=e);var t=this.onsuccess,n=this.onerror;this.onsuccess=null,this.onerror=null;var r=o.apply(this,arguments);return t&&(this.onsuccess=this.onsuccess?callBoth(t,this.onsuccess):t),n&&(this.onerror=this.onerror?callBoth(n,this.onerror):n),void 0!==r?r:e}}function hookDeletingChain(n,r){return n===nop?r:function(){n.apply(this,arguments);var e=this.onsuccess,t=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?callBoth(e,this.onsuccess):e),t&&(this.onerror=this.onerror?callBoth(t,this.onerror):t)}}function hookUpdatingChain(o,s){return o===nop?s:function(e){var t=o.apply(this,arguments);extend(e,t);var n=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var i=s.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n),r&&(this.onerror=this.onerror?callBoth(r,this.onerror):r),void 0===t?void 0===i?void 0:i:extend(t,i)}}function reverseStoppableEventChain(e,t){return e===nop?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function promisableChain(i,o){return i===nop?o:function(){var e=i.apply(this,arguments);if(e&&"function"==typeof e.then){for(var t=this,n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return e.then(function(){return o.apply(t,r)})}return o.apply(this,arguments)}}fullNameExceptions.ModifyError=ModifyError,fullNameExceptions.DexieError=DexieError,fullNameExceptions.BulkError=BulkError;var INTERNAL={},LONG_STACKS_CLIP_LIMIT=100,MAX_LONG_STACKS=20,ZONE_ECHO_LIMIT=7,nativePromiseInstanceAndProto=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=_global.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),resolvedNativePromise=nativePromiseInstanceAndProto[0],nativePromiseProto=nativePromiseInstanceAndProto[1],resolvedGlobalPromise=nativePromiseInstanceAndProto[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then,NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor,AsyncFunction=nativePromiseInstanceAndProto[3],patchGlobalPromise=!!resolvedGlobalPromise,stack_being_generated=!1,schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){physicalTick(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)},asap$1$1=function(e,t){microtickQueue.push([e,t]),needsNewPhysicalTick&&(schedulePhysicalTick(),needsNewPhysicalTick=!1)},isOutsideMicroTick=!0,needsNewPhysicalTick=!0,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror,globalPSD={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:globalError,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{globalError(e[0],e[1])}catch(e){}})}},PSD=globalPSD,microtickQueue=[],numScheduledCalls=0,tickFinalizers=[];function Promise$1(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=nop,this._lib=!1;var t=this._PSD=PSD;if(debug&&(this._stackHolder=getErrorWithStack(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==INTERNAL)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&handleRejection(this,this._value))}this._state=null,this._value=null,++t.ref,executePromiseTask(this,e)}var thenProp={get:function(){var s=PSD,t=totalEchoes;function e(n,r){var i=this,o=!s.global&&(s!==PSD||t!==totalEchoes);o&&decrementExpectedAwaits();var e=new Promise$1(function(e,t){propagateToListener(i,new Listener(nativeAwaitCompatibleWrap(n,s,o),nativeAwaitCompatibleWrap(r,s,o),e,t,s))});return debug&&linkToPreviousPromise(e,this),e}return e.prototype=INTERNAL,e},set:function(e){setProp(this,"then",e&&e.prototype===INTERNAL?thenProp:{get:function(){return e},set:thenProp.set})}};function Listener(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function executePromiseTask(t,e){try{e(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var e=t._lib&&beginMicroTickScope();n&&"function"==typeof n.then?executePromiseTask(t,function(e,t){n instanceof Promise$1?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,propagateAllListeners(t)),e&&endMicroTickScope()}},handleRejection.bind(null,t))}catch(e){handleRejection(t,e)}}function handleRejection(t,n){if(rejectingErrors.push(n),null===t._state){var e=t._lib&&beginMicroTickScope();n=rejectionMapper(n),t._state=!1,t._value=n,debug&&null!==n&&"object"==typeof n&&!n._promise&&tryCatch$1(function(){var e=getPropertyDescriptor(n,"stack");n._promise=t,setProp(n,"stack",{get:function(){return stack_being_generated?e&&(e.get?e.get.apply(n):e.value):t.stack}})}),addPossiblyUnhandledError(t),propagateAllListeners(t),e&&endMicroTickScope()}}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)propagateToListener(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===numScheduledCalls&&(++numScheduledCalls,asap$1$1(function(){0==--numScheduledCalls&&finalizePhysicalTick()},[]))}function propagateToListener(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++numScheduledCalls,asap$1$1(callListener,[n,e,t])}else e._listeners.push(t)}function callListener(e,t,n){try{var r,i=(currentFulfiller=t)._value;t._state?r=e(i):(rejectingErrors.length&&(rejectingErrors=[]),r=e(i),-1===rejectingErrors.indexOf(i)&&markErrorAsHandled(t)),n.resolve(r)}catch(e){n.reject(e)}finally{currentFulfiller=null,0==--numScheduledCalls&&finalizePhysicalTick(),--n.psd.ref||n.psd.finalize()}}function getStack(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=prettyStack(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return debug&&((r=prettyStack(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&getStack(e._prev,t,n)),t}function linkToPreviousPromise(e,t){var n=t?t._numPrev+1:0;n<LONG_STACKS_CLIP_LIMIT&&(e._prev=t,e._numPrev=n)}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var e=isOutsideMicroTick;return needsNewPhysicalTick=isOutsideMicroTick=!1,e}function endMicroTickScope(){var e,t,n;do{for(;0<microtickQueue.length;)for(e=microtickQueue,microtickQueue=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<microtickQueue.length);needsNewPhysicalTick=isOutsideMicroTick=!0}function finalizePhysicalTick(){var e=unhandledErrors;unhandledErrors=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=tickFinalizers.slice(0),n=t.length;n;)t[--n]()}function run_at_end_of_this_or_next_physical_tick(t){tickFinalizers.push(function e(){t(),tickFinalizers.splice(tickFinalizers.indexOf(e),1)}),++numScheduledCalls,asap$1$1(function(){0==--numScheduledCalls&&finalizePhysicalTick()},[])}function addPossiblyUnhandledError(t){unhandledErrors.some(function(e){return e._value===t._value})||unhandledErrors.push(t)}function markErrorAsHandled(e){for(var t=unhandledErrors.length;t;)if(unhandledErrors[--t]._value===e._value)return void unhandledErrors.splice(t,1)}function PromiseReject(e){return new Promise$1(INTERNAL,!1,e)}function wrap(n,r){var i=PSD;return function(){var e=beginMicroTickScope(),t=PSD;try{return switchToZone(i,!0),n.apply(this,arguments)}catch(e){r&&r(e)}finally{switchToZone(t,!1),e&&endMicroTickScope()}}}props(Promise$1.prototype,{then:thenProp,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,PSD))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):PromiseReject(e)}):this.then(null,function(e){return e&&e.name===t?n(e):PromiseReject(e)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),PromiseReject(e)})},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=!0;var e=getStack(this,[],MAX_LONG_STACKS).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{stack_being_generated=!1}}},timeout:function(r,i){var o=this;return r<1/0?new Promise$1(function(e,t){var n=setTimeout(function(){return t(new exceptions.Timeout(i))},r);o.then(e,t).finally(clearTimeout.bind(null,n))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&setProp(Promise$1.prototype,Symbol.toStringTag,"Promise"),globalPSD.env=snapShot(),props(Promise$1,{all:function(){var o=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise$1(function(n,r){0===o.length&&n([]);var i=o.length;o.forEach(function(e,t){return Promise$1.resolve(e).then(function(e){o[t]=e,--i||n(o)},r)})})},resolve:function(n){if(n instanceof Promise$1)return n;if(n&&"function"==typeof n.then)return new Promise$1(function(e,t){n.then(e,t)});var e=new Promise$1(INTERNAL,!0,n);return linkToPreviousPromise(e,currentFulfiller),e},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new Promise$1(function(t,n){e.map(function(e){return Promise$1.resolve(e).then(t,n)})})},PSD:{get:function(){return PSD},set:function(e){return PSD=e}},newPSD:newScope,usePSD:usePSD,scheduler:{get:function(){return asap$1$1},set:function(e){asap$1$1=e}},rejectionMapper:{get:function(){return rejectionMapper},set:function(e){rejectionMapper=e}},follow:function(r,n){return new Promise$1(function(e,t){return newScope(function(t,n){var e=PSD;e.unhandleds=[],e.onunhandled=n,e.finalize=callBoth(function(){var e=this;run_at_end_of_this_or_next_physical_tick(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},e.finalize),r()},n,e,t)})}});var task={awaits:0,echoes:0,id:0},taskCounter=0,zoneStack=[],zoneEchoes=0,totalEchoes=0,zone_id_counter=0;function newScope(e,t,n,r){var i=PSD,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++zone_id_counter;var s=globalPSD.env;o.env=patchGlobalPromise?{Promise:Promise$1,PromiseProp:{value:Promise$1,configurable:!0,writable:!0},all:Promise$1.all,race:Promise$1.race,resolve:Promise$1.resolve,reject:Promise$1.reject,nthen:getPatchedPromiseThen(s.nthen,o),gthen:getPatchedPromiseThen(s.gthen,o)}:{},t&&extend(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=usePSD(o,e,n,r);return 0===o.ref&&o.finalize(),c}function incrementExpectedAwaits(){return task.id||(task.id=++taskCounter),++task.awaits,task.echoes+=ZONE_ECHO_LIMIT,task.id}function decrementExpectedAwaits(e){!task.awaits||e&&e!==task.id||(0==--task.awaits&&(task.id=0),task.echoes=task.awaits*ZONE_ECHO_LIMIT)}function onPossibleParallellAsync(e){return task.echoes&&e&&e.constructor===NativePromise?(incrementExpectedAwaits(),e.then(function(e){return decrementExpectedAwaits(),e},function(e){return decrementExpectedAwaits(),rejection(e)})):e}function zoneEnterEcho(e){++totalEchoes,task.echoes&&0!=--task.echoes||(task.echoes=task.id=0),zoneStack.push(PSD),switchToZone(e,!0)}function zoneLeaveEcho(){var e=zoneStack[zoneStack.length-1];zoneStack.pop(),switchToZone(e,!1)}function switchToZone(e,t){var n=PSD;if((t?!task.echoes||zoneEchoes++&&e===PSD:!zoneEchoes||--zoneEchoes&&e===PSD)||enqueueNativeMicroTask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho),e!==PSD&&(PSD=e,n===globalPSD&&(globalPSD.env=snapShot()),patchGlobalPromise)){var r=globalPSD.env.Promise,i=e.env;nativePromiseProto.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(_global,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject)}}function snapShot(){var e=_global.Promise;return patchGlobalPromise?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:nativePromiseProto.then,gthen:e.prototype.then}:{}}function usePSD(e,t,n,r,i){var o=PSD;try{return switchToZone(e,!0),t(n,r,i)}finally{switchToZone(o,!1)}}function enqueueNativeMicroTask(e){nativePromiseThen.call(resolvedNativePromise,e)}function nativeAwaitCompatibleWrap(t,n,r){return"function"!=typeof t?t:function(){var e=PSD;r&&incrementExpectedAwaits(),switchToZone(n,!0);try{return t.apply(this,arguments)}finally{switchToZone(e,!1)}}}function getPatchedPromiseThen(n,r){return function(e,t){return n.call(this,nativeAwaitCompatibleWrap(e,r,!1),nativeAwaitCompatibleWrap(t,r,!1))}}var UNHANDLEDREJECTION="unhandledrejection";function globalError(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(_global.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(UNHANDLEDREJECTION,!0,!0),extend(r,i)):_global.CustomEvent&&extend(r=new CustomEvent(UNHANDLEDREJECTION,{detail:i}),i),r&&_global.dispatchEvent&&(dispatchEvent(r),!_global.PromiseRejectionEvent&&_global.onunhandledrejection))try{_global.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var rejection=Promise$1.reject;function Events(i){var s={},t=function(e,t){if(t){for(var n=arguments.length,r=new Array(n-1);--n;)r[n-1]=arguments[n];return s[e].subscribe.apply(null,r),i}if("string"==typeof e)return s[e]};t.addEventType=c;for(var e=1,n=arguments.length;e<n;++e)c(arguments[e]);return t;function c(e,n,r){if("object"!=typeof e){var i;n||(n=reverseStoppableEventChain),r||(r=nop);var o={subscribers:[],fire:r,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=n(o.fire,e))},unsubscribe:function(t){o.subscribers=o.subscribers.filter(function(e){return e!==t}),o.fire=o.subscribers.reduce(n,r)}};return s[e]=t[e]=o,o}keys(i=e).forEach(function(e){var t=i[e];if(isArray$1(t))c(e,i[e][0],i[e][1]);else{if("asap"!==t)throw new exceptions.InvalidArgument("Invalid event config");var n=c(e,mirror,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){asap$1(function(){e.apply(null,t)})})})}})}}var dbNamesDB,DEXIE_VERSION="{version}",maxString=String.fromCharCode(65535),maxKey=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return maxString}}(),minKey=-1/0,INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",STRING_EXPECTED="String expected.",connections=[],isIEOrEdge="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),hasIEDeleteObjectStoreBug=isIEOrEdge,hangsOnDeleteLargeKeyRange=isIEOrEdge,dexieStackFrameFilter=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Dexie(o,e){var t,n,h,r=Dexie.dependencies,i=extend({addons:Dexie.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},e),s=i.addons,c=i.autoOpen,u=i.indexedDB,g=i.IDBKeyRange,l=this._dbSchema={},a=[],f=[],p={},d=null,y=null,b=!1,v=null,m=!1,_="readonly",w="readwrite",x=this,S=new Promise$1(function(e){t=e}),E=new Promise$1(function(e,t){n=t}),P=!0,k=!!getNativeGetDatabaseNamesFn(u);function A(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function O(e,t,n){var r=x._createTransaction(w,f,l);r.create(t),r._completion.catch(n);var i=r._reject.bind(r);newScope(function(){PSD.trans=r,0===e?(keys(l).forEach(function(e){T(t,e,l[e].primKey,l[e].indexes)}),Promise$1.follow(function(){return x.on.populate.fire(r)}).catch(i)):function(t,i,o){var n=[],e=a.filter(function(e){return e._cfg.version===t})[0];if(!e)throw new exceptions.Upgrade("Dexie specification of currently installed DB version is missing");l=x._dbSchema=e._cfg.dbschema;var s=!1;return a.filter(function(e){return e._cfg.version>t}).forEach(function(r){n.push(function(){var e=l,t=r._cfg.dbschema;z(e,o),z(t,o),l=x._dbSchema=t;var n=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var c=i.idxByName,u=o.idxByName;for(var a in c)u[a]||s.del.push(a);for(a in u){var l=c[a],h=u[a];l?l.src!==h.src&&s.change.push(h):s.add.push(h)}(0<s.del.length||0<s.add.length||0<s.change.length)&&n.change.push(s)}}else n.add.push([r,o])}return n}(e,t);if(n.add.forEach(function(e){T(o,e[0],e[1].primKey,e[1].indexes)}),n.change.forEach(function(e){if(e.recreate)throw new exceptions.Upgrade("Not yet support for changing primary key");var t=o.objectStore(e.name);e.add.forEach(function(e){D(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),D(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),r._cfg.contentUpgrade)return s=!0,Promise$1.follow(function(){r._cfg.contentUpgrade(i)})}),n.push(function(e){s&&hasIEDeleteObjectStoreBug||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(r._cfg.dbschema,e)})}),function e(){return n.length?Promise$1.resolve(n.shift()(i.idbtrans)).then(e):Promise$1.resolve()}().then(function(){var t,n;n=o,keys(t=l).forEach(function(e){n.db.objectStoreNames.contains(e)||T(n,e,t[e].primKey,t[e].indexes)})})}(e,r,t).catch(i)})}function T(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){D(i,e)}),i}function D(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function j(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=p[e]?p[e].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}function C(t,n,e){return(e?hookedEventRejectHandler:eventRejectHandler)(function(e){t.push(e),n&&n()})}function I(a,l,h,f,p){return new Promise$1(function(r,e){var i=h.length,o=i-1;if(0===i)return r();if(f){var s,c=hookedEventRejectHandler(e),u=hookedEventSuccessHandler(null);tryCatch$1(function(){for(var e=0;e<i;++e){s={onsuccess:null,onerror:null};var t=h[e];p.call(s,t[0],t[1],l);var n=a.delete(t[0]);n._hookCtx=s,n.onerror=c,n.onsuccess=e===o?hookedEventSuccessHandler(r):u}},function(e){throw s.onerror&&s.onerror(e),e})}else for(var t=0;t<i;++t){var n=a.delete(h[t]);n.onerror=eventRejectHandler(e),t===o&&(n.onsuccess=wrap(function(){return r()}))}})}function N(e,t,n,r){var i=this;this.db=x,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=Events(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Promise$1(function(e,t){i._resolve=e,i._reject=t}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),rejection(e)})}function R(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function B(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function F(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function M(e,t){return e._cfg.version-t._cfg.version}function $(e,t,r){t.forEach(function(t){var n=r[t];e.forEach(function(e){t in e||(e===N.prototype||e instanceof N?setProp(e,t,{get:function(){return this.table(t)}}):e[t]=new j(t,n))})})}function K(n,r,i,o,s,c){var u=wrap(c?function(e,t,n){return i(c(e),t,n)}:i,s);n.onerror||(n.onerror=eventRejectHandler(s)),n.onsuccess=trycatcher(r?function(){var e=n.result;if(e){var t=function(){e.continue()};r(e,function(e){t=e},o,s)&&u(e.value,e,function(e){t=e}),t()}else o()}:function(){var e=n.result;if(e){var t=function(){e.continue()};u(e.value,e,function(e){t=e}),t()}else o()},s)}function L(e,t){return u.cmp(e,t)}function H(e,t){return u.cmp(e,t)}function U(e,t){return u.cmp(t,e)}function V(e,t){return e<t?-1:e===t?0:1}function q(e,t){return t<e?-1:e===t?0:1}function W(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function z(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],o=t.objectStore(i);h="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var c=o.indexNames[s],u=o.index(c).keyPath,a="string"==typeof u?u:"["+slice(u).join("+")+"]";if(e[i]){var l=e[i].idxByName[a];l&&(l.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(h=!1)}function G(t){x.on("blocked").fire(t),connections.filter(function(e){return e.name===x.name&&e!==x&&!e._vcFired}).map(function(e){return e.on("versionchange").fire(t)})}this.version=function(t){if(d||b)throw new exceptions.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=a.filter(function(e){return e._cfg.version===t})[0];return e||(e=new A(t),a.push(e),a.sort(M),P=!1,e)},extend(A.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,e):e;var t={};a.forEach(function(e){extend(t,e._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),l=x._dbSchema=n,[p,x,N.prototype].forEach(function(e){for(var t in e)e[t]instanceof j&&delete e[t]}),$([p,x,N.prototype,this._cfg.tables],keys(n),n),f=keys(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(s,c){keys(s).forEach(function(e){if(null!==s[e]){var t={},n=(i=s[e],o=[],i.split(",").forEach(function(e){var t=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;o.push(new IndexSpec(t,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),isArray$1(n),/\./.test(e)))}),o),r=n.shift();if(r.multi)throw new exceptions.Schema("Primary key cannot be multi-valued");r.keyPath&&setByKeyPath(t,r.keyPath,r.auto?0:r.keyPath),n.forEach(function(e){if(e.auto)throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new exceptions.Schema("Index must have a name and cannot be an empty string");setByKeyPath(t,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),c[e]=new TableSchema(e,r,n,t)}var i,o})}}),this._allTables=p,this._createTransaction=function(e,t,n,r){return new N(e,t,n,r)},this._whenReady=function(e){return m||PSD.letThrough?e():new Promise$1(function(e,t){if(!b){if(!c)return void t(new exceptions.DatabaseClosed);x.open().catch(nop)}S.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(b||d)return S.then(function(){return y?rejection(y):x});debug&&(E._stackHolder=getErrorWithStack()),m=!(b=!0);var e=t,i=y=null;return Promise$1.race([E,new Promise$1(function(e,n){if(!u)throw new exceptions.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var r=P?u.open(o):u.open(o,Math.round(10*x.verno));if(!r)throw new exceptions.MissingAPI("IndexedDB API not available");r.onerror=eventRejectHandler(n),r.onblocked=wrap(G),r.onupgradeneeded=wrap(function(e){if(i=r.transaction,P&&!x._allowEmptyDB){r.onerror=preventDefault,i.abort(),r.result.close();var t=u.deleteDatabase(o);t.onsuccess=t.onerror=wrap(function(){n(new exceptions.NoSuchDatabase("Database "+o+" doesnt exist"))})}else{i.onerror=eventRejectHandler(n),O((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,i,n)}},n),r.onsuccess=wrap(function(){if(i=null,d=r.result,connections.push(x),P)!function(){if(x.verno=d.version/10,x._dbSchema=l={},0===(f=slice(d.objectStoreNames,0)).length)return;var a=d.transaction(safariMultiStoreFix(f),"readonly");f.forEach(function(e){for(var t=a.objectStore(e),n=t.keyPath,r=n&&"string"==typeof n&&-1!==n.indexOf("."),i=new IndexSpec(n,n||"",!1,!1,!!t.autoIncrement,n&&"string"!=typeof n,r),o=[],s=0;s<t.indexNames.length;++s){var c=t.index(t.indexNames[s]);n=c.keyPath,r=n&&"string"==typeof n&&-1!==n.indexOf(".");var u=new IndexSpec(c.name,n,!!c.unique,!!c.multiEntry,!1,n&&"string"!=typeof n,r);o.push(u)}l[e]=new TableSchema(e,i,o,{})}),$([p],keys(l),l)}();else if(0<d.objectStoreNames.length)try{z(l,d.transaction(safariMultiStoreFix(d.objectStoreNames),_))}catch(e){}d.onversionchange=wrap(function(e){x._vcFired=!0,x.on("versionchange").fire(e)}),k||"__dbnames"===o||dbNamesDB.dbnames.put({name:o}).catch(nop),e()},n)})]).then(function(){return v=[],Promise$1.resolve(Dexie.vip(x.on.ready.fire)).then(function e(){if(0<v.length){var t=v.reduce(promisableChain,nop);return v=[],Promise$1.resolve(Dexie.vip(t)).then(e)}})}).finally(function(){v=null}).then(function(){return b=!1,x}).catch(function(e){try{i&&i.abort()}catch(e){}return b=!1,x.close(),rejection(y=e)}).finally(function(){m=!0,e()})},this.close=function(){var e=connections.indexOf(x);if(0<=e&&connections.splice(e,1),d){try{d.close()}catch(e){}d=null}c=!1,y=new exceptions.DatabaseClosed,b&&n(y),S=new Promise$1(function(e){t=e}),E=new Promise$1(function(e,t){n=t})},this.delete=function(){var r=0<arguments.length;return new Promise$1(function(t,n){if(r)throw new exceptions.InvalidArgument("Arguments not allowed in db.delete()");function e(){x.close();var e=u.deleteDatabase(o);e.onsuccess=wrap(function(){k||dbNamesDB.dbnames.delete(o).catch(nop),t()}),e.onerror=eventRejectHandler(n),e.onblocked=G}b?S.then(e):e()})},this.backendDB=function(){return d},this.isOpen=function(){return null!==d},this.hasBeenClosed=function(){return y&&y instanceof exceptions.DatabaseClosed},this.hasFailed=function(){return null!==y},this.dynamicallyOpened=function(){return P},this.name=o,props(this,{tables:{get:function(){return keys(p).map(function(e){return p[e]})}}}),this.on=Events(this,"populate","blocked","versionchange",{ready:[promisableChain,nop]}),this.on.ready.subscribe=override(this.on.ready.subscribe,function(n){return function(t,e){Dexie.vip(function(){m?(y||Promise$1.resolve().then(t),e&&n(t)):v?(v.push(t),e&&n(t)):(n(t),e||n(function e(){x.on.ready.unsubscribe(t),x.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new exceptions.InvalidArgument("Too few arguments");var i=new Array(r-1);for(;--r;)i[r-1]=arguments[r];n=i.pop();var o=flatten(i);return[e,o,n]}.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(o,e,s){var c=PSD.trans;c&&c.db===x&&-1===o.indexOf("!")||(c=null);var t=-1!==o.indexOf("?");o=o.replace("!","").replace("?","");try{var u=e.map(function(e){var t=e instanceof j?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==o||o==_)o=_;else{if("rw"!=o&&o!=w)throw new exceptions.InvalidArgument("Invalid transaction mode: "+o);o=w}if(c){if(c.mode===_&&o===w){if(!t)throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&u.forEach(function(e){if(c&&-1===c.storeNames.indexOf(e)){if(!t)throw new exceptions.SubTransaction("Table "+e+" not included in parent transaction.");c=null}}),t&&c&&!c.active&&(c=null)}}catch(n){return c?c._promise(null,function(e,t){t(n)}):rejection(n)}return c?c._promise(o,n,"lock"):PSD.trans?usePSD(PSD.transless,function(){return x._whenReady(n)}):x._whenReady(n);function n(){return Promise$1.resolve().then(function(){var t,e=PSD.transless||PSD,n=x._createTransaction(o,u,l,c),r={trans:n,transless:e};c?n.idbtrans=c.idbtrans:n.create(),s.constructor===AsyncFunction&&incrementExpectedAwaits();var i=Promise$1.follow(function(){if(t=s.call(n,n))if(t.constructor===NativePromise){var e=decrementExpectedAwaits.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=awaitIterator(t))},r);return(t&&"function"==typeof t.then?Promise$1.resolve(t).then(function(e){return n.active?e:rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):i.then(function(){return t})).then(function(e){return c&&n._resolve(),n._completion.then(function(){return e})}).catch(function(e){return n._reject(e),rejection(e)})})}},this.table=function(e){if(!hasOwn(p,e))throw new exceptions.InvalidTable("Table "+e+" does not exist");return p[e]},props(j.prototype,{_trans:function(e,t,n){var r=this._tx||PSD.trans;return r&&r.db===x?r===PSD.trans?r._promise(e,t,n):newScope(function(){return r._promise(e,t,n)},{trans:r,transless:PSD.transless||PSD}):function e(t,n,r){if(m||PSD.letThrough){var i=x._createTransaction(t,n,l);try{i.create()}catch(e){return rejection(e)}return i._promise(t,function(e,t){return newScope(function(){return PSD.trans=i,r(e,t,i)})}).then(function(e){return i._completion.then(function(){return e})})}if(!b){if(!c)return rejection(new exceptions.DatabaseClosed);x.open().catch(nop)}return S.then(function(){return e(t,n,r)})}(e,[this.name],t)},_idbstore:function(e,r,t){var i=this.name;return this._trans(e,function(e,t,n){if(-1===n.storeNames.indexOf(i))throw new exceptions.NotFound("Table"+i+" not part of transaction");return r(e,t,n.idbtrans.objectStore(i),n)},t)},get:function(i,e){if(i&&i.constructor===Object)return this.where(i).first(e);var o=this;return this._idbstore(_,function(e,t,n){var r=n.get(i);r.onerror=eventRejectHandler(t),r.onsuccess=wrap(function(){e(o.hook.reading.fire(r.result))},t)}).then(e)},where:function(n){if("string"==typeof n)return new R(this,n);if(isArray$1(n))return new R(this,"["+n.join("+")+"]");var r=keys(n);if(1===r.length)return this.where(r[0]).equals(n[r[0]]);var e=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&r.every(function(e){return 0<=t.keyPath.indexOf(e)})&&t.keyPath.every(function(e){return 0<=r.indexOf(e)})})[0];if(e&&maxKey!==maxString)return this.where(e.name).equals(e.keyPath.map(function(e){return n[e]}));e||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+r.join("+")+"]");var i=this.schema.idxByName,t=r.reduce(function(e,t){return[e[0]||i[t],e[0]||!i[t]?W(e[1],function(e){return""+getByKeyPath(e,t)==""+n[t]}):e[1]]},[null,null]),o=t[0];return o?this.where(o.name).equals(n[o.keyPath]).filter(t[1]):e?this.filter(t[1]):this.where(r).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new B(new R(this,isArray$1(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new B(new R(this))},mapToClass:function(r,e){this.schema.mappedClass=r;var t=Object.create(r.prototype);e&&applyStructure(t,e),this.schema.instanceTemplate=t;var n=function(e){if(!e)return e;var t=Object.create(r.prototype);for(var n in e)if(hasOwn(e,n))try{t[n]=e[n]}catch(e){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),r},defineClass:function(e){return this.mapToClass(Dexie.defineClass(e),e)},bulkDelete:function(i){return this.hook.deleting.fire===nop?this._idbstore(w,function(e,t,n,r){e(I(n,r,i,!1,nop))}):this.where(":id").anyOf(i).delete().then(function(){})},bulkPut:function(p,d){var y=this;return this._idbstore(w,function(t,n,r){if(!r.keyPath&&!y.schema.primKey.auto&&!d)throw new exceptions.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(r.keyPath&&d)throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==p.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");if(0===p.length)return t();var e,i,o=function(e){0===s.length?t(e):n(new BulkError(y.name+".bulkPut(): "+s.length+" of "+c+" operations failed",s))},s=[],c=p.length,u=y;if(y.hook.creating.fire===nop&&y.hook.updating.fire===nop){i=C(s);for(var a=0,l=p.length;a<l;++a)(e=d?r.put(p[a],d[a]):r.put(p[a])).onerror=i;e.onerror=C(s,o),e.onsuccess=eventSuccessHandler(o)}else{var h=d||r.keyPath&&p.map(function(e){return getByKeyPath(e,r.keyPath)}),f=h&&arrayToObject(h,function(e,t){return null!=e&&[e,p[t]]});(h?u.where(":id").anyOf(h.filter(function(e){return null!=e})).modify(function(){this.value=f[this.primKey],f[this.primKey]=null}).catch(ModifyError,function(e){s=e.failures}).then(function(){for(var e=[],t=d&&[],n=h.length-1;0<=n;--n){var r=h[n];(null==r||f[r])&&(e.push(p[n]),d&&t.push(r),null!=r&&(f[r]=null))}return e.reverse(),d&&t.reverse(),u.bulkAdd(e,t)}).then(function(e){var t=h[h.length-1];return null!=t?t:e}):u.bulkAdd(p)).then(o).catch(BulkError,function(e){s=s.concat(e.failures),o()}).catch(n)}},"locked")},bulkAdd:function(d,y){var b=this,v=this.hook.creating.fire;return this._idbstore(w,function(t,n,s,c){if(!s.keyPath&&!b.schema.primKey.auto&&!y)throw new exceptions.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&y)throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(y&&y.length!==d.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");if(0===d.length)return t();function e(e){0===r.length?t(e):n(new BulkError(b.name+".bulkAdd(): "+r.length+" of "+i+" operations failed",r))}var u,a,l,r=[],i=d.length;if(v!==nop){var h,f=s.keyPath;a=C(r,null,!0),l=hookedEventSuccessHandler(null),tryCatch$1(function(){for(var e=0,t=d.length;e<t;++e){h={onerror:null,onsuccess:null};var n=y&&y[e],r=d[e],i=y?n:f?getByKeyPath(r,f):void 0,o=v.call(h,i,r,c);null==i&&null!=o&&(f?setByKeyPath(r=deepClone(r),f,o):n=o),(u=null!=n?s.add(r,n):s.add(r))._hookCtx=h,e<t-1&&(u.onerror=a,h.onsuccess&&(u.onsuccess=l))}},function(e){throw h.onerror&&h.onerror(e),e}),u.onerror=C(r,e,!0),u.onsuccess=hookedEventSuccessHandler(e)}else{a=C(r);for(var o=0,p=d.length;o<p;++o)(u=y?s.add(d[o],y[o]):s.add(d[o])).onerror=a;u.onerror=C(r,e),u.onsuccess=eventSuccessHandler(e)}})},add:function(u,a){var l=this.hook.creating.fire;return this._idbstore(w,function(n,e,r,t){var i={onsuccess:null,onerror:null};if(l!==nop){var o=null!=a?a:r.keyPath?getByKeyPath(u,r.keyPath):void 0,s=l.call(i,o,u,t);null==o&&null!=s&&(r.keyPath?setByKeyPath(u,r.keyPath,s):a=s)}try{var c=null!=a?r.add(u,a):r.add(u);c._hookCtx=i,c.onerror=hookedEventRejectHandler(e),c.onsuccess=hookedEventSuccessHandler(function(e){var t=r.keyPath;t&&setByKeyPath(u,t,e),n(e)})}catch(e){throw i.onerror&&i.onerror(e),e}})},put:function(o,t){var n=this,e=this.hook.creating.fire,r=this.hook.updating.fire;if(e!==nop||r!==nop){var i=this.schema.primKey.keyPath,s=void 0!==t?t:i&&getByKeyPath(o,i);return null==s?this.add(o):(o=deepClone(o),this._trans(w,function(){return n.where(":id").equals(s).modify(function(){this.value=o}).then(function(e){return 0===e?n.add(o,t):s})},"locked"))}return this._idbstore(w,function(n,e,r){var i=void 0!==t?r.put(o,t):r.put(o);i.onerror=eventRejectHandler(e),i.onsuccess=wrap(function(e){var t=r.keyPath;t&&setByKeyPath(o,t,e.target.result),n(i.result)})})},delete:function(i){return this.hook.deleting.subscribers.length?this.where(":id").equals(i).delete():this._idbstore(w,function(e,t,n){var r=n.delete(i);r.onerror=eventRejectHandler(t),r.onsuccess=wrap(function(){e(r.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(w,function(e,t,n){var r=n.clear();r.onerror=eventRejectHandler(t),r.onsuccess=wrap(function(){e(r.result)})})},update:function(t,n){if("object"!=typeof n||isArray$1(n))throw new exceptions.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||isArray$1(t))return this.where(":id").equals(t).modify(n);keys(n).forEach(function(e){setByKeyPath(t,e,n[e])});var e=getByKeyPath(t,this.schema.primKey.keyPath);return void 0===e?rejection(new exceptions.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n)}}),props(N.prototype,{_lock:function(){return assert(!PSD.global),++this._reculock,1!==this._reculock||PSD.global||(PSD.lockOwnerFor=this),this},_unlock:function(){if(assert(!PSD.global),0==--this._reculock)for(PSD.global||(PSD.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{usePSD(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&PSD.lockOwnerFor!==this},create:function(t){var n=this;if(!this.mode)return this;if(assert(!this.idbtrans),!t&&!d)switch(y&&y.name){case"DatabaseClosedError":throw new exceptions.DatabaseClosed(y);case"MissingAPIError":throw new exceptions.MissingAPI(y.message,y);default:throw new exceptions.OpenFailed(y)}if(!this.active)throw new exceptions.TransactionInactive;return assert(null===this._completion._state),(t=this.idbtrans=t||d.transaction(safariMultiStoreFix(this.storeNames),this.mode)).onerror=wrap(function(e){preventDefault(e),n._reject(t.error)}),t.onabort=wrap(function(e){preventDefault(e),n.active&&n._reject(new exceptions.Abort(t.error)),n.active=!1,n.on("abort").fire(e)}),t.oncomplete=wrap(function(){n.active=!1,n._resolve()}),this},_promise:function(n,r,i){var o=this;if(n===w&&this.mode!==w)return rejection(new exceptions.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions.TransactionInactive);if(this._locked())return new Promise$1(function(e,t){o._blockedFuncs.push([function(){o._promise(n,r,i).then(e,t)},PSD])});if(i)return newScope(function(){var e=new Promise$1(function(e,t){o._lock();var n=r(e,t,o);n&&n.then&&n.then(e,t)});return e.finally(function(){return o._unlock()}),e._lib=!0,e});var e=new Promise$1(function(e,t){var n=r(e,t,o);n&&n.then&&n.then(e,t)});return e._lib=!0,e},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var r=this._root();if(e=Promise$1.resolve(e),r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return e});else{r._waitingFor=e,r._waitingQueue=[];var t=r.idbtrans.objectStore(r.storeNames[0]);!function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}()}var i=r._waitingFor;return new Promise$1(function(t,n){e.then(function(e){return r._waitingQueue.push(wrap(t.bind(null,e)))},function(e){return r._waitingQueue.push(wrap(n.bind(null,e)))}).finally(function(){r._waitingFor===i&&(r._waitingFor=null)})})},abort:function(){this.active&&this._reject(new exceptions.Abort),this.active=!1},tables:{get:deprecated("Transaction.tables",function(){return p})},table:function(e){return new j(e,x.table(e).schema,this)}}),props(R.prototype,function(){function v(e,t,n){var r=e instanceof R?new B(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function f(e){return new B(e,function(){return g.only("")}).limit(0)}function m(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),c=-1,u=0;u<s;++u){var a=t[u];if(a!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):0<=c?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[u],a)<0&&(c=u)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function t(e,u,n,r){var i,a,l,h,f,p,d,y=n.length;if(!n.every(function(e){return"string"==typeof e}))return v(e,STRING_EXPECTED);function t(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},a="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},l="next"===e?V:q;var t=n.map(function(e){return{lower:a(e),upper:i(e)}}).sort(function(e,t){return l(e.lower,t.lower)});h=t.map(function(e){return e.upper}),f=t.map(function(e){return e.lower}),d="next"===(p=e)?"":r}t("next");var o=new B(e,function(){return g.bound(h[0],f[y-1]+r)});o._ondirectionchange=function(e){t(e)};var b=0;return o._addAlgorithm(function(e,t,n){var r=e.key;if("string"!=typeof r)return!1;var i=a(r);if(u(i,f,b))return!0;for(var o=null,s=b;s<y;++s){var c=m(r,i,h[s],f[s],l,p);null===c&&null===o?b=s+1:(null===o||0<l(o,c))&&(o=c)}return t(null!==o?function(){e.continue(o+d)}:n),!1}),o}return{between:function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<L(e,t)||0===L(e,t)&&(n||r)&&(!n||!r)?f(this):new B(this,function(){return g.bound(e,t,!n,!r)})}catch(e){return v(this,INVALID_KEY_ARGUMENT)}},equals:function(e){return new B(this,function(){return g.only(e)})},above:function(e){return new B(this,function(){return g.lowerBound(e,!0)})},aboveOrEqual:function(e){return new B(this,function(){return g.lowerBound(e)})},below:function(e){return new B(this,function(){return g.upperBound(e,!0)})},belowOrEqual:function(e){return new B(this,function(){return g.upperBound(e)})},startsWith:function(e){return"string"!=typeof e?v(this,STRING_EXPECTED):this.between(e,e+maxString,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):t(this,function(e,t){return 0===e.indexOf(t[0])},[e],maxString)},equalsIgnoreCase:function(e){return t(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===e.length?f(this):t(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return 0===e.length?f(this):t(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},e,maxString)},anyOf:function(){var i=getArrayOf.apply(NO_CHAR_ARRAY,arguments),o=H;try{i.sort(o)}catch(e){return v(this,INVALID_KEY_ARGUMENT)}if(0===i.length)return f(this);var e=new B(this,function(){return g.bound(i[0],i[i.length-1])});e._ondirectionchange=function(e){o="next"===e?H:U,i.sort(o)};var s=0;return e._addAlgorithm(function(e,t,n){for(var r=e.key;0<o(r,i[s]);)if(++s===i.length)return t(n),!1;return 0===o(r,i[s])||(t(function(){e.continue(i[s])}),!1)}),e},notEqual:function(e){return this.inAnyRange([[minKey,e],[e,maxKey]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(0===e.length)return new B(this);try{e.sort(H)}catch(e){return v(this,INVALID_KEY_ARGUMENT)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[minKey,t]]},null);return t.push([e[e.length-1],maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,t){if(0===e.length)return f(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&H(e[0],e[1])<=0}))return v(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions.InvalidArgument);var n=!t||!1!==t.includeLowers,r=t&&!0===t.includeUppers;var o,s=H;function i(e,t){return s(e[0],t[0])}try{(o=e.reduce(function(e,t){for(var n=0,r=e.length;n<r;++n){var i=e[n];if(L(t[0],i[1])<0&&0<L(t[1],i[0])){i[0]=(c=i[0],u=t[0],L(c,u)<0?c:u),i[1]=(o=i[1],s=t[1],0<L(o,s)?o:s);break}}var o,s,c,u;return n===r&&e.push(t),e},[])).sort(i)}catch(e){return v(this,INVALID_KEY_ARGUMENT)}var c=0,u=r?function(e){return 0<H(e,o[c][1])}:function(e){return 0<=H(e,o[c][1])},a=n?function(e){return 0<U(e,o[c][0])}:function(e){return 0<=U(e,o[c][0])};var l=u,h=new B(this,function(){return g.bound(o[0][0],o[o.length-1][1],!n,!r)});return h._ondirectionchange=function(e){"next"===e?(l=u,s=H):(l=a,s=U),o.sort(i)},h._addAlgorithm(function(e,t,n){for(var r,i=e.key;l(i);)if(++c===o.length)return t(n),!1;return!u(r=i)&&!a(r)||(0===L(i,o[c][1])||0===L(i,o[c][0])||t(function(){s===H?e.continue(o[c][0]):e.continue(o[c][1])}),!1)}),h},startsWithAnyOf:function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?f(this):this.inAnyRange(e.map(function(e){return[e,e+maxString]})):v(this,"startsWithAnyOf() only works with strings")}}}),props(B.prototype,function(){function o(e,t){e.filter=W(e.filter,t)}function n(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return W(r(),t())}:t,e.justLimit=n&&!r}function u(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new exceptions.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function l(e,t){var n=u(e,t);return e.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(e.range||null,e.dir+e.unique):n.openCursor(e.range||null,e.dir+e.unique)}function a(n,c,r,u,i){var a=n.replayFilter?W(n.filter,n.replayFilter()):n.filter;n.or?function(){var o={},e=0;function s(){2==++e&&r()}function t(e,t,n){if(!a||a(t,n,s,u)){var r=t.primaryKey,i=""+r;"[object ArrayBuffer]"===i&&(i=""+new Uint8Array(r)),hasOwn(o,i)||(o[i]=!0,c(e,t,n))}}n.or._iterate(t,s,u,i),K(l(n,i),n.algorithm,t,s,u,!n.keysOnly&&n.valueMapper)}():K(l(n,i),W(n.algorithm,a),c,r,u,!n.keysOnly&&n.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,rejection.bind(null,n.error)):n.table._idbstore(_,e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,rejection.bind(null,t.error)):t.table._idbstore(w,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=W(t.algorithm,e)},_iterate:function(e,t,n,r){return a(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&extend(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(r){var i=this._ctx;return this._read(function(e,t,n){a(i,r,e,t,n)})},count:function(e){var o=this._ctx;if(F(o,!0))return this._read(function(t,e,n){var r=u(o,n),i=o.range?r.count(o.range):r.count();i.onerror=eventRejectHandler(e),i.onsuccess=function(e){t(Math.min(e.target.result,o.limit))}},e);var r=0;return this._read(function(e,t,n){a(o,function(){return++r,!1},function(){e(r)},t,n)},e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function c(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:r<n?s:0}return this.toArray(function(e){return e.sort(c)}).then(t)},toArray:function(e){var c=this._ctx;return this._read(function(t,n,e){if(h&&"next"===c.dir&&F(c,!0)&&0<c.limit){var r=c.table.hook.reading.fire,i=u(c,e),o=c.limit<1/0?i.getAll(c.range,c.limit):i.getAll(c.range);o.onerror=eventRejectHandler(n),o.onsuccess=eventSuccessHandler(r===mirror?t:function(e){try{t(e.map(r))}catch(e){n(e)}})}else{var s=[];a(c,function(e){s.push(e)},function(){t(s)},n,e)}},e)},offset:function(t){var e=this._ctx;return t<=0||(e.offset+=t,F(e)?n(e,function(){var n=t;return function(e,t){return 0===n||(1===n?--n:t(function(){e.advance(n),n=0}),!1)}}):n(e,function(){var e=t;return function(){return--e<0}})),this},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),n(this._ctx,function(){var r=e;return function(e,t,n){return--r<=0&&t(n),0<=r}},!0),this},until:function(r,i){return o(this._ctx,function(e,t,n){return!r(e.value)||(t(n),i)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){var e,n;return o(this._ctx,function(e){return t(e.value)}),e=this._ctx,n=t,e.isMatch=W(e.isMatch,n),this},and:function(e){return this.filter(e)},or:function(e){return new R(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){n(t.key,t)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,t){n(t.primaryKey,t)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var o=this._ctx;if(h&&"next"===o.dir&&F(o,!0)&&0<o.limit)return this._read(function(e,t,n){var r=u(o,n),i=o.limit<1/0?r.getAllKeys(o.range,o.limit):r.getAllKeys(o.range);i.onerror=eventRejectHandler(t),i.onsuccess=eventSuccessHandler(e)}).then(e);o.keysOnly=!o.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return o(this._ctx,function(e){var t=e.primaryKey.toString(),n=hasOwn(r,t);return r[t]=!0,!n}),this},modify:function(b){var v=this,e=this._ctx.table.hook,m=e.updating.fire,g=e.deleting.fire;return this._write(function(e,t,n,i){var o;if("function"==typeof b)o=m===nop&&g===nop?b:function(t){var e=deepClone(t);if(!1===b.call(this,t,this))return!1;if(hasOwn(this,"value")){var n=getObjectDiff(e,this.value),r=m.call(this,n,this.primKey,e,i);r&&(t=this.value,keys(r).forEach(function(e){setByKeyPath(t,e,r[e])}))}else g.call(this,this.primKey,t,i)};else if(m===nop){var s=keys(b),c=s.length;o=function(e){for(var t=!1,n=0;n<c;++n){var r=s[n],i=b[r];getByKeyPath(e,r)!==i&&(setByKeyPath(e,r,i),t=!0)}return t}}else{var u=b;b=shallowClone(u),o=function(n){var r=!1,e=m.call(this,b,this.primKey,deepClone(n),i);return e&&extend(b,e),keys(b).forEach(function(e){var t=b[e];getByKeyPath(n,e)!==t&&(setByKeyPath(n,e,t),r=!0)}),e&&(b=shallowClone(u)),r}}var a=0,l=0,r=!1,h=[],f=[],p=null;function d(e){return e&&(h.push(e),f.push(p)),t(new ModifyError("Error modifying one or more objects",h,l,f))}function y(){r&&l+h.length===a&&(0<h.length?d():e(l))}v.clone().raw()._iterate(function(e,t){p=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return h.push(e),f.push(n.primKey),y(),!0}if(!1!==o.call(n,e,n)){var i=!hasOwn(n,"value");++a,tryCatch$1(function(){var e=i?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=hookedEventRejectHandler(r),e.onsuccess=hookedEventSuccessHandler(function(){++l,y()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){r=!0,y()},d,n)})},delete:function(){var u=this,a=this._ctx,s=a.range,l=a.table.hook.deleting.fire,h=l!==nop;if(!h&&F(a)&&(a.isPrimKey&&!hangsOnDeleteLargeKeyRange||!s))return this._write(function(n,r,i){var o=eventRejectHandler(r),e=s?i.count(s):i.count();e.onerror=o,e.onsuccess=function(){var t=e.result;tryCatch$1(function(){var e=s?i.delete(s):i.clear();e.onerror=o,e.onsuccess=function(){return n(t)}},function(e){return r(e)})}});var f=h?2e3:1e4;return this._write(function(e,t,n,r){var i=0,o=u.clone({keysOnly:!a.isMatch&&!h}).distinct().limit(f).raw(),s=[],c=function(){return o.each(h?function(e,t){s.push([t.primaryKey,t.value])}:function(e,t){s.push(t.primaryKey)}).then(function(){return h?s.sort(function(e,t){return H(e[0],t[0])}):s.sort(H),I(n,r,s,h,l)}).then(function(){var e=s.length;return i+=e,s=[],e<f?i:c()})};e(c())})}}}),extend(this,{Collection:B,Table:j,Transaction:N,Version:A,WhereClause:R}),x.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '"+x.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+x.name+"'. Closing db now to resume the delete request."),x.close()}),x.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+x.name+"') was blocked"):console.warn("Upgrade '"+x.name+"' blocked by other connection holding version "+e.oldVersion/10)}),s.forEach(function(e){e(x)})}function parseType(e){if("function"==typeof e)return new e;if(isArray$1(e))return[parseType(e[0])];if(e&&"object"==typeof e){var t={};return applyStructure(t,e),t}return e}function applyStructure(n,r){return keys(r).forEach(function(e){var t=parseType(r[e]);n[e]=t}),n}function hookedEventSuccessHandler(o){return wrap(function(e){var t=e.target,n=t._hookCtx,r=n.value||t.result,i=n&&n.onsuccess;i&&i(r),o&&o(r)},o)}function eventRejectHandler(t){return wrap(function(e){return preventDefault(e),t(e.target.error),!1})}function eventSuccessHandler(t){return wrap(function(e){t(e.target.result)})}function hookedEventRejectHandler(o){return wrap(function(e){var t=e.target,n=t.error,r=t._hookCtx,i=r&&r.onerror;return i&&i(n),preventDefault(e),o(n),!1})}function preventDefault(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function awaitIterator(t){var e=function(e){return t.next(e)},i=n(e),o=n(function(e){return t.throw(e)});function n(r){return function(e){var t=r(e),n=t.value;return t.done?n:n&&"function"==typeof n.then?n.then(i,o):isArray$1(n)?Promise$1.all(n).then(i,o):i(n)}}return n(e)()}function IndexSpec(e,t,n,r,i,o,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var c="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+c}function TableSchema(e,t,n,r){this.name=e,this.primKey=t||new IndexSpec,this.indexes=n||[new IndexSpec],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=arrayToObject(n,function(e){return[e.name,e]})}function safariMultiStoreFix(e){return 1===e.length?e[0]:e}function getNativeGetDatabaseNamesFn(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}setDebug(debug,dexieStackFrameFilter),props(Dexie,fullNameExceptions),props(Dexie,{delete:function(e){var t=new Dexie(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new Dexie(e).open().then(function(e){return e.close(),!0}).catch(Dexie.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var r=getNativeGetDatabaseNamesFn(Dexie.dependencies.indexedDB);return r?new Promise$1(function(t,e){var n=r();n.onsuccess=function(e){t(slice(e.target.result,0))},n.onerror=eventRejectHandler(e)}).then(e):dbNamesDB.dbnames.toCollection().primaryKeys(e)},defineClass:function(){return function(e){e&&extend(this,e)}},applyStructure:applyStructure,ignoreTransaction:function(e){return PSD.trans?usePSD(PSD.transless,e):e()},vip:function(e){return newScope(function(){return PSD.letThrough=!0,e()})},async:function(t){return function(){try{var e=awaitIterator(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Promise$1.resolve(e)}catch(e){return rejection(e)}}},spawn:function(e,t,n){try{var r=awaitIterator(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Promise$1.resolve(r)}catch(e){return rejection(e)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(e,t){var n=Promise$1.resolve("function"==typeof e?Dexie.ignoreTransaction(e):e).timeout(t||6e4);return PSD.trans?PSD.trans.waitFor(n):n},Promise:Promise$1,debug:{get:function(){return debug},set:function(e){setDebug(e,"dexie"===e?function(){return!0}:dexieStackFrameFilter)}},derive:derive,extend:extend,props:props,override:override,Events:Events,getByKeyPath:getByKeyPath,setByKeyPath:setByKeyPath,delByKeyPath:delByKeyPath,shallowClone:shallowClone,deepClone:deepClone,getObjectDiff:getObjectDiff,asap:asap$1,maxKey:maxKey,minKey:minKey,addons:[],connections:connections,MultiModifyError:exceptions.Modify,errnames:errnames,IndexSpec:IndexSpec,TableSchema:TableSchema,dependencies:{indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange},semVer:DEXIE_VERSION,version:DEXIE_VERSION.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:Dexie,Dexie:Dexie}),Promise$1.rejectionMapper=mapError,(dbNamesDB=new Dexie("__dbnames")).version(1).stores({dbnames:"name"}),function(){var e="Dexie.DatabaseNames";try{void 0!==typeof localStorage&&void 0!==_global.document&&(JSON.parse(localStorage.getItem(e)||"[]").forEach(function(e){return dbNamesDB.dbnames.put({name:e}).catch(nop)}),localStorage.removeItem(e))}catch(e){}}();var Dexye=function(e){function t(){e.call(this,"ratesDB"),this.version(1).stores({responses:"++id, base, date, rates, success, timestamp"})}return __extends$1(t,e),t.prototype.getLatestResponce=function(){return this.table("responses").orderBy("id").last()},t.prototype.latestResponce=function(e,t){var n=t||e;return this.table("responses").put(n),n},t.prototype.isCachedDataValid=function(e){return e},t}(Dexie),Dom=function(){function e(e,t){var n=this;this.annyang=e,this.online=t,this.elements=new Map$1,this.convertRequst$=new Subject,this.parseDom(),this.addEventListeners(),this.annyang.activated$.subscribe(function(e){return n.activateListenButton(e)}),this.annyang.convertRequst$.subscribe(function(e){return n.setValues(e)}),this.online.online$.subscribe(function(e){return n.setOnlineStatus(e)})}return e.prototype.parseDom=function(){this.elements.add("listen",document.getElementById("listen")),this.elements.add("currency-from",document.getElementById("currency-from")),this.elements.add("currency-to",document.getElementById("currency-to")),this.elements.add("amount",document.getElementById("amount")),this.elements.add("result",document.getElementById("result")),this.elements.add("online",document.getElementById("online"))},e.prototype.addEventListeners=function(){var e=this;this.elements.get("listen").addEventListener("click",function(){return e.annyang.start()}),this.elements.get("currency-from").addEventListener("change",function(){return e.convertFromDom()}),this.elements.get("currency-to").addEventListener("change",function(){return e.convertFromDom()}),this.elements.get("amount").addEventListener("keyup",function(){return e.convertFromDom()})},e.prototype.convertFromDom=function(){this.elements.get("amount").value&&this.elements.get("currency-from").value&&this.elements.get("currency-to").value&&this.convertRequst$.next({amount:parseInt(this.elements.get("amount").value),currencyFrom:this.elements.get("currency-from").value,currencyTo:this.elements.get("currency-to").value})},e.prototype.setValues=function(e){this.elements.get("currency-from").value!=e.currencyFrom&&(this.elements.get("currency-from").value=e.currencyFrom),this.elements.get("currency-to").value!=e.currencyTo&&(this.elements.get("currency-to").value=e.currencyTo),this.elements.get("amount").value!=e.amount.toFixed(2)&&(this.elements.get("amount").value=e.amount.toFixed(2))},e.prototype.activateListenButton=function(e){e?this.elements.get("listen").classList.add("bg-success"):this.elements.get("listen").classList.remove("bg-success")},e.prototype.setOnlineStatus=function(e){"online"!=e?this.elements.get("online").classList.add("bg-danger"):this.elements.get("online").classList.remove("bg-danger"),this.elements.get("online").innerHTML=e.toUpperCase()},e}(),Map$1=function(){function e(){this.items={}}return e.prototype.add=function(e,t){this.items[e]=t},e.prototype.has=function(e){return e in this.items},e.prototype.get=function(e){return this.items[e]},e}(),Online=function(){function e(){var e=this;this.online$=new Subject,window.addEventListener("online",function(){return e.updateOnlineStatus()}),window.addEventListener("offline",function(){return e.updateOnlineStatus()}),this.updateOnlineStatus()}return e.prototype.updateOnlineStatus=function(){this.online$.next(navigator.onLine?"online":"offline")},e}(),ServiceWorkerController=function(){var t=this;this.serviceWorkers=["/data-synchroniser.service.js"],"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){e.length||t.serviceWorkers.forEach(function(e){return navigator.serviceWorker.register(e)})})},AppClass=function(){this.serviceWorkerController=new ServiceWorkerController,this.dexye=new Dexye,this.dataCollector=new DataCollector(this.dexye),this.annyang=new Annyang,this.online=new Online,this.dom=new Dom(this.annyang,this.online),this.converter=new Converter(this.dom,this.annyang,this.dataCollector)};window.addEventListener("load",function(){return new AppClass});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9jb25maWcuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2hvc3RSZXBvcnRFcnJvci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc0FycmF5LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc09iamVjdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvZXJyb3JPYmplY3QuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RyeUNhdGNoLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YnNjcmliZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9ub29wLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9waXBlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0U3Vic2NyaXB0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29wZXJhdG9ycy9yZWZDb3VudC5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL2dyb3VwQnkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9CZWhhdmlvclN1YmplY3QuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvQWN0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL0FzeW5jQWN0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL1F1ZXVlQWN0aW9uLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL1F1ZXVlU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL3F1ZXVlLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9lbXB0eS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNTY2hlZHVsZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3N1YnNjcmliZVRvQXJyYXkuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vYnNlcnZhYmxlL2Zyb21BcnJheS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvc2NhbGFyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9vZi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvdGhyb3dFcnJvci5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL05vdGlmaWNhdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29wZXJhdG9ycy9vYnNlcnZlT24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9SZXBsYXlTdWJqZWN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvQXN5bmNTdWJqZWN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9JbW1lZGlhdGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvQXNhcEFjdGlvbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3NjaGVkdWxlci9Bc2FwU2NoZWR1bGVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc2NoZWR1bGVyL2FzYXAuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvYXN5bmMuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvQW5pbWF0aW9uRnJhbWVBY3Rpb24uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvQW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvYW5pbWF0aW9uRnJhbWUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvVmlydHVhbFRpbWVTY2hlZHVsZXIuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9FbXB0eUVycm9yLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9UaW1lb3V0RXJyb3IuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvbWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT3V0ZXJTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvSW5uZXJTdWJzY3JpYmVyLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9zdWJzY3JpYmVUb1Byb21pc2UuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zeW1ib2wvaXRlcmF0b3IuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3N1YnNjcmliZVRvSXRlcmFibGUuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3N1YnNjcmliZVRvT2JzZXJ2YWJsZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheUxpa2UuanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzUHJvbWlzZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvc3Vic2NyaWJlVG8uanMiLCIuLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3N1YnNjcmliZVRvUmVzdWx0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0LmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb3BlcmF0b3JzL21lcmdlTWFwLmpzIiwiLi4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvb2JzZXJ2YWJsZS9mb3JrSm9pbi5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvcmFjZS5qcyIsIi4uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL29ic2VydmFibGUvemlwLmpzIiwiLi4vc3JjL2FubnlhbmcudHMiLCIuLi9zcmMvY29udmVydGVyLnRzIiwiLi4vc3JjL2RhdGEtY29sbGVjdG9yLnRzIiwiLi4vbm9kZV9tb2R1bGVzL2RleGllL2Rpc3QvZGV4aWUuZXMuanMiLCIuLi9zcmMvZGV4eWUudHMiLCIuLi9zcmMvZG9tLnRzIiwiLi4vc3JjL29ubGluZS50cyIsIi4uL3NyYy9zZXJ2aWNlLXdvcmtlci1jb250cm9sbGVyLnRzIiwiLi4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IHlbb3BbMF0gJiAyID8gXCJyZXR1cm5cIiA6IG9wWzBdID8gXCJ0aHJvd1wiIDogXCJuZXh0XCJdKSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFswLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyAgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKG9bbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH07IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl07XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG4vKipcbiAqIFRoZSBnbG9iYWwgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIFJ4SlMsIHVzZWQgdG8gY29uZmlndXJlIHRoaW5nc1xuICogbGlrZSB3aGF0IFByb21pc2UgY29udHJ1Y3RvciBzaG91bGQgdXNlZCB0byBjcmVhdGUgUHJvbWlzZXNcbiAqL1xuZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgLyoqXG4gICAgICogVGhlIHByb21pc2UgY29uc3RydWN0b3IgdXNlZCBieSBkZWZhdWx0IGZvciBtZXRob2RzIHN1Y2ggYXNcbiAgICAgKiB7QGxpbmsgdG9Qcm9taXNlfSBhbmQge0BsaW5rIGZvckVhY2h9XG4gICAgICovXG4gICAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIHR1cm5zIG9uIHN5bmNocm9ub3VzIGVycm9yIHJldGhyb3dpbmcsIHdoaWNoIGlzIGEgZGVwcmVjYXRlZCBiZWhhdmlvclxuICAgICAqIGluIHY2IGFuZCBoaWdoZXIuIFRoaXMgYmVoYXZpb3IgZW5hYmxlcyBiYWQgcGF0dGVybnMgbGlrZSB3cmFwcGluZyBhIHN1YnNjcmliZVxuICAgICAqIGNhbGwgaW4gYSB0cnkvY2F0Y2ggYmxvY2suIEl0IGFsc28gZW5hYmxlcyBwcm9kdWNlciBpbnRlcmZlcmVuY2UsIGEgbmFzdHkgYnVnXG4gICAgICogd2hlcmUgYSBtdWx0aWNhc3QgY2FuIGJlIGJyb2tlbiBmb3IgYWxsIG9ic2VydmVycyBieSBhIGRvd25zdHJlYW0gY29uc3VtZXIgd2l0aFxuICAgICAqIGFuIHVuaGFuZGxlZCBlcnJvci4gRE8gTk9UIFVTRSBUSElTIEZMQUcgVU5MRVNTIElUJ1MgTkVFREVEIFRPIEJZIFRJTUVcbiAgICAgKiBGT1IgTUlHUkFUSU9OIFJFQVNPTlMuXG4gICAgICovXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKipcbiAqIFRocm93cyBhbiBlcnJvciBvbiBhbm90aGVyIGpvYiBzbyB0aGF0IGl0J3MgcGlja2VkIHVwIGJ5IHRoZSBydW50aW1lJ3NcbiAqIHVuY2F1Z2h0IGVycm9yIGhhbmRsaW5nIG1lY2hhbmlzbS5cbiAqIEBwYXJhbSBlcnIgdGhlIGVycm9yIHRvIHRocm93XG4gKi9cbi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBob3N0UmVwb3J0RXJyb3IoZXJyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob3N0UmVwb3J0RXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xuZXhwb3J0IHZhciBlbXB0eSA9IHtcbiAgICBjbG9zZWQ6IHRydWUsXG4gICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJzsgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FycmF5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcbiAgICByZXR1cm4geCAhPSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcFxuIiwiLy8gdHlwZW9mIGFueSBzbyB0aGF0IGl0IHdlIGRvbid0IGhhdmUgdG8gY2FzdCB3aGVuIGNvbXBhcmluZyBhIHJlc3VsdCB0byB0aGUgZXJyb3Igb2JqZWN0XG4vKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIGVycm9yT2JqZWN0ID0geyBlOiB7fSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JPYmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9lcnJvck9iamVjdCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBlcnJvck9iamVjdCB9IGZyb20gJy4vZXJyb3JPYmplY3QnO1xudmFyIHRyeUNhdGNoVGFyZ2V0O1xuZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHJ5Q2F0Y2hUYXJnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JPYmplY3QuZSA9IGU7XG4gICAgICAgIHJldHVybiBlcnJvck9iamVjdDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4pIHtcbiAgICB0cnlDYXRjaFRhcmdldCA9IGZuO1xuICAgIHJldHVybiB0cnlDYXRjaGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJ5Q2F0Y2guanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG4vKipcbiAqIEFuIGVycm9yIHRocm93biB3aGVuIG9uZSBvciBtb3JlIGVycm9ycyBoYXZlIG9jY3VycmVkIGR1cmluZyB0aGVcbiAqIGB1bnN1YnNjcmliZWAgb2YgYSB7QGxpbmsgU3Vic2NyaXB0aW9ufS5cbiAqL1xudmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVW5zdWJzY3JpcHRpb25FcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlcnJvcnMgP1xuICAgICAgICAgICAgZXJyb3JzLmxlbmd0aCArIFwiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuICBcIiArIGVycm9ycy5tYXAoZnVuY3Rpb24gKGVyciwgaSkgeyByZXR1cm4gaSArIDEgKyBcIikgXCIgKyBlcnIudG9TdHJpbmcoKTsgfSkuam9pbignXFxuICAnKSA6ICcnKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgICAgIF90aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgVW5zdWJzY3JpcHRpb25FcnJvci5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBVbnN1YnNjcmlwdGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgVW5zdWJzY3JpcHRpb25FcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfaXNBcnJheSxfdXRpbF9pc09iamVjdCxfdXRpbF9pc0Z1bmN0aW9uLF91dGlsX3RyeUNhdGNoLF91dGlsX2Vycm9yT2JqZWN0LF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsL2lzT2JqZWN0JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyB0cnlDYXRjaCB9IGZyb20gJy4vdXRpbC90cnlDYXRjaCc7XG5pbXBvcnQgeyBlcnJvck9iamVjdCB9IGZyb20gJy4vdXRpbC9lcnJvck9iamVjdCc7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZGlzcG9zYWJsZSByZXNvdXJjZSwgc3VjaCBhcyB0aGUgZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUuIEFcbiAqIFN1YnNjcmlwdGlvbiBoYXMgb25lIGltcG9ydGFudCBtZXRob2QsIGB1bnN1YnNjcmliZWAsIHRoYXQgdGFrZXMgbm8gYXJndW1lbnRcbiAqIGFuZCBqdXN0IGRpc3Bvc2VzIHRoZSByZXNvdXJjZSBoZWxkIGJ5IHRoZSBzdWJzY3JpcHRpb24uXG4gKlxuICogQWRkaXRpb25hbGx5LCBzdWJzY3JpcHRpb25zIG1heSBiZSBncm91cGVkIHRvZ2V0aGVyIHRocm91Z2ggdGhlIGBhZGQoKWBcbiAqIG1ldGhvZCwgd2hpY2ggd2lsbCBhdHRhY2ggYSBjaGlsZCBTdWJzY3JpcHRpb24gdG8gdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uLlxuICogV2hlbiBhIFN1YnNjcmlwdGlvbiBpcyB1bnN1YnNjcmliZWQsIGFsbCBpdHMgY2hpbGRyZW4gKGFuZCBpdHMgZ3JhbmRjaGlsZHJlbilcbiAqIHdpbGwgYmUgdW5zdWJzY3JpYmVkIGFzIHdlbGwuXG4gKlxuICogQGNsYXNzIFN1YnNjcmlwdGlvblxuICovXG52YXIgU3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW3Vuc3Vic2NyaWJlXSBBIGZ1bmN0aW9uIGRlc2NyaWJpbmcgaG93IHRvXG4gICAgICogcGVyZm9ybSB0aGUgZGlzcG9zYWwgb2YgcmVzb3VyY2VzIHdoZW4gdGhlIGB1bnN1YnNjcmliZWAgbWV0aG9kIGlzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoaXMgU3Vic2NyaXB0aW9uIGhhcyBhbHJlYWR5IGJlZW4gdW5zdWJzY3JpYmVkLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSByZXNvdXJjZXMgaGVsZCBieSB0aGUgc3Vic2NyaXB0aW9uLiBNYXksIGZvciBpbnN0YW5jZSwgY2FuY2VsXG4gICAgICogYW4gb25nb2luZyBPYnNlcnZhYmxlIGV4ZWN1dGlvbiBvciBjYW5jZWwgYW55IG90aGVyIHR5cGUgb2Ygd29yayB0aGF0XG4gICAgICogc3RhcnRlZCB3aGVuIHRoZSBTdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGFzRXJyb3JzID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvcnM7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzLCBfdW5zdWJzY3JpYmUgPSBfYS5fdW5zdWJzY3JpYmUsIF9zdWJzY3JpcHRpb25zID0gX2EuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIC8vIG51bGwgb3V0IF9zdWJzY3JpcHRpb25zIGZpcnN0IHNvIGFueSBjaGlsZCBzdWJzY3JpcHRpb25zIHRoYXQgYXR0ZW1wdFxuICAgICAgICAvLyB0byByZW1vdmUgdGhlbXNlbHZlcyBmcm9tIHRoaXMgc3Vic2NyaXB0aW9uIHdpbGwgbm9vcFxuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBsZW4gPSBfcGFyZW50cyA/IF9wYXJlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIC8vIGlmIHRoaXMuX3BhcmVudCBpcyBudWxsLCB0aGVuIHNvIGlzIHRoaXMuX3BhcmVudHMsIGFuZCB3ZVxuICAgICAgICAvLyBkb24ndCBoYXZlIHRvIHJlbW92ZSBvdXJzZWx2ZXMgZnJvbSBhbnkgcGFyZW50IHN1YnNjcmlwdGlvbnMuXG4gICAgICAgIHdoaWxlIChfcGFyZW50KSB7XG4gICAgICAgICAgICBfcGFyZW50LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIC8vIGlmIHRoaXMuX3BhcmVudHMgaXMgbnVsbCBvciBpbmRleCA+PSBsZW4sXG4gICAgICAgICAgICAvLyB0aGVuIF9wYXJlbnQgaXMgc2V0IHRvIG51bGwsIGFuZCB0aGUgbG9vcCBleGl0c1xuICAgICAgICAgICAgX3BhcmVudCA9ICsraW5kZXggPCBsZW4gJiYgX3BhcmVudHNbaW5kZXhdIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3Vuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgdmFyIHRyaWFsID0gdHJ5Q2F0Y2goX3Vuc3Vic2NyaWJlKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRyaWFsID09PSBlcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IChlcnJvck9iamVjdC5lIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvciA/XG4gICAgICAgICAgICAgICAgICAgIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvck9iamVjdC5lLmVycm9ycykgOiBbZXJyb3JPYmplY3QuZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3Qoc3ViKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpYWwgPSB0cnlDYXRjaChzdWIudW5zdWJzY3JpYmUpLmNhbGwoc3ViKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWFsID09PSBlcnJvck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSBlcnJvck9iamVjdC5lO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnIuZXJyb3JzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0ZWFyIGRvd24gdG8gYmUgY2FsbGVkIGR1cmluZyB0aGUgdW5zdWJzY3JpYmUoKSBvZiB0aGlzXG4gICAgICogU3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIHRlYXIgZG93biBiZWluZyBhZGRlZCBpcyBhIHN1YnNjcmlwdGlvbiB0aGF0IGlzIGFscmVhZHlcbiAgICAgKiB1bnN1YnNjcmliZWQsIGlzIHRoZSBzYW1lIHJlZmVyZW5jZSBgYWRkYCBpcyBiZWluZyBjYWxsZWQgb24sIG9yIGlzXG4gICAgICogYFN1YnNjcmlwdGlvbi5FTVBUWWAsIGl0IHdpbGwgbm90IGJlIGFkZGVkLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBzdWJzY3JpcHRpb24gaXMgYWxyZWFkeSBpbiBhbiBgY2xvc2VkYCBzdGF0ZSwgdGhlIHBhc3NlZFxuICAgICAqIHRlYXIgZG93biBsb2dpYyB3aWxsIGJlIGV4ZWN1dGVkIGltbWVkaWF0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZWFyZG93bkxvZ2ljfSB0ZWFyZG93biBUaGUgYWRkaXRpb25hbCBsb2dpYyB0byBleGVjdXRlIG9uXG4gICAgICogdGVhcmRvd24uXG4gICAgICogQHJldHVybiB7U3Vic2NyaXB0aW9ufSBSZXR1cm5zIHRoZSBTdWJzY3JpcHRpb24gdXNlZCBvciBjcmVhdGVkIHRvIGJlXG4gICAgICogYWRkZWQgdG8gdGhlIGlubmVyIHN1YnNjcmlwdGlvbnMgbGlzdC4gVGhpcyBTdWJzY3JpcHRpb24gY2FuIGJlIHVzZWQgd2l0aFxuICAgICAqIGByZW1vdmUoKWAgdG8gcmVtb3ZlIHRoZSBwYXNzZWQgdGVhcmRvd24gbG9naWMgZnJvbSB0aGUgaW5uZXIgc3Vic2NyaXB0aW9uc1xuICAgICAqIGxpc3QuXG4gICAgICovXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgaWYgKCF0ZWFyZG93biB8fCAodGVhcmRvd24gPT09IFN1YnNjcmlwdGlvbi5FTVBUWSkpIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlYXJkb3duID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGVhcmRvd247XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHRlYXJkb3duKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24uX2FkZFBhcmVudCAhPT0gJ2Z1bmN0aW9uJyAvKiBxdWFjayBxdWFjayAqLykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zIHx8ICh0aGlzLl9zdWJzY3JpcHRpb25zID0gW10pO1xuICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLl9hZGRQYXJlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgU3Vic2NyaXB0aW9uIGZyb20gdGhlIGludGVybmFsIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyB0aGF0IHdpbGxcbiAgICAgKiB1bnN1YnNjcmliZSBkdXJpbmcgdGhlIHVuc3Vic2NyaWJlIHByb2Nlc3Mgb2YgdGhpcyBTdWJzY3JpcHRpb24uXG4gICAgICogQHBhcmFtIHtTdWJzY3JpcHRpb259IHN1YnNjcmlwdGlvbiBUaGUgc3Vic2NyaXB0aW9uIHRvIHJlbW92ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSW5kZXggPSBzdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICBpZiAoIV9wYXJlbnQgfHwgX3BhcmVudCA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgcGFyZW50LCBvciB0aGUgbmV3IHBhcmVudCBpcyB0aGUgc2FtZSBhcyB0aGVcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgcGFyZW50LCB0aGVuIHNldCB0aGlzLl9wYXJlbnQgdG8gdGhlIG5ldyBwYXJlbnQuXG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRzKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGFscmVhZHkgb25lIHBhcmVudCwgYnV0IG5vdCBtdWx0aXBsZSwgYWxsb2NhdGUgYW4gQXJyYXkgdG9cbiAgICAgICAgICAgIC8vIHN0b3JlIHRoZSByZXN0IG9mIHRoZSBwYXJlbnQgU3Vic2NyaXB0aW9ucy5cbiAgICAgICAgICAgIHRoaXMuX3BhcmVudHMgPSBbcGFyZW50XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfcGFyZW50cy5pbmRleE9mKHBhcmVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGFkZCB0aGUgbmV3IHBhcmVudCB0byB0aGUgX3BhcmVudHMgbGlzdCBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlLlxuICAgICAgICAgICAgX3BhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBTdWJzY3JpcHRpb24uRU1QVFkgPSAoZnVuY3Rpb24gKGVtcHR5KSB7XG4gICAgICAgIGVtcHR5LmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBlbXB0eTtcbiAgICB9KG5ldyBTdWJzY3JpcHRpb24oKSkpO1xuICAgIHJldHVybiBTdWJzY3JpcHRpb247XG59KCkpO1xuZXhwb3J0IHsgU3Vic2NyaXB0aW9uIH07XG5mdW5jdGlvbiBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgcmV0dXJuIGVycm9ycy5yZWR1Y2UoZnVuY3Rpb24gKGVycnMsIGVycikgeyByZXR1cm4gZXJycy5jb25jYXQoKGVyciBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpID8gZXJyLmVycm9ycyA6IGVycik7IH0sIFtdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgcnhTdWJzY3JpYmVyID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC5mb3IgPT09ICdmdW5jdGlvbicpXG4gICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbC5mb3IoJ3J4U3Vic2NyaWJlcicpXG4gICAgOiAnQEByeFN1YnNjcmliZXInO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2UgcnhTdWJzY3JpYmVyIGluc3RlYWRcbiAqL1xuZXhwb3J0IHZhciAkJHJ4U3Vic2NyaWJlciA9IHJ4U3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNGdW5jdGlvbixfT2JzZXJ2ZXIsX1N1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcixfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVtcHR5IGFzIGVtcHR5T2JzZXJ2ZXIgfSBmcm9tICcuL09ic2VydmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGludGVyZmFjZSBhbmQgZXh0ZW5kcyB0aGVcbiAqIHtAbGluayBTdWJzY3JpcHRpb259IGNsYXNzLiBXaGlsZSB0aGUge0BsaW5rIE9ic2VydmVyfSBpcyB0aGUgcHVibGljIEFQSSBmb3JcbiAqIGNvbnN1bWluZyB0aGUgdmFsdWVzIG9mIGFuIHtAbGluayBPYnNlcnZhYmxlfSwgYWxsIE9ic2VydmVycyBnZXQgY29udmVydGVkIHRvXG4gKiBhIFN1YnNjcmliZXIsIGluIG9yZGVyIHRvIHByb3ZpZGUgU3Vic2NyaXB0aW9uLWxpa2UgY2FwYWJpbGl0aWVzIHN1Y2ggYXNcbiAqIGB1bnN1YnNjcmliZWAuIFN1YnNjcmliZXIgaXMgYSBjb21tb24gdHlwZSBpbiBSeEpTLCBhbmQgY3J1Y2lhbCBmb3JcbiAqIGltcGxlbWVudGluZyBvcGVyYXRvcnMsIGJ1dCBpdCBpcyByYXJlbHkgdXNlZCBhcyBhIHB1YmxpYyBBUEkuXG4gKlxuICogQGNsYXNzIFN1YnNjcmliZXI8VD5cbiAqL1xudmFyIFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfGZ1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gW2Rlc3RpbmF0aW9uT3JOZXh0XSBBIHBhcnRpYWxseVxuICAgICAqIGRlZmluZWQgT2JzZXJ2ZXIgb3IgYSBgbmV4dGAgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihlOiA/YW55KTogdm9pZH0gW2Vycm9yXSBUaGUgYGVycm9yYCBjYWxsYmFjayBvZiBhblxuICAgICAqIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBUaGUgYGNvbXBsZXRlYCBjYWxsYmFjayBvZiBhblxuICAgICAqIE9ic2VydmVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKiogQGludGVybmFsICovIF90aGlzLnN5bmNFcnJvclZhbHVlID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqLyBfdGhpcy5zeW5jRXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqLyBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25Pck5leHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhBQ0soYmVubGVzaCk6IEZvciBzaXR1YXRpb25zIHdoZXJlIE5vZGUgaGFzIG11bHRpcGxlIGNvcGllcyBvZiByeGpzIGluXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vZGVfbW9kdWxlcywgd2UgY2Fubm90IHJlbHkgb24gYGluc3RhbmNlb2ZgIGNoZWNrc1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUcnVzdGVkU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cnVzdGVkU3Vic2NyaWJlciA9IGRlc3RpbmF0aW9uT3JOZXh0W3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydXN0ZWRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gdHJ1c3RlZFN1YnNjcmliZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVzdGVkU3Vic2NyaWJlci5hZGQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIC8qKlxuICAgICAqIEEgc3RhdGljIGZhY3RvcnkgZm9yIGEgU3Vic2NyaWJlciwgZ2l2ZW4gYSAocG90ZW50aWFsbHkgcGFydGlhbCkgZGVmaW5pdGlvblxuICAgICAqIG9mIGFuIE9ic2VydmVyLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oeDogP1QpOiB2b2lkfSBbbmV4dF0gVGhlIGBuZXh0YCBjYWxsYmFjayBvZiBhbiBPYnNlcnZlci5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGU6ID9hbnkpOiB2b2lkfSBbZXJyb3JdIFRoZSBgZXJyb3JgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBbY29tcGxldGVdIFRoZSBgY29tcGxldGVgIGNhbGxiYWNrIG9mIGFuXG4gICAgICogT2JzZXJ2ZXIuXG4gICAgICogQHJldHVybiB7U3Vic2NyaWJlcjxUPn0gQSBTdWJzY3JpYmVyIHdyYXBwaW5nIHRoZSAocGFydGlhbGx5IGRlZmluZWQpXG4gICAgICogT2JzZXJ2ZXIgcmVwcmVzZW50ZWQgYnkgdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBPYnNlcnZlcn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9mIHR5cGUgYG5leHRgIGZyb21cbiAgICAgKiB0aGUgT2JzZXJ2YWJsZSwgd2l0aCBhIHZhbHVlLiBUaGUgT2JzZXJ2YWJsZSBtYXkgY2FsbCB0aGlzIG1ldGhvZCAwIG9yIG1vcmVcbiAgICAgKiB0aW1lcy5cbiAgICAgKiBAcGFyYW0ge1R9IFt2YWx1ZV0gVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvZiB0eXBlIGBlcnJvcmAgZnJvbVxuICAgICAqIHRoZSBPYnNlcnZhYmxlLCB3aXRoIGFuIGF0dGFjaGVkIHtAbGluayBFcnJvcn0uIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0XG4gICAgICogdGhlIE9ic2VydmFibGUgaGFzIGV4cGVyaWVuY2VkIGFuIGVycm9yIGNvbmRpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2FueX0gW2Vycl0gVGhlIGBlcnJvcmAgZXhjZXB0aW9uLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgT2JzZXJ2ZXJ9IGNhbGxiYWNrIHRvIHJlY2VpdmUgYSB2YWx1ZWxlc3Mgbm90aWZpY2F0aW9uIG9mIHR5cGVcbiAgICAgKiBgY29tcGxldGVgIGZyb20gdGhlIE9ic2VydmFibGUuIE5vdGlmaWVzIHRoZSBPYnNlcnZlciB0aGF0IHRoZSBPYnNlcnZhYmxlXG4gICAgICogaGFzIGZpbmlzaGVkIHNlbmRpbmcgcHVzaC1iYXNlZCBub3RpZmljYXRpb25zLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IF9wYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YnNjcmliZXIgfTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU2FmZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXM7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBlbXB0eU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gX3RoaXMudW5zdWJzY3JpYmUuYmluZChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG5leHQ7XG4gICAgICAgIF90aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICB2YXIgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyA9IGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIod3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmZ1bmN0aW9uIGlzVHJ1c3RlZFN1YnNjcmliZXIob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIFN1YnNjcmliZXIgfHwgKCdzeW5jRXJyb3JUaHJvd2FibGUnIGluIG9iaiAmJiBvYmpbcnhTdWJzY3JpYmVyU3ltYm9sXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlcixfc3ltYm9sX3J4U3Vic2NyaWJlcixfT2JzZXJ2ZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4uL09ic2VydmVyJztcbmV4cG9ydCBmdW5jdGlvbiB0b1N1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIGlmIChuZXh0T3JPYnNlcnZlcikge1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcltyeFN1YnNjcmliZXJTeW1ib2xdKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZXh0T3JPYnNlcnZlciAmJiAhZXJyb3IgJiYgIWNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcihlbXB0eU9ic2VydmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFN5bWJvbC5vYnNlcnZhYmxlIG9yIGEgc3RyaW5nIFwiQEBvYnNlcnZhYmxlXCIuIFVzZWQgZm9yIGludGVyb3AgKi9cbi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgb2JzZXJ2YWJsZSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgJ0BAb2JzZXJ2YWJsZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyogdHNsaW50OmRpc2FibGU6bm8tZW1wdHkgKi9cbi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyB9XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfbm9vcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9ub29wJztcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG5leHBvcnQgZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZm5zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZm5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KGZucyk7XG59XG4vKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmICghZm5zKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZm5zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZWQoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF90b1N1YnNjcmliZXIsX2ludGVybmFsX3N5bWJvbF9vYnNlcnZhYmxlLF91dGlsX3BpcGUsX2NvbmZpZyBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyB0b1N1YnNjcmliZXIgfSBmcm9tICcuL3V0aWwvdG9TdWJzY3JpYmVyJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGFueSBzZXQgb2YgdmFsdWVzIG92ZXIgYW55IGFtb3VudCBvZiB0aW1lLiBUaGlzIGlzIHRoZSBtb3N0IGJhc2ljIGJ1aWxkaW5nIGJsb2NrXG4gKiBvZiBSeEpTLlxuICpcbiAqIEBjbGFzcyBPYnNlcnZhYmxlPFQ+XG4gKi9cbnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1YnNjcmliZSB0aGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgT2JzZXJ2YWJsZSBpc1xuICAgICAqIGluaXRpYWxseSBzdWJzY3JpYmVkIHRvLiBUaGlzIGZ1bmN0aW9uIGlzIGdpdmVuIGEgU3Vic2NyaWJlciwgdG8gd2hpY2ggbmV3IHZhbHVlc1xuICAgICAqIGNhbiBiZSBgbmV4dGBlZCwgb3IgYW4gYGVycm9yYCBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByYWlzZSBhbiBlcnJvciwgb3JcbiAgICAgKiBgY29tcGxldGVgIGNhbiBiZSBjYWxsZWQgdG8gbm90aWZ5IG9mIGEgc3VjY2Vzc2Z1bCBjb21wbGV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIC8qKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UgZGlyZWN0bHkuICovXG4gICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE9ic2VydmFibGUsIHdpdGggdGhpcyBPYnNlcnZhYmxlIGFzIHRoZSBzb3VyY2UsIGFuZCB0aGUgcGFzc2VkXG4gICAgICogb3BlcmF0b3IgZGVmaW5lZCBhcyB0aGUgbmV3IG9ic2VydmFibGUncyBvcGVyYXRvci5cbiAgICAgKiBAbWV0aG9kIGxpZnRcbiAgICAgKiBAcGFyYW0ge09wZXJhdG9yfSBvcGVyYXRvciB0aGUgb3BlcmF0b3IgZGVmaW5pbmcgdGhlIG9wZXJhdGlvbiB0byB0YWtlIG9uIHRoZSBvYnNlcnZhYmxlXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gYSBuZXcgb2JzZXJ2YWJsZSB3aXRoIHRoZSBPcGVyYXRvciBhcHBsaWVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgb2JzZXJ2YWJsZS5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEludm9rZXMgYW4gZXhlY3V0aW9uIG9mIGFuIE9ic2VydmFibGUgYW5kIHJlZ2lzdGVycyBPYnNlcnZlciBoYW5kbGVycyBmb3Igbm90aWZpY2F0aW9ucyBpdCB3aWxsIGVtaXQuXG4gICAgICpcbiAgICAgKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+VXNlIGl0IHdoZW4geW91IGhhdmUgYWxsIHRoZXNlIE9ic2VydmFibGVzLCBidXQgc3RpbGwgbm90aGluZyBpcyBoYXBwZW5pbmcuPC9zcGFuPlxuICAgICAqXG4gICAgICogYHN1YnNjcmliZWAgaXMgbm90IGEgcmVndWxhciBvcGVyYXRvciwgYnV0IGEgbWV0aG9kIHRoYXQgY2FsbHMgT2JzZXJ2YWJsZSdzIGludGVybmFsIGBzdWJzY3JpYmVgIGZ1bmN0aW9uLiBJdFxuICAgICAqIG1pZ2h0IGJlIGZvciBleGFtcGxlIGEgZnVuY3Rpb24gdGhhdCB5b3UgcGFzc2VkIHRvIGEge0BsaW5rIGNyZWF0ZX0gc3RhdGljIGZhY3RvcnksIGJ1dCBtb3N0IG9mIHRoZSB0aW1lIGl0IGlzXG4gICAgICogYSBsaWJyYXJ5IGltcGxlbWVudGF0aW9uLCB3aGljaCBkZWZpbmVzIHdoYXQgYW5kIHdoZW4gd2lsbCBiZSBlbWl0dGVkIGJ5IGFuIE9ic2VydmFibGUuIFRoaXMgbWVhbnMgdGhhdCBjYWxsaW5nXG4gICAgICogYHN1YnNjcmliZWAgaXMgYWN0dWFsbHkgdGhlIG1vbWVudCB3aGVuIE9ic2VydmFibGUgc3RhcnRzIGl0cyB3b3JrLCBub3Qgd2hlbiBpdCBpcyBjcmVhdGVkLCBhcyBpdCBpcyBvZnRlblxuICAgICAqIHRob3VnaHQuXG4gICAgICpcbiAgICAgKiBBcGFydCBmcm9tIHN0YXJ0aW5nIHRoZSBleGVjdXRpb24gb2YgYW4gT2JzZXJ2YWJsZSwgdGhpcyBtZXRob2QgYWxsb3dzIHlvdSB0byBsaXN0ZW4gZm9yIHZhbHVlc1xuICAgICAqIHRoYXQgYW4gT2JzZXJ2YWJsZSBlbWl0cywgYXMgd2VsbCBhcyBmb3Igd2hlbiBpdCBjb21wbGV0ZXMgb3IgZXJyb3JzLiBZb3UgY2FuIGFjaGlldmUgdGhpcyBpbiB0d29cbiAgICAgKiBmb2xsb3dpbmcgd2F5cy5cbiAgICAgKlxuICAgICAqIFRoZSBmaXJzdCB3YXkgaXMgY3JlYXRpbmcgYW4gb2JqZWN0IHRoYXQgaW1wbGVtZW50cyB7QGxpbmsgT2JzZXJ2ZXJ9IGludGVyZmFjZS4gSXQgc2hvdWxkIGhhdmUgbWV0aG9kc1xuICAgICAqIGRlZmluZWQgYnkgdGhhdCBpbnRlcmZhY2UsIGJ1dCBub3RlIHRoYXQgaXQgc2hvdWxkIGJlIGp1c3QgYSByZWd1bGFyIEphdmFTY3JpcHQgb2JqZWN0LCB3aGljaCB5b3UgY2FuIGNyZWF0ZVxuICAgICAqIHlvdXJzZWxmIGluIGFueSB3YXkgeW91IHdhbnQgKEVTNiBjbGFzcywgY2xhc3NpYyBmdW5jdGlvbiBjb25zdHJ1Y3Rvciwgb2JqZWN0IGxpdGVyYWwgZXRjLikuIEluIHBhcnRpY3VsYXIgZG9cbiAgICAgKiBub3QgYXR0ZW1wdCB0byB1c2UgYW55IFJ4SlMgaW1wbGVtZW50YXRpb24gZGV0YWlscyB0byBjcmVhdGUgT2JzZXJ2ZXJzIC0geW91IGRvbid0IG5lZWQgdGhlbS4gUmVtZW1iZXIgYWxzb1xuICAgICAqIHRoYXQgeW91ciBvYmplY3QgZG9lcyBub3QgaGF2ZSB0byBpbXBsZW1lbnQgYWxsIG1ldGhvZHMuIElmIHlvdSBmaW5kIHlvdXJzZWxmIGNyZWF0aW5nIGEgbWV0aG9kIHRoYXQgZG9lc24ndFxuICAgICAqIGRvIGFueXRoaW5nLCB5b3UgY2FuIHNpbXBseSBvbWl0IGl0LiBOb3RlIGhvd2V2ZXIsIHRoYXQgaWYgYGVycm9yYCBtZXRob2QgaXMgbm90IHByb3ZpZGVkLCBhbGwgZXJyb3JzIHdpbGxcbiAgICAgKiBiZSBsZWZ0IHVuY2F1Z2h0LlxuICAgICAqXG4gICAgICogVGhlIHNlY29uZCB3YXkgaXMgdG8gZ2l2ZSB1cCBvbiBPYnNlcnZlciBvYmplY3QgYWx0b2dldGhlciBhbmQgc2ltcGx5IHByb3ZpZGUgY2FsbGJhY2sgZnVuY3Rpb25zIGluIHBsYWNlIG9mIGl0cyBtZXRob2RzLlxuICAgICAqIFRoaXMgbWVhbnMgeW91IGNhbiBwcm92aWRlIHRocmVlIGZ1bmN0aW9ucyBhcyBhcmd1bWVudHMgdG8gYHN1YnNjcmliZWAsIHdoZXJlIGZpcnN0IGZ1bmN0aW9uIGlzIGVxdWl2YWxlbnRcbiAgICAgKiBvZiBhIGBuZXh0YCBtZXRob2QsIHNlY29uZCBvZiBhbiBgZXJyb3JgIG1ldGhvZCBhbmQgdGhpcmQgb2YgYSBgY29tcGxldGVgIG1ldGhvZC4gSnVzdCBhcyBpbiBjYXNlIG9mIE9ic2VydmVyLFxuICAgICAqIGlmIHlvdSBkbyBub3QgbmVlZCB0byBsaXN0ZW4gZm9yIHNvbWV0aGluZywgeW91IGNhbiBvbWl0IGEgZnVuY3Rpb24sIHByZWZlcmFibHkgYnkgcGFzc2luZyBgdW5kZWZpbmVkYCBvciBgbnVsbGAsXG4gICAgICogc2luY2UgYHN1YnNjcmliZWAgcmVjb2duaXplcyB0aGVzZSBmdW5jdGlvbnMgYnkgd2hlcmUgdGhleSB3ZXJlIHBsYWNlZCBpbiBmdW5jdGlvbiBjYWxsLiBXaGVuIGl0IGNvbWVzXG4gICAgICogdG8gYGVycm9yYCBmdW5jdGlvbiwganVzdCBhcyBiZWZvcmUsIGlmIG5vdCBwcm92aWRlZCwgZXJyb3JzIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZSB3aWxsIGJlIHRocm93bi5cbiAgICAgKlxuICAgICAqIFdoYXRldmVyIHN0eWxlIG9mIGNhbGxpbmcgYHN1YnNjcmliZWAgeW91IHVzZSwgaW4gYm90aCBjYXNlcyBpdCByZXR1cm5zIGEgU3Vic2NyaXB0aW9uIG9iamVjdC5cbiAgICAgKiBUaGlzIG9iamVjdCBhbGxvd3MgeW91IHRvIGNhbGwgYHVuc3Vic2NyaWJlYCBvbiBpdCwgd2hpY2ggaW4gdHVybiB3aWxsIHN0b3Agd29yayB0aGF0IGFuIE9ic2VydmFibGUgZG9lcyBhbmQgd2lsbCBjbGVhblxuICAgICAqIHVwIGFsbCByZXNvdXJjZXMgdGhhdCBhbiBPYnNlcnZhYmxlIHVzZWQuIE5vdGUgdGhhdCBjYW5jZWxsaW5nIGEgc3Vic2NyaXB0aW9uIHdpbGwgbm90IGNhbGwgYGNvbXBsZXRlYCBjYWxsYmFja1xuICAgICAqIHByb3ZpZGVkIHRvIGBzdWJzY3JpYmVgIGZ1bmN0aW9uLCB3aGljaCBpcyByZXNlcnZlZCBmb3IgYSByZWd1bGFyIGNvbXBsZXRpb24gc2lnbmFsIHRoYXQgY29tZXMgZnJvbSBhbiBPYnNlcnZhYmxlLlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCBjYWxsYmFja3MgcHJvdmlkZWQgdG8gYHN1YnNjcmliZWAgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNhbGxlZCBhc3luY2hyb25vdXNseS5cbiAgICAgKiBJdCBpcyBhbiBPYnNlcnZhYmxlIGl0c2VsZiB0aGF0IGRlY2lkZXMgd2hlbiB0aGVzZSBmdW5jdGlvbnMgd2lsbCBiZSBjYWxsZWQuIEZvciBleGFtcGxlIHtAbGluayBvZn1cbiAgICAgKiBieSBkZWZhdWx0IGVtaXRzIGFsbCBpdHMgdmFsdWVzIHN5bmNocm9ub3VzbHkuIEFsd2F5cyBjaGVjayBkb2N1bWVudGF0aW9uIGZvciBob3cgZ2l2ZW4gT2JzZXJ2YWJsZVxuICAgICAqIHdpbGwgYmVoYXZlIHdoZW4gc3Vic2NyaWJlZCBhbmQgaWYgaXRzIGRlZmF1bHQgYmVoYXZpb3IgY2FuIGJlIG1vZGlmaWVkIHdpdGggYSB7QGxpbmsgU2NoZWR1bGVyfS5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPlN1YnNjcmliZSB3aXRoIGFuIE9ic2VydmVyPC9jYXB0aW9uPlxuICAgICAqIGNvbnN0IHN1bU9ic2VydmVyID0ge1xuICAgICAqICAgc3VtOiAwLFxuICAgICAqICAgbmV4dCh2YWx1ZSkge1xuICAgICAqICAgICBjb25zb2xlLmxvZygnQWRkaW5nOiAnICsgdmFsdWUpO1xuICAgICAqICAgICB0aGlzLnN1bSA9IHRoaXMuc3VtICsgdmFsdWU7XG4gICAgICogICB9LFxuICAgICAqICAgZXJyb3IoKSB7IC8vIFdlIGFjdHVhbGx5IGNvdWxkIGp1c3QgcmVtb3ZlIHRoaXMgbWV0aG9kLFxuICAgICAqICAgfSwgICAgICAgIC8vIHNpbmNlIHdlIGRvIG5vdCByZWFsbHkgY2FyZSBhYm91dCBlcnJvcnMgcmlnaHQgbm93LlxuICAgICAqICAgY29tcGxldGUoKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdTdW0gZXF1YWxzOiAnICsgdGhpcy5zdW0pO1xuICAgICAqICAgfVxuICAgICAqIH07XG4gICAgICpcbiAgICAgKiBSeC5PYnNlcnZhYmxlLm9mKDEsIDIsIDMpIC8vIFN5bmNocm9ub3VzbHkgZW1pdHMgMSwgMiwgMyBhbmQgdGhlbiBjb21wbGV0ZXMuXG4gICAgICogLnN1YnNjcmliZShzdW1PYnNlcnZlcik7XG4gICAgICpcbiAgICAgKiAvLyBMb2dzOlxuICAgICAqIC8vIFwiQWRkaW5nOiAxXCJcbiAgICAgKiAvLyBcIkFkZGluZzogMlwiXG4gICAgICogLy8gXCJBZGRpbmc6IDNcIlxuICAgICAqIC8vIFwiU3VtIGVxdWFsczogNlwiXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBleGFtcGxlIDxjYXB0aW9uPlN1YnNjcmliZSB3aXRoIGZ1bmN0aW9uczwvY2FwdGlvbj5cbiAgICAgKiBsZXQgc3VtID0gMDtcbiAgICAgKlxuICAgICAqIFJ4Lk9ic2VydmFibGUub2YoMSwgMiwgMylcbiAgICAgKiAuc3Vic2NyaWJlKFxuICAgICAqICAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgKiAgICAgY29uc29sZS5sb2coJ0FkZGluZzogJyArIHZhbHVlKTtcbiAgICAgKiAgICAgc3VtID0gc3VtICsgdmFsdWU7XG4gICAgICogICB9LFxuICAgICAqICAgdW5kZWZpbmVkLFxuICAgICAqICAgZnVuY3Rpb24oKSB7XG4gICAgICogICAgIGNvbnNvbGUubG9nKCdTdW0gZXF1YWxzOiAnICsgc3VtKTtcbiAgICAgKiAgIH1cbiAgICAgKiApO1xuICAgICAqXG4gICAgICogLy8gTG9nczpcbiAgICAgKiAvLyBcIkFkZGluZzogMVwiXG4gICAgICogLy8gXCJBZGRpbmc6IDJcIlxuICAgICAqIC8vIFwiQWRkaW5nOiAzXCJcbiAgICAgKiAvLyBcIlN1bSBlcXVhbHM6IDZcIlxuICAgICAqXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSA8Y2FwdGlvbj5DYW5jZWwgYSBzdWJzY3JpcHRpb248L2NhcHRpb24+XG4gICAgICogY29uc3Qgc3Vic2NyaXB0aW9uID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS5zdWJzY3JpYmUoXG4gICAgICogICBudW0gPT4gY29uc29sZS5sb2cobnVtKSxcbiAgICAgKiAgIHVuZGVmaW5lZCxcbiAgICAgKiAgICgpID0+IGNvbnNvbGUubG9nKCdjb21wbGV0ZWQhJykgLy8gV2lsbCBub3QgYmUgY2FsbGVkLCBldmVuXG4gICAgICogKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gY2FuY2VsbGluZyBzdWJzY3JpcHRpb25cbiAgICAgKlxuICAgICAqXG4gICAgICogc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICogICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgKiAgIGNvbnNvbGUubG9nKCd1bnN1YnNjcmliZWQhJyk7XG4gICAgICogfSwgMjUwMCk7XG4gICAgICpcbiAgICAgKiAvLyBMb2dzOlxuICAgICAqIC8vIDAgYWZ0ZXIgMXNcbiAgICAgKiAvLyAxIGFmdGVyIDJzXG4gICAgICogLy8gXCJ1bnN1YnNjcmliZWQhXCIgYWZ0ZXIgMi41c1xuICAgICAqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfEZ1bmN0aW9ufSBvYnNlcnZlck9yTmV4dCAob3B0aW9uYWwpIEVpdGhlciBhbiBvYnNlcnZlciB3aXRoIG1ldGhvZHMgdG8gYmUgY2FsbGVkLFxuICAgICAqICBvciB0aGUgZmlyc3Qgb2YgdGhyZWUgcG9zc2libGUgaGFuZGxlcnMsIHdoaWNoIGlzIHRoZSBoYW5kbGVyIGZvciBlYWNoIHZhbHVlIGVtaXR0ZWQgZnJvbSB0aGUgc3Vic2NyaWJlZFxuICAgICAqICBPYnNlcnZhYmxlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVycm9yIChvcHRpb25hbCkgQSBoYW5kbGVyIGZvciBhIHRlcm1pbmFsIGV2ZW50IHJlc3VsdGluZyBmcm9tIGFuIGVycm9yLiBJZiBubyBlcnJvciBoYW5kbGVyIGlzIHByb3ZpZGVkLFxuICAgICAqICB0aGUgZXJyb3Igd2lsbCBiZSB0aHJvd24gYXMgdW5oYW5kbGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBsZXRlIChvcHRpb25hbCkgQSBoYW5kbGVyIGZvciBhIHRlcm1pbmFsIGV2ZW50IHJlc3VsdGluZyBmcm9tIHN1Y2Nlc3NmdWwgY29tcGxldGlvbi5cbiAgICAgKiBAcmV0dXJuIHtJU3Vic2NyaXB0aW9ufSBhIHN1YnNjcmlwdGlvbiByZWZlcmVuY2UgdG8gdGhlIHJlZ2lzdGVyZWQgaGFuZGxlcnNcbiAgICAgKiBAbWV0aG9kIHN1YnNjcmliZVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBvcGVyYXRvciA9IHRoaXMub3BlcmF0b3I7XG4gICAgICAgIHZhciBzaW5rID0gdG9TdWJzY3JpYmVyKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBpZiAob3BlcmF0b3IpIHtcbiAgICAgICAgICAgIG9wZXJhdG9yLmNhbGwoc2luaywgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2luay5hZGQodGhpcy5zb3VyY2UgfHwgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID8gdGhpcy5fc3Vic2NyaWJlKHNpbmspIDogdGhpcy5fdHJ5U3Vic2NyaWJlKHNpbmspKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHNpbmsuc3luY0Vycm9yVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW5rO1xuICAgIH07XG4gICAgLyoqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlLiAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpbmsuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBmb3JFYWNoXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCBhIGhhbmRsZXIgZm9yIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgb2JzZXJ2YWJsZVxuICAgICAqIEBwYXJhbSB7UHJvbWlzZUNvbnN0cnVjdG9yfSBbcHJvbWlzZUN0b3JdIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gdXNlZCB0byBpbnN0YW50aWF0ZSB0aGUgUHJvbWlzZVxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IGVpdGhlciByZXNvbHZlcyBvbiBvYnNlcnZhYmxlIGNvbXBsZXRpb24gb3JcbiAgICAgKiAgcmVqZWN0cyB3aXRoIHRoZSBoYW5kbGVkIGVycm9yXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAvLyBNdXN0IGJlIGRlY2xhcmVkIGluIGEgc2VwYXJhdGUgc3RhdGVtZW50IHRvIGF2b2lkIGEgUmVmZXJuY2VFcnJvciB3aGVuXG4gICAgICAgICAgICAvLyBhY2Nlc3Npbmcgc3Vic2NyaXB0aW9uIGJlbG93IGluIHRoZSBjbG9zdXJlIGR1ZSB0byBUZW1wb3JhbCBEZWFkIFpvbmUuXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlLiAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFuIGludGVyb3AgcG9pbnQgZGVmaW5lZCBieSB0aGUgZXM3LW9ic2VydmFibGUgc3BlYyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBTeW1ib2wub2JzZXJ2YWJsZVxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IHRoaXMgaW5zdGFuY2Ugb2YgdGhlIG9ic2VydmFibGVcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtTeW1ib2xfb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgICAvKipcbiAgICAgKiBVc2VkIHRvIHN0aXRjaCB0b2dldGhlciBmdW5jdGlvbmFsIG9wZXJhdG9ycyBpbnRvIGEgY2hhaW4uXG4gICAgICogQG1ldGhvZCBwaXBlXG4gICAgICogQHJldHVybiB7T2JzZXJ2YWJsZX0gdGhlIE9ic2VydmFibGUgcmVzdWx0IG9mIGFsbCBvZiB0aGUgb3BlcmF0b3JzIGhhdmluZ1xuICAgICAqIGJlZW4gY2FsbGVkIGluIHRoZSBvcmRlciB0aGV5IHdlcmUgcGFzc2VkIGluLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqIGltcG9ydCB7IG1hcCwgZmlsdGVyLCBzY2FuIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuICAgICAqXG4gICAgICogUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKVxuICAgICAqICAgLnBpcGUoXG4gICAgICogICAgIGZpbHRlcih4ID0+IHggJSAyID09PSAwKSxcbiAgICAgKiAgICAgbWFwKHggPT4geCArIHgpLFxuICAgICAqICAgICBzY2FuKChhY2MsIHgpID0+IGFjYyArIHgpXG4gICAgICogICApXG4gICAgICogICAuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3BlcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwaXBlRnJvbUFycmF5KG9wZXJhdGlvbnMpKHRoaXMpO1xuICAgIH07XG4gICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB2YWx1ZSA9IHg7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKHZhbHVlKTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gSEFDSzogU2luY2UgVHlwZVNjcmlwdCBpbmhlcml0cyBzdGF0aWMgcHJvcGVydGllcyB0b28sIHdlIGhhdmUgdG9cbiAgICAvLyBmaWdodCBhZ2FpbnN0IFR5cGVTY3JpcHQgaGVyZSBzbyBTdWJqZWN0IGNhbiBoYXZlIGEgZGlmZmVyZW50IHN0YXRpYyBjcmVhdGUgc2lnbmF0dXJlXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2xkIE9ic2VydmFibGUgYnkgY2FsbGluZyB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEBzdGF0aWMgdHJ1ZVxuICAgICAqIEBvd25lciBPYnNlcnZhYmxlXG4gICAgICogQG1ldGhvZCBjcmVhdGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmU/IHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uIHRvIGJlIHBhc3NlZCB0byB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3RvclxuICAgICAqIEByZXR1cm4ge09ic2VydmFibGV9IGEgbmV3IGNvbGQgb2JzZXJ2YWJsZVxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmUpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuLyoqXG4gKiBEZWNpZGVzIGJldHdlZW4gYSBwYXNzZWQgcHJvbWlzZSBjb25zdHJ1Y3RvciBmcm9tIGNvbnN1bWluZyBjb2RlLFxuICogQSBkZWZhdWx0IGNvbmZpZ3VyZWQgcHJvbWlzZSBjb25zdHJ1Y3RvciwgYW5kIHRoZSBuYXRpdmUgcHJvbWlzZVxuICogY29uc3RydWN0b3IgYW5kIHJldHVybnMgaXQuIElmIG5vdGhpbmcgY2FuIGJlIGZvdW5kLCBpdCB3aWxsIHRocm93XG4gKiBhbiBlcnJvci5cbiAqIEBwYXJhbSBwcm9taXNlQ3RvciBUaGUgb3B0aW9uYWwgcHJvbWlzZSBjb25zdHJ1Y3RvciB0byBwYXNzZWQgYnkgY29uc3VtaW5nIGNvZGVcbiAqL1xuZnVuY3Rpb24gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpIHtcbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHByb21pc2VDdG9yID0gY29uZmlnLlByb21pc2UgfHwgUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKCFwcm9taXNlQ3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZUN0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBhY3Rpb24gaXMgaW52YWxpZCBiZWNhdXNlIHRoZSBvYmplY3QgaGFzIGJlZW5cbiAqIHVuc3Vic2NyaWJlZC5cbiAqXG4gKiBAc2VlIHtAbGluayBTdWJqZWN0fVxuICogQHNlZSB7QGxpbmsgQmVoYXZpb3JTdWJqZWN0fVxuICpcbiAqIEBjbGFzcyBPYmplY3RVbnN1YnNjcmliZWRFcnJvclxuICovXG52YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdvYmplY3QgdW5zdWJzY3JpYmVkJykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubmFtZSA9ICdPYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IucHJvdG90eXBlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgeyBPYmplY3RVbnN1YnNjcmliZWRFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgU3ViamVjdFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3RTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gc3ViamVjdC5vYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICAgIGlmICghb2JzZXJ2ZXJzIHx8IG9ic2VydmVycy5sZW5ndGggPT09IDAgfHwgc3ViamVjdC5pc1N0b3BwZWQgfHwgc3ViamVjdC5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaWJlckluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5zdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIG9ic2VydmVycy5zcGxpY2Uoc3Vic2NyaWJlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YmplY3RTdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuLyoqXG4gKiBAY2xhc3MgU3ViamVjdFN1YnNjcmliZXI8VD5cbiAqL1xudmFyIFN1YmplY3RTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmliZXIgfTtcbi8qKlxuICogQGNsYXNzIFN1YmplY3Q8VD5cbiAqL1xudmFyIFN1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdC5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaWJlcih0aGlzKTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgQW5vbnltb3VzU3ViamVjdCh0aGlzLCB0aGlzKTtcbiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29weVtpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMudGhyb3duRXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgfTtcbiAgICAvKiogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhbiBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBkZXRhaWwsIGRvIG5vdCB1c2UuICovXG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRoaXMudGhyb3duRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpcHRpb24odGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmFzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgLyoqQG5vY29sbGFwc2UgKi9cbiAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBTdWJqZWN0IH07XG4vKipcbiAqIEBjbGFzcyBBbm9ueW1vdXNTdWJqZWN0PFQ+XG4gKi9cbnZhciBBbm9ueW1vdXNTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5uZXh0KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEFub255bW91c1N1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gcmVmQ291bnQoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlZkNvdW50T3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBSZWZDb3VudE9wZXJhdG9yKHNvdXJjZSkpO1xuICAgIH07XG59XG52YXIgUmVmQ291bnRPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWZDb3VudE9wZXJhdG9yKGNvbm5lY3RhYmxlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTtcbiAgICB9XG4gICAgUmVmQ291bnRPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5jb25uZWN0YWJsZTtcbiAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50Kys7XG4gICAgICAgIHZhciByZWZDb3VudGVyID0gbmV3IFJlZkNvdW50U3Vic2NyaWJlcihzdWJzY3JpYmVyLCBjb25uZWN0YWJsZSk7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKHJlZkNvdW50ZXIpO1xuICAgICAgICBpZiAoIXJlZkNvdW50ZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICByZWZDb3VudGVyLmNvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5jb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBSZWZDb3VudE9wZXJhdG9yO1xufSgpKTtcbnZhciBSZWZDb3VudFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoUmVmQ291bnRTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlZkNvdW50U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgY29ubmVjdGFibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUmVmQ291bnRTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG4gICAgICAgIGlmICghY29ubmVjdGFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG4gICAgICAgIHZhciByZWZDb3VudCA9IGNvbm5lY3RhYmxlLl9yZWZDb3VudDtcbiAgICAgICAgaWYgKHJlZkNvdW50IDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50ID0gcmVmQ291bnQgLSAxO1xuICAgICAgICBpZiAocmVmQ291bnQgPiAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vL1xuICAgICAgICAvLyBDb21wYXJlIHRoZSBsb2NhbCBSZWZDb3VudFN1YnNjcmliZXIncyBjb25uZWN0aW9uIFN1YnNjcmlwdGlvbiB0byB0aGVcbiAgICAgICAgLy8gY29ubmVjdGlvbiBTdWJzY3JpcHRpb24gb24gdGhlIHNoYXJlZCBDb25uZWN0YWJsZU9ic2VydmFibGUuIEluIGNhc2VzXG4gICAgICAgIC8vIHdoZXJlIHRoZSBDb25uZWN0YWJsZU9ic2VydmFibGUgc291cmNlIHN5bmNocm9ub3VzbHkgZW1pdHMgdmFsdWVzLCBhbmRcbiAgICAgICAgLy8gdGhlIFJlZkNvdW50U3Vic2NyaWJlcidzIGRvd25zdHJlYW0gT2JzZXJ2ZXJzIHN5bmNocm9ub3VzbHkgdW5zdWJzY3JpYmUsXG4gICAgICAgIC8vIGV4ZWN1dGlvbiBjb250aW51ZXMgdG8gaGVyZSBiZWZvcmUgdGhlIFJlZkNvdW50T3BlcmF0b3IgaGFzIGEgY2hhbmNlIHRvXG4gICAgICAgIC8vIHN1cHBseSB0aGUgUmVmQ291bnRTdWJzY3JpYmVyIHdpdGggdGhlIHNoYXJlZCBjb25uZWN0aW9uIFN1YnNjcmlwdGlvbi5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgICAgIC8vIGBgYFxuICAgICAgICAvLyBPYnNlcnZhYmxlLnJhbmdlKDAsIDEwKVxuICAgICAgICAvLyAgIC5wdWJsaXNoKClcbiAgICAgICAgLy8gICAucmVmQ291bnQoKVxuICAgICAgICAvLyAgIC50YWtlKDUpXG4gICAgICAgIC8vICAgLnN1YnNjcmliZSgpO1xuICAgICAgICAvLyBgYGBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjb3VudCBmb3IgdGhpcyBjYXNlLCBSZWZDb3VudFN1YnNjcmliZXIgc2hvdWxkIG9ubHkgZGlzcG9zZVxuICAgICAgICAvLyB0aGUgQ29ubmVjdGFibGVPYnNlcnZhYmxlJ3Mgc2hhcmVkIGNvbm5lY3Rpb24gU3Vic2NyaXB0aW9uIGlmIHRoZVxuICAgICAgICAvLyBjb25uZWN0aW9uIFN1YnNjcmlwdGlvbiBleGlzdHMsICphbmQqIGVpdGhlcjpcbiAgICAgICAgLy8gICBhLiBSZWZDb3VudFN1YnNjcmliZXIgZG9lc24ndCBoYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBzaGFyZWQgY29ubmVjdGlvblxuICAgICAgICAvLyAgICAgIFN1YnNjcmlwdGlvbiB5ZXQsIG9yLFxuICAgICAgICAvLyAgIGIuIFJlZkNvdW50U3Vic2NyaWJlcidzIGNvbm5lY3Rpb24gU3Vic2NyaXB0aW9uIHJlZmVyZW5jZSBpcyBpZGVudGljYWxcbiAgICAgICAgLy8gICAgICB0byB0aGUgc2hhcmVkIGNvbm5lY3Rpb24gU3Vic2NyaXB0aW9uXG4gICAgICAgIC8vL1xuICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcbiAgICAgICAgdmFyIHNoYXJlZENvbm5lY3Rpb24gPSBjb25uZWN0YWJsZS5fY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHNoYXJlZENvbm5lY3Rpb24gJiYgKCFjb25uZWN0aW9uIHx8IHNoYXJlZENvbm5lY3Rpb24gPT09IGNvbm5lY3Rpb24pKSB7XG4gICAgICAgICAgICBzaGFyZWRDb25uZWN0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSZWZDb3VudFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlZkNvdW50LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfT2JzZXJ2YWJsZSxfU3Vic2NyaWJlcixfU3Vic2NyaXB0aW9uLF9vcGVyYXRvcnNfcmVmQ291bnQgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YmplY3RTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3ViamVjdCc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcmVmQ291bnQgYXMgaGlnaGVyT3JkZXJSZWZDb3VudCB9IGZyb20gJy4uL29wZXJhdG9ycy9yZWZDb3VudCc7XG4vKipcbiAqIEBjbGFzcyBDb25uZWN0YWJsZU9ic2VydmFibGU8VD5cbiAqL1xudmFyIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVPYnNlcnZhYmxlKHNvdXJjZSwgc3ViamVjdEZhY3RvcnkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICBfdGhpcy5zdWJqZWN0RmFjdG9yeSA9IHN1YmplY3RGYWN0b3J5O1xuICAgICAgICBfdGhpcy5fcmVmQ291bnQgPSAwO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIF90aGlzLl9pc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlLiAqL1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN1YmplY3QoKS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmdldFN1YmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5fc3ViamVjdDtcbiAgICAgICAgaWYgKCFzdWJqZWN0IHx8IHN1YmplY3QuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJqZWN0ID0gdGhpcy5zdWJqZWN0RmFjdG9yeSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9zdWJqZWN0O1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXMuX2Nvbm5lY3Rpb247XG4gICAgICAgIGlmICghY29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5faXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29ubmVjdGlvbiA9IHRoaXMuX2Nvbm5lY3Rpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICBjb25uZWN0aW9uLmFkZCh0aGlzLnNvdXJjZVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUobmV3IENvbm5lY3RhYmxlU3Vic2NyaWJlcih0aGlzLmdldFN1YmplY3QoKSwgdGhpcykpKTtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubmVjdGlvbjtcbiAgICB9O1xuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBoaWdoZXJPcmRlclJlZkNvdW50KCkodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29ubmVjdGFibGVPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBDb25uZWN0YWJsZU9ic2VydmFibGUgfTtcbnZhciBjb25uZWN0YWJsZVByb3RvID0gQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZTtcbmV4cG9ydCB2YXIgY29ubmVjdGFibGVPYnNlcnZhYmxlRGVzY3JpcHRvciA9IHtcbiAgICBvcGVyYXRvcjogeyB2YWx1ZTogbnVsbCB9LFxuICAgIF9yZWZDb3VudDogeyB2YWx1ZTogMCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICBfc3ViamVjdDogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICBfY29ubmVjdGlvbjogeyB2YWx1ZTogbnVsbCwgd3JpdGFibGU6IHRydWUgfSxcbiAgICBfc3Vic2NyaWJlOiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLl9zdWJzY3JpYmUgfSxcbiAgICBfaXNDb21wbGV0ZTogeyB2YWx1ZTogY29ubmVjdGFibGVQcm90by5faXNDb21wbGV0ZSwgd3JpdGFibGU6IHRydWUgfSxcbiAgICBnZXRTdWJqZWN0OiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLmdldFN1YmplY3QgfSxcbiAgICBjb25uZWN0OiB7IHZhbHVlOiBjb25uZWN0YWJsZVByb3RvLmNvbm5lY3QgfSxcbiAgICByZWZDb3VudDogeyB2YWx1ZTogY29ubmVjdGFibGVQcm90by5yZWZDb3VudCB9XG59O1xudmFyIENvbm5lY3RhYmxlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDb25uZWN0YWJsZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBjb25uZWN0YWJsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY29ubmVjdGFibGUgPSBjb25uZWN0YWJsZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBDb25uZWN0YWJsZVN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5fZXJyb3IuY2FsbCh0aGlzLCBlcnIpO1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUuX2lzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICB0aGlzLl91bnN1YnNjcmliZSgpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgQ29ubmVjdGFibGVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG4gICAgICAgIGlmIChjb25uZWN0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0YWJsZSA9IG51bGw7XG4gICAgICAgICAgICB2YXIgY29ubmVjdGlvbiA9IGNvbm5lY3RhYmxlLl9jb25uZWN0aW9uO1xuICAgICAgICAgICAgY29ubmVjdGFibGUuX3JlZkNvdW50ID0gMDtcbiAgICAgICAgICAgIGNvbm5lY3RhYmxlLl9zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgIGNvbm5lY3RhYmxlLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29ubmVjdGFibGVTdWJzY3JpYmVyO1xufShTdWJqZWN0U3Vic2NyaWJlcikpO1xudmFyIFJlZkNvdW50T3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVmQ291bnRPcGVyYXRvcihjb25uZWN0YWJsZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3RhYmxlID0gY29ubmVjdGFibGU7XG4gICAgfVxuICAgIFJlZkNvdW50T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHZhciBjb25uZWN0YWJsZSA9IHRoaXMuY29ubmVjdGFibGU7XG4gICAgICAgIGNvbm5lY3RhYmxlLl9yZWZDb3VudCsrO1xuICAgICAgICB2YXIgcmVmQ291bnRlciA9IG5ldyBSZWZDb3VudFN1YnNjcmliZXIoc3Vic2NyaWJlciwgY29ubmVjdGFibGUpO1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZShyZWZDb3VudGVyKTtcbiAgICAgICAgaWYgKCFyZWZDb3VudGVyLmNsb3NlZCkge1xuICAgICAgICAgICAgcmVmQ291bnRlci5jb25uZWN0aW9uID0gY29ubmVjdGFibGUuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICByZXR1cm4gUmVmQ291bnRPcGVyYXRvcjtcbn0oKSk7XG52YXIgUmVmQ291bnRTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFJlZkNvdW50U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudFN1YnNjcmliZXIoZGVzdGluYXRpb24sIGNvbm5lY3RhYmxlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jb25uZWN0YWJsZSA9IGNvbm5lY3RhYmxlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFJlZkNvdW50U3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLmNvbm5lY3RhYmxlO1xuICAgICAgICBpZiAoIWNvbm5lY3RhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGFibGUgPSBudWxsO1xuICAgICAgICB2YXIgcmVmQ291bnQgPSBjb25uZWN0YWJsZS5fcmVmQ291bnQ7XG4gICAgICAgIGlmIChyZWZDb3VudCA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3RhYmxlLl9yZWZDb3VudCA9IHJlZkNvdW50IC0gMTtcbiAgICAgICAgaWYgKHJlZkNvdW50ID4gMSkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLy9cbiAgICAgICAgLy8gQ29tcGFyZSB0aGUgbG9jYWwgUmVmQ291bnRTdWJzY3JpYmVyJ3MgY29ubmVjdGlvbiBTdWJzY3JpcHRpb24gdG8gdGhlXG4gICAgICAgIC8vIGNvbm5lY3Rpb24gU3Vic2NyaXB0aW9uIG9uIHRoZSBzaGFyZWQgQ29ubmVjdGFibGVPYnNlcnZhYmxlLiBJbiBjYXNlc1xuICAgICAgICAvLyB3aGVyZSB0aGUgQ29ubmVjdGFibGVPYnNlcnZhYmxlIHNvdXJjZSBzeW5jaHJvbm91c2x5IGVtaXRzIHZhbHVlcywgYW5kXG4gICAgICAgIC8vIHRoZSBSZWZDb3VudFN1YnNjcmliZXIncyBkb3duc3RyZWFtIE9ic2VydmVycyBzeW5jaHJvbm91c2x5IHVuc3Vic2NyaWJlLFxuICAgICAgICAvLyBleGVjdXRpb24gY29udGludWVzIHRvIGhlcmUgYmVmb3JlIHRoZSBSZWZDb3VudE9wZXJhdG9yIGhhcyBhIGNoYW5jZSB0b1xuICAgICAgICAvLyBzdXBwbHkgdGhlIFJlZkNvdW50U3Vic2NyaWJlciB3aXRoIHRoZSBzaGFyZWQgY29ubmVjdGlvbiBTdWJzY3JpcHRpb24uXG4gICAgICAgIC8vIEZvciBleGFtcGxlOlxuICAgICAgICAvLyBgYGBcbiAgICAgICAgLy8gT2JzZXJ2YWJsZS5yYW5nZSgwLCAxMClcbiAgICAgICAgLy8gICAucHVibGlzaCgpXG4gICAgICAgIC8vICAgLnJlZkNvdW50KClcbiAgICAgICAgLy8gICAudGFrZSg1KVxuICAgICAgICAvLyAgIC5zdWJzY3JpYmUoKTtcbiAgICAgICAgLy8gYGBgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGFjY291bnQgZm9yIHRoaXMgY2FzZSwgUmVmQ291bnRTdWJzY3JpYmVyIHNob3VsZCBvbmx5IGRpc3Bvc2VcbiAgICAgICAgLy8gdGhlIENvbm5lY3RhYmxlT2JzZXJ2YWJsZSdzIHNoYXJlZCBjb25uZWN0aW9uIFN1YnNjcmlwdGlvbiBpZiB0aGVcbiAgICAgICAgLy8gY29ubmVjdGlvbiBTdWJzY3JpcHRpb24gZXhpc3RzLCAqYW5kKiBlaXRoZXI6XG4gICAgICAgIC8vICAgYS4gUmVmQ291bnRTdWJzY3JpYmVyIGRvZXNuJ3QgaGF2ZSBhIHJlZmVyZW5jZSB0byB0aGUgc2hhcmVkIGNvbm5lY3Rpb25cbiAgICAgICAgLy8gICAgICBTdWJzY3JpcHRpb24geWV0LCBvcixcbiAgICAgICAgLy8gICBiLiBSZWZDb3VudFN1YnNjcmliZXIncyBjb25uZWN0aW9uIFN1YnNjcmlwdGlvbiByZWZlcmVuY2UgaXMgaWRlbnRpY2FsXG4gICAgICAgIC8vICAgICAgdG8gdGhlIHNoYXJlZCBjb25uZWN0aW9uIFN1YnNjcmlwdGlvblxuICAgICAgICAvLy9cbiAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzLmNvbm5lY3Rpb247XG4gICAgICAgIHZhciBzaGFyZWRDb25uZWN0aW9uID0gY29ubmVjdGFibGUuX2Nvbm5lY3Rpb247XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgIGlmIChzaGFyZWRDb25uZWN0aW9uICYmICghY29ubmVjdGlvbiB8fCBzaGFyZWRDb25uZWN0aW9uID09PSBjb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgc2hhcmVkQ29ubmVjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUmVmQ291bnRTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db25uZWN0YWJsZU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpYmVyLF9TdWJzY3JpcHRpb24sX09ic2VydmFibGUsX1N1YmplY3QgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAnLi4vU3ViamVjdCc7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBHcm91cHMgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgYW4gT2JzZXJ2YWJsZSBhY2NvcmRpbmcgdG8gYSBzcGVjaWZpZWQgY3JpdGVyaW9uLFxuICogYW5kIGVtaXRzIHRoZXNlIGdyb3VwZWQgaXRlbXMgYXMgYEdyb3VwZWRPYnNlcnZhYmxlc2AsIG9uZVxuICoge0BsaW5rIEdyb3VwZWRPYnNlcnZhYmxlfSBwZXIgZ3JvdXAuXG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9ncm91cEJ5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkdyb3VwIG9iamVjdHMgYnkgaWQgYW5kIHJldHVybiBhcyBhcnJheTwvY2FwdGlvbj5cbiAqIE9ic2VydmFibGUub2Y8T2JqPih7aWQ6IDEsIG5hbWU6ICdhemUxJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAnc2YyJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAnZGcyJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAxLCBuYW1lOiAnZXJnMSd9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMSwgbmFtZTogJ2RmMSd9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMiwgbmFtZTogJ3NmcWZiMid9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMywgbmFtZTogJ3FmczMnfSxcbiAqICAgICAgICAgICAgICAgICAgICB7aWQ6IDIsIG5hbWU6ICdxc2dxc2ZnMid9XG4gKiAgICAgKVxuICogICAgIC5ncm91cEJ5KHAgPT4gcC5pZClcbiAqICAgICAuZmxhdE1hcCggKGdyb3VwJCkgPT4gZ3JvdXAkLnJlZHVjZSgoYWNjLCBjdXIpID0+IFsuLi5hY2MsIGN1cl0sIFtdKSlcbiAqICAgICAuc3Vic2NyaWJlKHAgPT4gY29uc29sZS5sb2cocCkpO1xuICpcbiAqIC8vIGRpc3BsYXlzOlxuICogLy8gWyB7IGlkOiAxLCBuYW1lOiAnYXplMScgfSxcbiAqIC8vICAgeyBpZDogMSwgbmFtZTogJ2VyZzEnIH0sXG4gKiAvLyAgIHsgaWQ6IDEsIG5hbWU6ICdkZjEnIH0gXVxuICogLy9cbiAqIC8vIFsgeyBpZDogMiwgbmFtZTogJ3NmMicgfSxcbiAqIC8vICAgeyBpZDogMiwgbmFtZTogJ2RnMicgfSxcbiAqIC8vICAgeyBpZDogMiwgbmFtZTogJ3NmcWZiMicgfSxcbiAqIC8vICAgeyBpZDogMiwgbmFtZTogJ3FzZ3FzZmcyJyB9IF1cbiAqIC8vXG4gKiAvLyBbIHsgaWQ6IDMsIG5hbWU6ICdxZnMzJyB9IF1cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5QaXZvdCBkYXRhIG9uIHRoZSBpZCBmaWVsZDwvY2FwdGlvbj5cbiAqIE9ic2VydmFibGUub2Y8T2JqPih7aWQ6IDEsIG5hbWU6ICdhemUxJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAnc2YyJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAyLCBuYW1lOiAnZGcyJ30sXG4gKiAgICAgICAgICAgICAgICAgICAge2lkOiAxLCBuYW1lOiAnZXJnMSd9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMSwgbmFtZTogJ2RmMSd9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMiwgbmFtZTogJ3NmcWZiMid9LFxuICogICAgICAgICAgICAgICAgICAgIHtpZDogMywgbmFtZTogJ3FmczEnfSxcbiAqICAgICAgICAgICAgICAgICAgICB7aWQ6IDIsIG5hbWU6ICdxc2dxc2ZnMid9XG4gKiAgICAgICAgICAgICAgICAgICApXG4gKiAgICAgLmdyb3VwQnkocCA9PiBwLmlkLCBwID0+IHAubmFtZSlcbiAqICAgICAuZmxhdE1hcCggKGdyb3VwJCkgPT4gZ3JvdXAkLnJlZHVjZSgoYWNjLCBjdXIpID0+IFsuLi5hY2MsIGN1cl0sIFtcIlwiICsgZ3JvdXAkLmtleV0pKVxuICogICAgIC5tYXAoYXJyID0+ICh7J2lkJzogcGFyc2VJbnQoYXJyWzBdKSwgJ3ZhbHVlcyc6IGFyci5zbGljZSgxKX0pKVxuICogICAgIC5zdWJzY3JpYmUocCA9PiBjb25zb2xlLmxvZyhwKSk7XG4gKlxuICogLy8gZGlzcGxheXM6XG4gKiAvLyB7IGlkOiAxLCB2YWx1ZXM6IFsgJ2F6ZTEnLCAnZXJnMScsICdkZjEnIF0gfVxuICogLy8geyBpZDogMiwgdmFsdWVzOiBbICdzZjInLCAnZGcyJywgJ3NmcWZiMicsICdxc2dxc2ZnMicgXSB9XG4gKiAvLyB7IGlkOiAzLCB2YWx1ZXM6IFsgJ3FmczEnIF0gfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBLfSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHRoYXQgZXh0cmFjdHMgdGhlIGtleVxuICogZm9yIGVhY2ggaXRlbS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBSfSBbZWxlbWVudFNlbGVjdG9yXSBBIGZ1bmN0aW9uIHRoYXQgZXh0cmFjdHMgdGhlXG4gKiByZXR1cm4gZWxlbWVudCBmb3IgZWFjaCBpdGVtLlxuICogQHBhcmFtIHtmdW5jdGlvbihncm91cGVkOiBHcm91cGVkT2JzZXJ2YWJsZTxLLFI+KTogT2JzZXJ2YWJsZTxhbnk+fSBbZHVyYXRpb25TZWxlY3Rvcl1cbiAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIE9ic2VydmFibGUgdG8gZGV0ZXJtaW5lIGhvdyBsb25nIGVhY2ggZ3JvdXAgc2hvdWxkXG4gKiBleGlzdC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8R3JvdXBlZE9ic2VydmFibGU8SyxSPj59IEFuIE9ic2VydmFibGUgdGhhdCBlbWl0c1xuICogR3JvdXBlZE9ic2VydmFibGVzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSBhbmQgZWFjaFxuICogb2Ygd2hpY2ggZW1pdHMgdGhvc2UgaXRlbXMgZnJvbSB0aGUgc291cmNlIE9ic2VydmFibGUgdGhhdCBzaGFyZSB0aGF0IGtleVxuICogdmFsdWUuXG4gKiBAbWV0aG9kIGdyb3VwQnlcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncm91cEJ5KGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UubGlmdChuZXcgR3JvdXBCeU9wZXJhdG9yKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3RvcikpO1xuICAgIH07XG59XG52YXIgR3JvdXBCeU9wZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdyb3VwQnlPcGVyYXRvcihrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yLCBzdWJqZWN0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5rZXlTZWxlY3RvciA9IGtleVNlbGVjdG9yO1xuICAgICAgICB0aGlzLmVsZW1lbnRTZWxlY3RvciA9IGVsZW1lbnRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5zdWJqZWN0U2VsZWN0b3IgPSBzdWJqZWN0U2VsZWN0b3I7XG4gICAgfVxuICAgIEdyb3VwQnlPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEdyb3VwQnlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMua2V5U2VsZWN0b3IsIHRoaXMuZWxlbWVudFNlbGVjdG9yLCB0aGlzLmR1cmF0aW9uU2VsZWN0b3IsIHRoaXMuc3ViamVjdFNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBCeU9wZXJhdG9yO1xufSgpKTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgR3JvdXBCeVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoR3JvdXBCeVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR3JvdXBCeVN1YnNjcmliZXIoZGVzdGluYXRpb24sIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IsIHN1YmplY3RTZWxlY3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMua2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICAgICAgX3RoaXMuZWxlbWVudFNlbGVjdG9yID0gZWxlbWVudFNlbGVjdG9yO1xuICAgICAgICBfdGhpcy5kdXJhdGlvblNlbGVjdG9yID0gZHVyYXRpb25TZWxlY3RvcjtcbiAgICAgICAgX3RoaXMuc3ViamVjdFNlbGVjdG9yID0gc3ViamVjdFNlbGVjdG9yO1xuICAgICAgICBfdGhpcy5ncm91cHMgPSBudWxsO1xuICAgICAgICBfdGhpcy5hdHRlbXB0ZWRUb1Vuc3Vic2NyaWJlID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmNvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGtleSA9IHRoaXMua2V5U2VsZWN0b3IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9ncm91cCh2YWx1ZSwga2V5KTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5fZ3JvdXAgPSBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG4gICAgICAgIGlmICghZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMgPSB0aGlzLmdyb3VwcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHMuZ2V0KGtleSk7XG4gICAgICAgIHZhciBlbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50U2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuZWxlbWVudFNlbGVjdG9yKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFncm91cCkge1xuICAgICAgICAgICAgZ3JvdXAgPSAodGhpcy5zdWJqZWN0U2VsZWN0b3IgPyB0aGlzLnN1YmplY3RTZWxlY3RvcigpIDogbmV3IFN1YmplY3QoKSk7XG4gICAgICAgICAgICBncm91cHMuc2V0KGtleSwgZ3JvdXApO1xuICAgICAgICAgICAgdmFyIGdyb3VwZWRPYnNlcnZhYmxlID0gbmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXAsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGdyb3VwZWRPYnNlcnZhYmxlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uU2VsZWN0b3IobmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgZ3JvdXApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoZHVyYXRpb24uc3Vic2NyaWJlKG5ldyBHcm91cER1cmF0aW9uU3Vic2NyaWJlcihrZXksIGdyb3VwLCB0aGlzKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ3JvdXAuY2xvc2VkKSB7XG4gICAgICAgICAgICBncm91cC5uZXh0KGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG4gICAgICAgIGlmIChncm91cHMpIHtcbiAgICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIChncm91cCwga2V5KSB7XG4gICAgICAgICAgICAgICAgZ3JvdXAuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ3JvdXBzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgIH07XG4gICAgR3JvdXBCeVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdyb3VwcyA9IHRoaXMuZ3JvdXBzO1xuICAgICAgICBpZiAoZ3JvdXBzKSB7XG4gICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGtleSkge1xuICAgICAgICAgICAgICAgIGdyb3VwLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdyb3Vwcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIEdyb3VwQnlTdWJzY3JpYmVyLnByb3RvdHlwZS5yZW1vdmVHcm91cCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy5ncm91cHMuZGVsZXRlKGtleSk7XG4gICAgfTtcbiAgICBHcm91cEJ5U3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEdyb3VwQnlTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdyb3VwRHVyYXRpb25TdWJzY3JpYmVyKGtleSwgZ3JvdXAsIHBhcmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBncm91cCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xuICAgICAgICBfdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgR3JvdXBEdXJhdGlvblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuY29tcGxldGUoKTtcbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBHcm91cER1cmF0aW9uU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBwYXJlbnQgPSBfYS5wYXJlbnQsIGtleSA9IF9hLmtleTtcbiAgICAgICAgdGhpcy5rZXkgPSB0aGlzLnBhcmVudCA9IG51bGw7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmVHcm91cChrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBEdXJhdGlvblN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8qKlxuICogQW4gT2JzZXJ2YWJsZSByZXByZXNlbnRpbmcgdmFsdWVzIGJlbG9uZ2luZyB0byB0aGUgc2FtZSBncm91cCByZXByZXNlbnRlZCBieVxuICogYSBjb21tb24ga2V5LiBUaGUgdmFsdWVzIGVtaXR0ZWQgYnkgYSBHcm91cGVkT2JzZXJ2YWJsZSBjb21lIGZyb20gdGhlIHNvdXJjZVxuICogT2JzZXJ2YWJsZS4gVGhlIGNvbW1vbiBrZXkgaXMgYXZhaWxhYmxlIGFzIHRoZSBmaWVsZCBga2V5YCBvbiBhXG4gKiBHcm91cGVkT2JzZXJ2YWJsZSBpbnN0YW5jZS5cbiAqXG4gKiBAY2xhc3MgR3JvdXBlZE9ic2VydmFibGU8SywgVD5cbiAqL1xudmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEdyb3VwZWRPYnNlcnZhYmxlLCBfc3VwZXIpO1xuICAgIC8qKiBAZGVwcmVjYXRlZCBEbyBub3QgY29uc3RydWN0IHRoaXMgdHlwZS4gSW50ZXJuYWwgdXNlIG9ubHkgKi9cbiAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIGdyb3VwU3ViamVjdCwgcmVmQ291bnRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xuICAgICAgICBfdGhpcy5ncm91cFN1YmplY3QgPSBncm91cFN1YmplY3Q7XG4gICAgICAgIF90aGlzLnJlZkNvdW50U3Vic2NyaXB0aW9uID0gcmVmQ291bnRTdWJzY3JpcHRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlLiAqL1xuICAgIEdyb3VwZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgcmVmQ291bnRTdWJzY3JpcHRpb24gPSBfYS5yZWZDb3VudFN1YnNjcmlwdGlvbiwgZ3JvdXBTdWJqZWN0ID0gX2EuZ3JvdXBTdWJqZWN0O1xuICAgICAgICBpZiAocmVmQ291bnRTdWJzY3JpcHRpb24gJiYgIXJlZkNvdW50U3Vic2NyaXB0aW9uLmNsb3NlZCkge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmFkZChuZXcgSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbihyZWZDb3VudFN1YnNjcmlwdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbi5hZGQoZ3JvdXBTdWJqZWN0LnN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBlZE9ic2VydmFibGU7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCB7IEdyb3VwZWRPYnNlcnZhYmxlIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJbm5lclJlZkNvdW50U3Vic2NyaXB0aW9uKHBhcmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHBhcmVudC5jb3VudCsrO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIElubmVyUmVmQ291bnRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIGlmICghcGFyZW50LmNsb3NlZCAmJiAhdGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHBhcmVudC5jb3VudCAtPSAxO1xuICAgICAgICAgICAgaWYgKHBhcmVudC5jb3VudCA9PT0gMCAmJiBwYXJlbnQuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSkge1xuICAgICAgICAgICAgICAgIHBhcmVudC51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cEJ5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3ViamVjdCxfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4vU3ViamVjdCc7XG5pbXBvcnQgeyBPYmplY3RVbnN1YnNjcmliZWRFcnJvciB9IGZyb20gJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG4vKipcbiAqIEBjbGFzcyBCZWhhdmlvclN1YmplY3Q8VD5cbiAqL1xudmFyIEJlaGF2aW9yU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhCZWhhdmlvclN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmVoYXZpb3JTdWJqZWN0KF92YWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fdmFsdWUgPSBfdmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsIFwidmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBCZWhhdmlvclN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gX3N1cGVyLnByb3RvdHlwZS5fc3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24gJiYgIXN1YnNjcmlwdGlvbi5jbG9zZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh0aGlzLl92YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLnRocm93bkVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHRoaXMuX3ZhbHVlID0gdmFsdWUpO1xuICAgIH07XG4gICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CZWhhdmlvclN1YmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4uL1N1YnNjcmlwdGlvbic7XG4vKipcbiAqIEEgdW5pdCBvZiB3b3JrIHRvIGJlIGV4ZWN1dGVkIGluIGEge0BsaW5rIFNjaGVkdWxlcn0uIEFuIGFjdGlvbiBpcyB0eXBpY2FsbHlcbiAqIGNyZWF0ZWQgZnJvbSB3aXRoaW4gYSBTY2hlZHVsZXIgYW5kIGFuIFJ4SlMgdXNlciBkb2VzIG5vdCBuZWVkIHRvIGNvbmNlcm5cbiAqIHRoZW1zZWx2ZXMgYWJvdXQgY3JlYXRpbmcgYW5kIG1hbmlwdWxhdGluZyBhbiBBY3Rpb24uXG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIEFjdGlvbjxUPiBleHRlbmRzIFN1YnNjcmlwdGlvbiB7XG4gKiAgIG5ldyAoc2NoZWR1bGVyOiBTY2hlZHVsZXIsIHdvcms6IChzdGF0ZT86IFQpID0+IHZvaWQpO1xuICogICBzY2hlZHVsZShzdGF0ZT86IFQsIGRlbGF5OiBudW1iZXIgPSAwKTogU3Vic2NyaXB0aW9uO1xuICogfVxuICogYGBgXG4gKlxuICogQGNsYXNzIEFjdGlvbjxUPlxuICovXG52YXIgQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgdGhpcyBhY3Rpb24gb24gaXRzIHBhcmVudCBTY2hlZHVsZXIgZm9yIGV4ZWN1dGlvbi4gTWF5IGJlIHBhc3NlZFxuICAgICAqIHNvbWUgY29udGV4dCBvYmplY3QsIGBzdGF0ZWAuIE1heSBoYXBwZW4gYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLFxuICAgICAqIGFjY29yZGluZyB0byB0aGUgYGRlbGF5YCBwYXJhbWV0ZXIsIGlmIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge1R9IFtzdGF0ZV0gU29tZSBjb250ZXh0dWFsIGRhdGEgdGhhdCB0aGUgYHdvcmtgIGZ1bmN0aW9uIHVzZXMgd2hlblxuICAgICAqIGNhbGxlZCBieSB0aGUgU2NoZWR1bGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGVsYXldIFRpbWUgdG8gd2FpdCBiZWZvcmUgZXhlY3V0aW5nIHRoZSB3b3JrLCB3aGVyZSB0aGVcbiAgICAgKiB0aW1lIHVuaXQgaXMgaW1wbGljaXQgYW5kIGRlZmluZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIEFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gQWN0aW9uO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IEFjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWN0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfQWN0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuL0FjdGlvbic7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEFzeW5jQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFzeW5jQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFzeW5jQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgX3RoaXMud29yayA9IHdvcms7XG4gICAgICAgIF90aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmVwbGFjZSB0aGUgY3VycmVudCBzdGF0ZSB3aXRoIHRoZSBuZXcgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5pZDtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICAvL1xuICAgICAgICAvLyBJbXBvcnRhbnQgaW1wbGVtZW50YXRpb24gbm90ZTpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQWN0aW9ucyBvbmx5IGV4ZWN1dGUgb25jZSBieSBkZWZhdWx0LCB1bmxlc3MgcmVzY2hlZHVsZWQgZnJvbSB3aXRoaW4gdGhlXG4gICAgICAgIC8vIHNjaGVkdWxlZCBjYWxsYmFjay4gVGhpcyBhbGxvd3MgdXMgdG8gaW1wbGVtZW50IHNpbmdsZSBhbmQgcmVwZWF0XG4gICAgICAgIC8vIGFjdGlvbnMgdmlhIHRoZSBzYW1lIGNvZGUgcGF0aCwgd2l0aG91dCBhZGRpbmcgQVBJIHN1cmZhY2UgYXJlYSwgYXMgd2VsbFxuICAgICAgICAvLyBhcyBtaW1pYyB0cmFkaXRpb25hbCByZWN1cnNpb24gYnV0IGFjcm9zcyBhc3luY2hyb25vdXMgYm91bmRhcmllcy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSG93ZXZlciwgSlMgcnVudGltZXMgYW5kIHRpbWVycyBkaXN0aW5ndWlzaCBiZXR3ZWVuIGludGVydmFscyBhY2hpZXZlZCBieVxuICAgICAgICAvLyBzZXJpYWwgYHNldFRpbWVvdXRgIGNhbGxzIHZzLiBhIHNpbmdsZSBgc2V0SW50ZXJ2YWxgIGNhbGwuIEFuIGludGVydmFsIG9mXG4gICAgICAgIC8vIHNlcmlhbCBgc2V0VGltZW91dGAgY2FsbHMgY2FuIGJlIGluZGl2aWR1YWxseSBkZWxheWVkLCB3aGljaCBkZWxheXNcbiAgICAgICAgLy8gc2NoZWR1bGluZyB0aGUgbmV4dCBgc2V0VGltZW91dGAsIGFuZCBzbyBvbi4gYHNldEludGVydmFsYCBhdHRlbXB0cyB0b1xuICAgICAgICAvLyBndWFyYW50ZWUgdGhlIGludGVydmFsIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCBtb3JlIHByZWNpc2VseSB0byB0aGVcbiAgICAgICAgLy8gaW50ZXJ2YWwgcGVyaW9kLCByZWdhcmRsZXNzIG9mIGxvYWQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoZXJlZm9yZSwgd2UgdXNlIGBzZXRJbnRlcnZhbGAgdG8gc2NoZWR1bGUgc2luZ2xlIGFuZCByZXBlYXQgYWN0aW9ucy5cbiAgICAgICAgLy8gSWYgdGhlIGFjdGlvbiByZXNjaGVkdWxlcyBpdHNlbGYgd2l0aCB0aGUgc2FtZSBkZWxheSwgdGhlIGludGVydmFsIGlzIG5vdFxuICAgICAgICAvLyBjYW5jZWxlZC4gSWYgdGhlIGFjdGlvbiBkb2Vzbid0IHJlc2NoZWR1bGUsIG9yIHJlc2NoZWR1bGVzIHdpdGggYVxuICAgICAgICAvLyBkaWZmZXJlbnQgZGVsYXksIHRoZSBpbnRlcnZhbCB3aWxsIGJlIGNhbmNlbGVkIGFmdGVyIHNjaGVkdWxlZCBjYWxsYmFja1xuICAgICAgICAvLyBleGVjdXRpb24uXG4gICAgICAgIC8vXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHRoZSBwZW5kaW5nIGZsYWcgaW5kaWNhdGluZyB0aGF0IHRoaXMgYWN0aW9uIGhhcyBiZWVuIHNjaGVkdWxlZCwgb3JcbiAgICAgICAgLy8gaGFzIHJlY3Vyc2l2ZWx5IHJlc2NoZWR1bGVkIGl0c2VsZi5cbiAgICAgICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICAvLyBJZiB0aGlzIGFjdGlvbiBoYXMgYWxyZWFkeSBhbiBhc3luYyBJZCwgZG9uJ3QgcmVxdWVzdCBhIG5ldyBvbmUuXG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLmlkIHx8IHRoaXMucmVxdWVzdEFzeW5jSWQoc2NoZWR1bGVyLCB0aGlzLmlkLCBkZWxheSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXN5bmNBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNldEludGVydmFsKHNjaGVkdWxlci5mbHVzaC5iaW5kKHNjaGVkdWxlciwgdGhpcyksIGRlbGF5KTtcbiAgICB9O1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgYWN0aW9uIGlzIHJlc2NoZWR1bGVkIHdpdGggdGhlIHNhbWUgZGVsYXkgdGltZSwgZG9uJ3QgY2xlYXIgdGhlIGludGVydmFsIGlkLlxuICAgICAgICBpZiAoZGVsYXkgIT09IG51bGwgJiYgdGhpcy5kZWxheSA9PT0gZGVsYXkgJiYgdGhpcy5wZW5kaW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgaWYgdGhlIGFjdGlvbidzIGRlbGF5IHRpbWUgaXMgZGlmZmVyZW50IGZyb20gdGhlIGN1cnJlbnQgZGVsYXksXG4gICAgICAgIC8vIG9yIHRoZSBhY3Rpb24gaGFzIGJlZW4gcmVzY2hlZHVsZWQgYmVmb3JlIGl0J3MgZXhlY3V0ZWQsIGNsZWFyIHRoZSBpbnRlcnZhbCBpZFxuICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbChpZCkgJiYgdW5kZWZpbmVkIHx8IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEltbWVkaWF0ZWx5IGV4ZWN1dGVzIHRoaXMgYWN0aW9uIGFuZCB0aGUgYHdvcmtgIGl0IGNvbnRhaW5zLlxuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKi9cbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdleGVjdXRpbmcgYSBjYW5jZWxsZWQgYWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvciA9IHRoaXMuX2V4ZWN1dGUoc3RhdGUsIGRlbGF5KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZW5kaW5nID09PSBmYWxzZSAmJiB0aGlzLmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIERlcXVldWUgaWYgdGhlIGFjdGlvbiBkaWRuJ3QgcmVzY2hlZHVsZSBpdHNlbGYuIERvbid0IGNhbGxcbiAgICAgICAgICAgIC8vIHVuc3Vic2NyaWJlKCksIGJlY2F1c2UgdGhlIGFjdGlvbiBjb3VsZCByZXNjaGVkdWxlIGxhdGVyLlxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIC8vIHNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbiBkb1dvcmsoY291bnRlcikge1xuICAgICAgICAgICAgLy8gICAvKiAuLi4gSSdtIGEgYnVzeSB3b3JrZXIgYmVlIC4uLiAqL1xuICAgICAgICAgICAgLy8gICB2YXIgb3JpZ2luYWxBY3Rpb24gPSB0aGlzO1xuICAgICAgICAgICAgLy8gICAvKiB3YWl0IDEwMG1zIGJlZm9yZSByZXNjaGVkdWxpbmcgdGhlIGFjdGlvbiAqL1xuICAgICAgICAgICAgLy8gICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICBvcmlnaW5hbEFjdGlvbi5zY2hlZHVsZShjb3VudGVyICsgMSk7XG4gICAgICAgICAgICAvLyAgIH0sIDEwMCk7XG4gICAgICAgICAgICAvLyB9LCAxMDAwKTtcbiAgICAgICAgICAgIC8vIGBgYFxuICAgICAgICAgICAgdGhpcy5pZCA9IHRoaXMucmVjeWNsZUFzeW5jSWQodGhpcy5zY2hlZHVsZXIsIHRoaXMuaWQsIG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBc3luY0FjdGlvbi5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIHZhciBlcnJvcmVkID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvclZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53b3JrKHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXJyb3JlZCA9IHRydWU7XG4gICAgICAgICAgICBlcnJvclZhbHVlID0gISFlICYmIGUgfHwgbmV3IEVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcmVkKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3JWYWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqIEBkZXByZWNhdGVkIFRoaXMgaXMgYW4gaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlsLCBkbyBub3QgdXNlLiAqL1xuICAgIEFzeW5jQWN0aW9uLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuaWQ7XG4gICAgICAgIHZhciBzY2hlZHVsZXIgPSB0aGlzLnNjaGVkdWxlcjtcbiAgICAgICAgdmFyIGFjdGlvbnMgPSBzY2hlZHVsZXIuYWN0aW9ucztcbiAgICAgICAgdmFyIGluZGV4ID0gYWN0aW9ucy5pbmRleE9mKHRoaXMpO1xuICAgICAgICB0aGlzLndvcmsgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gbnVsbDtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgYWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmlkID0gdGhpcy5yZWN5Y2xlQXN5bmNJZChzY2hlZHVsZXIsIGlkLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbGF5ID0gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBBc3luY0FjdGlvbjtcbn0oQWN0aW9uKSk7XG5leHBvcnQgeyBBc3luY0FjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNBY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9Bc3luY0FjdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXN5bmNBY3Rpb24gfSBmcm9tICcuL0FzeW5jQWN0aW9uJztcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgUXVldWVBY3Rpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoUXVldWVBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUXVldWVBY3Rpb24oc2NoZWR1bGVyLCB3b3JrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNjaGVkdWxlciwgd29yaykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICBfdGhpcy53b3JrID0gd29yaztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBRdWV1ZUFjdGlvbi5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnNjaGVkdWxlci5mbHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBRdWV1ZUFjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgcmV0dXJuIChkZWxheSA+IDAgfHwgdGhpcy5jbG9zZWQpID9cbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXhlY3V0ZS5jYWxsKHRoaXMsIHN0YXRlLCBkZWxheSkgOlxuICAgICAgICAgICAgdGhpcy5fZXhlY3V0ZShzdGF0ZSwgZGVsYXkpO1xuICAgIH07XG4gICAgUXVldWVBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgZGVsYXkgZXhpc3RzIGFuZCBpcyBncmVhdGVyIHRoYW4gMCwgb3IgaWYgdGhlIGRlbGF5IGlzIG51bGwgKHRoZVxuICAgICAgICAvLyBhY3Rpb24gd2Fzbid0IHJlc2NoZWR1bGVkKSBidXQgd2FzIG9yaWdpbmFsbHkgc2NoZWR1bGVkIGFzIGFuIGFzeW5jXG4gICAgICAgIC8vIGFjdGlvbiwgdGhlbiByZWN5Y2xlIGFzIGFuIGFzeW5jIGFjdGlvbi5cbiAgICAgICAgaWYgKChkZWxheSAhPT0gbnVsbCAmJiBkZWxheSA+IDApIHx8IChkZWxheSA9PT0gbnVsbCAmJiB0aGlzLmRlbGF5ID4gMCkpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkLmNhbGwodGhpcywgc2NoZWR1bGVyLCBpZCwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSBmbHVzaCB0aGUgc2NoZWR1bGVyIHN0YXJ0aW5nIHdpdGggdGhpcyBhY3Rpb24uXG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuZmx1c2godGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVldWVBY3Rpb247XG59KEFzeW5jQWN0aW9uKSk7XG5leHBvcnQgeyBRdWV1ZUFjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWVBY3Rpb24uanMubWFwXG4iLCIvKipcbiAqIEFuIGV4ZWN1dGlvbiBjb250ZXh0IGFuZCBhIGRhdGEgc3RydWN0dXJlIHRvIG9yZGVyIHRhc2tzIGFuZCBzY2hlZHVsZSB0aGVpclxuICogZXhlY3V0aW9uLiBQcm92aWRlcyBhIG5vdGlvbiBvZiAocG90ZW50aWFsbHkgdmlydHVhbCkgdGltZSwgdGhyb3VnaCB0aGVcbiAqIGBub3coKWAgZ2V0dGVyIG1ldGhvZC5cbiAqXG4gKiBFYWNoIHVuaXQgb2Ygd29yayBpbiBhIFNjaGVkdWxlciBpcyBjYWxsZWQgYW4ge0BsaW5rIEFjdGlvbn0uXG4gKlxuICogYGBgdHNcbiAqIGNsYXNzIFNjaGVkdWxlciB7XG4gKiAgIG5vdygpOiBudW1iZXI7XG4gKiAgIHNjaGVkdWxlKHdvcmssIGRlbGF5Pywgc3RhdGU/KTogU3Vic2NyaXB0aW9uO1xuICogfVxuICogYGBgXG4gKlxuICogQGNsYXNzIFNjaGVkdWxlclxuICogQGRlcHJlY2F0ZWQgU2NoZWR1bGVyIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCBvZiBSeEpTLCBhbmRcbiAqIHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseS4gUmF0aGVyLCBjcmVhdGUgeW91ciBvd24gY2xhc3MgYW5kIGltcGxlbWVudFxuICoge0BsaW5rIFNjaGVkdWxlckxpa2V9XG4gKi9cbnZhciBTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2NoZWR1bGVyKFNjaGVkdWxlckFjdGlvbiwgbm93KSB7XG4gICAgICAgIGlmIChub3cgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbm93ID0gU2NoZWR1bGVyLm5vdztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLlNjaGVkdWxlckFjdGlvbiA9IFNjaGVkdWxlckFjdGlvbjtcbiAgICAgICAgdGhpcy5ub3cgPSBub3c7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIGZ1bmN0aW9uLCBgd29ya2AsIGZvciBleGVjdXRpb24uIE1heSBoYXBwZW4gYXQgc29tZSBwb2ludCBpblxuICAgICAqIHRoZSBmdXR1cmUsIGFjY29yZGluZyB0byB0aGUgYGRlbGF5YCBwYXJhbWV0ZXIsIGlmIHNwZWNpZmllZC4gTWF5IGJlIHBhc3NlZFxuICAgICAqIHNvbWUgY29udGV4dCBvYmplY3QsIGBzdGF0ZWAsIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBgd29ya2AgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGUgZ2l2ZW4gYXJndW1lbnRzIHdpbGwgYmUgcHJvY2Vzc2VkIGFuIHN0b3JlZCBhcyBhbiBBY3Rpb24gb2JqZWN0IGluIGFcbiAgICAgKiBxdWV1ZSBvZiBhY3Rpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihzdGF0ZTogP1QpOiA/U3Vic2NyaXB0aW9ufSB3b3JrIEEgZnVuY3Rpb24gcmVwcmVzZW50aW5nIGFcbiAgICAgKiB0YXNrLCBvciBzb21lIHVuaXQgb2Ygd29yayB0byBiZSBleGVjdXRlZCBieSB0aGUgU2NoZWR1bGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGVsYXldIFRpbWUgdG8gd2FpdCBiZWZvcmUgZXhlY3V0aW5nIHRoZSB3b3JrLCB3aGVyZSB0aGVcbiAgICAgKiB0aW1lIHVuaXQgaXMgaW1wbGljaXQgYW5kIGRlZmluZWQgYnkgdGhlIFNjaGVkdWxlciBpdHNlbGYuXG4gICAgICogQHBhcmFtIHtUfSBbc3RhdGVdIFNvbWUgY29udGV4dHVhbCBkYXRhIHRoYXQgdGhlIGB3b3JrYCBmdW5jdGlvbiB1c2VzIHdoZW5cbiAgICAgKiBjYWxsZWQgYnkgdGhlIFNjaGVkdWxlci5cbiAgICAgKiBAcmV0dXJuIHtTdWJzY3JpcHRpb259IEEgc3Vic2NyaXB0aW9uIGluIG9yZGVyIHRvIGJlIGFibGUgdG8gdW5zdWJzY3JpYmVcbiAgICAgKiB0aGUgc2NoZWR1bGVkIHdvcmsuXG4gICAgICovXG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuU2NoZWR1bGVyQWN0aW9uKHRoaXMsIHdvcmspLnNjaGVkdWxlKHN0YXRlLCBkZWxheSk7XG4gICAgfTtcbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBTY2hlZHVsZXIubm93ID0gRGF0ZS5ub3cgPyBEYXRlLm5vdyA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICtuZXcgRGF0ZSgpOyB9O1xuICAgIHJldHVybiBTY2hlZHVsZXI7XG59KCkpO1xuZXhwb3J0IHsgU2NoZWR1bGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TY2hlZHVsZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFNjaGVkdWxlciB9IGZyb20gJy4uL1NjaGVkdWxlcic7XG52YXIgQXN5bmNTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQXN5bmNTY2hlZHVsZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNTY2hlZHVsZXIoU2NoZWR1bGVyQWN0aW9uLCBub3cpIHtcbiAgICAgICAgaWYgKG5vdyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBub3cgPSBTY2hlZHVsZXIubm93O1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFNjaGVkdWxlckFjdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlICYmIEFzeW5jU2NoZWR1bGVyLmRlbGVnYXRlICE9PSBfdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBBc3luY1NjaGVkdWxlci5kZWxlZ2F0ZS5ub3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBub3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYWN0aW9ucyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgdGhlIFNjaGVkdWxlciBpcyBjdXJyZW50bHkgZXhlY3V0aW5nIGEgYmF0Y2ggb2ZcbiAgICAgICAgICogcXVldWVkIGFjdGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBpbnRlcm5hbCB1c2Ugb25seVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbnRlcm5hbCBJRCB1c2VkIHRvIHRyYWNrIHRoZSBsYXRlc3QgYXN5bmNocm9ub3VzIHRhc2sgc3VjaCBhcyB0aG9zZVxuICAgICAgICAgKiBjb21pbmcgZnJvbSBgc2V0VGltZW91dGAsIGBzZXRJbnRlcnZhbGAsIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgLCBhbmRcbiAgICAgICAgICogb3RoZXJzLlxuICAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBpbnRlcm5hbCB1c2Ugb25seVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2NoZWR1bGVkID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFzeW5jU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uICh3b3JrLCBkZWxheSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgJiYgQXN5bmNTY2hlZHVsZXIuZGVsZWdhdGUgIT09IHRoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBBc3luY1NjaGVkdWxlci5kZWxlZ2F0ZS5zY2hlZHVsZSh3b3JrLCBkZWxheSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuc2NoZWR1bGUuY2FsbCh0aGlzLCB3b3JrLCBkZWxheSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBc3luY1NjaGVkdWxlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChhY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgPSBhY3Rpb24uZXhlY3V0ZShhY3Rpb24uc3RhdGUsIGFjdGlvbi5kZWxheSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKTsgLy8gZXhoYXVzdCB0aGUgc2NoZWR1bGVyIHF1ZXVlXG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgd2hpbGUgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY1NjaGVkdWxlcjtcbn0oU2NoZWR1bGVyKSk7XG5leHBvcnQgeyBBc3luY1NjaGVkdWxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXN5bmNTY2hlZHVsZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXN5bmNTY2hlZHVsZXIgfSBmcm9tICcuL0FzeW5jU2NoZWR1bGVyJztcbnZhciBRdWV1ZVNjaGVkdWxlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhRdWV1ZVNjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBRdWV1ZVNjaGVkdWxlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUXVldWVTY2hlZHVsZXI7XG59KEFzeW5jU2NoZWR1bGVyKSk7XG5leHBvcnQgeyBRdWV1ZVNjaGVkdWxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UXVldWVTY2hlZHVsZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9RdWV1ZUFjdGlvbixfUXVldWVTY2hlZHVsZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgUXVldWVBY3Rpb24gfSBmcm9tICcuL1F1ZXVlQWN0aW9uJztcbmltcG9ydCB7IFF1ZXVlU2NoZWR1bGVyIH0gZnJvbSAnLi9RdWV1ZVNjaGVkdWxlcic7XG4vKipcbiAqXG4gKiBRdWV1ZSBTY2hlZHVsZXJcbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+UHV0IGV2ZXJ5IG5leHQgdGFzayBvbiBhIHF1ZXVlLCBpbnN0ZWFkIG9mIGV4ZWN1dGluZyBpdCBpbW1lZGlhdGVseTwvc3Bhbj5cbiAqXG4gKiBgcXVldWVgIHNjaGVkdWxlciwgd2hlbiB1c2VkIHdpdGggZGVsYXksIGJlaGF2ZXMgdGhlIHNhbWUgYXMge0BsaW5rIGFzeW5jfSBzY2hlZHVsZXIuXG4gKlxuICogV2hlbiB1c2VkIHdpdGhvdXQgZGVsYXksIGl0IHNjaGVkdWxlcyBnaXZlbiB0YXNrIHN5bmNocm9ub3VzbHkgLSBleGVjdXRlcyBpdCByaWdodCB3aGVuXG4gKiBpdCBpcyBzY2hlZHVsZWQuIEhvd2V2ZXIgd2hlbiBjYWxsZWQgcmVjdXJzaXZlbHksIHRoYXQgaXMgd2hlbiBpbnNpZGUgdGhlIHNjaGVkdWxlZCB0YXNrLFxuICogYW5vdGhlciB0YXNrIGlzIHNjaGVkdWxlZCB3aXRoIHF1ZXVlIHNjaGVkdWxlciwgaW5zdGVhZCBvZiBleGVjdXRpbmcgaW1tZWRpYXRlbHkgYXMgd2VsbCxcbiAqIHRoYXQgdGFzayB3aWxsIGJlIHB1dCBvbiBhIHF1ZXVlIGFuZCB3YWl0IGZvciBjdXJyZW50IG9uZSB0byBmaW5pc2guXG4gKlxuICogVGhpcyBtZWFucyB0aGF0IHdoZW4geW91IGV4ZWN1dGUgdGFzayB3aXRoIGBxdWV1ZWAgc2NoZWR1bGVyLCB5b3UgYXJlIHN1cmUgaXQgd2lsbCBlbmRcbiAqIGJlZm9yZSBhbnkgb3RoZXIgdGFzayBzY2hlZHVsZWQgd2l0aCB0aGF0IHNjaGVkdWxlciB3aWxsIHN0YXJ0LlxuICpcbiAqIEBleGFtcGxlcyA8Y2FwdGlvbj5TY2hlZHVsZSByZWN1cnNpdmVseSBmaXJzdCwgdGhlbiBkbyBzb21ldGhpbmc8L2NhcHRpb24+XG4gKlxuICogUnguU2NoZWR1bGVyLnF1ZXVlLnNjaGVkdWxlKCgpID0+IHtcbiAqICAgUnguU2NoZWR1bGVyLnF1ZXVlLnNjaGVkdWxlKCgpID0+IGNvbnNvbGUubG9nKCdzZWNvbmQnKSk7IC8vIHdpbGwgbm90IGhhcHBlbiBub3csIGJ1dCB3aWxsIGJlIHB1dCBvbiBhIHF1ZXVlXG4gKlxuICogICBjb25zb2xlLmxvZygnZmlyc3QnKTtcbiAqIH0pO1xuICpcbiAqIC8vIExvZ3M6XG4gKiAvLyBcImZpcnN0XCJcbiAqIC8vIFwic2Vjb25kXCJcbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+UmVzY2hlZHVsZSBpdHNlbGYgcmVjdXJzaXZlbHk8L2NhcHRpb24+XG4gKlxuICogUnguU2NoZWR1bGVyLnF1ZXVlLnNjaGVkdWxlKGZ1bmN0aW9uKHN0YXRlKSB7XG4gKiAgIGlmIChzdGF0ZSAhPT0gMCkge1xuICogICAgIGNvbnNvbGUubG9nKCdiZWZvcmUnLCBzdGF0ZSk7XG4gKiAgICAgdGhpcy5zY2hlZHVsZShzdGF0ZSAtIDEpOyAvLyBgdGhpc2AgcmVmZXJlbmNlcyBjdXJyZW50bHkgZXhlY3V0aW5nIEFjdGlvbixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdlIHJlc2NoZWR1bGUgd2l0aCBuZXcgc3RhdGVcbiAqICAgICBjb25zb2xlLmxvZygnYWZ0ZXInLCBzdGF0ZSk7XG4gKiAgIH1cbiAqIH0sIDAsIDMpO1xuICpcbiAqIC8vIEluIHNjaGVkdWxlciB0aGF0IHJ1bnMgcmVjdXJzaXZlbHksIHlvdSB3b3VsZCBleHBlY3Q6XG4gKiAvLyBcImJlZm9yZVwiLCAzXG4gKiAvLyBcImJlZm9yZVwiLCAyXG4gKiAvLyBcImJlZm9yZVwiLCAxXG4gKiAvLyBcImFmdGVyXCIsIDFcbiAqIC8vIFwiYWZ0ZXJcIiwgMlxuICogLy8gXCJhZnRlclwiLCAzXG4gKlxuICogLy8gQnV0IHdpdGggcXVldWUgaXQgbG9nczpcbiAqIC8vIFwiYmVmb3JlXCIsIDNcbiAqIC8vIFwiYWZ0ZXJcIiwgM1xuICogLy8gXCJiZWZvcmVcIiwgMlxuICogLy8gXCJhZnRlclwiLCAyXG4gKiAvLyBcImJlZm9yZVwiLCAxXG4gKiAvLyBcImFmdGVyXCIsIDFcbiAqXG4gKlxuICogQHN0YXRpYyB0cnVlXG4gKiBAbmFtZSBxdWV1ZVxuICogQG93bmVyIFNjaGVkdWxlclxuICovXG5leHBvcnQgdmFyIHF1ZXVlID0gLypAX19QVVJFX18qLyBuZXcgUXVldWVTY2hlZHVsZXIoUXVldWVBY3Rpb24pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVldWUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9PYnNlcnZhYmxlIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuLi9PYnNlcnZhYmxlJztcbi8qKlxuICogVGhlIHNhbWUgT2JzZXJ2YWJsZSBpbnN0YW5jZSByZXR1cm5lZCBieSBhbnkgY2FsbCB0byB7QGxpbmsgZW1wdHl9IHdpdGhvdXQgYVxuICoge0BsaW5rIFNjaGVkdWxlcn0uIEl0IGlzIHByZWZlcnJhYmxlIHRvIHVzZSB0aGlzIG92ZXIgYGVtcHR5KClgLlxuICovXG5leHBvcnQgdmFyIEVNUFRZID0gLypAX19QVVJFX18qLyBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpOyB9KTtcbi8qKlxuICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbm8gaXRlbXMgdG8gdGhlIE9ic2VydmVyIGFuZCBpbW1lZGlhdGVseVxuICogZW1pdHMgYSBjb21wbGV0ZSBub3RpZmljYXRpb24uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2NvbXBsZXRlJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAqIDwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL2VtcHR5LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcbiAqIGVtaXRzIHRoZSBjb21wbGV0ZSBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGNvbXBsZXRlLjwvY2FwdGlvbj5cbiAqIHZhciByZXN1bHQgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCkuc3RhcnRXaXRoKDcpO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5NYXAgYW5kIGZsYXR0ZW4gb25seSBvZGQgbnVtYmVycyB0byB0aGUgc2VxdWVuY2UgJ2EnLCAnYicsICdjJzwvY2FwdGlvbj5cbiAqIHZhciBpbnRlcnZhbCA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gKiB2YXIgcmVzdWx0ID0gaW50ZXJ2YWwubWVyZ2VNYXAoeCA9PlxuICogICB4ICUgMiA9PT0gMSA/IFJ4Lk9ic2VydmFibGUub2YoJ2EnLCAnYicsICdjJykgOiBSeC5PYnNlcnZhYmxlLmVtcHR5KClcbiAqICk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCkpO1xuICpcbiAqIC8vIFJlc3VsdHMgaW4gdGhlIGZvbGxvd2luZyB0byB0aGUgY29uc29sZTpcbiAqIC8vIHggaXMgZXF1YWwgdG8gdGhlIGNvdW50IG9uIHRoZSBpbnRlcnZhbCBlZygwLDEsMiwzLC4uLilcbiAqIC8vIHggd2lsbCBvY2N1ciBldmVyeSAxMDAwbXNcbiAqIC8vIGlmIHggJSAyIGlzIGVxdWFsIHRvIDEgcHJpbnQgYWJjXG4gKiAvLyBpZiB4ICUgMiBpcyBub3QgZXF1YWwgdG8gMSBub3RoaW5nIHdpbGwgYmUgb3V0cHV0XG4gKlxuICogQHNlZSB7QGxpbmsgY3JlYXRlfVxuICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gKiBAc2VlIHtAbGluayBvZn1cbiAqIEBzZWUge0BsaW5rIHRocm93fVxuICpcbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBBIHtAbGluayBJU2NoZWR1bGVyfSB0byB1c2UgZm9yIHNjaGVkdWxpbmdcbiAqIHRoZSBlbWlzc2lvbiBvZiB0aGUgY29tcGxldGUgbm90aWZpY2F0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gXCJlbXB0eVwiIE9ic2VydmFibGU6IGVtaXRzIG9ubHkgdGhlIGNvbXBsZXRlXG4gKiBub3RpZmljYXRpb24uXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIGVtcHR5XG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICogQGRlcHJlY2F0ZWQgRGVwcmVjYXRlZCBpbiBmYXZvciBvZiB1c2luZyBFTVBUWSBjb25zdGFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVtcHR5KHNjaGVkdWxlcikge1xuICAgIHJldHVybiBzY2hlZHVsZXIgPyBlbXB0eVNjaGVkdWxlZChzY2hlZHVsZXIpIDogRU1QVFk7XG59XG5leHBvcnQgZnVuY3Rpb24gZW1wdHlTY2hlZHVsZWQoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7IHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24gKCkgeyByZXR1cm4gc3Vic2NyaWJlci5jb21wbGV0ZSgpOyB9KTsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbXB0eS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NjaGVkdWxlcih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUuc2NoZWR1bGUgPT09ICdmdW5jdGlvbic7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc1NjaGVkdWxlci5qcy5tYXBcbiIsIi8qKlxuICogU3Vic2NyaWJlcyB0byBhbiBBcnJheUxpa2Ugd2l0aCBhIHN1YnNjcmliZXJcbiAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgb3IgYXJyYXktbGlrZSB0byBzdWJzY3JpYmUgdG9cbiAqL1xuLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUb0FycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChhcnJheVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVUb0FycmF5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSxfU3Vic2NyaXB0aW9uLF91dGlsX3N1YnNjcmliZVRvQXJyYXkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHN1YnNjcmliZVRvQXJyYXkgfSBmcm9tICcuLi91dGlsL3N1YnNjcmliZVRvQXJyYXknO1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21BcnJheShpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKCFzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZVRvQXJyYXkoaW5wdXQpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgdmFyIHN1YiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHN1Yi5hZGQoc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoaW5wdXRbaSsrXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWIuYWRkKHRoaXMuc2NoZWR1bGUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIHN1YjtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnJvbUFycmF5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfT2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5leHBvcnQgZnVuY3Rpb24gc2NhbGFyKHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbiAgICByZXN1bHQuX2lzU2NhbGFyID0gdHJ1ZTtcbiAgICByZXN1bHQudmFsdWUgPSB2YWx1ZTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NhbGFyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9pc1NjaGVkdWxlcixfZnJvbUFycmF5LF9lbXB0eSxfc2NhbGFyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGlzU2NoZWR1bGVyIH0gZnJvbSAnLi4vdXRpbC9pc1NjaGVkdWxlcic7XG5pbXBvcnQgeyBmcm9tQXJyYXkgfSBmcm9tICcuL2Zyb21BcnJheSc7XG5pbXBvcnQgeyBlbXB0eSB9IGZyb20gJy4vZW1wdHknO1xuaW1wb3J0IHsgc2NhbGFyIH0gZnJvbSAnLi9zY2FsYXInO1xuZXhwb3J0IGZ1bmN0aW9uIG9mKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgc2NoZWR1bGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChpc1NjaGVkdWxlcihzY2hlZHVsZXIpKSB7XG4gICAgICAgIGFyZ3MucG9wKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzY2hlZHVsZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIGVtcHR5KHNjaGVkdWxlcik7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZXIgPyBmcm9tQXJyYXkoYXJncywgc2NoZWR1bGVyKSA6IHNjYWxhcihhcmdzWzBdKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmcm9tQXJyYXkoYXJncywgc2NoZWR1bGVyKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vZi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuLyoqXG4gKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBubyBpdGVtcyB0byB0aGUgT2JzZXJ2ZXIgYW5kIGltbWVkaWF0ZWx5XG4gKiBlbWl0cyBhbiBlcnJvciBub3RpZmljYXRpb24uXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPkp1c3QgZW1pdHMgJ2Vycm9yJywgYW5kIG5vdGhpbmcgZWxzZS5cbiAqIDwvc3Bhbj5cbiAqXG4gKiA8aW1nIHNyYz1cIi4vaW1nL3Rocm93LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIFRoaXMgc3RhdGljIG9wZXJhdG9yIGlzIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBzaW1wbGUgT2JzZXJ2YWJsZSB0aGF0IG9ubHlcbiAqIGVtaXRzIHRoZSBlcnJvciBub3RpZmljYXRpb24uIEl0IGNhbiBiZSB1c2VkIGZvciBjb21wb3Npbmcgd2l0aCBvdGhlclxuICogT2JzZXJ2YWJsZXMsIHN1Y2ggYXMgaW4gYSB7QGxpbmsgbWVyZ2VNYXB9LlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkVtaXQgdGhlIG51bWJlciA3LCB0aGVuIGVtaXQgYW4gZXJyb3IuPC9jYXB0aW9uPlxuICogaW1wb3J0IHsgdGhyb3dFcnJvciwgY29uY2F0LCBvZiB9IGZyb20gJ3J4anMvY3JlYXRlJztcbiAqXG4gKiBjb25zdCByZXN1bHQgPSBjb25jYXQob2YoNyksIHRocm93RXJyb3IobmV3IEVycm9yKCdvb3BzIScpKSk7XG4gKiByZXN1bHQuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coeCksIGUgPT4gY29uc29sZS5lcnJvcihlKSk7XG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIG51bWJlcnMgdG8gdGhlIHNlcXVlbmNlICdhJywgJ2InLCAnYycsIGJ1dCB0aHJvdyBhbiBlcnJvciBmb3IgMTM8L2NhcHRpb24+XG4gKiBpbXBvcnQgeyB0aHJvd0Vycm9yLCBpbnRlcnZhbCwgb2YgfSBmcm9tICdyeGpzL2NyZWF0ZSc7XG4gKiBpbXBvcnQgeyBtZXJnZU1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbiAqXG4gKiBpbnRlcnZhbCgxMDAwKS5waXBlKFxuICogICBtZXJnZU1hcCh4ID0+IHggPT09IDEzID9cbiAqICAgICB0aHJvd0Vycm9yKCdUaGlydGVlbnMgYXJlIGJhZCcpIDpcbiAqICAgICBvZignYScsICdiJywgJ2MnKVxuICogICApXG4gKiApLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpLCBlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xuICpcbiAqIEBzZWUge0BsaW5rIGNyZWF0ZX1cbiAqIEBzZWUge0BsaW5rIGVtcHR5fVxuICogQHNlZSB7QGxpbmsgbmV2ZXJ9XG4gKiBAc2VlIHtAbGluayBvZn1cbiAqXG4gKiBAcGFyYW0ge2FueX0gZXJyb3IgVGhlIHBhcnRpY3VsYXIgRXJyb3IgdG8gcGFzcyB0byB0aGUgZXJyb3Igbm90aWZpY2F0aW9uLlxuICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIEEge0BsaW5rIElTY2hlZHVsZXJ9IHRvIHVzZSBmb3Igc2NoZWR1bGluZ1xuICogdGhlIGVtaXNzaW9uIG9mIHRoZSBlcnJvciBub3RpZmljYXRpb24uXG4gKiBAcmV0dXJuIHtPYnNlcnZhYmxlfSBBbiBlcnJvciBPYnNlcnZhYmxlOiBlbWl0cyBvbmx5IHRoZSBlcnJvciBub3RpZmljYXRpb25cbiAqIHVzaW5nIHRoZSBnaXZlbiBlcnJvciBhcmd1bWVudC5cbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgdGhyb3dcbiAqIEBvd25lciBPYnNlcnZhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0Vycm9yKGVycm9yLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoIXNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpOyB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGRpc3BhdGNoLCAwLCB7IGVycm9yOiBlcnJvciwgc3Vic2NyaWJlcjogc3Vic2NyaWJlciB9KTsgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZGlzcGF0Y2goX2EpIHtcbiAgICB2YXIgZXJyb3IgPSBfYS5lcnJvciwgc3Vic2NyaWJlciA9IF9hLnN1YnNjcmliZXI7XG4gICAgc3Vic2NyaWJlci5lcnJvcihlcnJvcik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd0Vycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfb2JzZXJ2YWJsZV9lbXB0eSxfb2JzZXJ2YWJsZV9vZixfb2JzZXJ2YWJsZV90aHJvd0Vycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGVtcHR5IH0gZnJvbSAnLi9vYnNlcnZhYmxlL2VtcHR5JztcbmltcG9ydCB7IG9mIH0gZnJvbSAnLi9vYnNlcnZhYmxlL29mJztcbmltcG9ydCB7IHRocm93RXJyb3IgfSBmcm9tICcuL29ic2VydmFibGUvdGhyb3dFcnJvcic7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBwdXNoLWJhc2VkIGV2ZW50IG9yIHZhbHVlIHRoYXQgYW4ge0BsaW5rIE9ic2VydmFibGV9IGNhbiBlbWl0LlxuICogVGhpcyBjbGFzcyBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBvcGVyYXRvcnMgdGhhdCBtYW5hZ2Ugbm90aWZpY2F0aW9ucyxcbiAqIGxpa2Uge0BsaW5rIG1hdGVyaWFsaXplfSwge0BsaW5rIGRlbWF0ZXJpYWxpemV9LCB7QGxpbmsgb2JzZXJ2ZU9ufSwgYW5kXG4gKiBvdGhlcnMuIEJlc2lkZXMgd3JhcHBpbmcgdGhlIGFjdHVhbCBkZWxpdmVyZWQgdmFsdWUsIGl0IGFsc28gYW5ub3RhdGVzIGl0XG4gKiB3aXRoIG1ldGFkYXRhIG9mLCBmb3IgaW5zdGFuY2UsIHdoYXQgdHlwZSBvZiBwdXNoIG1lc3NhZ2UgaXQgaXMgKGBuZXh0YCxcbiAqIGBlcnJvcmAsIG9yIGBjb21wbGV0ZWApLlxuICpcbiAqIEBzZWUge0BsaW5rIG1hdGVyaWFsaXplfVxuICogQHNlZSB7QGxpbmsgZGVtYXRlcmlhbGl6ZX1cbiAqIEBzZWUge0BsaW5rIG9ic2VydmVPbn1cbiAqXG4gKiBAY2xhc3MgTm90aWZpY2F0aW9uPFQ+XG4gKi9cbnZhciBOb3RpZmljYXRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTm90aWZpY2F0aW9uKGtpbmQsIHZhbHVlLCBlcnJvcikge1xuICAgICAgICB0aGlzLmtpbmQgPSBraW5kO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IGtpbmQgPT09ICdOJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsaXZlcnMgdG8gdGhlIGdpdmVuIGBvYnNlcnZlcmAgdGhlIHZhbHVlIHdyYXBwZWQgYnkgdGhpcyBOb3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiBAcmV0dXJuXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIubmV4dCAmJiBvYnNlcnZlci5uZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgY2FzZSAnRSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yICYmIG9ic2VydmVyLmVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgICAgY2FzZSAnQyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmNvbXBsZXRlICYmIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdpdmVuIHNvbWUge0BsaW5rIE9ic2VydmVyfSBjYWxsYmFja3MsIGRlbGl2ZXIgdGhlIHZhbHVlIHJlcHJlc2VudGVkIGJ5IHRoZVxuICAgICAqIGN1cnJlbnQgTm90aWZpY2F0aW9uIHRvIHRoZSBjb3JyZWN0bHkgY29ycmVzcG9uZGluZyBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHZhbHVlOiBUKTogdm9pZH0gbmV4dCBBbiBPYnNlcnZlciBgbmV4dGAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihlcnI6IGFueSk6IHZvaWR9IFtlcnJvcl0gQW4gT2JzZXJ2ZXIgYGVycm9yYCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IHZvaWR9IFtjb21wbGV0ZV0gQW4gT2JzZXJ2ZXIgYGNvbXBsZXRlYCBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJuIHthbnl9XG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIGtpbmQgPSB0aGlzLmtpbmQ7XG4gICAgICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICAgICAgY2FzZSAnTic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQgJiYgbmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIGNhc2UgJ0UnOlxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvciAmJiBlcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZSAmJiBjb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUYWtlcyBhbiBPYnNlcnZlciBvciBpdHMgaW5kaXZpZHVhbCBjYWxsYmFjayBmdW5jdGlvbnMsIGFuZCBjYWxscyBgb2JzZXJ2ZWBcbiAgICAgKiBvciBgZG9gIG1ldGhvZHMgYWNjb3JkaW5nbHkuXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcnxmdW5jdGlvbih2YWx1ZTogVCk6IHZvaWR9IG5leHRPck9ic2VydmVyIEFuIE9ic2VydmVyIG9yXG4gICAgICogdGhlIGBuZXh0YCBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGVycjogYW55KTogdm9pZH0gW2Vycm9yXSBBbiBPYnNlcnZlciBgZXJyb3JgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gW2NvbXBsZXRlXSBBbiBPYnNlcnZlciBgY29tcGxldGVgIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm4ge2FueX1cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciAmJiB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIubmV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZShuZXh0T3JPYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kbyhuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNpbXBsZSBPYnNlcnZhYmxlIHRoYXQganVzdCBkZWxpdmVycyB0aGUgbm90aWZpY2F0aW9uIHJlcHJlc2VudGVkXG4gICAgICogYnkgdGhpcyBOb3RpZmljYXRpb24gaW5zdGFuY2UuXG4gICAgICogQHJldHVybiB7YW55fVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9PYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2luZCA9IHRoaXMua2luZDtcbiAgICAgICAgc3dpdGNoIChraW5kKSB7XG4gICAgICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gb2YodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBjYXNlICdFJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhyb3dFcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgICAgIGNhc2UgJ0MnOlxuICAgICAgICAgICAgICAgIHJldHVybiBlbXB0eSgpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBub3RpZmljYXRpb24ga2luZCB2YWx1ZScpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBzaG9ydGN1dCB0byBjcmVhdGUgYSBOb3RpZmljYXRpb24gaW5zdGFuY2Ugb2YgdGhlIHR5cGUgYG5leHRgIGZyb20gYVxuICAgICAqIGdpdmVuIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVGhlIGBuZXh0YCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcIm5leHRcIiBOb3RpZmljYXRpb24gcmVwcmVzZW50aW5nIHRoZVxuICAgICAqIGFyZ3VtZW50LlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm90aWZpY2F0aW9uKCdOJywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOb3RpZmljYXRpb24udW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgZXJyb3JgIGZyb20gYVxuICAgICAqIGdpdmVuIGVycm9yLlxuICAgICAqIEBwYXJhbSB7YW55fSBbZXJyXSBUaGUgYGVycm9yYCBlcnJvci5cbiAgICAgKiBAcmV0dXJuIHtOb3RpZmljYXRpb248VD59IFRoZSBcImVycm9yXCIgTm90aWZpY2F0aW9uIHJlcHJlc2VudGluZyB0aGVcbiAgICAgKiBhcmd1bWVudC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb24oJ0UnLCB1bmRlZmluZWQsIGVycik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHNob3J0Y3V0IHRvIGNyZWF0ZSBhIE5vdGlmaWNhdGlvbiBpbnN0YW5jZSBvZiB0aGUgdHlwZSBgY29tcGxldGVgLlxuICAgICAqIEByZXR1cm4ge05vdGlmaWNhdGlvbjxhbnk+fSBUaGUgdmFsdWVsZXNzIFwiY29tcGxldGVcIiBOb3RpZmljYXRpb24uXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb247XG4gICAgfTtcbiAgICBOb3RpZmljYXRpb24uY29tcGxldGVOb3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCdDJyk7XG4gICAgTm90aWZpY2F0aW9uLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbignTicsIHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBOb3RpZmljYXRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU5vdGlmaWNhdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIsX05vdGlmaWNhdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uIH0gZnJvbSAnLi4vTm90aWZpY2F0aW9uJztcbi8qKlxuICpcbiAqIFJlLWVtaXRzIGFsbCBub3RpZmljYXRpb25zIGZyb20gc291cmNlIE9ic2VydmFibGUgd2l0aCBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5FbnN1cmUgYSBzcGVjaWZpYyBzY2hlZHVsZXIgaXMgdXNlZCwgZnJvbSBvdXRzaWRlIG9mIGFuIE9ic2VydmFibGUuPC9zcGFuPlxuICpcbiAqIGBvYnNlcnZlT25gIGlzIGFuIG9wZXJhdG9yIHRoYXQgYWNjZXB0cyBhIHNjaGVkdWxlciBhcyBhIGZpcnN0IHBhcmFtZXRlciwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIHJlc2NoZWR1bGVcbiAqIG5vdGlmaWNhdGlvbnMgZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUuIEl0IG1pZ2h0IGJlIHVzZWZ1bCwgaWYgeW91IGRvIG5vdCBoYXZlIGNvbnRyb2wgb3ZlclxuICogaW50ZXJuYWwgc2NoZWR1bGVyIG9mIGEgZ2l2ZW4gT2JzZXJ2YWJsZSwgYnV0IHdhbnQgdG8gY29udHJvbCB3aGVuIGl0cyB2YWx1ZXMgYXJlIGVtaXR0ZWQgbmV2ZXJ0aGVsZXNzLlxuICpcbiAqIFJldHVybmVkIE9ic2VydmFibGUgZW1pdHMgdGhlIHNhbWUgbm90aWZpY2F0aW9ucyAobmV4dGVkIHZhbHVlcywgY29tcGxldGUgYW5kIGVycm9yIGV2ZW50cykgYXMgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLFxuICogYnV0IHJlc2NoZWR1bGVkIHdpdGggcHJvdmlkZWQgc2NoZWR1bGVyLiBOb3RlIHRoYXQgdGhpcyBkb2Vzbid0IG1lYW4gdGhhdCBzb3VyY2UgT2JzZXJ2YWJsZXMgaW50ZXJuYWxcbiAqIHNjaGVkdWxlciB3aWxsIGJlIHJlcGxhY2VkIGluIGFueSB3YXkuIE9yaWdpbmFsIHNjaGVkdWxlciBzdGlsbCB3aWxsIGJlIHVzZWQsIGJ1dCB3aGVuIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBlbWl0c1xuICogbm90aWZpY2F0aW9uLCBpdCB3aWxsIGJlIGltbWVkaWF0ZWx5IHNjaGVkdWxlZCBhZ2FpbiAtIHRoaXMgdGltZSB3aXRoIHNjaGVkdWxlciBwYXNzZWQgdG8gYG9ic2VydmVPbmAuXG4gKiBBbiBhbnRpLXBhdHRlcm4gd291bGQgYmUgY2FsbGluZyBgb2JzZXJ2ZU9uYCBvbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgbG90cyBvZiB2YWx1ZXMgc3luY2hyb25vdXNseSwgdG8gc3BsaXRcbiAqIHRoYXQgZW1pc3Npb25zIGludG8gYXN5bmNocm9ub3VzIGNodW5rcy4gRm9yIHRoaXMgdG8gaGFwcGVuLCBzY2hlZHVsZXIgd291bGQgaGF2ZSB0byBiZSBwYXNzZWQgaW50byB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIGRpcmVjdGx5ICh1c3VhbGx5IGludG8gdGhlIG9wZXJhdG9yIHRoYXQgY3JlYXRlcyBpdCkuIGBvYnNlcnZlT25gIHNpbXBseSBkZWxheXMgbm90aWZpY2F0aW9ucyBhXG4gKiBsaXR0bGUgYml0IG1vcmUsIHRvIGVuc3VyZSB0aGF0IHRoZXkgYXJlIGVtaXR0ZWQgYXQgZXhwZWN0ZWQgbW9tZW50cy5cbiAqXG4gKiBBcyBhIG1hdHRlciBvZiBmYWN0LCBgb2JzZXJ2ZU9uYCBhY2NlcHRzIHNlY29uZCBwYXJhbWV0ZXIsIHdoaWNoIHNwZWNpZmllcyBpbiBtaWxsaXNlY29uZHMgd2l0aCB3aGF0IGRlbGF5IG5vdGlmaWNhdGlvbnNcbiAqIHdpbGwgYmUgZW1pdHRlZC4gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIHtAbGluayBkZWxheX0gb3BlcmF0b3IgYW5kIGBvYnNlcnZlT25gIGlzIHRoYXQgYG9ic2VydmVPbmBcbiAqIHdpbGwgZGVsYXkgYWxsIG5vdGlmaWNhdGlvbnMgLSBpbmNsdWRpbmcgZXJyb3Igbm90aWZpY2F0aW9ucyAtIHdoaWxlIGBkZWxheWAgd2lsbCBwYXNzIHRocm91Z2ggZXJyb3JcbiAqIGZyb20gc291cmNlIE9ic2VydmFibGUgaW1tZWRpYXRlbHkgd2hlbiBpdCBpcyBlbWl0dGVkLiBJbiBnZW5lcmFsIGl0IGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgYGRlbGF5YCBvcGVyYXRvclxuICogZm9yIGFueSBraW5kIG9mIGRlbGF5aW5nIG9mIHZhbHVlcyBpbiB0aGUgc3RyZWFtLCB3aGlsZSB1c2luZyBgb2JzZXJ2ZU9uYCB0byBzcGVjaWZ5IHdoaWNoIHNjaGVkdWxlciBzaG91bGQgYmUgdXNlZFxuICogZm9yIG5vdGlmaWNhdGlvbiBlbWlzc2lvbnMgaW4gZ2VuZXJhbC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5FbnN1cmUgdmFsdWVzIGluIHN1YnNjcmliZSBhcmUgY2FsbGVkIGp1c3QgYmVmb3JlIGJyb3dzZXIgcmVwYWludC48L2NhcHRpb24+XG4gKiBjb25zdCBpbnRlcnZhbHMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwKTsgLy8gSW50ZXJ2YWxzIGFyZSBzY2hlZHVsZWRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGFzeW5jIHNjaGVkdWxlciBieSBkZWZhdWx0Li4uXG4gKlxuICogaW50ZXJ2YWxzXG4gKiAub2JzZXJ2ZU9uKFJ4LlNjaGVkdWxlci5hbmltYXRpb25GcmFtZSkgICAgICAgLy8gLi4uYnV0IHdlIHdpbGwgb2JzZXJ2ZSBvbiBhbmltYXRpb25GcmFtZVxuICogLnN1YnNjcmliZSh2YWwgPT4geyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjaGVkdWxlciB0byBlbnN1cmUgc21vb3RoIGFuaW1hdGlvbi5cbiAqICAgc29tZURpdi5zdHlsZS5oZWlnaHQgPSB2YWwgKyAncHgnO1xuICogfSk7XG4gKlxuICogQHNlZSB7QGxpbmsgZGVsYXl9XG4gKlxuICogQHBhcmFtIHtTY2hlZHVsZXJMaWtlfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRoYXQgd2lsbCBiZSB1c2VkIHRvIHJlc2NoZWR1bGUgbm90aWZpY2F0aW9ucyBmcm9tIHNvdXJjZSBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtkZWxheV0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IHN0YXRlcyB3aXRoIHdoYXQgZGVsYXkgZXZlcnkgbm90aWZpY2F0aW9uIHNob3VsZCBiZSByZXNjaGVkdWxlZC5cbiAqIEByZXR1cm4ge09ic2VydmFibGU8VD59IE9ic2VydmFibGUgdGhhdCBlbWl0cyB0aGUgc2FtZSBub3RpZmljYXRpb25zIGFzIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSxcbiAqIGJ1dCB3aXRoIHByb3ZpZGVkIHNjaGVkdWxlci5cbiAqXG4gKiBAbWV0aG9kIG9ic2VydmVPblxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9ic2VydmVPbihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgICAgZGVsYXkgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gb2JzZXJ2ZU9uT3BlcmF0b3JGdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBPYnNlcnZlT25PcGVyYXRvcihzY2hlZHVsZXIsIGRlbGF5KSk7XG4gICAgfTtcbn1cbnZhciBPYnNlcnZlT25PcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYnNlcnZlT25PcGVyYXRvcihzY2hlZHVsZXIsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGVsYXkgPSBkZWxheTtcbiAgICB9XG4gICAgT2JzZXJ2ZU9uT3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBPYnNlcnZlT25TdWJzY3JpYmVyKHN1YnNjcmliZXIsIHRoaXMuc2NoZWR1bGVyLCB0aGlzLmRlbGF5KSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2ZU9uT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2ZU9uT3BlcmF0b3IgfTtcbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgT2JzZXJ2ZU9uU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhPYnNlcnZlT25TdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNjaGVkdWxlciwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICBfdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIuZGlzcGF0Y2ggPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSBhcmcubm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbiA9IGFyZy5kZXN0aW5hdGlvbjtcbiAgICAgICAgbm90aWZpY2F0aW9uLm9ic2VydmUoZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5zY2hlZHVsZU1lc3NhZ2UgPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKE9ic2VydmVPblN1YnNjcmliZXIuZGlzcGF0Y2gsIHRoaXMuZGVsYXksIG5ldyBPYnNlcnZlT25NZXNzYWdlKG5vdGlmaWNhdGlvbiwgdGhpcy5kZXN0aW5hdGlvbikpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHZhbHVlKSk7XG4gICAgfTtcbiAgICBPYnNlcnZlT25TdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVNZXNzYWdlKE5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvcihlcnIpKTtcbiAgICB9O1xuICAgIE9ic2VydmVPblN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU1lc3NhZ2UoTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmVPblN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IE9ic2VydmVPblN1YnNjcmliZXIgfTtcbnZhciBPYnNlcnZlT25NZXNzYWdlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk1lc3NhZ2Uobm90aWZpY2F0aW9uLCBkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICByZXR1cm4gT2JzZXJ2ZU9uTWVzc2FnZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZlT25NZXNzYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlT24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJqZWN0LF9zY2hlZHVsZXJfcXVldWUsX1N1YnNjcmlwdGlvbixfb3BlcmF0b3JzX29ic2VydmVPbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4vU3ViamVjdCc7XG5pbXBvcnQgeyBxdWV1ZSB9IGZyb20gJy4vc2NoZWR1bGVyL3F1ZXVlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9ic2VydmVPblN1YnNjcmliZXIgfSBmcm9tICcuL29wZXJhdG9ycy9vYnNlcnZlT24nO1xuaW1wb3J0IHsgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgfSBmcm9tICcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuaW1wb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3ViamVjdFN1YnNjcmlwdGlvbic7XG4vKipcbiAqIEBjbGFzcyBSZXBsYXlTdWJqZWN0PFQ+XG4gKi9cbnZhciBSZXBsYXlTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFJlcGxheVN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgICAgaWYgKGJ1ZmZlclNpemUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93VGltZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB3aW5kb3dUaW1lID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgX3RoaXMuX2V2ZW50cyA9IFtdO1xuICAgICAgICBfdGhpcy5faW5maW5pdGVUaW1lV2luZG93ID0gZmFsc2U7XG4gICAgICAgIF90aGlzLl9idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA8IDEgPyAxIDogYnVmZmVyU2l6ZTtcbiAgICAgICAgX3RoaXMuX3dpbmRvd1RpbWUgPSB3aW5kb3dUaW1lIDwgMSA/IDEgOiB3aW5kb3dUaW1lO1xuICAgICAgICBpZiAod2luZG93VGltZSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XG4gICAgICAgICAgICBfdGhpcy5faW5maW5pdGVUaW1lV2luZG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLm5leHQgPSBfdGhpcy5uZXh0SW5maW5pdGVUaW1lV2luZG93O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMubmV4dCA9IF90aGlzLm5leHRUaW1lV2luZG93O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUmVwbGF5U3ViamVjdC5wcm90b3R5cGUubmV4dEluZmluaXRlVGltZVdpbmRvdyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgX2V2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgICAgX2V2ZW50cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgLy8gU2luY2UgdGhpcyBtZXRob2QgaXMgaW52b2tlZCBpbiBldmVyeSBuZXh0KCkgY2FsbCB0aGFuIHRoZSBidWZmZXJcbiAgICAgICAgLy8gY2FuIG92ZXJncm93IHRoZSBtYXggc2l6ZSBvbmx5IGJ5IG9uZSBpdGVtXG4gICAgICAgIGlmIChfZXZlbnRzLmxlbmd0aCA+IHRoaXMuX2J1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIF9ldmVudHMuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5uZXh0VGltZVdpbmRvdyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9ldmVudHMucHVzaChuZXcgUmVwbGF5RXZlbnQodGhpcy5fZ2V0Tm93KCksIHZhbHVlKSk7XG4gICAgICAgIHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICB9O1xuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgLy8gV2hlbiBgX2luZmluaXRlVGltZVdpbmRvdyA9PT0gdHJ1ZWAgdGhlbiB0aGUgYnVmZmVyIGlzIGFscmVhZHkgdHJpbW1lZFxuICAgICAgICB2YXIgX2luZmluaXRlVGltZVdpbmRvdyA9IHRoaXMuX2luZmluaXRlVGltZVdpbmRvdztcbiAgICAgICAgdmFyIF9ldmVudHMgPSBfaW5maW5pdGVUaW1lV2luZG93ID8gdGhpcy5fZXZlbnRzIDogdGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMoKTtcbiAgICAgICAgdmFyIHNjaGVkdWxlciA9IHRoaXMuc2NoZWR1bGVyO1xuICAgICAgICB2YXIgbGVuID0gX2V2ZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb247XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQgfHwgdGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlZHVsZXIpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuYWRkKHN1YnNjcmliZXIgPSBuZXcgT2JzZXJ2ZU9uU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzY2hlZHVsZXIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX2luZmluaXRlVGltZVdpbmRvdykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gJiYgIXN1YnNjcmliZXIuY2xvc2VkOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoX2V2ZW50c1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbiAmJiAhc3Vic2NyaWJlci5jbG9zZWQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChfZXZlbnRzW2ldLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aGlzLnRocm93bkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBSZXBsYXlTdWJqZWN0LnByb3RvdHlwZS5fZ2V0Tm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuc2NoZWR1bGVyIHx8IHF1ZXVlKS5ub3coKTtcbiAgICB9O1xuICAgIFJlcGxheVN1YmplY3QucHJvdG90eXBlLl90cmltQnVmZmVyVGhlbkdldEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuX2dldE5vdygpO1xuICAgICAgICB2YXIgX2J1ZmZlclNpemUgPSB0aGlzLl9idWZmZXJTaXplO1xuICAgICAgICB2YXIgX3dpbmRvd1RpbWUgPSB0aGlzLl93aW5kb3dUaW1lO1xuICAgICAgICB2YXIgX2V2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgICAgdmFyIGV2ZW50c0NvdW50ID0gX2V2ZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBzcGxpY2VDb3VudCA9IDA7XG4gICAgICAgIC8vIFRyaW0gZXZlbnRzIHRoYXQgZmFsbCBvdXQgb2YgdGhlIHRpbWUgd2luZG93LlxuICAgICAgICAvLyBTdGFydCBhdCB0aGUgZnJvbnQgb2YgdGhlIGxpc3QuIEJyZWFrIGVhcmx5IG9uY2VcbiAgICAgICAgLy8gd2UgZW5jb3VudGVyIGFuIGV2ZW50IHRoYXQgZmFsbHMgd2l0aGluIHRoZSB3aW5kb3cuXG4gICAgICAgIHdoaWxlIChzcGxpY2VDb3VudCA8IGV2ZW50c0NvdW50KSB7XG4gICAgICAgICAgICBpZiAoKG5vdyAtIF9ldmVudHNbc3BsaWNlQ291bnRdLnRpbWUpIDwgX3dpbmRvd1RpbWUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwbGljZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50c0NvdW50ID4gX2J1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIHNwbGljZUNvdW50ID0gTWF0aC5tYXgoc3BsaWNlQ291bnQsIGV2ZW50c0NvdW50IC0gX2J1ZmZlclNpemUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGxpY2VDb3VudCA+IDApIHtcbiAgICAgICAgICAgIF9ldmVudHMuc3BsaWNlKDAsIHNwbGljZUNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2V2ZW50cztcbiAgICB9O1xuICAgIHJldHVybiBSZXBsYXlTdWJqZWN0O1xufShTdWJqZWN0KSk7XG5leHBvcnQgeyBSZXBsYXlTdWJqZWN0IH07XG52YXIgUmVwbGF5RXZlbnQgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVwbGF5RXZlbnQodGltZSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gUmVwbGF5RXZlbnQ7XG59KCkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVwbGF5U3ViamVjdC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YmplY3QsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJy4vU3ViamVjdCc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG4vKipcbiAqIEBjbGFzcyBBc3luY1N1YmplY3Q8VD5cbiAqL1xudmFyIEFzeW5jU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBc3luY1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXN5bmNTdWJqZWN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5oYXNOZXh0ID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmhhc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGFuIGludGVybmFsIGltcGxlbWVudGF0aW9uIGRldGFpbCwgZG8gbm90IHVzZS4gKi9cbiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aGlzLnRocm93bkVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNDb21wbGV0ZWQgJiYgdGhpcy5oYXNOZXh0KSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmhhc05leHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBc3luY1N1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuaGFzTmV4dCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcywgdGhpcy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQXN5bmNTdWJqZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3luY1N1YmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgbmV4dEhhbmRsZSA9IDE7XG52YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgIHZhciBjYiA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICBpZiAoY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICB9XG59XG5leHBvcnQgdmFyIEltbWVkaWF0ZSA9IHtcbiAgICBzZXRJbW1lZGlhdGU6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICB2YXIgaGFuZGxlID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2hhbmRsZV0gPSBjYjtcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgfSxcbiAgICBjbGVhckltbWVkaWF0ZTogZnVuY3Rpb24gKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1tZWRpYXRlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9JbW1lZGlhdGUsX0FzeW5jQWN0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJbW1lZGlhdGUgfSBmcm9tICcuLi91dGlsL0ltbWVkaWF0ZSc7XG5pbXBvcnQgeyBBc3luY0FjdGlvbiB9IGZyb20gJy4vQXN5bmNBY3Rpb24nO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBBc2FwQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFzYXBBY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXNhcEFjdGlvbihzY2hlZHVsZXIsIHdvcmspIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2NoZWR1bGVyLCB3b3JrKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIF90aGlzLndvcmsgPSB3b3JrO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFzYXBBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgZGVsYXkgaXMgZ3JlYXRlciB0aGFuIDAsIHJlcXVlc3QgYXMgYW4gYXN5bmMgYWN0aW9uLlxuICAgICAgICBpZiAoZGVsYXkgIT09IG51bGwgJiYgZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZC5jYWxsKHRoaXMsIHNjaGVkdWxlciwgaWQsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQdXNoIHRoZSBhY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgc2NoZWR1bGVyIHF1ZXVlLlxuICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuICAgICAgICAvLyBJZiBhIG1pY3JvdGFzayBoYXMgYWxyZWFkeSBiZWVuIHNjaGVkdWxlZCwgZG9uJ3Qgc2NoZWR1bGUgYW5vdGhlclxuICAgICAgICAvLyBvbmUuIElmIGEgbWljcm90YXNrIGhhc24ndCBiZWVuIHNjaGVkdWxlZCB5ZXQsIHNjaGVkdWxlIG9uZSBub3cuIFJldHVyblxuICAgICAgICAvLyB0aGUgY3VycmVudCBzY2hlZHVsZWQgbWljcm90YXNrIGlkLlxuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlZCB8fCAoc2NoZWR1bGVyLnNjaGVkdWxlZCA9IEltbWVkaWF0ZS5zZXRJbW1lZGlhdGUoc2NoZWR1bGVyLmZsdXNoLmJpbmQoc2NoZWR1bGVyLCBudWxsKSkpO1xuICAgIH07XG4gICAgQXNhcEFjdGlvbi5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQgPSBmdW5jdGlvbiAoc2NoZWR1bGVyLCBpZCwgZGVsYXkpIHtcbiAgICAgICAgaWYgKGRlbGF5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBkZWxheSBleGlzdHMgYW5kIGlzIGdyZWF0ZXIgdGhhbiAwLCBvciBpZiB0aGUgZGVsYXkgaXMgbnVsbCAodGhlXG4gICAgICAgIC8vIGFjdGlvbiB3YXNuJ3QgcmVzY2hlZHVsZWQpIGJ1dCB3YXMgb3JpZ2luYWxseSBzY2hlZHVsZWQgYXMgYW4gYXN5bmNcbiAgICAgICAgLy8gYWN0aW9uLCB0aGVuIHJlY3ljbGUgYXMgYW4gYXN5bmMgYWN0aW9uLlxuICAgICAgICBpZiAoKGRlbGF5ICE9PSBudWxsICYmIGRlbGF5ID4gMCkgfHwgKGRlbGF5ID09PSBudWxsICYmIHRoaXMuZGVsYXkgPiAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUucmVjeWNsZUFzeW5jSWQuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIGlkLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHNjaGVkdWxlciBxdWV1ZSBpcyBlbXB0eSwgY2FuY2VsIHRoZSByZXF1ZXN0ZWQgbWljcm90YXNrIGFuZFxuICAgICAgICAvLyBzZXQgdGhlIHNjaGVkdWxlZCBmbGFnIHRvIHVuZGVmaW5lZCBzbyB0aGUgbmV4dCBBc2FwQWN0aW9uIHdpbGwgc2NoZWR1bGVcbiAgICAgICAgLy8gaXRzIG93bi5cbiAgICAgICAgaWYgKHNjaGVkdWxlci5hY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgSW1tZWRpYXRlLmNsZWFySW1tZWRpYXRlKGlkKTtcbiAgICAgICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV0dXJuIHVuZGVmaW5lZCBzbyB0aGUgYWN0aW9uIGtub3dzIHRvIHJlcXVlc3QgYSBuZXcgYXN5bmMgaWQgaWYgaXQncyByZXNjaGVkdWxlZC5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHJldHVybiBBc2FwQWN0aW9uO1xufShBc3luY0FjdGlvbikpO1xuZXhwb3J0IHsgQXNhcEFjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNhcEFjdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX0FzeW5jU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBBc3luY1NjaGVkdWxlciB9IGZyb20gJy4vQXN5bmNTY2hlZHVsZXInO1xudmFyIEFzYXBTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQXNhcFNjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBc2FwU2NoZWR1bGVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIEFzYXBTY2hlZHVsZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgYWN0aW9ucyA9IHRoaXMuYWN0aW9ucztcbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGNvdW50ID0gYWN0aW9ucy5sZW5ndGg7XG4gICAgICAgIGFjdGlvbiA9IGFjdGlvbiB8fCBhY3Rpb25zLnNoaWZ0KCk7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmIChlcnJvciA9IGFjdGlvbi5leGVjdXRlKGFjdGlvbi5zdGF0ZSwgYWN0aW9uLmRlbGF5KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlICgrK2luZGV4IDwgY291bnQgJiYgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSkpO1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgY291bnQgJiYgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSkpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXNhcFNjaGVkdWxlcjtcbn0oQXN5bmNTY2hlZHVsZXIpKTtcbmV4cG9ydCB7IEFzYXBTY2hlZHVsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzYXBTY2hlZHVsZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9Bc2FwQWN0aW9uLF9Bc2FwU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IEFzYXBBY3Rpb24gfSBmcm9tICcuL0FzYXBBY3Rpb24nO1xuaW1wb3J0IHsgQXNhcFNjaGVkdWxlciB9IGZyb20gJy4vQXNhcFNjaGVkdWxlcic7XG4vKipcbiAqXG4gKiBBc2FwIFNjaGVkdWxlclxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5QZXJmb3JtIHRhc2sgYXMgZmFzdCBhcyBpdCBjYW4gYmUgcGVyZm9ybWVkIGFzeW5jaHJvbm91c2x5PC9zcGFuPlxuICpcbiAqIGBhc2FwYCBzY2hlZHVsZXIgYmVoYXZlcyB0aGUgc2FtZSBhcyB7QGxpbmsgYXN5bmN9IHNjaGVkdWxlciB3aGVuIHlvdSB1c2UgaXQgdG8gZGVsYXkgdGFza1xuICogaW4gdGltZS4gSWYgaG93ZXZlciB5b3Ugc2V0IGRlbGF5IHRvIGAwYCwgYGFzYXBgIHdpbGwgd2FpdCBmb3IgY3VycmVudCBzeW5jaHJvbm91c2x5IGV4ZWN1dGluZ1xuICogY29kZSB0byBlbmQgYW5kIHRoZW4gaXQgd2lsbCB0cnkgdG8gZXhlY3V0ZSBnaXZlbiB0YXNrIGFzIGZhc3QgYXMgcG9zc2libGUuXG4gKlxuICogYGFzYXBgIHNjaGVkdWxlciB3aWxsIGRvIGl0cyBiZXN0IHRvIG1pbmltaXplIHRpbWUgYmV0d2VlbiBlbmQgb2YgY3VycmVudGx5IGV4ZWN1dGluZyBjb2RlXG4gKiBhbmQgc3RhcnQgb2Ygc2NoZWR1bGVkIHRhc2suIFRoaXMgbWFrZXMgaXQgYmVzdCBjYW5kaWRhdGUgZm9yIHBlcmZvcm1pbmcgc28gY2FsbGVkIFwiZGVmZXJyaW5nXCIuXG4gKiBUcmFkaXRpb25hbGx5IHRoaXMgd2FzIGFjaGlldmVkIGJ5IGNhbGxpbmcgYHNldFRpbWVvdXQoZGVmZXJyZWRUYXNrLCAwKWAsIGJ1dCB0aGF0IHRlY2huaXF1ZSBpbnZvbHZlc1xuICogc29tZSAoYWx0aG91Z2ggbWluaW1hbCkgdW53YW50ZWQgZGVsYXkuXG4gKlxuICogTm90ZSB0aGF0IHVzaW5nIGBhc2FwYCBzY2hlZHVsZXIgZG9lcyBub3QgbmVjZXNzYXJpbHkgbWVhbiB0aGF0IHlvdXIgdGFzayB3aWxsIGJlIGZpcnN0IHRvIHByb2Nlc3NcbiAqIGFmdGVyIGN1cnJlbnRseSBleGVjdXRpbmcgY29kZS4gSW4gcGFydGljdWxhciwgaWYgc29tZSB0YXNrIHdhcyBhbHNvIHNjaGVkdWxlZCB3aXRoIGBhc2FwYCBiZWZvcmUsXG4gKiB0aGF0IHRhc2sgd2lsbCBleGVjdXRlIGZpcnN0LiBUaGF0IGJlaW5nIHNhaWQsIGlmIHlvdSBuZWVkIHRvIHNjaGVkdWxlIHRhc2sgYXN5bmNocm9ub3VzbHksIGJ1dFxuICogYXMgc29vbiBhcyBwb3NzaWJsZSwgYGFzYXBgIHNjaGVkdWxlciBpcyB5b3VyIGJlc3QgYmV0LlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPkNvbXBhcmUgYXN5bmMgYW5kIGFzYXAgc2NoZWR1bGVyPC9jYXB0aW9uPlxuICpcbiAqIFJ4LlNjaGVkdWxlci5hc3luYy5zY2hlZHVsZSgoKSA9PiBjb25zb2xlLmxvZygnYXN5bmMnKSk7IC8vIHNjaGVkdWxpbmcgJ2FzeW5jJyBmaXJzdC4uLlxuICogUnguU2NoZWR1bGVyLmFzYXAuc2NoZWR1bGUoKCkgPT4gY29uc29sZS5sb2coJ2FzYXAnKSk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIFwiYXNhcFwiXG4gKiAvLyBcImFzeW5jXCJcbiAqIC8vIC4uLiBidXQgJ2FzYXAnIGdvZXMgZmlyc3QhXG4gKlxuICogQHN0YXRpYyB0cnVlXG4gKiBAbmFtZSBhc2FwXG4gKiBAb3duZXIgU2NoZWR1bGVyXG4gKi9cbmV4cG9ydCB2YXIgYXNhcCA9IC8qQF9fUFVSRV9fKi8gbmV3IEFzYXBTY2hlZHVsZXIoQXNhcEFjdGlvbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc2FwLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfQXN5bmNBY3Rpb24sX0FzeW5jU2NoZWR1bGVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IEFzeW5jQWN0aW9uIH0gZnJvbSAnLi9Bc3luY0FjdGlvbic7XG5pbXBvcnQgeyBBc3luY1NjaGVkdWxlciB9IGZyb20gJy4vQXN5bmNTY2hlZHVsZXInO1xuLyoqXG4gKlxuICogQXN5bmMgU2NoZWR1bGVyXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPlNjaGVkdWxlIHRhc2sgYXMgaWYgeW91IHVzZWQgc2V0VGltZW91dCh0YXNrLCBkdXJhdGlvbik8L3NwYW4+XG4gKlxuICogYGFzeW5jYCBzY2hlZHVsZXIgc2NoZWR1bGVzIHRhc2tzIGFzeW5jaHJvbm91c2x5LCBieSBwdXR0aW5nIHRoZW0gb24gdGhlIEphdmFTY3JpcHRcbiAqIGV2ZW50IGxvb3AgcXVldWUuIEl0IGlzIGJlc3QgdXNlZCB0byBkZWxheSB0YXNrcyBpbiB0aW1lIG9yIHRvIHNjaGVkdWxlIHRhc2tzIHJlcGVhdGluZ1xuICogaW4gaW50ZXJ2YWxzLlxuICpcbiAqIElmIHlvdSBqdXN0IHdhbnQgdG8gXCJkZWZlclwiIHRhc2ssIHRoYXQgaXMgdG8gcGVyZm9ybSBpdCByaWdodCBhZnRlciBjdXJyZW50bHlcbiAqIGV4ZWN1dGluZyBzeW5jaHJvbm91cyBjb2RlIGVuZHMgKGNvbW1vbmx5IGFjaGlldmVkIGJ5IGBzZXRUaW1lb3V0KGRlZmVycmVkVGFzaywgMClgKSxcbiAqIGJldHRlciBjaG9pY2Ugd2lsbCBiZSB0aGUge0BsaW5rIGFzYXB9IHNjaGVkdWxlci5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Vc2UgYXN5bmMgc2NoZWR1bGVyIHRvIGRlbGF5IHRhc2s8L2NhcHRpb24+XG4gKiBjb25zdCB0YXNrID0gKCkgPT4gY29uc29sZS5sb2coJ2l0IHdvcmtzIScpO1xuICpcbiAqIFJ4LlNjaGVkdWxlci5hc3luYy5zY2hlZHVsZSh0YXNrLCAyMDAwKTtcbiAqXG4gKiAvLyBBZnRlciAyIHNlY29uZHMgbG9nczpcbiAqIC8vIFwiaXQgd29ya3MhXCJcbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VXNlIGFzeW5jIHNjaGVkdWxlciB0byByZXBlYXQgdGFzayBpbiBpbnRlcnZhbHM8L2NhcHRpb24+XG4gKiBmdW5jdGlvbiB0YXNrKHN0YXRlKSB7XG4gKiAgIGNvbnNvbGUubG9nKHN0YXRlKTtcbiAqICAgdGhpcy5zY2hlZHVsZShzdGF0ZSArIDEsIDEwMDApOyAvLyBgdGhpc2AgcmVmZXJlbmNlcyBjdXJyZW50bHkgZXhlY3V0aW5nIEFjdGlvbixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCB3ZSByZXNjaGVkdWxlIHdpdGggbmV3IHN0YXRlIGFuZCBkZWxheVxuICogfVxuICpcbiAqIFJ4LlNjaGVkdWxlci5hc3luYy5zY2hlZHVsZSh0YXNrLCAzMDAwLCAwKTtcbiAqXG4gKiAvLyBMb2dzOlxuICogLy8gMCBhZnRlciAzc1xuICogLy8gMSBhZnRlciA0c1xuICogLy8gMiBhZnRlciA1c1xuICogLy8gMyBhZnRlciA2c1xuICpcbiAqIEBzdGF0aWMgdHJ1ZVxuICogQG5hbWUgYXN5bmNcbiAqIEBvd25lciBTY2hlZHVsZXJcbiAqL1xuZXhwb3J0IHZhciBhc3luYyA9IC8qQF9fUFVSRV9fKi8gbmV3IEFzeW5jU2NoZWR1bGVyKEFzeW5jQWN0aW9uKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzeW5jLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfQXN5bmNBY3Rpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEFzeW5jQWN0aW9uIH0gZnJvbSAnLi9Bc3luY0FjdGlvbic7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIEFuaW1hdGlvbkZyYW1lQWN0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFuaW1hdGlvbkZyYW1lQWN0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFuaW1hdGlvbkZyYW1lQWN0aW9uKHNjaGVkdWxlciwgd29yaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzY2hlZHVsZXIsIHdvcmspIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgX3RoaXMud29yayA9IHdvcms7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5pbWF0aW9uRnJhbWVBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgZGVsYXkgaXMgZ3JlYXRlciB0aGFuIDAsIHJlcXVlc3QgYXMgYW4gYXN5bmMgYWN0aW9uLlxuICAgICAgICBpZiAoZGVsYXkgIT09IG51bGwgJiYgZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5yZXF1ZXN0QXN5bmNJZC5jYWxsKHRoaXMsIHNjaGVkdWxlciwgaWQsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQdXNoIHRoZSBhY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgc2NoZWR1bGVyIHF1ZXVlLlxuICAgICAgICBzY2hlZHVsZXIuYWN0aW9ucy5wdXNoKHRoaXMpO1xuICAgICAgICAvLyBJZiBhbiBhbmltYXRpb24gZnJhbWUgaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWQsIGRvbid0IHJlcXVlc3QgYW5vdGhlclxuICAgICAgICAvLyBvbmUuIElmIGFuIGFuaW1hdGlvbiBmcmFtZSBoYXNuJ3QgYmVlbiByZXF1ZXN0ZWQgeWV0LCByZXF1ZXN0IG9uZS4gUmV0dXJuXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBmcmFtZSByZXF1ZXN0IGlkLlxuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlZCB8fCAoc2NoZWR1bGVyLnNjaGVkdWxlZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7IHJldHVybiBzY2hlZHVsZXIuZmx1c2gobnVsbCk7IH0pKTtcbiAgICB9O1xuICAgIEFuaW1hdGlvbkZyYW1lQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGRlbGF5IGV4aXN0cyBhbmQgaXMgZ3JlYXRlciB0aGFuIDAsIG9yIGlmIHRoZSBkZWxheSBpcyBudWxsICh0aGVcbiAgICAgICAgLy8gYWN0aW9uIHdhc24ndCByZXNjaGVkdWxlZCkgYnV0IHdhcyBvcmlnaW5hbGx5IHNjaGVkdWxlZCBhcyBhbiBhc3luY1xuICAgICAgICAvLyBhY3Rpb24sIHRoZW4gcmVjeWNsZSBhcyBhbiBhc3luYyBhY3Rpb24uXG4gICAgICAgIGlmICgoZGVsYXkgIT09IG51bGwgJiYgZGVsYXkgPiAwKSB8fCAoZGVsYXkgPT09IG51bGwgJiYgdGhpcy5kZWxheSA+IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZC5jYWxsKHRoaXMsIHNjaGVkdWxlciwgaWQsIGRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgc2NoZWR1bGVyIHF1ZXVlIGlzIGVtcHR5LCBjYW5jZWwgdGhlIHJlcXVlc3RlZCBhbmltYXRpb24gZnJhbWUgYW5kXG4gICAgICAgIC8vIHNldCB0aGUgc2NoZWR1bGVkIGZsYWcgdG8gdW5kZWZpbmVkIHNvIHRoZSBuZXh0IEFuaW1hdGlvbkZyYW1lQWN0aW9uIHdpbGxcbiAgICAgICAgLy8gcmVxdWVzdCBpdHMgb3duLlxuICAgICAgICBpZiAoc2NoZWR1bGVyLmFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCk7XG4gICAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB1bmRlZmluZWQgc28gdGhlIGFjdGlvbiBrbm93cyB0byByZXF1ZXN0IGEgbmV3IGFzeW5jIGlkIGlmIGl0J3MgcmVzY2hlZHVsZWQuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQW5pbWF0aW9uRnJhbWVBY3Rpb247XG59KEFzeW5jQWN0aW9uKSk7XG5leHBvcnQgeyBBbmltYXRpb25GcmFtZUFjdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QW5pbWF0aW9uRnJhbWVBY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXN5bmNTY2hlZHVsZXIgfSBmcm9tICcuL0FzeW5jU2NoZWR1bGVyJztcbnZhciBBbmltYXRpb25GcmFtZVNjaGVkdWxlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBbmltYXRpb25GcmFtZVNjaGVkdWxlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbmltYXRpb25GcmFtZVNjaGVkdWxlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBBbmltYXRpb25GcmFtZVNjaGVkdWxlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBhY3Rpb25zID0gdGhpcy5hY3Rpb25zO1xuICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgY291bnQgPSBhY3Rpb25zLmxlbmd0aDtcbiAgICAgICAgYWN0aW9uID0gYWN0aW9uIHx8IGFjdGlvbnMuc2hpZnQoKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKGVycm9yID0gYWN0aW9uLmV4ZWN1dGUoYWN0aW9uLnN0YXRlLCBhY3Rpb24uZGVsYXkpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKCsraW5kZXggPCBjb3VudCAmJiAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSk7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBjb3VudCAmJiAoYWN0aW9uID0gYWN0aW9ucy5zaGlmdCgpKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBbmltYXRpb25GcmFtZVNjaGVkdWxlcjtcbn0oQXN5bmNTY2hlZHVsZXIpKTtcbmV4cG9ydCB7IEFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BbmltYXRpb25GcmFtZVNjaGVkdWxlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX0FuaW1hdGlvbkZyYW1lQWN0aW9uLF9BbmltYXRpb25GcmFtZVNjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBBbmltYXRpb25GcmFtZUFjdGlvbiB9IGZyb20gJy4vQW5pbWF0aW9uRnJhbWVBY3Rpb24nO1xuaW1wb3J0IHsgQW5pbWF0aW9uRnJhbWVTY2hlZHVsZXIgfSBmcm9tICcuL0FuaW1hdGlvbkZyYW1lU2NoZWR1bGVyJztcbi8qKlxuICpcbiAqIEFuaW1hdGlvbiBGcmFtZSBTY2hlZHVsZXJcbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+UGVyZm9ybSB0YXNrIHdoZW4gYHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIHdvdWxkIGZpcmU8L3NwYW4+XG4gKlxuICogV2hlbiBgYW5pbWF0aW9uRnJhbWVgIHNjaGVkdWxlciBpcyB1c2VkIHdpdGggZGVsYXksIGl0IHdpbGwgZmFsbCBiYWNrIHRvIHtAbGluayBhc3luY30gc2NoZWR1bGVyXG4gKiBiZWhhdmlvdXIuXG4gKlxuICogV2l0aG91dCBkZWxheSwgYGFuaW1hdGlvbkZyYW1lYCBzY2hlZHVsZXIgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIHNtb290aCBicm93c2VyIGFuaW1hdGlvbnMuXG4gKiBJdCBtYWtlcyBzdXJlIHNjaGVkdWxlZCB0YXNrIHdpbGwgaGFwcGVuIGp1c3QgYmVmb3JlIG5leHQgYnJvd3NlciBjb250ZW50IHJlcGFpbnQsXG4gKiB0aHVzIHBlcmZvcm1pbmcgYW5pbWF0aW9ucyBhcyBlZmZpY2llbnRseSBhcyBwb3NzaWJsZS5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5TY2hlZHVsZSBkaXYgaGVpZ2h0IGFuaW1hdGlvbjwvY2FwdGlvbj5cbiAqIGNvbnN0IGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb21lLWRpdicpO1xuICpcbiAqIFJ4LlNjaGVkdWxlci5hbmltYXRpb25GcmFtZS5zY2hlZHVsZShmdW5jdGlvbihoZWlnaHQpIHtcbiAqICAgZGl2LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAqXG4gKiAgIHRoaXMuc2NoZWR1bGUoaGVpZ2h0ICsgMSk7ICAvLyBgdGhpc2AgcmVmZXJlbmNlcyBjdXJyZW50bHkgZXhlY3V0aW5nIEFjdGlvbixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdlIHJlc2NoZWR1bGUgd2l0aCBuZXcgc3RhdGVcbiAqIH0sIDAsIDApO1xuICpcbiAqIC8vIFlvdSB3aWxsIHNlZSAuc29tZS1kaXYgZWxlbWVudCBncm93aW5nIGluIGhlaWdodFxuICpcbiAqXG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIGFuaW1hdGlvbkZyYW1lXG4gKiBAb3duZXIgU2NoZWR1bGVyXG4gKi9cbmV4cG9ydCB2YXIgYW5pbWF0aW9uRnJhbWUgPSAvKkBfX1BVUkVfXyovIG5ldyBBbmltYXRpb25GcmFtZVNjaGVkdWxlcihBbmltYXRpb25GcmFtZUFjdGlvbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmltYXRpb25GcmFtZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX0FzeW5jQWN0aW9uLF9Bc3luY1NjaGVkdWxlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQXN5bmNBY3Rpb24gfSBmcm9tICcuL0FzeW5jQWN0aW9uJztcbmltcG9ydCB7IEFzeW5jU2NoZWR1bGVyIH0gZnJvbSAnLi9Bc3luY1NjaGVkdWxlcic7XG52YXIgVmlydHVhbFRpbWVTY2hlZHVsZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVmlydHVhbFRpbWVTY2hlZHVsZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmlydHVhbFRpbWVTY2hlZHVsZXIoU2NoZWR1bGVyQWN0aW9uLCBtYXhGcmFtZXMpIHtcbiAgICAgICAgaWYgKFNjaGVkdWxlckFjdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBTY2hlZHVsZXJBY3Rpb24gPSBWaXJ0dWFsQWN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhGcmFtZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbWF4RnJhbWVzID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFNjaGVkdWxlckFjdGlvbiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZnJhbWU7IH0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm1heEZyYW1lcyA9IG1heEZyYW1lcztcbiAgICAgICAgX3RoaXMuZnJhbWUgPSAwO1xuICAgICAgICBfdGhpcy5pbmRleCA9IC0xO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb21wdCB0aGUgU2NoZWR1bGVyIHRvIGV4ZWN1dGUgYWxsIG9mIGl0cyBxdWV1ZWQgYWN0aW9ucywgdGhlcmVmb3JlXG4gICAgICogY2xlYXJpbmcgaXRzIHF1ZXVlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXIucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBhY3Rpb25zID0gX2EuYWN0aW9ucywgbWF4RnJhbWVzID0gX2EubWF4RnJhbWVzO1xuICAgICAgICB2YXIgZXJyb3IsIGFjdGlvbjtcbiAgICAgICAgd2hpbGUgKChhY3Rpb24gPSBhY3Rpb25zLnNoaWZ0KCkpICYmICh0aGlzLmZyYW1lID0gYWN0aW9uLmRlbGF5KSA8PSBtYXhGcmFtZXMpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciA9IGFjdGlvbi5leGVjdXRlKGFjdGlvbi5zdGF0ZSwgYWN0aW9uLmRlbGF5KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgd2hpbGUgKGFjdGlvbiA9IGFjdGlvbnMuc2hpZnQoKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyLmZyYW1lVGltZUZhY3RvciA9IDEwO1xuICAgIHJldHVybiBWaXJ0dWFsVGltZVNjaGVkdWxlcjtcbn0oQXN5bmNTY2hlZHVsZXIpKTtcbmV4cG9ydCB7IFZpcnR1YWxUaW1lU2NoZWR1bGVyIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFZpcnR1YWxBY3Rpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVmlydHVhbEFjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBWaXJ0dWFsQWN0aW9uKHNjaGVkdWxlciwgd29yaywgaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGluZGV4ID0gc2NoZWR1bGVyLmluZGV4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2NoZWR1bGVyLCB3b3JrKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIF90aGlzLndvcmsgPSB3b3JrO1xuICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICBfdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBfdGhpcy5pbmRleCA9IHNjaGVkdWxlci5pbmRleCA9IGluZGV4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFZpcnR1YWxBY3Rpb24ucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pZCkge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuc2NoZWR1bGUuY2FsbCh0aGlzLCBzdGF0ZSwgZGVsYXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIC8vIElmIGFuIGFjdGlvbiBpcyByZXNjaGVkdWxlZCwgd2Ugc2F2ZSBhbGxvY2F0aW9ucyBieSBtdXRhdGluZyBpdHMgc3RhdGUsXG4gICAgICAgIC8vIHB1c2hpbmcgaXQgdG8gdGhlIGVuZCBvZiB0aGUgc2NoZWR1bGVyIHF1ZXVlLCBhbmQgcmVjeWNsaW5nIHRoZSBhY3Rpb24uXG4gICAgICAgIC8vIEJ1dCBzaW5jZSB0aGUgVmlydHVhbFRpbWVTY2hlZHVsZXIgaXMgdXNlZCBmb3IgdGVzdGluZywgVmlydHVhbEFjdGlvbnNcbiAgICAgICAgLy8gbXVzdCBiZSBpbW11dGFibGUgc28gdGhleSBjYW4gYmUgaW5zcGVjdGVkIGxhdGVyLlxuICAgICAgICB2YXIgYWN0aW9uID0gbmV3IFZpcnR1YWxBY3Rpb24odGhpcy5zY2hlZHVsZXIsIHRoaXMud29yayk7XG4gICAgICAgIHRoaXMuYWRkKGFjdGlvbik7XG4gICAgICAgIHJldHVybiBhY3Rpb24uc2NoZWR1bGUoc3RhdGUsIGRlbGF5KTtcbiAgICB9O1xuICAgIFZpcnR1YWxBY3Rpb24ucHJvdG90eXBlLnJlcXVlc3RBc3luY0lkID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgaWQsIGRlbGF5KSB7XG4gICAgICAgIGlmIChkZWxheSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWxheSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWxheSA9IHNjaGVkdWxlci5mcmFtZSArIGRlbGF5O1xuICAgICAgICB2YXIgYWN0aW9ucyA9IHNjaGVkdWxlci5hY3Rpb25zO1xuICAgICAgICBhY3Rpb25zLnB1c2godGhpcyk7XG4gICAgICAgIGFjdGlvbnMuc29ydChWaXJ0dWFsQWN0aW9uLnNvcnRBY3Rpb25zKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBWaXJ0dWFsQWN0aW9uLnByb3RvdHlwZS5yZWN5Y2xlQXN5bmNJZCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIGlkLCBkZWxheSkge1xuICAgICAgICBpZiAoZGVsYXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBWaXJ0dWFsQWN0aW9uLnByb3RvdHlwZS5fZXhlY3V0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZGVsYXkpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fZXhlY3V0ZS5jYWxsKHRoaXMsIHN0YXRlLCBkZWxheSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFZpcnR1YWxBY3Rpb24uc29ydEFjdGlvbnMgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBpZiAoYS5kZWxheSA9PT0gYi5kZWxheSkge1xuICAgICAgICAgICAgaWYgKGEuaW5kZXggPT09IGIuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGEuaW5kZXggPiBiLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYS5kZWxheSA+IGIuZGVsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVmlydHVhbEFjdGlvbjtcbn0oQXN5bmNBY3Rpb24pKTtcbmV4cG9ydCB7IFZpcnR1YWxBY3Rpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpcnR1YWxUaW1lU2NoZWR1bGVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuLyoqXG4gKiBBbiBlcnJvciB0aHJvd24gd2hlbiBhbiBlbGVtZW50IHdhcyBxdWVyaWVkIGF0IGEgY2VydGFpbiBpbmRleCBvZiBhblxuICogT2JzZXJ2YWJsZSwgYnV0IG5vIHN1Y2ggaW5kZXggb3IgcG9zaXRpb24gZXhpc3RzIGluIHRoYXQgc2VxdWVuY2UuXG4gKlxuICogQHNlZSB7QGxpbmsgZWxlbWVudEF0fVxuICogQHNlZSB7QGxpbmsgdGFrZX1cbiAqIEBzZWUge0BsaW5rIHRha2VMYXN0fVxuICpcbiAqIEBjbGFzcyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvclxuICovXG52YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdhcmd1bWVudCBvdXQgb2YgcmFuZ2UnKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBBcmd1bWVudE91dE9mUmFuZ2VFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCB7IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bcmd1bWVudE91dE9mUmFuZ2VFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gYW4gT2JzZXJ2YWJsZSBvciBhIHNlcXVlbmNlIHdhcyBxdWVyaWVkIGJ1dCBoYXMgbm9cbiAqIGVsZW1lbnRzLlxuICpcbiAqIEBzZWUge0BsaW5rIGZpcnN0fVxuICogQHNlZSB7QGxpbmsgbGFzdH1cbiAqIEBzZWUge0BsaW5rIHNpbmdsZX1cbiAqXG4gKiBAY2xhc3MgRW1wdHlFcnJvclxuICovXG52YXIgRW1wdHlFcnJvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhFbXB0eUVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtcHR5RXJyb3IoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdubyBlbGVtZW50cyBpbiBzZXF1ZW5jZScpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSAnRW1wdHlFcnJvcic7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgRW1wdHlFcnJvci5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBFbXB0eUVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgRW1wdHlFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RW1wdHlFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbi8qKlxuICogQW4gZXJyb3IgdGhyb3duIHdoZW4gZHVldGltZSBlbGFwc2VzLlxuICpcbiAqIEBzZWUge0BsaW5rIHRpbWVvdXR9XG4gKlxuICogQGNsYXNzIFRpbWVvdXRFcnJvclxuICovXG52YXIgVGltZW91dEVycm9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFRpbWVvdXRFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBUaW1lb3V0RXJyb3IoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdUaW1lb3V0IGhhcyBvY2N1cnJlZCcpIHx8IHRoaXM7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihfdGhpcywgVGltZW91dEVycm9yLnByb3RvdHlwZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFRpbWVvdXRFcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCB7IFRpbWVvdXRFcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGltZW91dEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuLyoqXG4gKiBBcHBsaWVzIGEgZ2l2ZW4gYHByb2plY3RgIGZ1bmN0aW9uIHRvIGVhY2ggdmFsdWUgZW1pdHRlZCBieSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlLCBhbmQgZW1pdHMgdGhlIHJlc3VsdGluZyB2YWx1ZXMgYXMgYW4gT2JzZXJ2YWJsZS5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+TGlrZSBbQXJyYXkucHJvdG90eXBlLm1hcCgpXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9tYXApLFxuICogaXQgcGFzc2VzIGVhY2ggc291cmNlIHZhbHVlIHRocm91Z2ggYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBnZXRcbiAqIGNvcnJlc3BvbmRpbmcgb3V0cHV0IHZhbHVlcy48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tYXAucG5nXCIgd2lkdGg9XCIxMDAlXCI+XG4gKlxuICogU2ltaWxhciB0byB0aGUgd2VsbCBrbm93biBgQXJyYXkucHJvdG90eXBlLm1hcGAgZnVuY3Rpb24sIHRoaXMgb3BlcmF0b3JcbiAqIGFwcGxpZXMgYSBwcm9qZWN0aW9uIHRvIGVhY2ggdmFsdWUgYW5kIGVtaXRzIHRoYXQgcHJvamVjdGlvbiBpbiB0aGUgb3V0cHV0XG4gKiBPYnNlcnZhYmxlLlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPk1hcCBldmVyeSBjbGljayB0byB0aGUgY2xpZW50WCBwb3NpdGlvbiBvZiB0aGF0IGNsaWNrPC9jYXB0aW9uPlxuICogdmFyIGNsaWNrcyA9IFJ4Lk9ic2VydmFibGUuZnJvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snKTtcbiAqIHZhciBwb3NpdGlvbnMgPSBjbGlja3MubWFwKGV2ID0+IGV2LmNsaWVudFgpO1xuICogcG9zaXRpb25zLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiBAc2VlIHtAbGluayBtYXBUb31cbiAqIEBzZWUge0BsaW5rIHBsdWNrfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsIGluZGV4OiBudW1iZXIpOiBSfSBwcm9qZWN0IFRoZSBmdW5jdGlvbiB0byBhcHBseVxuICogdG8gZWFjaCBgdmFsdWVgIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLiBUaGUgYGluZGV4YCBwYXJhbWV0ZXIgaXNcbiAqIHRoZSBudW1iZXIgYGlgIGZvciB0aGUgaS10aCBlbWlzc2lvbiB0aGF0IGhhcyBoYXBwZW5lZCBzaW5jZSB0aGVcbiAqIHN1YnNjcmlwdGlvbiwgc3RhcnRpbmcgZnJvbSB0aGUgbnVtYmVyIGAwYC5cbiAqIEBwYXJhbSB7YW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgYXJndW1lbnQgdG8gZGVmaW5lIHdoYXQgYHRoaXNgIGlzIGluIHRoZVxuICogYHByb2plY3RgIGZ1bmN0aW9uLlxuICogQHJldHVybiB7T2JzZXJ2YWJsZTxSPn0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBPYnNlcnZhYmxlIHRyYW5zZm9ybWVkIGJ5IHRoZSBnaXZlbiBgcHJvamVjdGAgZnVuY3Rpb24uXG4gKiBAbWV0aG9kIG1hcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hcE9wZXJhdGlvbihzb3VyY2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9qZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4gQXJlIHlvdSBsb29raW5nIGZvciBgbWFwVG8oKWA/Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZS5saWZ0KG5ldyBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSk7XG4gICAgfTtcbn1cbnZhciBNYXBPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXBPcGVyYXRvcihwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XG4gICAgICAgIHRoaXMudGhpc0FyZyA9IHRoaXNBcmc7XG4gICAgfVxuICAgIE1hcE9wZXJhdG9yLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHN1YnNjcmliZXIsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgTWFwU3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnByb2plY3QsIHRoaXMudGhpc0FyZykpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydCB7IE1hcE9wZXJhdG9yIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1hcFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoTWFwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgX3RoaXMuY291bnQgPSAwO1xuICAgICAgICBfdGhpcy50aGlzQXJnID0gdGhpc0FyZyB8fCBfdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvLyBOT1RFOiBUaGlzIGxvb2tzIHVub3B0aW1pemVkLCBidXQgaXQncyBhY3R1YWxseSBwdXJwb3NlZnVsbHkgTk9UXG4gICAgLy8gdXNpbmcgdHJ5L2NhdGNoIG9wdGltaXphdGlvbnMuXG4gICAgTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucHJvamVjdC5jYWxsKHRoaXMudGhpc0FyZywgdmFsdWUsIHRoaXMuY291bnQrKyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBPdXRlclN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoT3V0ZXJTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE91dGVyU3Vic2NyaWJlcigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGlubmVyVmFsdWUpO1xuICAgIH07XG4gICAgT3V0ZXJTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnJvcik7XG4gICAgfTtcbiAgICBPdXRlclN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICB9O1xuICAgIHJldHVybiBPdXRlclN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IE91dGVyU3Vic2NyaWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3V0ZXJTdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4vU3Vic2NyaWJlcic7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIElubmVyU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhJbm5lclN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJTdWJzY3JpYmVyKHBhcmVudCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIF90aGlzLm91dGVyVmFsdWUgPSBvdXRlclZhbHVlO1xuICAgICAgICBfdGhpcy5vdXRlckluZGV4ID0gb3V0ZXJJbmRleDtcbiAgICAgICAgX3RoaXMuaW5kZXggPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQubm90aWZ5TmV4dCh0aGlzLm91dGVyVmFsdWUsIHZhbHVlLCB0aGlzLm91dGVySW5kZXgsIHRoaXMuaW5kZXgrKywgdGhpcyk7XG4gICAgfTtcbiAgICBJbm5lclN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlFcnJvcihlcnJvciwgdGhpcyk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIElubmVyU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBhcmVudC5ub3RpZnlDb21wbGV0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIElubmVyU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgSW5uZXJTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Jbm5lclN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi9ob3N0UmVwb3J0RXJyb3InO1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUb1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIXN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHN1YnNjcmliZXIuZXJyb3IoZXJyKTsgfSlcbiAgICAgICAgICAgIC50aGVuKG51bGwsIGhvc3RSZXBvcnRFcnJvcik7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3Vic2NyaWJlVG9Qcm9taXNlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN5bWJvbEl0ZXJhdG9yKCkge1xuICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nIHx8ICFTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuICdAQGl0ZXJhdG9yJztcbiAgICB9XG4gICAgcmV0dXJuIFN5bWJvbC5pdGVyYXRvcjtcbn1cbmV4cG9ydCB2YXIgaXRlcmF0b3IgPSAvKkBfX1BVUkVfXyovIGdldFN5bWJvbEl0ZXJhdG9yKCk7XG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSB7QGxpbmsgaXRlcmF0b3J9IGluc3RlYWRcbiAqL1xuZXhwb3J0IHZhciAkJGl0ZXJhdG9yID0gaXRlcmF0b3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVyYXRvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3N5bWJvbF9pdGVyYXRvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBpdGVyYXRvciBhcyBTeW1ib2xfaXRlcmF0b3IgfSBmcm9tICcuLi9zeW1ib2wvaXRlcmF0b3InO1xuZXhwb3J0IHZhciBzdWJzY3JpYmVUb0l0ZXJhYmxlID0gZnVuY3Rpb24gKGl0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhYmxlW1N5bWJvbF9pdGVyYXRvcl0oKTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAoaXRlbS5kb25lKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRydWUpO1xuICAgICAgICAvLyBGaW5hbGl6ZSB0aGUgaXRlcmF0b3IgaWYgaXQgaGFwcGVucyB0byBiZSBhIEdlbmVyYXRvclxuICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLnJldHVybiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVUb0l0ZXJhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfc3ltYm9sX29ic2VydmFibGUgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbi8qKlxuICogU3Vic2NyaWJlcyB0byBhbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIFN5bWJvbC5vYnNlcnZhYmxlIHdpdGggdGhlIGdpdmVuXG4gKiBTdWJzY3JpYmVyLlxuICogQHBhcmFtIG9iaiBBbiBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIFN5bWJvbC5vYnNlcnZhYmxlXG4gKi9cbmV4cG9ydCB2YXIgc3Vic2NyaWJlVG9PYnNlcnZhYmxlID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgb2JzID0gb2JqW1N5bWJvbF9vYnNlcnZhYmxlXSgpO1xuICAgICAgICBpZiAodHlwZW9mIG9icy5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIFNob3VsZCBiZSBjYXVnaHQgYnkgb2JzZXJ2YWJsZSBzdWJzY3JpYmUgZnVuY3Rpb24gZXJyb3IgaGFuZGxpbmcuXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm92aWRlZCBvYmplY3QgZG9lcyBub3QgY29ycmVjdGx5IGltcGxlbWVudCBTeW1ib2wub2JzZXJ2YWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9icy5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvT2JzZXJ2YWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheUxpa2UgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeCAhPT0gJ2Z1bmN0aW9uJzsgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FycmF5TGlrZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb21pc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX09ic2VydmFibGUsX3N1YnNjcmliZVRvQXJyYXksX3N1YnNjcmliZVRvUHJvbWlzZSxfc3Vic2NyaWJlVG9JdGVyYWJsZSxfc3Vic2NyaWJlVG9PYnNlcnZhYmxlLF9pc0FycmF5TGlrZSxfaXNQcm9taXNlLF9pc09iamVjdCxfc3ltYm9sX2l0ZXJhdG9yLF9zeW1ib2xfb2JzZXJ2YWJsZSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBzdWJzY3JpYmVUb0FycmF5IH0gZnJvbSAnLi9zdWJzY3JpYmVUb0FycmF5JztcbmltcG9ydCB7IHN1YnNjcmliZVRvUHJvbWlzZSB9IGZyb20gJy4vc3Vic2NyaWJlVG9Qcm9taXNlJztcbmltcG9ydCB7IHN1YnNjcmliZVRvSXRlcmFibGUgfSBmcm9tICcuL3N1YnNjcmliZVRvSXRlcmFibGUnO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9PYnNlcnZhYmxlIH0gZnJvbSAnLi9zdWJzY3JpYmVUb09ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNBcnJheUxpa2UgfSBmcm9tICcuL2lzQXJyYXlMaWtlJztcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gJy4vaXNQcm9taXNlJztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi9pc09iamVjdCc7XG5pbXBvcnQgeyBpdGVyYXRvciBhcyBTeW1ib2xfaXRlcmF0b3IgfSBmcm9tICcuLi9zeW1ib2wvaXRlcmF0b3InO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbmV4cG9ydCB2YXIgc3Vic2NyaWJlVG8gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9ic2VydmFibGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0Ll9pc1NjYWxhcikge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dChyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvQXJyYXkocmVzdWx0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZVRvUHJvbWlzZShyZXN1bHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtTeW1ib2xfaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVUb0l0ZXJhYmxlKHJlc3VsdCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0W1N5bWJvbF9vYnNlcnZhYmxlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlVG9PYnNlcnZhYmxlKHJlc3VsdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdmFsdWUgPSBpc09iamVjdChyZXN1bHQpID8gJ2FuIGludmFsaWQgb2JqZWN0JyA6IFwiJ1wiICsgcmVzdWx0ICsgXCInXCI7XG4gICAgICAgIHZhciBtc2cgPSBcIllvdSBwcm92aWRlZCBcIiArIHZhbHVlICsgXCIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLlwiXG4gICAgICAgICAgICArICcgWW91IGNhbiBwcm92aWRlIGFuIE9ic2VydmFibGUsIFByb21pc2UsIEFycmF5LCBvciBJdGVyYWJsZS4nO1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG1zZyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN1YnNjcmliZVRvLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfSW5uZXJTdWJzY3JpYmVyLF9zdWJzY3JpYmVUbyBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBJbm5lclN1YnNjcmliZXIgfSBmcm9tICcuLi9Jbm5lclN1YnNjcmliZXInO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG8gfSBmcm9tICcuL3N1YnNjcmliZVRvJztcbmV4cG9ydCBmdW5jdGlvbiBzdWJzY3JpYmVUb1Jlc3VsdChvdXRlclN1YnNjcmliZXIsIHJlc3VsdCwgb3V0ZXJWYWx1ZSwgb3V0ZXJJbmRleCkge1xuICAgIHZhciBkZXN0aW5hdGlvbiA9IG5ldyBJbm5lclN1YnNjcmliZXIob3V0ZXJTdWJzY3JpYmVyLCBvdXRlclZhbHVlLCBvdXRlckluZGV4KTtcbiAgICByZXR1cm4gc3Vic2NyaWJlVG8ocmVzdWx0KShkZXN0aW5hdGlvbik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVUb1Jlc3VsdC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNTY2hlZHVsZXIsX3V0aWxfaXNBcnJheSxfT3V0ZXJTdWJzY3JpYmVyLF91dGlsX3N1YnNjcmliZVRvUmVzdWx0LF9mcm9tQXJyYXkgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzU2NoZWR1bGVyIH0gZnJvbSAnLi4vdXRpbC9pc1NjaGVkdWxlcic7XG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IE91dGVyU3Vic2NyaWJlciB9IGZyb20gJy4uL091dGVyU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBzdWJzY3JpYmVUb1Jlc3VsdCB9IGZyb20gJy4uL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHQnO1xuaW1wb3J0IHsgZnJvbUFycmF5IH0gZnJvbSAnLi9mcm9tQXJyYXknO1xudmFyIE5PTkUgPSB7fTtcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIENvbWJpbmVzIG11bHRpcGxlIE9ic2VydmFibGVzIHRvIGNyZWF0ZSBhbiBPYnNlcnZhYmxlIHdob3NlIHZhbHVlcyBhcmVcbiAqIGNhbGN1bGF0ZWQgZnJvbSB0aGUgbGF0ZXN0IHZhbHVlcyBvZiBlYWNoIG9mIGl0cyBpbnB1dCBPYnNlcnZhYmxlcy5cbiAqXG4gKiA8c3BhbiBjbGFzcz1cImluZm9ybWFsXCI+V2hlbmV2ZXIgYW55IGlucHV0IE9ic2VydmFibGUgZW1pdHMgYSB2YWx1ZSwgaXRcbiAqIGNvbXB1dGVzIGEgZm9ybXVsYSB1c2luZyB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIGFsbCB0aGUgaW5wdXRzLCB0aGVuIGVtaXRzXG4gKiB0aGUgb3V0cHV0IG9mIHRoYXQgZm9ybXVsYS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9jb21iaW5lTGF0ZXN0LnBuZ1wiIHdpZHRoPVwiMTAwJVwiPlxuICpcbiAqIGBjb21iaW5lTGF0ZXN0YCBjb21iaW5lcyB0aGUgdmFsdWVzIGZyb20gYWxsIHRoZSBPYnNlcnZhYmxlcyBwYXNzZWQgYXNcbiAqIGFyZ3VtZW50cy4gVGhpcyBpcyBkb25lIGJ5IHN1YnNjcmliaW5nIHRvIGVhY2ggT2JzZXJ2YWJsZSBpbiBvcmRlciBhbmQsXG4gKiB3aGVuZXZlciBhbnkgT2JzZXJ2YWJsZSBlbWl0cywgY29sbGVjdGluZyBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlcyBmcm9tIGVhY2ggT2JzZXJ2YWJsZS4gU28gaWYgeW91IHBhc3MgYG5gIE9ic2VydmFibGVzIHRvIG9wZXJhdG9yLFxuICogcmV0dXJuZWQgT2JzZXJ2YWJsZSB3aWxsIGFsd2F5cyBlbWl0IGFuIGFycmF5IG9mIGBuYCB2YWx1ZXMsIGluIG9yZGVyXG4gKiBjb3JyZXNwb25kaW5nIHRvIG9yZGVyIG9mIHBhc3NlZCBPYnNlcnZhYmxlcyAodmFsdWUgZnJvbSB0aGUgZmlyc3QgT2JzZXJ2YWJsZVxuICogb24gdGhlIGZpcnN0IHBsYWNlIGFuZCBzbyBvbikuXG4gKlxuICogU3RhdGljIHZlcnNpb24gb2YgYGNvbWJpbmVMYXRlc3RgIGFjY2VwdHMgZWl0aGVyIGFuIGFycmF5IG9mIE9ic2VydmFibGVzXG4gKiBvciBlYWNoIE9ic2VydmFibGUgY2FuIGJlIHB1dCBkaXJlY3RseSBhcyBhbiBhcmd1bWVudC4gTm90ZSB0aGF0IGFycmF5IG9mXG4gKiBPYnNlcnZhYmxlcyBpcyBnb29kIGNob2ljZSwgaWYgeW91IGRvbid0IGtub3cgYmVmb3JlaGFuZCBob3cgbWFueSBPYnNlcnZhYmxlc1xuICogeW91IHdpbGwgY29tYmluZS4gUGFzc2luZyBlbXB0eSBhcnJheSB3aWxsIHJlc3VsdCBpbiBPYnNlcnZhYmxlIHRoYXRcbiAqIGNvbXBsZXRlcyBpbW1lZGlhdGVseS5cbiAqXG4gKiBUbyBlbnN1cmUgb3V0cHV0IGFycmF5IGhhcyBhbHdheXMgdGhlIHNhbWUgbGVuZ3RoLCBgY29tYmluZUxhdGVzdGAgd2lsbFxuICogYWN0dWFsbHkgd2FpdCBmb3IgYWxsIGlucHV0IE9ic2VydmFibGVzIHRvIGVtaXQgYXQgbGVhc3Qgb25jZSxcbiAqIGJlZm9yZSBpdCBzdGFydHMgZW1pdHRpbmcgcmVzdWx0cy4gVGhpcyBtZWFucyBpZiBzb21lIE9ic2VydmFibGUgZW1pdHNcbiAqIHZhbHVlcyBiZWZvcmUgb3RoZXIgT2JzZXJ2YWJsZXMgc3RhcnRlZCBlbWl0dGluZywgYWxsIHRoYXQgdmFsdWVzIGJ1dCBsYXN0XG4gKiB3aWxsIGJlIGxvc3QuIE9uIHRoZSBvdGhlciBoYW5kLCBpcyBzb21lIE9ic2VydmFibGUgZG9lcyBub3QgZW1pdCB2YWx1ZSBidXRcbiAqIGNvbXBsZXRlcywgcmVzdWx0aW5nIE9ic2VydmFibGUgd2lsbCBjb21wbGV0ZSBhdCB0aGUgc2FtZSBtb21lbnQgd2l0aG91dFxuICogZW1pdHRpbmcgYW55dGhpbmcsIHNpbmNlIGl0IHdpbGwgYmUgbm93IGltcG9zc2libGUgdG8gaW5jbHVkZSB2YWx1ZSBmcm9tXG4gKiBjb21wbGV0ZWQgT2JzZXJ2YWJsZSBpbiByZXN1bHRpbmcgYXJyYXkuIEFsc28sIGlmIHNvbWUgaW5wdXQgT2JzZXJ2YWJsZSBkb2VzXG4gKiBub3QgZW1pdCBhbnkgdmFsdWUgYW5kIG5ldmVyIGNvbXBsZXRlcywgYGNvbWJpbmVMYXRlc3RgIHdpbGwgYWxzbyBuZXZlciBlbWl0XG4gKiBhbmQgbmV2ZXIgY29tcGxldGUsIHNpbmNlLCBhZ2FpbiwgaXQgd2lsbCB3YWl0IGZvciBhbGwgc3RyZWFtcyB0byBlbWl0IHNvbWVcbiAqIHZhbHVlLlxuICpcbiAqIElmIGF0IGxlYXN0IG9uZSBPYnNlcnZhYmxlIHdhcyBwYXNzZWQgdG8gYGNvbWJpbmVMYXRlc3RgIGFuZCBhbGwgcGFzc2VkIE9ic2VydmFibGVzXG4gKiBlbWl0dGVkIHNvbWV0aGluZywgcmVzdWx0aW5nIE9ic2VydmFibGUgd2lsbCBjb21wbGV0ZSB3aGVuIGFsbCBjb21iaW5lZFxuICogc3RyZWFtcyBjb21wbGV0ZS4gU28gZXZlbiBpZiBzb21lIE9ic2VydmFibGUgY29tcGxldGVzLCByZXN1bHQgb2ZcbiAqIGBjb21iaW5lTGF0ZXN0YCB3aWxsIHN0aWxsIGVtaXQgdmFsdWVzIHdoZW4gb3RoZXIgT2JzZXJ2YWJsZXMgZG8uIEluIGNhc2VcbiAqIG9mIGNvbXBsZXRlZCBPYnNlcnZhYmxlLCBpdHMgdmFsdWUgZnJvbSBub3cgb24gd2lsbCBhbHdheXMgYmUgdGhlIGxhc3RcbiAqIGVtaXR0ZWQgdmFsdWUuIE9uIHRoZSBvdGhlciBoYW5kLCBpZiBhbnkgT2JzZXJ2YWJsZSBlcnJvcnMsIGBjb21iaW5lTGF0ZXN0YFxuICogd2lsbCBlcnJvciBpbW1lZGlhdGVseSBhcyB3ZWxsLCBhbmQgYWxsIG90aGVyIE9ic2VydmFibGVzIHdpbGwgYmUgdW5zdWJzY3JpYmVkLlxuICpcbiAqIGBjb21iaW5lTGF0ZXN0YCBhY2NlcHRzIGFzIG9wdGlvbmFsIHBhcmFtZXRlciBgcHJvamVjdGAgZnVuY3Rpb24sIHdoaWNoIHRha2VzXG4gKiBhcyBhcmd1bWVudHMgYWxsIHZhbHVlcyB0aGF0IHdvdWxkIG5vcm1hbGx5IGJlIGVtaXR0ZWQgYnkgcmVzdWx0aW5nIE9ic2VydmFibGUuXG4gKiBgcHJvamVjdGAgY2FuIHJldHVybiBhbnkga2luZCBvZiB2YWx1ZSwgd2hpY2ggd2lsbCBiZSB0aGVuIGVtaXR0ZWQgYnkgT2JzZXJ2YWJsZVxuICogaW5zdGVhZCBvZiBkZWZhdWx0IGFycmF5LiBOb3RlIHRoYXQgYHByb2plY3RgIGRvZXMgbm90IHRha2UgYXMgYXJndW1lbnQgdGhhdCBhcnJheVxuICogb2YgdmFsdWVzLCBidXQgdmFsdWVzIHRoZW1zZWx2ZXMuIFRoYXQgbWVhbnMgZGVmYXVsdCBgcHJvamVjdGAgY2FuIGJlIGltYWdpbmVkXG4gKiBhcyBmdW5jdGlvbiB0aGF0IHRha2VzIGFsbCBpdHMgYXJndW1lbnRzIGFuZCBwdXRzIHRoZW0gaW50byBhbiBhcnJheS5cbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q29tYmluZSB0d28gdGltZXIgT2JzZXJ2YWJsZXM8L2NhcHRpb24+XG4gKiBjb25zdCBmaXJzdFRpbWVyID0gUnguT2JzZXJ2YWJsZS50aW1lcigwLCAxMDAwKTsgLy8gZW1pdCAwLCAxLCAyLi4uIGFmdGVyIGV2ZXJ5IHNlY29uZCwgc3RhcnRpbmcgZnJvbSBub3dcbiAqIGNvbnN0IHNlY29uZFRpbWVyID0gUnguT2JzZXJ2YWJsZS50aW1lcig1MDAsIDEwMDApOyAvLyBlbWl0IDAsIDEsIDIuLi4gYWZ0ZXIgZXZlcnkgc2Vjb25kLCBzdGFydGluZyAwLDVzIGZyb20gbm93XG4gKiBjb25zdCBjb21iaW5lZFRpbWVycyA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdChmaXJzdFRpbWVyLCBzZWNvbmRUaW1lcik7XG4gKiBjb21iaW5lZFRpbWVycy5zdWJzY3JpYmUodmFsdWUgPT4gY29uc29sZS5sb2codmFsdWUpKTtcbiAqIC8vIExvZ3NcbiAqIC8vIFswLCAwXSBhZnRlciAwLjVzXG4gKiAvLyBbMSwgMF0gYWZ0ZXIgMXNcbiAqIC8vIFsxLCAxXSBhZnRlciAxLjVzXG4gKiAvLyBbMiwgMV0gYWZ0ZXIgMnNcbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+Q29tYmluZSBhbiBhcnJheSBvZiBPYnNlcnZhYmxlczwvY2FwdGlvbj5cbiAqIGNvbnN0IG9ic2VydmFibGVzID0gWzEsIDUsIDEwXS5tYXAoXG4gKiAgIG4gPT4gUnguT2JzZXJ2YWJsZS5vZihuKS5kZWxheShuICogMTAwMCkuc3RhcnRXaXRoKDApIC8vIGVtaXQgMCBhbmQgdGhlbiBlbWl0IG4gYWZ0ZXIgbiBzZWNvbmRzXG4gKiApO1xuICogY29uc3QgY29tYmluZWQgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qob2JzZXJ2YWJsZXMpO1xuICogY29tYmluZWQuc3Vic2NyaWJlKHZhbHVlID0+IGNvbnNvbGUubG9nKHZhbHVlKSk7XG4gKiAvLyBMb2dzXG4gKiAvLyBbMCwgMCwgMF0gaW1tZWRpYXRlbHlcbiAqIC8vIFsxLCAwLCAwXSBhZnRlciAxc1xuICogLy8gWzEsIDUsIDBdIGFmdGVyIDVzXG4gKiAvLyBbMSwgNSwgMTBdIGFmdGVyIDEwc1xuICpcbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Vc2UgcHJvamVjdCBmdW5jdGlvbiB0byBkeW5hbWljYWxseSBjYWxjdWxhdGUgdGhlIEJvZHktTWFzcyBJbmRleDwvY2FwdGlvbj5cbiAqIHZhciB3ZWlnaHQgPSBSeC5PYnNlcnZhYmxlLm9mKDcwLCA3MiwgNzYsIDc5LCA3NSk7XG4gKiB2YXIgaGVpZ2h0ID0gUnguT2JzZXJ2YWJsZS5vZigxLjc2LCAxLjc3LCAxLjc4KTtcbiAqIHZhciBibWkgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qod2VpZ2h0LCBoZWlnaHQsICh3LCBoKSA9PiB3IC8gKGggKiBoKSk7XG4gKiBibWkuc3Vic2NyaWJlKHggPT4gY29uc29sZS5sb2coJ0JNSSBpcyAnICsgeCkpO1xuICpcbiAqIC8vIFdpdGggb3V0cHV0IHRvIGNvbnNvbGU6XG4gKiAvLyBCTUkgaXMgMjQuMjEyMjkzMzg4NDI5NzUzXG4gKiAvLyBCTUkgaXMgMjMuOTM5NDgwOTkyMDUyMDlcbiAqIC8vIEJNSSBpcyAyMy42NzEyNTM2Mjk1OTIyMjJcbiAqXG4gKlxuICogQHNlZSB7QGxpbmsgY29tYmluZUFsbH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgd2l0aExhdGVzdEZyb219XG4gKlxuICogQHBhcmFtIHtPYnNlcnZhYmxlSW5wdXR9IG9ic2VydmFibGUxIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIG90aGVyIE9ic2VydmFibGVzLlxuICogQHBhcmFtIHtPYnNlcnZhYmxlSW5wdXR9IG9ic2VydmFibGUyIEFuIGlucHV0IE9ic2VydmFibGUgdG8gY29tYmluZSB3aXRoIG90aGVyIE9ic2VydmFibGVzLlxuICogTW9yZSB0aGFuIG9uZSBpbnB1dCBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgYXJndW1lbnRzXG4gKiBvciBhbiBhcnJheSBvZiBPYnNlcnZhYmxlcyBtYXkgYmUgZ2l2ZW4gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3Byb2plY3RdIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHByb2plY3QgdGhlIHZhbHVlcyBmcm9tXG4gKiB0aGUgY29tYmluZWQgbGF0ZXN0IHZhbHVlcyBpbnRvIGEgbmV3IHZhbHVlIG9uIHRoZSBvdXRwdXQgT2JzZXJ2YWJsZS5cbiAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyPW51bGxdIFRoZSBJU2NoZWR1bGVyIHRvIHVzZSBmb3Igc3Vic2NyaWJpbmcgdG9cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgb2YgcHJvamVjdGVkIHZhbHVlcyBmcm9tIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWVzIGZyb20gZWFjaCBpbnB1dCBPYnNlcnZhYmxlLCBvciBhbiBhcnJheSBvZiB0aGUgbW9zdCByZWNlbnQgdmFsdWVzIGZyb21cbiAqIGVhY2ggaW5wdXQgT2JzZXJ2YWJsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVMYXRlc3QoKSB7XG4gICAgdmFyIG9ic2VydmFibGVzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgb2JzZXJ2YWJsZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gbnVsbDtcbiAgICB2YXIgc2NoZWR1bGVyID0gbnVsbDtcbiAgICBpZiAoaXNTY2hlZHVsZXIob2JzZXJ2YWJsZXNbb2JzZXJ2YWJsZXMubGVuZ3RoIC0gMV0pKSB7XG4gICAgICAgIHNjaGVkdWxlciA9IG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9ic2VydmFibGVzW29ic2VydmFibGVzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJlc3VsdFNlbGVjdG9yID0gb2JzZXJ2YWJsZXMucG9wKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBiZXNpZGVzIHRoZSByZXN1bHRTZWxlY3RvciBpcyBhbiBhcnJheVxuICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCByZXN1bHRTZWxlY3RvcilgXG4gICAgaWYgKG9ic2VydmFibGVzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5KG9ic2VydmFibGVzWzBdKSkge1xuICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbUFycmF5KG9ic2VydmFibGVzLCBzY2hlZHVsZXIpLmxpZnQobmV3IENvbWJpbmVMYXRlc3RPcGVyYXRvcihyZXN1bHRTZWxlY3RvcikpO1xufVxudmFyIENvbWJpbmVMYXRlc3RPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T3BlcmF0b3IocmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICBDb21iaW5lTGF0ZXN0T3BlcmF0b3IucHJvdG90eXBlLmNhbGwgPSBmdW5jdGlvbiAoc3Vic2NyaWJlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihzdWJzY3JpYmVyLCB0aGlzLnJlc3VsdFNlbGVjdG9yKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydCB7IENvbWJpbmVMYXRlc3RPcGVyYXRvciB9O1xuLyoqXG4gKiBXZSBuZWVkIHRoaXMgSlNEb2MgY29tbWVudCBmb3IgYWZmZWN0aW5nIEVTRG9jLlxuICogQGlnbm9yZVxuICogQGV4dGVuZHMge0lnbm9yZWR9XG4gKi9cbnZhciBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDb21iaW5lTGF0ZXN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbiwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICAgIF90aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIF90aGlzLnZhbHVlcyA9IFtdO1xuICAgICAgICBfdGhpcy5vYnNlcnZhYmxlcyA9IFtdO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlKSB7XG4gICAgICAgIHRoaXMudmFsdWVzLnB1c2goTk9ORSk7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZXMucHVzaChvYnNlcnZhYmxlKTtcbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlcyA9IHRoaXMub2JzZXJ2YWJsZXM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZhYmxlcy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICAgICAgdGhpcy50b1Jlc3BvbmQgPSBsZW47XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBvYnNlcnZhYmxlc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChzdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLCBvYnNlcnZhYmxlLCBvYnNlcnZhYmxlLCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZSA9IGZ1bmN0aW9uICh1bnVzZWQpIHtcbiAgICAgICAgaWYgKCh0aGlzLmFjdGl2ZSAtPSAxKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21iaW5lTGF0ZXN0U3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXM7XG4gICAgICAgIHZhciBvbGRWYWwgPSB2YWx1ZXNbb3V0ZXJJbmRleF07XG4gICAgICAgIHZhciB0b1Jlc3BvbmQgPSAhdGhpcy50b1Jlc3BvbmRcbiAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgOiBvbGRWYWwgPT09IE5PTkUgPyAtLXRoaXMudG9SZXNwb25kIDogdGhpcy50b1Jlc3BvbmQ7XG4gICAgICAgIHZhbHVlc1tvdXRlckluZGV4XSA9IGlubmVyVmFsdWU7XG4gICAgICAgIGlmICh0b1Jlc3BvbmQgPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5UmVzdWx0U2VsZWN0b3IodmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZXMuc2xpY2UoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyLnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3IgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlc3VsdFNlbGVjdG9yLmFwcGx5KHRoaXMsIHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyO1xufShPdXRlclN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IENvbWJpbmVMYXRlc3RTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21iaW5lTGF0ZXN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9zdWJzY3JpYmVUb1Jlc3VsdCxfT3V0ZXJTdWJzY3JpYmVyLF9tYXAsX29ic2VydmFibGVfZnJvbSBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9SZXN1bHQgfSBmcm9tICcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0JztcbmltcG9ydCB7IE91dGVyU3Vic2NyaWJlciB9IGZyb20gJy4uL091dGVyU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBtYXAgfSBmcm9tICcuL21hcCc7XG5pbXBvcnQgeyBmcm9tIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9mcm9tJztcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIFByb2plY3RzIGVhY2ggc291cmNlIHZhbHVlIHRvIGFuIE9ic2VydmFibGUgd2hpY2ggaXMgbWVyZ2VkIGluIHRoZSBvdXRwdXRcbiAqIE9ic2VydmFibGUuXG4gKlxuICogPHNwYW4gY2xhc3M9XCJpbmZvcm1hbFwiPk1hcHMgZWFjaCB2YWx1ZSB0byBhbiBPYnNlcnZhYmxlLCB0aGVuIGZsYXR0ZW5zIGFsbCBvZlxuICogdGhlc2UgaW5uZXIgT2JzZXJ2YWJsZXMgdXNpbmcge0BsaW5rIG1lcmdlQWxsfS48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9tZXJnZU1hcC5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBSZXR1cm5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBpdGVtcyBiYXNlZCBvbiBhcHBseWluZyBhIGZ1bmN0aW9uIHRoYXQgeW91XG4gKiBzdXBwbHkgdG8gZWFjaCBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCB3aGVyZSB0aGF0IGZ1bmN0aW9uXG4gKiByZXR1cm5zIGFuIE9ic2VydmFibGUsIGFuZCB0aGVuIG1lcmdpbmcgdGhvc2UgcmVzdWx0aW5nIE9ic2VydmFibGVzIGFuZFxuICogZW1pdHRpbmcgdGhlIHJlc3VsdHMgb2YgdGhpcyBtZXJnZXIuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+TWFwIGFuZCBmbGF0dGVuIGVhY2ggbGV0dGVyIHRvIGFuIE9ic2VydmFibGUgdGlja2luZyBldmVyeSAxIHNlY29uZDwvY2FwdGlvbj5cbiAqIHZhciBsZXR0ZXJzID0gUnguT2JzZXJ2YWJsZS5vZignYScsICdiJywgJ2MnKTtcbiAqIHZhciByZXN1bHQgPSBsZXR0ZXJzLm1lcmdlTWFwKHggPT5cbiAqICAgUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKS5tYXAoaSA9PiB4K2kpXG4gKiApO1xuICogcmVzdWx0LnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiAvLyBSZXN1bHRzIGluIHRoZSBmb2xsb3dpbmc6XG4gKiAvLyBhMFxuICogLy8gYjBcbiAqIC8vIGMwXG4gKiAvLyBhMVxuICogLy8gYjFcbiAqIC8vIGMxXG4gKiAvLyBjb250aW51ZXMgdG8gbGlzdCBhLGIsYyB3aXRoIHJlc3BlY3RpdmUgYXNjZW5kaW5nIGludGVnZXJzXG4gKlxuICogQHNlZSB7QGxpbmsgY29uY2F0TWFwfVxuICogQHNlZSB7QGxpbmsgZXhoYXVzdE1hcH1cbiAqIEBzZWUge0BsaW5rIG1lcmdlfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VBbGx9XG4gKiBAc2VlIHtAbGluayBtZXJnZU1hcFRvfVxuICogQHNlZSB7QGxpbmsgbWVyZ2VTY2FufVxuICogQHNlZSB7QGxpbmsgc3dpdGNoTWFwfVxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQsID9pbmRleDogbnVtYmVyKTogT2JzZXJ2YWJsZUlucHV0fSBwcm9qZWN0IEEgZnVuY3Rpb25cbiAqIHRoYXQsIHdoZW4gYXBwbGllZCB0byBhbiBpdGVtIGVtaXR0ZWQgYnkgdGhlIHNvdXJjZSBPYnNlcnZhYmxlLCByZXR1cm5zIGFuXG4gKiBPYnNlcnZhYmxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtjb25jdXJyZW50PU51bWJlci5QT1NJVElWRV9JTkZJTklUWV0gTWF4aW11bSBudW1iZXIgb2YgaW5wdXRcbiAqIE9ic2VydmFibGVzIGJlaW5nIHN1YnNjcmliZWQgdG8gY29uY3VycmVudGx5LlxuICogQHJldHVybiB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlXG4gKiBwcm9qZWN0aW9uIGZ1bmN0aW9uIChhbmQgdGhlIG9wdGlvbmFsIGByZXN1bHRTZWxlY3RvcmApIHRvIGVhY2ggaXRlbSBlbWl0dGVkXG4gKiBieSB0aGUgc291cmNlIE9ic2VydmFibGUgYW5kIG1lcmdpbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE9ic2VydmFibGVzIG9idGFpbmVkXG4gKiBmcm9tIHRoaXMgdHJhbnNmb3JtYXRpb24uXG4gKiBAbWV0aG9kIG1lcmdlTWFwXG4gKiBAb3duZXIgT2JzZXJ2YWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VNYXAocHJvamVjdCwgcmVzdWx0U2VsZWN0b3IsIGNvbmN1cnJlbnQpIHtcbiAgICBpZiAoY29uY3VycmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVzdWx0U2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gREVQUkVDQVRFRCBQQVRIXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBzb3VyY2UucGlwZShtZXJnZU1hcChmdW5jdGlvbiAoYSwgaSkgeyByZXR1cm4gZnJvbShwcm9qZWN0KGEsIGkpKS5waXBlKG1hcChmdW5jdGlvbiAoYiwgaWkpIHsgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKGEsIGIsIGksIGlpKTsgfSkpOyB9LCBjb25jdXJyZW50KSk7IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uY3VycmVudCA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmxpZnQobmV3IE1lcmdlTWFwT3BlcmF0b3IocHJvamVjdCwgY29uY3VycmVudCkpOyB9O1xufVxudmFyIE1lcmdlTWFwT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBPcGVyYXRvcihwcm9qZWN0LCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcbiAgICAgICAgdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICB9XG4gICAgTWVyZ2VNYXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChvYnNlcnZlciwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU1hcFN1YnNjcmliZXIob2JzZXJ2ZXIsIHRoaXMucHJvamVjdCwgdGhpcy5jb25jdXJyZW50KSk7XG4gICAgfTtcbiAgICByZXR1cm4gTWVyZ2VNYXBPcGVyYXRvcjtcbn0oKSk7XG5leHBvcnQgeyBNZXJnZU1hcE9wZXJhdG9yIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIE1lcmdlTWFwU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhNZXJnZU1hcFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTWVyZ2VNYXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBwcm9qZWN0LCBjb25jdXJyZW50KSB7XG4gICAgICAgIGlmIChjb25jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbmN1cnJlbnQgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb2plY3QgPSBwcm9qZWN0O1xuICAgICAgICBfdGhpcy5jb25jdXJyZW50ID0gY29uY3VycmVudDtcbiAgICAgICAgX3RoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmJ1ZmZlciA9IFtdO1xuICAgICAgICBfdGhpcy5hY3RpdmUgPSAwO1xuICAgICAgICBfdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTWVyZ2VNYXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPCB0aGlzLmNvbmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeU5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeU5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleCsrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5wcm9qZWN0KHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlKys7XG4gICAgICAgIHRoaXMuX2lubmVyU3ViKHJlc3VsdCwgdmFsdWUsIGluZGV4KTtcbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUuX2lubmVyU3ViID0gZnVuY3Rpb24gKGlzaCwgdmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuYWRkKHN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIGlzaCwgdmFsdWUsIGluZGV4KSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDAgJiYgdGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlTWFwU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQoaW5uZXJWYWx1ZSk7XG4gICAgfTtcbiAgICBNZXJnZU1hcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICAgICAgdGhpcy5yZW1vdmUoaW5uZXJTdWIpO1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQoYnVmZmVyLnNoaWZ0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlID09PSAwICYmIHRoaXMuaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNZXJnZU1hcFN1YnNjcmliZXI7XG59KE91dGVyU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgTWVyZ2VNYXBTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXJnZU1hcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX3V0aWxfaXNBcnJheSxfZW1wdHksX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsX091dGVyU3Vic2NyaWJlcixfb3BlcmF0b3JzX21hcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL3V0aWwvaXNBcnJheSc7XG5pbXBvcnQgeyBFTVBUWSB9IGZyb20gJy4vZW1wdHknO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9SZXN1bHQgfSBmcm9tICcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0JztcbmltcG9ydCB7IE91dGVyU3Vic2NyaWJlciB9IGZyb20gJy4uL091dGVyU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBtYXAgfSBmcm9tICcuLi9vcGVyYXRvcnMvbWFwJztcbi8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXG4vKipcbiAqIEpvaW5zIGxhc3QgdmFsdWVzIGVtaXR0ZWQgYnkgcGFzc2VkIE9ic2VydmFibGVzLlxuICpcbiAqIDxzcGFuIGNsYXNzPVwiaW5mb3JtYWxcIj5XYWl0IGZvciBPYnNlcnZhYmxlcyB0byBjb21wbGV0ZSBhbmQgdGhlbiBjb21iaW5lIGxhc3QgdmFsdWVzIHRoZXkgZW1pdHRlZC48L3NwYW4+XG4gKlxuICogPGltZyBzcmM9XCIuL2ltZy9mb3JrSm9pbi5wbmdcIiB3aWR0aD1cIjEwMCVcIj5cbiAqXG4gKiBgZm9ya0pvaW5gIGlzIGFuIG9wZXJhdG9yIHRoYXQgdGFrZXMgYW55IG51bWJlciBvZiBPYnNlcnZhYmxlcyB3aGljaCBjYW4gYmUgcGFzc2VkIGVpdGhlciBhcyBhbiBhcnJheVxuICogb3IgZGlyZWN0bHkgYXMgYXJndW1lbnRzLiBJZiBubyBpbnB1dCBPYnNlcnZhYmxlcyBhcmUgcHJvdmlkZWQsIHJlc3VsdGluZyBzdHJlYW0gd2lsbCBjb21wbGV0ZVxuICogaW1tZWRpYXRlbHkuXG4gKlxuICogYGZvcmtKb2luYCB3aWxsIHdhaXQgZm9yIGFsbCBwYXNzZWQgT2JzZXJ2YWJsZXMgdG8gY29tcGxldGUgYW5kIHRoZW4gaXQgd2lsbCBlbWl0IGFuIGFycmF5IHdpdGggbGFzdFxuICogdmFsdWVzIGZyb20gY29ycmVzcG9uZGluZyBPYnNlcnZhYmxlcy4gU28gaWYgeW91IHBhc3MgYG5gIE9ic2VydmFibGVzIHRvIHRoZSBvcGVyYXRvciwgcmVzdWx0aW5nXG4gKiBhcnJheSB3aWxsIGhhdmUgYG5gIHZhbHVlcywgd2hlcmUgZmlyc3QgdmFsdWUgaXMgdGhlIGxhc3QgdGhpbmcgZW1pdHRlZCBieSB0aGUgZmlyc3QgT2JzZXJ2YWJsZSxcbiAqIHNlY29uZCB2YWx1ZSBpcyB0aGUgbGFzdCB0aGluZyBlbWl0dGVkIGJ5IHRoZSBzZWNvbmQgT2JzZXJ2YWJsZSBhbmQgc28gb24uIFRoYXQgbWVhbnMgYGZvcmtKb2luYCB3aWxsXG4gKiBub3QgZW1pdCBtb3JlIHRoYW4gb25jZSBhbmQgaXQgd2lsbCBjb21wbGV0ZSBhZnRlciB0aGF0LiBJZiB5b3UgbmVlZCB0byBlbWl0IGNvbWJpbmVkIHZhbHVlcyBub3Qgb25seVxuICogYXQgdGhlIGVuZCBvZiBsaWZlY3ljbGUgb2YgcGFzc2VkIE9ic2VydmFibGVzLCBidXQgYWxzbyB0aHJvdWdob3V0IGl0LCB0cnkgb3V0IHtAbGluayBjb21iaW5lTGF0ZXN0fVxuICogb3Ige0BsaW5rIHppcH0gaW5zdGVhZC5cbiAqXG4gKiBJbiBvcmRlciBmb3IgcmVzdWx0aW5nIGFycmF5IHRvIGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBudW1iZXIgb2YgaW5wdXQgT2JzZXJ2YWJsZXMsIHdoZW5ldmVyIGFueSBvZlxuICogdGhhdCBPYnNlcnZhYmxlcyBjb21wbGV0ZXMgd2l0aG91dCBlbWl0dGluZyBhbnkgdmFsdWUsIGBmb3JrSm9pbmAgd2lsbCBjb21wbGV0ZSBhdCB0aGF0IG1vbWVudCBhcyB3ZWxsXG4gKiBhbmQgaXQgd2lsbCBub3QgZW1pdCBhbnl0aGluZyBlaXRoZXIsIGV2ZW4gaWYgaXQgYWxyZWFkeSBoYXMgc29tZSBsYXN0IHZhbHVlcyBmcm9tIG90aGVyIE9ic2VydmFibGVzLlxuICogQ29udmVyc2VseSwgaWYgdGhlcmUgaXMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5ldmVyIGNvbXBsZXRlcywgYGZvcmtKb2luYCB3aWxsIG5ldmVyIGNvbXBsZXRlIGFzIHdlbGwsXG4gKiB1bmxlc3MgYXQgYW55IHBvaW50IHNvbWUgb3RoZXIgT2JzZXJ2YWJsZSBjb21wbGV0ZXMgd2l0aG91dCBlbWl0dGluZyB2YWx1ZSwgd2hpY2ggYnJpbmdzIHVzIGJhY2sgdG9cbiAqIHRoZSBwcmV2aW91cyBjYXNlLiBPdmVyYWxsLCBpbiBvcmRlciBmb3IgYGZvcmtKb2luYCB0byBlbWl0IGEgdmFsdWUsIGFsbCBPYnNlcnZhYmxlcyBwYXNzZWQgYXMgYXJndW1lbnRzXG4gKiBoYXZlIHRvIGVtaXQgc29tZXRoaW5nIGF0IGxlYXN0IG9uY2UgYW5kIGNvbXBsZXRlLlxuICpcbiAqIElmIGFueSBpbnB1dCBPYnNlcnZhYmxlIGVycm9ycyBhdCBzb21lIHBvaW50LCBgZm9ya0pvaW5gIHdpbGwgZXJyb3IgYXMgd2VsbCBhbmQgYWxsIG90aGVyIE9ic2VydmFibGVzXG4gKiB3aWxsIGJlIGltbWVkaWF0ZWx5IHVuc3Vic2NyaWJlZC5cbiAqXG4gKiBPcHRpb25hbGx5IGBmb3JrSm9pbmAgYWNjZXB0cyBwcm9qZWN0IGZ1bmN0aW9uLCB0aGF0IHdpbGwgYmUgY2FsbGVkIHdpdGggdmFsdWVzIHdoaWNoIG5vcm1hbGx5XG4gKiB3b3VsZCBsYW5kIGluIGVtaXR0ZWQgYXJyYXkuIFdoYXRldmVyIGlzIHJldHVybmVkIGJ5IHByb2plY3QgZnVuY3Rpb24sIHdpbGwgYXBwZWFyIGluIG91dHB1dFxuICogT2JzZXJ2YWJsZSBpbnN0ZWFkLiBUaGlzIG1lYW5zIHRoYXQgZGVmYXVsdCBwcm9qZWN0IGNhbiBiZSB0aG91Z2h0IG9mIGFzIGEgZnVuY3Rpb24gdGhhdCB0YWtlc1xuICogYWxsIGl0cyBhcmd1bWVudHMgYW5kIHB1dHMgdGhlbSBpbnRvIGFuIGFycmF5LiBOb3RlIHRoYXQgcHJvamVjdCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmx5XG4gKiB3aGVuIG91dHB1dCBPYnNlcnZhYmxlIGlzIHN1cHBvc2VkIHRvIGVtaXQgYSByZXN1bHQuXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VXNlIGZvcmtKb2luIHdpdGggb3BlcmF0b3IgZW1pdHRpbmcgaW1tZWRpYXRlbHk8L2NhcHRpb24+XG4gKiBpbXBvcnQgeyBmb3JrSm9pbiwgb2YgfSBmcm9tICdyeGpzJztcbiAqXG4gKiBjb25zdCBvYnNlcnZhYmxlID0gZm9ya0pvaW4oXG4gKiAgIG9mKDEsIDIsIDMsIDQpLFxuICogICBvZig1LCA2LCA3LCA4KVxuICogKTtcbiAqIG9ic2VydmFibGUuc3Vic2NyaWJlKFxuICogICB2YWx1ZSA9PiBjb25zb2xlLmxvZyh2YWx1ZSksXG4gKiAgIGVyciA9PiB7fSxcbiAqICAgKCkgPT4gY29uc29sZS5sb2coJ1RoaXMgaXMgaG93IGl0IGVuZHMhJylcbiAqICk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIFs0LCA4XVxuICogLy8gXCJUaGlzIGlzIGhvdyBpdCBlbmRzIVwiXG4gKlxuICpcbiAqIEBleGFtcGxlIDxjYXB0aW9uPlVzZSBmb3JrSm9pbiB3aXRoIG9wZXJhdG9yIGVtaXR0aW5nIGFmdGVyIHNvbWUgdGltZTwvY2FwdGlvbj5cbiAqIGltcG9ydCB7IGZvcmtKb2luLCBpbnRlcnZhbCB9IGZyb20gJ3J4anMnO1xuICogaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbiAqXG4gKiBjb25zdCBvYnNlcnZhYmxlID0gZm9ya0pvaW4oXG4gKiAgIGludGVydmFsKDEwMDApLnBpcGUodGFrZSgzKSksIC8vIGVtaXQgMCwgMSwgMiBldmVyeSBzZWNvbmQgYW5kIGNvbXBsZXRlXG4gKiAgIGludGVydmFsKDUwMCkucGlwZSh0YWtlKDQpKSAvLyBlbWl0IDAsIDEsIDIsIDMgZXZlcnkgaGFsZiBhIHNlY29uZCBhbmQgY29tcGxldGVcbiAqICk7XG4gKiBvYnNlcnZhYmxlLnN1YnNjcmliZShcbiAqICAgdmFsdWUgPT4gY29uc29sZS5sb2codmFsdWUpLFxuICogICBlcnIgPT4ge30sXG4gKiAgICgpID0+IGNvbnNvbGUubG9nKCdUaGlzIGlzIGhvdyBpdCBlbmRzIScpXG4gKiApO1xuICpcbiAqIC8vIExvZ3M6XG4gKiAvLyBbMiwgM10gYWZ0ZXIgMyBzZWNvbmRzXG4gKiAvLyBcIlRoaXMgaXMgaG93IGl0IGVuZHMhXCIgaW1tZWRpYXRlbHkgYWZ0ZXJcbiAqXG4gKlxuICogQGV4YW1wbGUgPGNhcHRpb24+VXNlIGZvcmtKb2luIHdpdGggcHJvamVjdCBmdW5jdGlvbjwvY2FwdGlvbj5cbiAqIGltcG9ydCB7IGpvcmtKb2luLCBpbnRlcnZhbCB9IGZyb20gJ3J4anMnO1xuICogaW1wb3J0IHsgdGFrZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbiAqXG4gKiBjb25zdCBvYnNlcnZhYmxlID0gZm9ya0pvaW4oXG4gKiAgIGludGVydmFsKDEwMDApLnBpcGUodGFrZSgzKSksIC8vIGVtaXQgMCwgMSwgMiBldmVyeSBzZWNvbmQgYW5kIGNvbXBsZXRlXG4gKiAgIGludGVydmFsKDUwMCkucGlwZSh0YWtlKDQpKSwgLy8gZW1pdCAwLCAxLCAyLCAzIGV2ZXJ5IGhhbGYgYSBzZWNvbmQgYW5kIGNvbXBsZXRlXG4gKiAgIChuLCBtKSA9PiBuICsgbVxuICogKTtcbiAqIG9ic2VydmFibGUuc3Vic2NyaWJlKFxuICogICB2YWx1ZSA9PiBjb25zb2xlLmxvZyh2YWx1ZSksXG4gKiAgIGVyciA9PiB7fSxcbiAqICAgKCkgPT4gY29uc29sZS5sb2coJ1RoaXMgaXMgaG93IGl0IGVuZHMhJylcbiAqICk7XG4gKlxuICogLy8gTG9nczpcbiAqIC8vIDUgYWZ0ZXIgMyBzZWNvbmRzXG4gKiAvLyBcIlRoaXMgaXMgaG93IGl0IGVuZHMhXCIgaW1tZWRpYXRlbHkgYWZ0ZXJcbiAqXG4gKiBAc2VlIHtAbGluayBjb21iaW5lTGF0ZXN0fVxuICogQHNlZSB7QGxpbmsgemlwfVxuICpcbiAqIEBwYXJhbSB7Li4uT2JzZXJ2YWJsZUlucHV0fSBzb3VyY2VzIEFueSBudW1iZXIgb2YgT2JzZXJ2YWJsZXMgcHJvdmlkZWQgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFzIGFuIGFyZ3VtZW50c1xuICogcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSBvcGVyYXRvci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcm9qZWN0XSBGdW5jdGlvbiB0aGF0IHRha2VzIHZhbHVlcyBlbWl0dGVkIGJ5IGlucHV0IE9ic2VydmFibGVzIGFuZCByZXR1cm5zIHZhbHVlXG4gKiB0aGF0IHdpbGwgYXBwZWFyIGluIHJlc3VsdGluZyBPYnNlcnZhYmxlIGluc3RlYWQgb2YgZGVmYXVsdCBhcnJheS5cbiAqIEByZXR1cm4ge09ic2VydmFibGV9IE9ic2VydmFibGUgZW1pdHRpbmcgZWl0aGVyIGFuIGFycmF5IG9mIGxhc3QgdmFsdWVzIGVtaXR0ZWQgYnkgcGFzc2VkIE9ic2VydmFibGVzXG4gKiBvciB2YWx1ZSBmcm9tIHByb2plY3QgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JrSm9pbigpIHtcbiAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHNvdXJjZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yO1xuICAgIGlmICh0eXBlb2Ygc291cmNlc1tzb3VyY2VzLmxlbmd0aCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIERFUFJFQ0FURUQgUEFUSFxuICAgICAgICByZXN1bHRTZWxlY3RvciA9IHNvdXJjZXMucG9wKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBmaXJzdCBhbmQgb25seSBvdGhlciBhcmd1bWVudCBpcyBhbiBhcnJheVxuICAgIC8vIGFzc3VtZSBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYGZvcmtKb2luKFtvYnMxLCBvYnMyLCBvYnMzXSlgXG4gICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgICAgc291cmNlcyA9IHNvdXJjZXNbMF07XG4gICAgfVxuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gRU1QVFk7XG4gICAgfVxuICAgIGlmIChyZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAvLyBERVBSRUNBVEVEIFBBVEhcbiAgICAgICAgcmV0dXJuIGZvcmtKb2luKHNvdXJjZXMpLnBpcGUobWFwKGZ1bmN0aW9uIChhcmdzKSB7IHJldHVybiByZXN1bHRTZWxlY3Rvci5hcHBseSh2b2lkIDAsIGFyZ3MpOyB9KSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gbmV3IEZvcmtKb2luU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBzb3VyY2VzKTtcbiAgICB9KTtcbn1cbi8qKlxuICogV2UgbmVlZCB0aGlzIEpTRG9jIGNvbW1lbnQgZm9yIGFmZmVjdGluZyBFU0RvYy5cbiAqIEBpZ25vcmVcbiAqIEBleHRlbmRzIHtJZ25vcmVkfVxuICovXG52YXIgRm9ya0pvaW5TdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEZvcmtKb2luU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGb3JrSm9pblN1YnNjcmliZXIoZGVzdGluYXRpb24sIHNvdXJjZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICBfdGhpcy5jb21wbGV0ZWQgPSAwO1xuICAgICAgICBfdGhpcy5oYXZlVmFsdWVzID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHNvdXJjZXMubGVuZ3RoO1xuICAgICAgICBfdGhpcy52YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaV07XG4gICAgICAgICAgICB2YXIgaW5uZXJTdWJzY3JpcHRpb24gPSBzdWJzY3JpYmVUb1Jlc3VsdChfdGhpcywgc291cmNlLCBudWxsLCBpKTtcbiAgICAgICAgICAgIGlmIChpbm5lclN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIF90aGlzLmFkZChpbm5lclN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeU5leHQgPSBmdW5jdGlvbiAob3V0ZXJWYWx1ZSwgaW5uZXJWYWx1ZSwgb3V0ZXJJbmRleCwgaW5uZXJJbmRleCwgaW5uZXJTdWIpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNbb3V0ZXJJbmRleF0gPSBpbm5lclZhbHVlO1xuICAgICAgICBpZiAoIWlubmVyU3ViLl9oYXNWYWx1ZSkge1xuICAgICAgICAgICAgaW5uZXJTdWIuX2hhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaGF2ZVZhbHVlcysrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBGb3JrSm9pblN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKGlubmVyU3ViKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGhhdmVWYWx1ZXMgPSBfYS5oYXZlVmFsdWVzLCB2YWx1ZXMgPSBfYS52YWx1ZXM7XG4gICAgICAgIHZhciBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgICAgICBpZiAoIWlubmVyU3ViLl9oYXNWYWx1ZSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBsZXRlZCsrO1xuICAgICAgICBpZiAodGhpcy5jb21wbGV0ZWQgIT09IGxlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXZlVmFsdWVzID09PSBsZW4pIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICBkZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIEZvcmtKb2luU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3JrSm9pbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNBcnJheSxfZnJvbUFycmF5LF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuLi91dGlsL2lzQXJyYXknO1xuaW1wb3J0IHsgZnJvbUFycmF5IH0gZnJvbSAnLi9mcm9tQXJyYXknO1xuaW1wb3J0IHsgT3V0ZXJTdWJzY3JpYmVyIH0gZnJvbSAnLi4vT3V0ZXJTdWJzY3JpYmVyJztcbmltcG9ydCB7IHN1YnNjcmliZVRvUmVzdWx0IH0gZnJvbSAnLi4vdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdCc7XG5leHBvcnQgZnVuY3Rpb24gcmFjZSgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgb25seSBhcmd1bWVudCBpcyBhbiBhcnJheSwgaXQgd2FzIG1vc3QgbGlrZWx5IGNhbGxlZCB3aXRoXG4gICAgLy8gYHJhY2UoW29iczEsIG9iczIsIC4uLl0pYFxuICAgIGlmIChvYnNlcnZhYmxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKGlzQXJyYXkob2JzZXJ2YWJsZXNbMF0pKSB7XG4gICAgICAgICAgICBvYnNlcnZhYmxlcyA9IG9ic2VydmFibGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVzWzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcm9tQXJyYXkob2JzZXJ2YWJsZXMsIHVuZGVmaW5lZCkubGlmdChuZXcgUmFjZU9wZXJhdG9yKCkpO1xufVxudmFyIFJhY2VPcGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSYWNlT3BlcmF0b3IoKSB7XG4gICAgfVxuICAgIFJhY2VPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFJhY2VTdWJzY3JpYmVyKHN1YnNjcmliZXIpKTtcbiAgICB9O1xuICAgIHJldHVybiBSYWNlT3BlcmF0b3I7XG59KCkpO1xuZXhwb3J0IHsgUmFjZU9wZXJhdG9yIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFJhY2VTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFJhY2VTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJhY2VTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5oYXNGaXJzdCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5vYnNlcnZhYmxlcyA9IFtdO1xuICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKG9ic2VydmFibGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUpO1xuICAgIH07XG4gICAgUmFjZVN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGVzID0gdGhpcy5vYnNlcnZhYmxlcztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmFibGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4gJiYgIXRoaXMuaGFzRmlyc3Q7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gb2JzZXJ2YWJsZXNbaV07XG4gICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHN1YnNjcmliZVRvUmVzdWx0KHRoaXMsIG9ic2VydmFibGUsIG9ic2VydmFibGUsIGkpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JzZXJ2YWJsZXMgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSYWNlU3Vic2NyaWJlci5wcm90b3R5cGUubm90aWZ5TmV4dCA9IGZ1bmN0aW9uIChvdXRlclZhbHVlLCBpbm5lclZhbHVlLCBvdXRlckluZGV4LCBpbm5lckluZGV4LCBpbm5lclN1Yikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzRmlyc3QpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSAhPT0gb3V0ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChpbm5lclZhbHVlKTtcbiAgICB9O1xuICAgIHJldHVybiBSYWNlU3Vic2NyaWJlcjtcbn0oT3V0ZXJTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBSYWNlU3Vic2NyaWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmFjZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX2Zyb21BcnJheSxfdXRpbF9pc0FycmF5LF9TdWJzY3JpYmVyLF9PdXRlclN1YnNjcmliZXIsX3V0aWxfc3Vic2NyaWJlVG9SZXN1bHQsXy4uX2ludGVybmFsX3N5bWJvbF9pdGVyYXRvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZnJvbUFycmF5IH0gZnJvbSAnLi9mcm9tQXJyYXknO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4uL3V0aWwvaXNBcnJheSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBPdXRlclN1YnNjcmliZXIgfSBmcm9tICcuLi9PdXRlclN1YnNjcmliZXInO1xuaW1wb3J0IHsgc3Vic2NyaWJlVG9SZXN1bHQgfSBmcm9tICcuLi91dGlsL3N1YnNjcmliZVRvUmVzdWx0JztcbmltcG9ydCB7IGl0ZXJhdG9yIGFzIFN5bWJvbF9pdGVyYXRvciB9IGZyb20gJy4uLy4uL2ludGVybmFsL3N5bWJvbC9pdGVyYXRvcic7XG4vKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xuLyoqXG4gKiBDb21iaW5lcyBtdWx0aXBsZSBPYnNlcnZhYmxlcyB0byBjcmVhdGUgYW4gT2JzZXJ2YWJsZSB3aG9zZSB2YWx1ZXMgYXJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgdmFsdWVzLCBpbiBvcmRlciwgb2YgZWFjaFxuICogb2YgaXRzIGlucHV0IE9ic2VydmFibGVzLlxuICpcbiAqIElmIHRoZSBsYXRlc3QgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24sIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBjb21wdXRlIHRoZSBjcmVhdGVkIHZhbHVlIGZyb20gdGhlIGlucHV0IHZhbHVlcy5cbiAqIE90aGVyd2lzZSwgYW4gYXJyYXkgb2YgdGhlIGlucHV0IHZhbHVlcyBpcyByZXR1cm5lZC5cbiAqXG4gKiBAZXhhbXBsZSA8Y2FwdGlvbj5Db21iaW5lIGFnZSBhbmQgbmFtZSBmcm9tIGRpZmZlcmVudCBzb3VyY2VzPC9jYXB0aW9uPlxuICpcbiAqIGxldCBhZ2UkID0gT2JzZXJ2YWJsZS5vZjxudW1iZXI+KDI3LCAyNSwgMjkpO1xuICogbGV0IG5hbWUkID0gT2JzZXJ2YWJsZS5vZjxzdHJpbmc+KCdGb28nLCAnQmFyJywgJ0JlZXInKTtcbiAqIGxldCBpc0RldiQgPSBPYnNlcnZhYmxlLm9mPGJvb2xlYW4+KHRydWUsIHRydWUsIGZhbHNlKTtcbiAqXG4gKiBPYnNlcnZhYmxlXG4gKiAgICAgLnppcChhZ2UkLFxuICogICAgICAgICAgbmFtZSQsXG4gKiAgICAgICAgICBpc0RldiQsXG4gKiAgICAgICAgICAoYWdlOiBudW1iZXIsIG5hbWU6IHN0cmluZywgaXNEZXY6IGJvb2xlYW4pID0+ICh7IGFnZSwgbmFtZSwgaXNEZXYgfSkpXG4gKiAgICAgLnN1YnNjcmliZSh4ID0+IGNvbnNvbGUubG9nKHgpKTtcbiAqXG4gKiAvLyBvdXRwdXRzXG4gKiAvLyB7IGFnZTogMjcsIG5hbWU6ICdGb28nLCBpc0RldjogdHJ1ZSB9XG4gKiAvLyB7IGFnZTogMjUsIG5hbWU6ICdCYXInLCBpc0RldjogdHJ1ZSB9XG4gKiAvLyB7IGFnZTogMjksIG5hbWU6ICdCZWVyJywgaXNEZXY6IGZhbHNlIH1cbiAqXG4gKiBAcGFyYW0gb2JzZXJ2YWJsZXNcbiAqIEByZXR1cm4ge09ic2VydmFibGU8Uj59XG4gKiBAc3RhdGljIHRydWVcbiAqIEBuYW1lIHppcFxuICogQG93bmVyIE9ic2VydmFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHppcCgpIHtcbiAgICB2YXIgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBvYnNlcnZhYmxlc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBvYnNlcnZhYmxlc1tvYnNlcnZhYmxlcy5sZW5ndGggLSAxXTtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFNlbGVjdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9ic2VydmFibGVzLnBvcCgpO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbUFycmF5KG9ic2VydmFibGVzLCB1bmRlZmluZWQpLmxpZnQobmV3IFppcE9wZXJhdG9yKHJlc3VsdFNlbGVjdG9yKSk7XG59XG52YXIgWmlwT3BlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gWmlwT3BlcmF0b3IocmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgIH1cbiAgICBaaXBPcGVyYXRvci5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcFN1YnNjcmliZXIoc3Vic2NyaWJlciwgdGhpcy5yZXN1bHRTZWxlY3RvcikpO1xuICAgIH07XG4gICAgcmV0dXJuIFppcE9wZXJhdG9yO1xufSgpKTtcbmV4cG9ydCB7IFppcE9wZXJhdG9yIH07XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFppcFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoWmlwU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBaaXBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCByZXN1bHRTZWxlY3RvciwgdmFsdWVzKSB7XG4gICAgICAgIGlmICh2YWx1ZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaXRlcmF0b3JzID0gW107XG4gICAgICAgIF90aGlzLmFjdGl2ZSA9IDA7XG4gICAgICAgIF90aGlzLnJlc3VsdFNlbGVjdG9yID0gKHR5cGVvZiByZXN1bHRTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgPyByZXN1bHRTZWxlY3RvciA6IG51bGw7XG4gICAgICAgIF90aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBaaXBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgaXRlcmF0b3JzID0gdGhpcy5pdGVyYXRvcnM7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0FycmF5SXRlcmF0b3IodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVbU3ltYm9sX2l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFN0YXRpY0l0ZXJhdG9yKHZhbHVlW1N5bWJvbF9pdGVyYXRvcl0oKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaXRlcmF0b3JzLnB1c2gobmV3IFppcEJ1ZmZlckl0ZXJhdG9yKHRoaXMuZGVzdGluYXRpb24sIHRoaXMsIHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZXJhdG9ycyA9IHRoaXMuaXRlcmF0b3JzO1xuICAgICAgICB2YXIgbGVuID0gaXRlcmF0b3JzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlID0gbGVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAoaXRlcmF0b3Iuc3RpbGxVbnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChpdGVyYXRvci5zdWJzY3JpYmUoaXRlcmF0b3IsIGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlLS07IC8vIG5vdCBhbiBvYnNlcnZhYmxlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcFN1YnNjcmliZXIucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZS0tO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpdGVyYXRvcnMgPSB0aGlzLml0ZXJhdG9ycztcbiAgICAgICAgdmFyIGxlbiA9IGl0ZXJhdG9ycy5sZW5ndGg7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIC8vIGFib3J0IGlmIG5vdCBhbGwgb2YgdGhlbSBoYXZlIHZhbHVlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZXJhdG9yLmhhc1ZhbHVlID09PSAnZnVuY3Rpb24nICYmICFpdGVyYXRvci5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBzaG91bGRDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvcnNbaV07XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGl0J3MgY29tcGxldGVkIG5vdyB0aGF0IHlvdSd2ZSBnb3R0ZW5cbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgaWYgKGl0ZXJhdG9yLmhhc0NvbXBsZXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzLnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZXN1bHRTZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5cmVzdWx0U2VsZWN0b3IoYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRDb21wbGV0ZSkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwU3Vic2NyaWJlci5wcm90b3R5cGUuX3RyeXJlc3VsdFNlbGVjdG9yID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMucmVzdWx0U2VsZWN0b3IuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dChyZXN1bHQpO1xuICAgIH07XG4gICAgcmV0dXJuIFppcFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFppcFN1YnNjcmliZXIgfTtcbnZhciBTdGF0aWNJdGVyYXRvciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0aWNJdGVyYXRvcihpdGVyYXRvcikge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRlcmF0b3I7XG4gICAgICAgIHRoaXMubmV4dFJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICB9XG4gICAgU3RhdGljSXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0O1xuICAgICAgICB0aGlzLm5leHRSZXN1bHQgPSB0aGlzLml0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIFN0YXRpY0l0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXh0UmVzdWx0ID0gdGhpcy5uZXh0UmVzdWx0O1xuICAgICAgICByZXR1cm4gbmV4dFJlc3VsdCAmJiBuZXh0UmVzdWx0LmRvbmU7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGljSXRlcmF0b3I7XG59KCkpO1xudmFyIFN0YXRpY0FycmF5SXRlcmF0b3IgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGljQXJyYXlJdGVyYXRvcihhcnJheSkge1xuICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIH1cbiAgICBTdGF0aWNBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVtTeW1ib2xfaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzLmluZGV4Kys7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXk7XG4gICAgICAgIHJldHVybiBpIDwgdGhpcy5sZW5ndGggPyB7IHZhbHVlOiBhcnJheVtpXSwgZG9uZTogZmFsc2UgfSA6IHsgdmFsdWU6IG51bGwsIGRvbmU6IHRydWUgfTtcbiAgICB9O1xuICAgIFN0YXRpY0FycmF5SXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPiB0aGlzLmluZGV4O1xuICAgIH07XG4gICAgU3RhdGljQXJyYXlJdGVyYXRvci5wcm90b3R5cGUuaGFzQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5sZW5ndGggPT09IHRoaXMuaW5kZXg7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGljQXJyYXlJdGVyYXRvcjtcbn0oKSk7XG4vKipcbiAqIFdlIG5lZWQgdGhpcyBKU0RvYyBjb21tZW50IGZvciBhZmZlY3RpbmcgRVNEb2MuXG4gKiBAaWdub3JlXG4gKiBAZXh0ZW5kcyB7SWdub3JlZH1cbiAqL1xudmFyIFppcEJ1ZmZlckl0ZXJhdG9yID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFppcEJ1ZmZlckl0ZXJhdG9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFppcEJ1ZmZlckl0ZXJhdG9yKGRlc3RpbmF0aW9uLCBwYXJlbnQsIG9ic2VydmFibGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgX3RoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICAgIF90aGlzLnN0aWxsVW5zdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuYnVmZmVyID0gW107XG4gICAgICAgIF90aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGVbU3ltYm9sX2l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvLyBOT1RFOiB0aGVyZSBpcyBhY3R1YWxseSBhIG5hbWUgY29sbGlzaW9uIGhlcmUgd2l0aCBTdWJzY3JpYmVyLm5leHQgYW5kIEl0ZXJhdG9yLm5leHRcbiAgICAvLyAgICB0aGlzIGlzIGxlZ2l0IGJlY2F1c2UgYG5leHQoKWAgd2lsbCBuZXZlciBiZSBjYWxsZWQgYnkgYSBzdWJzY3JpcHRpb24gaW4gdGhpcyBjYXNlLlxuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwICYmIHRoaXMuaXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG51bGwsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBidWZmZXIuc2hpZnQoKSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLmhhc1ZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDAgJiYgdGhpcy5pc0NvbXBsZXRlO1xuICAgIH07XG4gICAgWmlwQnVmZmVySXRlcmF0b3IucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFppcEJ1ZmZlckl0ZXJhdG9yLnByb3RvdHlwZS5ub3RpZnlOZXh0ID0gZnVuY3Rpb24gKG91dGVyVmFsdWUsIGlubmVyVmFsdWUsIG91dGVySW5kZXgsIGlubmVySW5kZXgsIGlubmVyU3ViKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnB1c2goaW5uZXJWYWx1ZSk7XG4gICAgICAgIHRoaXMucGFyZW50LmNoZWNrSXRlcmF0b3JzKCk7XG4gICAgfTtcbiAgICBaaXBCdWZmZXJJdGVyYXRvci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlVG9SZXN1bHQodGhpcywgdGhpcy5vYnNlcnZhYmxlLCB0aGlzLCBpbmRleCk7XG4gICAgfTtcbiAgICByZXR1cm4gWmlwQnVmZmVySXRlcmF0b3I7XG59KE91dGVyU3Vic2NyaWJlcikpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9emlwLmpzLm1hcFxuIiwiaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcblxuLyoqXG4gKiBXcmFwcGVyIGNsYXNzIGZvciBBbm55YW5nIGxpYnJhcnlcbiAqIEhhbmRsZXMgc3BlZWNoIHJlY29nbml0aW9uIGFuZCBjb21tYW5kIG1hdGNoaW5nIHRhc2tzLlxuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBBbm55YW5nIHtcbiAgIC8qKlxuICAgICogU3RyZWFtIHRoYXQgZmlyZXMgd2hlbmV2ZXIgc3BlZWNoIGZyYWdtZW50IGhhZCBiZWVuIGRldGVjdGVkLlxuICAgICogQHB1YmxpY1xuICAgICovXG4gICAgcHVibGljIGNvbnZlcnRSZXF1c3QkID0gbmV3IFN1YmplY3Q8SUNvbnZlcnREYXRhPigpO1xuXG4gICAvKipcbiAgICAqIFN0cmVhbSB0aGF0IHRyaWdnZXJzIHNwZWVjaCByZWNvZ25pdGlvbiBhY3RpdmF0aW4gZXZlbnRzLlxuICAgICogQHB1YmxpY1xuICAgICovXG4gICAgcHVibGljIGFjdGl2YXRlZCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+KGZhbHNlKTtcblxuICAgLyoqXG4gICAgKiBTdG9yZXMgYW5ueWFuZyBsaWJyYXJ5IHNjb3BlLlxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1zdHJpbmctbGl0ZXJhbFxuICAgIHByaXZhdGUgYW5ueWFuZyA9IHdpbmRvd1tcImFubnlhbmdcIl07XG5cbiAgIC8qKlxuICAgICogQW5ueWFuZyBsaWJyYXJ5IGNvbW1hbmRzLlxuICAgICogUGF0dGVybnMgdGhhdCBtYXRjaGVzIGFjdGl2YXRlcyBjb3Jlc3BvbmRpbmcgY2FsbGJhY2tcbiAgICAqIEBwcml2YXRlXG4gICAgKi9cbiAgICBwcml2YXRlIGNvbW1hbmRzID0ge1xuICAgICAgICBcIipvbmUgKmN1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1wiOiAoKSA9PiB0aGlzLkNvbW1hbmRNYXRjaDEsXG4gICAgICAgIFwiKm9uZSAqdHdvICpjdXJyZW5jeUZyb20gdG8gKmN1cnJlbmN5VG9cIjogKCkgPT4gdGhpcy5Db21tYW5kTWF0Y2gyLFxuICAgICAgICBcIipvbmUgKnR3byAqdHdvICpjdXJyZW5jeUZyb20gdG8gKmN1cnJlbmN5VG9cIjogKCkgPT4gdGhpcy5Db21tYW5kTWF0Y2gzLFxuICAgICAgICBcIipvbmVfYW5kX2N1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1wiOiAob25lQW5kQ3VyLCBjdXJyZW5jeVRvKSA9PiB0aGlzLkNvbW1hbmRNYXRjaDAob25lQW5kQ3VyLCBjdXJyZW5jeVRvKSxcbiAgICB9O1xuXG4gICAvKipcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQWRkZXMgaW5pdGlhbCBjb21tYW5kcyB0byBsaXN0ZW4gdG9cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFubnlhbmcuYWRkQ29tbWFuZHModGhpcy5jb21tYW5kcyk7XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hZGRDYWxsYmFjayhcImVycm9yXCIsICgpID0+IHRoaXMuYWJvcnQoKSk7XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hZGRDYWxsYmFjayhcImVycm9yTmV0d29ya1wiLCAoKSA9PiB0aGlzLmFib3J0KCkpO1xuICAgICAgICB0aGlzLmFubnlhbmcuYWRkQ2FsbGJhY2soXCJlcnJvclBlcm1pc3Npb25CbG9ja2VkXCIsICgpID0+IHRoaXMuYWJvcnQoKSk7XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hZGRDYWxsYmFjayhcImVycm9yUGVybWlzc2lvbkRlbmllZFwiLCAoKSA9PiB0aGlzLmFib3J0KCkpO1xuICAgICAgICB0aGlzLmFubnlhbmcuYWRkQ2FsbGJhY2soXCJlbmRcIiwgKCkgPT4gdGhpcy5hYm9ydCgpKTtcbiAgICAgICAgdGhpcy5hbm55YW5nLmFkZENhbGxiYWNrKFwicmVzdWx0XCIsICgpID0+IHRoaXMuYWJvcnQoKSk7XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hZGRDYWxsYmFjayhcInJlc3VsdE1hdGNoXCIsICgpID0+IHRoaXMuYWJvcnQoKSk7XG4gICAgfVxuXG4gICAvKipcbiAgICAqIEBtZXRob2RcbiAgICAqIEBwdWJsaWNcbiAgICAqIFN0YXJ0cyBzcGVlY2ggcmVjb2duaXRpb25cbiAgICAqIEFuZCBzdG9wcyBpdCBhdCBmaXJzdCBtYXRjaFxuICAgICovXG4gICAgcHVibGljIHN0YXJ0KCkge1xuICAgICAgICBpZiAoIXRoaXMuYW5ueWFuZykgcmV0dXJuOyAvLyB0aHJvd1xuICAgICAgICBpZiAodGhpcy5hbm55YW5nLmlzTGlzdGVuaW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFubnlhbmcuc3RhcnQoeyBhdXRvUmVzdGFydDogdHJ1ZSwgY29udGludW91czogZmFsc2UgfSk7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVkJC5uZXh0KHRydWUpO1xuICAgIH1cblxuICAgLyoqXG4gICAgKiBAbWV0aG9kXG4gICAgKiBAcHVibGljXG4gICAgKiBBYm9ydHMgc3BlZWNoIHJlY29nbml0aW9uXG4gICAgKi9cbiAgICBwdWJsaWMgYWJvcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5hbm55YW5nKSByZXR1cm47IC8vIHRocm93XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hYm9ydCgpO1xuICAgICAgICB0aGlzLmFjdGl2YXRlZCQubmV4dChmYWxzZSk7XG4gICAgfVxuXG4gICAvKipcbiAgICAqIEBtZXRob2RcbiAgICAqIEBwcml2YXRlXG4gICAgKiBUaGlzIG1ldGhvZCBoYW5kbGVzIHJlc3VsdCBmcm9tIHNwZWVjaCByZWNvZ25pdGlvblxuICAgICogd2l0aCBwYXR0ZXJuICpvbmVfYW5kX2N1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1xuICAgICpcbiAgICAqIEB0b2RvIE5lZWRzIHVwZGF0ZSB0byB1bmRlcnN0YW5kIG1vcmUgdmFyaWF0aW9ucyBvZiBzcGVsbGluZyxcbiAgICAqICAgICAgIGFuZCBwcm9ub3VuY2VkIG5hbWVzIG9mIGN1cnJlbmNpZXNcbiAgICAqL1xuICAgIHByaXZhdGUgQ29tbWFuZE1hdGNoMChvbmVBbmRDdXIsIGN1cnJlbmN5VG9WYWx1ZSkge1xuICAgICAgICBsZXQgY2xlYXJWYWx1ZTogc3RyaW5nO1xuICAgICAgICBsZXQgYW1vdW50VmFsdWU6IG51bWJlcjtcbiAgICAgICAgbGV0IGN1cnJlbmN5RnJvbVZhbHVlOiBzdHJpbmc7XG5cbiAgICAgICAgaWYgKG9uZUFuZEN1ci5pbmRleE9mKFwiJFwiKSA9PT0gMCkge1xuICAgICAgICAgICAgY2xlYXJWYWx1ZSA9IG9uZUFuZEN1ci5yZXBsYWNlKFwiJFwiLCBcIlwiKTtcbiAgICAgICAgICAgIGFtb3VudFZhbHVlID0gcGFyc2VJbnQoY2xlYXJWYWx1ZSwgMik7XG4gICAgICAgICAgICBjdXJyZW5jeUZyb21WYWx1ZSA9IFwiVVNEXCI7XG4gICAgICAgIH0gZWxzZSBpZiAob25lQW5kQ3VyLmluZGV4T2YoXCLigqxcIikgPT09IDApIHtcbiAgICAgICAgICAgIGNsZWFyVmFsdWUgPSBvbmVBbmRDdXIucmVwbGFjZShcIuKCrFwiLCBcIlwiKTtcbiAgICAgICAgICAgIGFtb3VudFZhbHVlID0gcGFyc2VJbnQoY2xlYXJWYWx1ZSwgMik7XG4gICAgICAgICAgICBjdXJyZW5jeUZyb21WYWx1ZSA9IFwiRVVSXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFtb3VudFZhbHVlLnRvU3RyaW5nKCkgIT09IGNsZWFyVmFsdWUpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjb252ZXJ0RGF0YTogSUNvbnZlcnREYXRhID0ge1xuICAgICAgICAgICAgYW1vdW50OiBhbW91bnRWYWx1ZSxcbiAgICAgICAgICAgIGN1cnJlbmN5RnJvbTogY3VycmVuY3lGcm9tVmFsdWUsXG4gICAgICAgICAgICBjdXJyZW5jeVRvOiBjdXJyZW5jeVRvVmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnZlcnREYXRhLmN1cnJlbmN5VG8gPSBjb252ZXJ0RGF0YS5jdXJyZW5jeVRvID09PSBcImV1cm9cIiA/IFwiRVVSXCIgOiBjb252ZXJ0RGF0YS5jdXJyZW5jeVRvO1xuXG4gICAgICAgIHRoaXMuY29udmVydFJlcXVzdCQubmV4dChjb252ZXJ0RGF0YSk7XG4gICAgfVxuXG4gICAvKipcbiAgICAqIEBtZXRob2RcbiAgICAqIEBwcml2YXRlXG4gICAgKiBUaGlzIG1ldGhvZCBoYW5kbGVzIHJlc3VsdCBmcm9tIHNwZWVjaCByZWNvZ25pdGlvblxuICAgICogd2l0aCBwYXR0ZXJuICpvbmUgKmN1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1xuICAgICpcbiAgICAqIEB0b2RvIE5lZWRzIGltcGxlbWVudGF0aW9uXG4gICAgKi9cbiAgICBwcml2YXRlIENvbW1hbmRNYXRjaDEob25lLCBjdXJyZW5jeUZyb20sIGN1cnJlbmN5VG8pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coMSwgb25lLCBjdXJyZW5jeUZyb20sIGN1cnJlbmN5VG8pO1xuICAgIH1cblxuICAgLyoqXG4gICAgKiBAbWV0aG9kXG4gICAgKiBAcHJpdmF0ZVxuICAgICogVGhpcyBtZXRob2QgaGFuZGxlcyByZXN1bHQgZnJvbSBzcGVlY2ggcmVjb2duaXRpb25cbiAgICAqIHdpdGggcGF0dGVybiAqb25lICp0d28gKmN1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1xuICAgICpcbiAgICAqIEB0b2RvIE5lZWRzIGltcGxlbWVudGF0aW9uXG4gICAgKi9cbiAgICBwcml2YXRlIENvbW1hbmRNYXRjaDIob25lLCB0d28sIGN1cnJlbmN5RnJvbSwgY3VycmVuY3lUbykge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygyLCBvbmUsIHR3bywgY3VycmVuY3lGcm9tLCBjdXJyZW5jeVRvKTtcbiAgICB9XG5cbiAgIC8qKlxuICAgICogQG1ldGhvZFxuICAgICogQHByaXZhdGVcbiAgICAqIFRoaXMgbWV0aG9kIGhhbmRsZXMgcmVzdWx0IGZyb20gc3BlZWNoIHJlY29nbml0aW9uXG4gICAgKiB3aXRoIHBhdHRlcm4gKm9uZSAqdHdvICp0d28gKmN1cnJlbmN5RnJvbSB0byAqY3VycmVuY3lUb1xuICAgICpcbiAgICAqIEB0b2RvIE5lZWRzIGltcGxlbWVudGF0aW9uXG4gICAgKi9cbiAgICBwcml2YXRlIENvbW1hbmRNYXRjaDMob25lLCB0d28sIHRocmVlLCBjdXJyZW5jeUZyb20sIGN1cnJlbmN5VG8pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coMywgb25lLCB0d28sIHRocmVlLCBjdXJyZW5jeUZyb20sIGN1cnJlbmN5VG8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKiBEZXNjcmliZXMgZGF0YSBmb3IgY29udmVydGluZyBhY3Rpb25cbiAqIEBwcm9wIGN1cnJlbmN5RnJvbTogc3RyaW5nO1xuICogQHByb3AgY3VycmVuY3lUbzogc3RyaW5nO1xuICogQHByb3AgYW1vdW50OiBudW1iZXI7XG4gKiBAcHJvcCByZXN1bHQ/OiBTdWJqZWN0PG51bWJlcj47XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnZlcnREYXRhIHtcbiAgICBjdXJyZW5jeUZyb206IHN0cmluZztcbiAgICBjdXJyZW5jeVRvOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcmVzdWx0PzogU3ViamVjdDxudW1iZXI+O1xufVxuIiwiaW1wb3J0IHsgQW5ueWFuZywgSUNvbnZlcnREYXRhIH0gZnJvbSBcIi4vYW5ueWFuZ1wiO1xuaW1wb3J0IHsgRGF0YUNvbGxlY3RvciB9IGZyb20gXCIuL2RhdGEtY29sbGVjdG9yXCI7XG5pbXBvcnQgeyBEb20gfSBmcm9tIFwiLi9kb21cIjtcblxuLyoqXG4gKiBDb252ZXJ0cyBjb3JyZW5jaWVzIGFuZCBzdWJzY3JpYmVzIHRvIGNvbnZlcnQgc3RyZWFtc1xuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJ0ZXIge1xuXG4gICAvKipcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogaW5pdGlhbCBzdWJzY3JpcHRpb24gdG8gY29udmVydCBzdHJlYW1zXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRvbTogRG9tLCBwcml2YXRlIGFubnlhbmc6IEFubnlhbmcsIHByaXZhdGUgZGF0YUNvbGxlY3RvcjogRGF0YUNvbGxlY3Rvcikge1xuICAgICAgICB0aGlzLmFubnlhbmcuY29udmVydFJlcXVzdCQuc3Vic2NyaWJlKChjb252ZXJ0RGF0YTogSUNvbnZlcnREYXRhKSA9PiB0aGlzLmNvbnZlcnQoY29udmVydERhdGEpKTtcbiAgICAgICAgdGhpcy5kb20uY29udmVydFJlcXVzdCQuc3Vic2NyaWJlKChjb252ZXJ0RGF0YTogSUNvbnZlcnREYXRhKSA9PiB0aGlzLmNvbnZlcnQoY29udmVydERhdGEpKTtcbiAgICB9XG5cbiAgIC8qKlxuICAgICogQ29udmVydHMgY29ycmVuY2llc1xuICAgICogQG1ldGhvZFxuICAgICogQHBhcmFtIGNvbnZlcnREYXRhOiBJQ29udmVydERhdGFcbiAgICAqL1xuICAgIHB1YmxpYyBjb252ZXJ0KGNvbnZlcnREYXRhOiBJQ29udmVydERhdGEpIHtcbiAgICAgICAgY29uc3QgcmF0ZTEgPSB0aGlzLmRhdGFDb2xsZWN0b3IucmF0ZXNbY29udmVydERhdGEuY3VycmVuY3lGcm9tXTtcbiAgICAgICAgY29uc3QgcmF0ZTIgPSB0aGlzLmRhdGFDb2xsZWN0b3IucmF0ZXNbY29udmVydERhdGEuY3VycmVuY3lUb107XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbnZlcnREYXRhLmFtb3VudCAqIChyYXRlMiAvIHJhdGUxKTtcblxuICAgICAgICB0aGlzLmRvbS5lbGVtZW50cy5nZXQoXCJyZXN1bHRcIikuaW5uZXJIVE1MID0gcmVzdWx0LnRvRml4ZWQoMik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBEZXh5ZSB9IGZyb20gXCIuL2RleHllXCI7XG5cbi8qKlxuICogRmV0Y2hlcyBkYXRhIGFuZCBkZWNpZGVzIHdoaWNoIHNvdXJjZSB0byB1c2UuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFDb2xsZWN0b3Ige1xuICAgIC8qKlxuICAgICAqIE9iamVjdCB0aGF0IHN0b3JlcyBsYXRlc3QgZmV0Y2hlZCByYXRlcyBpbiBhcHBsaWNhdGlvblxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBwdWJsaWMgcmF0ZXM7XG5cbiAgIC8qKlxuICAgICogQGNvbnN0cnVjdG9yXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRleHllOiBEZXh5ZSkge1xuICAgICAgICB0aGlzLmZldGNoUmF0ZXMoKTtcbiAgICB9XG5cbiAgIC8qKlxuICAgICogRmlyc3QgbWV0aG9kIGdldHMgZGF0YSBmcm9tIGlEQiwgY2hlY2tzIGl0J3MgdmFsaWRpdHlcbiAgICAqIGFuZCBwZXJmb3JtZXMgZmV0Y2ggaWYgZGF0YSBpcyBleHBpcmVkXG4gICAgKiBpZiBmZXRjaCBhY3Rpb24gZmFpbHMgb3IgcmV0dXJucyBvbGRlciB2ZXJzaW9uLCBhcHBsaWNhdGlvbiB3b3VsZCBza2lwIHdpdGggZXhpc3RpbmcgUmF0ZXMgZGF0YVxuICAgICogQG1ldGhvZFxuICAgICovXG4gICAgcHVibGljIGZldGNoUmF0ZXMoKSB7XG4gICAgICAgIHRoaXMuZGV4eWUuZ2V0TGF0ZXN0UmVzcG9uY2UoKVxuICAgICAgICAgICAgLnRoZW4oKGxhc3RSZXNwb25jZSkgPT4gKHsgbGFzdDogbGFzdFJlc3BvbmNlLCBpc1ZhbGlkOiB0aGlzLmRleHllLmlzQ2FjaGVkRGF0YVZhbGlkKGxhc3RSZXNwb25jZSl9KSlcbiAgICAgICAgICAgIC50aGVuKChkYXRhUGFyYW1zKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFQYXJhbXMuaXNWYWxpZCkgcmV0dXJuIHRoaXMucmF0ZXMgPSBkYXRhUGFyYW1zLmxhc3QucmF0ZXM7XG5cbiAgICAgICAgICAgICAgICBmZXRjaChcImh0dHA6Ly9kYXRhLmZpeGVyLmlvL2FwaS9sYXRlc3Q/YWNjZXNzX2tleT04ZDk4MWFiZmFjYTlmMmU0MTYyNTIxYjllY2Y1NDBkYlwiKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhdGVzID0gdGhpcy5kZXh5ZS5sYXRlc3RSZXNwb25jZShyZXNwb25zZSwgZGF0YVBhcmFtcy5sYXN0KS5yYXRlcztcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmF0ZXMgPSBkYXRhUGFyYW1zLmxhc3QucmF0ZXM7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiLypcbiAqIERleGllLmpzIC0gYSBtaW5pbWFsaXN0aWMgd3JhcHBlciBmb3IgSW5kZXhlZERCXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICpcbiAqIEJ5IERhdmlkIEZhaGxhbmRlciwgZGF2aWQuZmFobGFuZGVyQGdtYWlsLmNvbVxuICpcbiAqIFZlcnNpb24ge3ZlcnNpb259LCB7ZGF0ZX1cbiAqXG4gKiBodHRwOi8vZGV4aWUub3JnXG4gKlxuICogQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNCwgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL1xuICovXG4gXG52YXIga2V5cyA9IE9iamVjdC5rZXlzO1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xudmFyIF9nbG9iYWwgPSB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDpcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6XG4gICAgICAgIGdsb2JhbDtcbmZ1bmN0aW9uIGV4dGVuZChvYmosIGV4dGVuc2lvbikge1xuICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JylcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICBrZXlzKGV4dGVuc2lvbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBfaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5mdW5jdGlvbiBoYXNPd24ob2JqLCBwcm9wKSB7XG4gICAgcmV0dXJuIF9oYXNPd24uY2FsbChvYmosIHByb3ApO1xufVxuZnVuY3Rpb24gcHJvcHMocHJvdG8sIGV4dGVuc2lvbikge1xuICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uID09PSAnZnVuY3Rpb24nKVxuICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb24oZ2V0UHJvdG8ocHJvdG8pKTtcbiAgICBrZXlzKGV4dGVuc2lvbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHNldFByb3AocHJvdG8sIGtleSwgZXh0ZW5zaW9uW2tleV0pO1xuICAgIH0pO1xufVxudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuZnVuY3Rpb24gc2V0UHJvcChvYmosIHByb3AsIGZ1bmN0aW9uT3JHZXRTZXQsIG9wdGlvbnMpIHtcbiAgICBkZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGV4dGVuZChmdW5jdGlvbk9yR2V0U2V0ICYmIGhhc093bihmdW5jdGlvbk9yR2V0U2V0LCBcImdldFwiKSAmJiB0eXBlb2YgZnVuY3Rpb25PckdldFNldC5nZXQgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICB7IGdldDogZnVuY3Rpb25PckdldFNldC5nZXQsIHNldDogZnVuY3Rpb25PckdldFNldC5zZXQsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IDpcbiAgICAgICAgeyB2YWx1ZTogZnVuY3Rpb25PckdldFNldCwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LCBvcHRpb25zKSk7XG59XG5mdW5jdGlvbiBkZXJpdmUoQ2hpbGQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBmdW5jdGlvbiAoUGFyZW50KSB7XG4gICAgICAgICAgICBDaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhcmVudC5wcm90b3R5cGUpO1xuICAgICAgICAgICAgc2V0UHJvcChDaGlsZC5wcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgQ2hpbGQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBleHRlbmQ6IHByb3BzLmJpbmQobnVsbCwgQ2hpbGQucHJvdG90eXBlKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH07XG59XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbmZ1bmN0aW9uIGdldFByb3BlcnR5RGVzY3JpcHRvcihvYmosIHByb3ApIHtcbiAgICB2YXIgcGQgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKSwgcHJvdG87XG4gICAgcmV0dXJuIHBkIHx8IChwcm90byA9IGdldFByb3RvKG9iaikpICYmIGdldFByb3BlcnR5RGVzY3JpcHRvcihwcm90bywgcHJvcCk7XG59XG52YXIgX3NsaWNlID0gW10uc2xpY2U7XG5mdW5jdGlvbiBzbGljZShhcmdzLCBzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIF9zbGljZS5jYWxsKGFyZ3MsIHN0YXJ0LCBlbmQpO1xufVxuZnVuY3Rpb24gb3ZlcnJpZGUob3JpZ0Z1bmMsIG92ZXJyaWRlZEZhY3RvcnkpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVkRmFjdG9yeShvcmlnRnVuYyk7XG59XG5mdW5jdGlvbiBhc3NlcnQoYikge1xuICAgIGlmICghYilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXNzZXJ0aW9uIEZhaWxlZFwiKTtcbn1cbmZ1bmN0aW9uIGFzYXAoZm4pIHtcbiAgICBpZiAoX2dsb2JhbC5zZXRJbW1lZGlhdGUpXG4gICAgICAgIHNldEltbWVkaWF0ZShmbik7XG4gICAgZWxzZVxuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbn1cblxuLyoqIEdlbmVyYXRlIGFuIG9iamVjdCAoaGFzaCBtYXApIGJhc2VkIG9uIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIGV4dHJhY3RvciBGdW5jdGlvbiB0YWtpbmcgYW4gYXJyYXkgaXRlbSBhbmQgaXRzIGluZGV4IGFuZCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgMiBpdGVtcyAoW2tleSwgdmFsdWVdKSB0b1xuICogICAgICAgIGluc3RlcnQgb24gdGhlIHJlc3VsdGluZyBvYmplY3QgZm9yIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuIElmIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCB0aGVcbiAqICAgICAgICBjdXJyZW50IGl0ZW0gd29udCBhZmZlY3QgdGhlIHJlc3VsdGluZyBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGFycmF5VG9PYmplY3QoYXJyYXksIGV4dHJhY3Rvcikge1xuICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgaXRlbSwgaSkge1xuICAgICAgICB2YXIgbmFtZUFuZFZhbHVlID0gZXh0cmFjdG9yKGl0ZW0sIGkpO1xuICAgICAgICBpZiAobmFtZUFuZFZhbHVlKVxuICAgICAgICAgICAgcmVzdWx0W25hbWVBbmRWYWx1ZVswXV0gPSBuYW1lQW5kVmFsdWVbMV07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwge30pO1xufVxuZnVuY3Rpb24gdHJ5Y2F0Y2hlcihmbiwgcmVqZWN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiB0cnlDYXRjaChmbiwgb25lcnJvciwgYXJncykge1xuICAgIHRyeSB7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgb25lcnJvciAmJiBvbmVycm9yKGV4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKSB7XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvSW5kZXhlZERCLyNzdGVwcy1mb3ItZXh0cmFjdGluZy1hLWtleS1mcm9tLWEtdmFsdWUtdXNpbmctYS1rZXktcGF0aFxuICAgIGlmIChoYXNPd24ob2JqLCBrZXlQYXRoKSlcbiAgICAgICAgcmV0dXJuIG9ialtrZXlQYXRoXTsgLy8gVGhpcyBsaW5lIGlzIG1vdmVkIGZyb20gbGFzdCB0byBmaXJzdCBmb3Igb3B0aW1pemF0aW9uIHB1cnBvc2UuXG4gICAgaWYgKCFrZXlQYXRoKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIHJ2ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5UGF0aC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoW2ldKTtcbiAgICAgICAgICAgIHJ2LnB1c2godmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIHZhciBwZXJpb2QgPSBrZXlQYXRoLmluZGV4T2YoJy4nKTtcbiAgICBpZiAocGVyaW9kICE9PSAtMSkge1xuICAgICAgICB2YXIgaW5uZXJPYmogPSBvYmpba2V5UGF0aC5zdWJzdHIoMCwgcGVyaW9kKV07XG4gICAgICAgIHJldHVybiBpbm5lck9iaiA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogZ2V0QnlLZXlQYXRoKGlubmVyT2JqLCBrZXlQYXRoLnN1YnN0cihwZXJpb2QgKyAxKSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCB2YWx1ZSkge1xuICAgIGlmICghb2JqIHx8IGtleVBhdGggPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICgnaXNGcm96ZW4nIGluIE9iamVjdCAmJiBPYmplY3QuaXNGcm96ZW4ob2JqKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICh0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycgJiYgJ2xlbmd0aCcgaW4ga2V5UGF0aCkge1xuICAgICAgICBhc3NlcnQodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyAmJiAnbGVuZ3RoJyBpbiB2YWx1ZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5UGF0aC5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGhbaV0sIHZhbHVlW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHBlcmlvZCA9IGtleVBhdGguaW5kZXhPZignLicpO1xuICAgICAgICBpZiAocGVyaW9kICE9PSAtMSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIoMCwgcGVyaW9kKTtcbiAgICAgICAgICAgIHZhciByZW1haW5pbmdLZXlQYXRoID0ga2V5UGF0aC5zdWJzdHIocGVyaW9kICsgMSk7XG4gICAgICAgICAgICBpZiAocmVtYWluaW5nS2V5UGF0aCA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtjdXJyZW50S2V5UGF0aF07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBvYmpbY3VycmVudEtleVBhdGhdID0gdmFsdWU7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5uZXJPYmogPSBvYmpbY3VycmVudEtleVBhdGhdO1xuICAgICAgICAgICAgICAgIGlmICghaW5uZXJPYmopXG4gICAgICAgICAgICAgICAgICAgIGlubmVyT2JqID0gKG9ialtjdXJyZW50S2V5UGF0aF0gPSB7fSk7XG4gICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGlubmVyT2JqLCByZW1haW5pbmdLZXlQYXRoLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqW2tleVBhdGhdO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9ialtrZXlQYXRoXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZGVsQnlLZXlQYXRoKG9iaiwga2V5UGF0aCkge1xuICAgIGlmICh0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycpXG4gICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIHVuZGVmaW5lZCk7XG4gICAgZWxzZSBpZiAoJ2xlbmd0aCcgaW4ga2V5UGF0aClcbiAgICAgICAgW10ubWFwLmNhbGwoa2V5UGF0aCwgZnVuY3Rpb24gKGtwKSB7XG4gICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrcCwgdW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG59XG5mdW5jdGlvbiBzaGFsbG93Q2xvbmUob2JqKSB7XG4gICAgdmFyIHJ2ID0ge307XG4gICAgZm9yICh2YXIgbSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093bihvYmosIG0pKVxuICAgICAgICAgICAgcnZbbV0gPSBvYmpbbV07XG4gICAgfVxuICAgIHJldHVybiBydjtcbn1cbnZhciBjb25jYXQgPSBbXS5jb25jYXQ7XG5mdW5jdGlvbiBmbGF0dGVuKGEpIHtcbiAgICByZXR1cm4gY29uY2F0LmFwcGx5KFtdLCBhKTtcbn1cbi8vaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYl9Xb3JrZXJzX0FQSS9TdHJ1Y3R1cmVkX2Nsb25lX2FsZ29yaXRobVxudmFyIGludHJpbnNpY1R5cGVzID0gXCJCb29sZWFuLFN0cmluZyxEYXRlLFJlZ0V4cCxCbG9iLEZpbGUsRmlsZUxpc3QsQXJyYXlCdWZmZXIsRGF0YVZpZXcsVWludDhDbGFtcGVkQXJyYXksSW1hZ2VEYXRhLE1hcCxTZXRcIlxuICAgIC5zcGxpdCgnLCcpLmNvbmNhdChmbGF0dGVuKFs4LCAxNiwgMzIsIDY0XS5tYXAoZnVuY3Rpb24gKG51bSkgeyByZXR1cm4gW1wiSW50XCIsIFwiVWludFwiLCBcIkZsb2F0XCJdLm1hcChmdW5jdGlvbiAodCkgeyByZXR1cm4gdCArIG51bSArIFwiQXJyYXlcIjsgfSk7IH0pKSkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiBfZ2xvYmFsW3RdOyB9KS5tYXAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIF9nbG9iYWxbdF07IH0pO1xuZnVuY3Rpb24gZGVlcENsb25lKGFueSkge1xuICAgIGlmICghYW55IHx8IHR5cGVvZiBhbnkgIT09ICdvYmplY3QnKVxuICAgICAgICByZXR1cm4gYW55O1xuICAgIHZhciBydjtcbiAgICBpZiAoaXNBcnJheShhbnkpKSB7XG4gICAgICAgIHJ2ID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYW55Lmxlbmd0aDsgaSA8IGw7ICsraSkge1xuICAgICAgICAgICAgcnYucHVzaChkZWVwQ2xvbmUoYW55W2ldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaW50cmluc2ljVHlwZXMuaW5kZXhPZihhbnkuY29uc3RydWN0b3IpID49IDApIHtcbiAgICAgICAgcnYgPSBhbnk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBydiA9IGFueS5jb25zdHJ1Y3RvciA/IE9iamVjdC5jcmVhdGUoYW55LmNvbnN0cnVjdG9yLnByb3RvdHlwZSkgOiB7fTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBhbnkpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24oYW55LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIHJ2W3Byb3BdID0gZGVlcENsb25lKGFueVtwcm9wXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJ2O1xufVxuZnVuY3Rpb24gZ2V0T2JqZWN0RGlmZihhLCBiLCBydiwgcHJmeCkge1xuICAgIC8vIENvbXBhcmVzIG9iamVjdHMgYSBhbmQgYiBhbmQgcHJvZHVjZXMgYSBkaWZmIG9iamVjdC5cbiAgICBydiA9IHJ2IHx8IHt9O1xuICAgIHByZnggPSBwcmZ4IHx8ICcnO1xuICAgIGtleXMoYSkuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICBpZiAoIWhhc093bihiLCBwcm9wKSlcbiAgICAgICAgICAgIHJ2W3ByZnggKyBwcm9wXSA9IHVuZGVmaW5lZDsgLy8gUHJvcGVydHkgcmVtb3ZlZFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhcCA9IGFbcHJvcF0sIGJwID0gYltwcm9wXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXAgPT09ICdvYmplY3QnICYmIHR5cGVvZiBicCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICBhcCAmJiBicCAmJlxuICAgICAgICAgICAgICAgIC8vIE5vdyBjb21wYXJlIGNvbnN0cnVjdG9ycyBhcmUgc2FtZSAobm90IGVxdWFsIGJlY2F1c2Ugd29udCB3b3JrIGluIFNhZmFyaSlcbiAgICAgICAgICAgICAgICAoJycgKyBhcC5jb25zdHJ1Y3RvcikgPT09ICgnJyArIGJwLmNvbnN0cnVjdG9yKSlcbiAgICAgICAgICAgICAgICAvLyBTYW1lIHR5cGUgb2Ygb2JqZWN0IGJ1dCBpdHMgcHJvcGVydGllcyBtYXkgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgZ2V0T2JqZWN0RGlmZihhcCwgYnAsIHJ2LCBwcmZ4ICsgcHJvcCArIFwiLlwiKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGFwICE9PSBicClcbiAgICAgICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdOyAvLyBQcmltaXRpdmUgdmFsdWUgY2hhbmdlZFxuICAgICAgICB9XG4gICAgfSk7XG4gICAga2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIGlmICghaGFzT3duKGEsIHByb3ApKSB7XG4gICAgICAgICAgICBydltwcmZ4ICsgcHJvcF0gPSBiW3Byb3BdOyAvLyBQcm9wZXJ0eSBhZGRlZFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJ2O1xufVxuLy8gSWYgZmlyc3QgYXJndW1lbnQgaXMgaXRlcmFibGUgb3IgYXJyYXktbGlrZSwgcmV0dXJuIGl0IGFzIGFuIGFycmF5XG52YXIgaXRlcmF0b3JTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgZ2V0SXRlcmF0b3JPZiA9IGl0ZXJhdG9yU3ltYm9sID8gZnVuY3Rpb24gKHgpIHtcbiAgICB2YXIgaTtcbiAgICByZXR1cm4geCAhPSBudWxsICYmIChpID0geFtpdGVyYXRvclN5bWJvbF0pICYmIGkuYXBwbHkoeCk7XG59IDogZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfTtcbnZhciBOT19DSEFSX0FSUkFZID0ge307XG4vLyBUYWtlcyBvbmUgb3Igc2V2ZXJhbCBhcmd1bWVudHMgYW5kIHJldHVybnMgYW4gYXJyYXkgYmFzZWQgb24gdGhlIGZvbGxvd2luZyBjcml0ZXJhczpcbi8vICogSWYgc2V2ZXJhbCBhcmd1bWVudHMgcHJvdmlkZWQsIHJldHVybiBhcmd1bWVudHMgY29udmVydGVkIHRvIGFuIGFycmF5IGluIGEgd2F5IHRoYXRcbi8vICAgc3RpbGwgYWxsb3dzIGphdmFzY3JpcHQgZW5naW5lIHRvIG9wdGltaXplIHRoZSBjb2RlLlxuLy8gKiBJZiBzaW5nbGUgYXJndW1lbnQgaXMgYW4gYXJyYXksIHJldHVybiBhIGNsb25lIG9mIGl0LlxuLy8gKiBJZiB0aGlzLXBvaW50ZXIgZXF1YWxzIE5PX0NIQVJfQVJSQVksIGRvbid0IGFjY2VwdCBzdHJpbmdzIGFzIHZhbGlkIGl0ZXJhYmxlcyBhcyBhIHNwZWNpYWxcbi8vICAgY2FzZSB0byB0aGUgdHdvIGJ1bGxldHMgYmVsb3cuXG4vLyAqIElmIHNpbmdsZSBhcmd1bWVudCBpcyBhbiBpdGVyYWJsZSwgY29udmVydCBpdCB0byBhbiBhcnJheSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgYXJyYXkuXG4vLyAqIElmIHNpbmdsZSBhcmd1bWVudCBpcyBhcnJheS1saWtlIChoYXMgbGVuZ3RoIG9mIHR5cGUgbnVtYmVyKSwgY29udmVydCBpdCB0byBhbiBhcnJheS5cbmZ1bmN0aW9uIGdldEFycmF5T2YoYXJyYXlMaWtlKSB7XG4gICAgdmFyIGksIGEsIHgsIGl0O1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGFycmF5TGlrZSkpXG4gICAgICAgICAgICByZXR1cm4gYXJyYXlMaWtlLnNsaWNlKCk7XG4gICAgICAgIGlmICh0aGlzID09PSBOT19DSEFSX0FSUkFZICYmIHR5cGVvZiBhcnJheUxpa2UgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgICAgICBpZiAoKGl0ID0gZ2V0SXRlcmF0b3JPZihhcnJheUxpa2UpKSkge1xuICAgICAgICAgICAgYSA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKCh4ID0gaXQubmV4dCgpKSwgIXguZG9uZSlcbiAgICAgICAgICAgICAgICBhLnB1c2goeC52YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJyYXlMaWtlID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gW2FycmF5TGlrZV07XG4gICAgICAgIGkgPSBhcnJheUxpa2UubGVuZ3RoO1xuICAgICAgICBpZiAodHlwZW9mIGkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBhW2ldID0gYXJyYXlMaWtlW2ldO1xuICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFthcnJheUxpa2VdO1xuICAgIH1cbiAgICBpID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBhID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pXG4gICAgICAgIGFbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgcmV0dXJuIGE7XG59XG5cbi8vIEJ5IGRlZmF1bHQsIGRlYnVnIHdpbGwgYmUgdHJ1ZSBvbmx5IGlmIHBsYXRmb3JtIGlzIGEgd2ViIHBsYXRmb3JtIGFuZCBpdHMgcGFnZSBpcyBzZXJ2ZWQgZnJvbSBsb2NhbGhvc3QuXG4vLyBXaGVuIGRlYnVnID0gdHJ1ZSwgZXJyb3IncyBzdGFja3Mgd2lsbCBjb250YWluIGFzeW5jcm9uaWMgbG9uZyBzdGFja3MuXG52YXIgZGVidWcgPSB0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQnkgZGVmYXVsdCwgdXNlIGRlYnVnIG1vZGUgaWYgc2VydmVkIGZyb20gbG9jYWxob3N0LlxuICAgIC9eKGh0dHB8aHR0cHMpOlxcL1xcLyhsb2NhbGhvc3R8MTI3XFwuMFxcLjBcXC4xKS8udGVzdChsb2NhdGlvbi5ocmVmKTtcbmZ1bmN0aW9uIHNldERlYnVnKHZhbHVlLCBmaWx0ZXIpIHtcbiAgICBkZWJ1ZyA9IHZhbHVlO1xuICAgIGxpYnJhcnlGaWx0ZXIgPSBmaWx0ZXI7XG59XG52YXIgbGlicmFyeUZpbHRlciA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XG52YXIgTkVFRFNfVEhST1dfRk9SX1NUQUNLID0gIW5ldyBFcnJvcihcIlwiKS5zdGFjaztcbmZ1bmN0aW9uIGdldEVycm9yV2l0aFN0YWNrKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmIChORUVEU19USFJPV19GT1JfU1RBQ0spXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBEb2luZyBzb21ldGhpbmcgbmF1Z2h0eSBpbiBzdHJpY3QgbW9kZSBoZXJlIHRvIHRyaWdnZXIgYSBzcGVjaWZpYyBlcnJvclxuICAgICAgICAgICAgLy8gdGhhdCBjYW4gYmUgZXhwbGljaXRlbHkgaWdub3JlZCBpbiBkZWJ1Z2dlcidzIGV4Y2VwdGlvbiBzZXR0aW5ncy5cbiAgICAgICAgICAgIC8vIElmIHdlJ2QganVzdCB0aHJvdyBuZXcgRXJyb3IoKSBoZXJlLCBJRSdzIGRlYnVnZ2VyJ3MgZXhjZXB0aW9uIHNldHRpbmdzXG4gICAgICAgICAgICAvLyB3aWxsIGp1c3QgY29uc2lkZXIgaXQgYXMgXCJleGNlcHRpb24gdGhyb3duIGJ5IGphdmFzY3JpcHQgY29kZVwiIHdoaWNoIGlzXG4gICAgICAgICAgICAvLyBzb21ldGhpbmcgeW91IHdvdWxkbid0IHdhbnQgaXQgdG8gaWdub3JlLlxuICAgICAgICAgICAgZ2V0RXJyb3JXaXRoU3RhY2suYXJndW1lbnRzO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7IC8vIEZhbGxiYWNrIGlmIGFib3ZlIGxpbmUgZG9uJ3QgdGhyb3cuXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgcmV0dXJuIG5ldyBFcnJvcigpO1xufVxuZnVuY3Rpb24gcHJldHR5U3RhY2soZXhjZXB0aW9uLCBudW1JZ25vcmVkRnJhbWVzKSB7XG4gICAgdmFyIHN0YWNrID0gZXhjZXB0aW9uLnN0YWNrO1xuICAgIGlmICghc3RhY2spXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIG51bUlnbm9yZWRGcmFtZXMgPSAobnVtSWdub3JlZEZyYW1lcyB8fCAwKTtcbiAgICBpZiAoc3RhY2suaW5kZXhPZihleGNlcHRpb24ubmFtZSkgPT09IDApXG4gICAgICAgIG51bUlnbm9yZWRGcmFtZXMgKz0gKGV4Y2VwdGlvbi5uYW1lICsgZXhjZXB0aW9uLm1lc3NhZ2UpLnNwbGl0KCdcXG4nKS5sZW5ndGg7XG4gICAgcmV0dXJuIHN0YWNrLnNwbGl0KCdcXG4nKVxuICAgICAgICAuc2xpY2UobnVtSWdub3JlZEZyYW1lcylcbiAgICAgICAgLmZpbHRlcihsaWJyYXJ5RmlsdGVyKVxuICAgICAgICAubWFwKGZ1bmN0aW9uIChmcmFtZSkgeyByZXR1cm4gXCJcXG5cIiArIGZyYW1lOyB9KVxuICAgICAgICAuam9pbignJyk7XG59XG5mdW5jdGlvbiBkZXByZWNhdGVkKHdoYXQsIGZuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHdoYXQgKyBcIiBpcyBkZXByZWNhdGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXIvRGV4aWUuanMvd2lraS9EZXByZWNhdGlvbnMuIFwiICsgcHJldHR5U3RhY2soZ2V0RXJyb3JXaXRoU3RhY2soKSwgMSkpO1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG52YXIgZGV4aWVFcnJvck5hbWVzID0gW1xuICAgICdNb2RpZnknLFxuICAgICdCdWxrJyxcbiAgICAnT3BlbkZhaWxlZCcsXG4gICAgJ1ZlcnNpb25DaGFuZ2UnLFxuICAgICdTY2hlbWEnLFxuICAgICdVcGdyYWRlJyxcbiAgICAnSW52YWxpZFRhYmxlJyxcbiAgICAnTWlzc2luZ0FQSScsXG4gICAgJ05vU3VjaERhdGFiYXNlJyxcbiAgICAnSW52YWxpZEFyZ3VtZW50JyxcbiAgICAnU3ViVHJhbnNhY3Rpb24nLFxuICAgICdVbnN1cHBvcnRlZCcsXG4gICAgJ0ludGVybmFsJyxcbiAgICAnRGF0YWJhc2VDbG9zZWQnLFxuICAgICdQcmVtYXR1cmVDb21taXQnLFxuICAgICdGb3JlaWduQXdhaXQnXG5dO1xudmFyIGlkYkRvbUVycm9yTmFtZXMgPSBbXG4gICAgJ1Vua25vd24nLFxuICAgICdDb25zdHJhaW50JyxcbiAgICAnRGF0YScsXG4gICAgJ1RyYW5zYWN0aW9uSW5hY3RpdmUnLFxuICAgICdSZWFkT25seScsXG4gICAgJ1ZlcnNpb24nLFxuICAgICdOb3RGb3VuZCcsXG4gICAgJ0ludmFsaWRTdGF0ZScsXG4gICAgJ0ludmFsaWRBY2Nlc3MnLFxuICAgICdBYm9ydCcsXG4gICAgJ1RpbWVvdXQnLFxuICAgICdRdW90YUV4Y2VlZGVkJyxcbiAgICAnU3ludGF4JyxcbiAgICAnRGF0YUNsb25lJ1xuXTtcbnZhciBlcnJvckxpc3QgPSBkZXhpZUVycm9yTmFtZXMuY29uY2F0KGlkYkRvbUVycm9yTmFtZXMpO1xudmFyIGRlZmF1bHRUZXh0cyA9IHtcbiAgICBWZXJzaW9uQ2hhbmdlZDogXCJEYXRhYmFzZSB2ZXJzaW9uIGNoYW5nZWQgYnkgb3RoZXIgZGF0YWJhc2UgY29ubmVjdGlvblwiLFxuICAgIERhdGFiYXNlQ2xvc2VkOiBcIkRhdGFiYXNlIGhhcyBiZWVuIGNsb3NlZFwiLFxuICAgIEFib3J0OiBcIlRyYW5zYWN0aW9uIGFib3J0ZWRcIixcbiAgICBUcmFuc2FjdGlvbkluYWN0aXZlOiBcIlRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGNvbXBsZXRlZCBvciBmYWlsZWRcIlxufTtcbi8vXG4vLyBEZXhpZUVycm9yIC0gYmFzZSBjbGFzcyBvZiBhbGwgb3V0IGV4Y2VwdGlvbnMuXG4vL1xuZnVuY3Rpb24gRGV4aWVFcnJvcihuYW1lLCBtc2cpIHtcbiAgICAvLyBSZWFzb24gd2UgZG9uJ3QgdXNlIEVTNiBjbGFzc2VzIGlzIGJlY2F1c2U6XG4gICAgLy8gMS4gSXQgYmxvYXRzIHRyYW5zcGlsZWQgY29kZSBhbmQgaW5jcmVhc2VzIHNpemUgb2YgbWluaWZpZWQgY29kZS5cbiAgICAvLyAyLiBJdCBkb2Vzbid0IGdpdmUgdXMgbXVjaCBpbiB0aGlzIGNhc2UuXG4gICAgLy8gMy4gSXQgd291bGQgcmVxdWlyZSBzdWIgY2xhc3NlcyB0byBjYWxsIHN1cGVyKCksIHdoaWNoXG4gICAgLy8gICAgaXMgbm90IG5lZWRlZCB3aGVuIGRlcml2aW5nIGZyb20gRXJyb3IuXG4gICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtc2c7XG59XG5kZXJpdmUoRGV4aWVFcnJvcikuZnJvbShFcnJvcikuZXh0ZW5kKHtcbiAgICBzdGFjazoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFjayB8fFxuICAgICAgICAgICAgICAgICh0aGlzLl9zdGFjayA9IHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZSArIHByZXR0eVN0YWNrKHRoaXMuX2UsIDIpKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubmFtZSArIFwiOiBcIiArIHRoaXMubWVzc2FnZTsgfVxufSk7XG5mdW5jdGlvbiBnZXRNdWx0aUVycm9yTWVzc2FnZShtc2csIGZhaWx1cmVzKSB7XG4gICAgcmV0dXJuIG1zZyArIFwiLiBFcnJvcnM6IFwiICsgZmFpbHVyZXNcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gZi50b1N0cmluZygpOyB9KVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh2LCBpLCBzKSB7IHJldHVybiBzLmluZGV4T2YodikgPT09IGk7IH0pIC8vIE9ubHkgdW5pcXVlIGVycm9yIHN0cmluZ3NcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xufVxuLy9cbi8vIE1vZGlmeUVycm9yIC0gdGhyb3duIGluIENvbGxlY3Rpb24ubW9kaWZ5KClcbi8vIFNwZWNpZmljIGNvbnN0cnVjdG9yIGJlY2F1c2UgaXQgY29udGFpbnMgbWVtYmVycyBmYWlsdXJlcyBhbmQgZmFpbGVkS2V5cy5cbi8vXG5mdW5jdGlvbiBNb2RpZnlFcnJvcihtc2csIGZhaWx1cmVzLCBzdWNjZXNzQ291bnQsIGZhaWxlZEtleXMpIHtcbiAgICB0aGlzLl9lID0gZ2V0RXJyb3JXaXRoU3RhY2soKTtcbiAgICB0aGlzLmZhaWx1cmVzID0gZmFpbHVyZXM7XG4gICAgdGhpcy5mYWlsZWRLZXlzID0gZmFpbGVkS2V5cztcbiAgICB0aGlzLnN1Y2Nlc3NDb3VudCA9IHN1Y2Nlc3NDb3VudDtcbn1cbmRlcml2ZShNb2RpZnlFcnJvcikuZnJvbShEZXhpZUVycm9yKTtcbmZ1bmN0aW9uIEJ1bGtFcnJvcihtc2csIGZhaWx1cmVzKSB7XG4gICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgdGhpcy5uYW1lID0gXCJCdWxrRXJyb3JcIjtcbiAgICB0aGlzLmZhaWx1cmVzID0gZmFpbHVyZXM7XG4gICAgdGhpcy5tZXNzYWdlID0gZ2V0TXVsdGlFcnJvck1lc3NhZ2UobXNnLCBmYWlsdXJlcyk7XG59XG5kZXJpdmUoQnVsa0Vycm9yKS5mcm9tKERleGllRXJyb3IpO1xuLy9cbi8vXG4vLyBEeW5hbWljYWxseSBnZW5lcmF0ZSBlcnJvciBuYW1lcyBhbmQgZXhjZXB0aW9uIGNsYXNzZXMgYmFzZWRcbi8vIG9uIHRoZSBuYW1lcyBpbiBlcnJvckxpc3QuXG4vL1xuLy9cbi8vIE1hcCBvZiB7RXJyb3JOYW1lIC0+IEVycm9yTmFtZSArIFwiRXJyb3JcIn1cbnZhciBlcnJuYW1lcyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkgeyByZXR1cm4gKG9ialtuYW1lXSA9IG5hbWUgKyBcIkVycm9yXCIsIG9iaik7IH0sIHt9KTtcbi8vIE5lZWQgYW4gYWxpYXMgZm9yIERleGllRXJyb3IgYmVjYXVzZSB3ZSdyZSBnb25uYSBjcmVhdGUgc3ViY2xhc3NlcyB3aXRoIHRoZSBzYW1lIG5hbWUuXG52YXIgQmFzZUV4Y2VwdGlvbiA9IERleGllRXJyb3I7XG4vLyBNYXAgb2Yge0Vycm9yTmFtZSAtPiBleGNlcHRpb24gY29uc3RydWN0b3J9XG52YXIgZXhjZXB0aW9ucyA9IGVycm9yTGlzdC5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgIC8vIExldCB0aGUgbmFtZSBiZSBcIkRleGllRXJyb3JcIiBiZWNhdXNlIHRoaXMgbmFtZSBtYXlcbiAgICAvLyBiZSBzaG93biBpbiBjYWxsIHN0YWNrIGFuZCB3aGVuIGRlYnVnZ2luZy4gRGV4aWVFcnJvciBpc1xuICAgIC8vIHRoZSBtb3N0IHRydWUgbmFtZSBiZWNhdXNlIGl0IGRlcml2ZXMgZnJvbSBEZXhpZUVycm9yLFxuICAgIC8vIGFuZCB3ZSBjYW5ub3QgY2hhbmdlIEZ1bmN0aW9uLm5hbWUgcHJvZ3JhbWF0aWNhbGx5IHdpdGhvdXRcbiAgICAvLyBkeW5hbWljYWxseSBjcmVhdGUgYSBGdW5jdGlvbiBvYmplY3QsIHdoaWNoIHdvdWxkIGJlIGNvbnNpZGVyZWRcbiAgICAvLyAnZXZhbC1ldmlsJy5cbiAgICB2YXIgZnVsbE5hbWUgPSBuYW1lICsgXCJFcnJvclwiO1xuICAgIGZ1bmN0aW9uIERleGllRXJyb3IobXNnT3JJbm5lciwgaW5uZXIpIHtcbiAgICAgICAgdGhpcy5fZSA9IGdldEVycm9yV2l0aFN0YWNrKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IGZ1bGxOYW1lO1xuICAgICAgICBpZiAoIW1zZ09ySW5uZXIpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IGRlZmF1bHRUZXh0c1tuYW1lXSB8fCBmdWxsTmFtZTtcbiAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtc2dPcklubmVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnT3JJbm5lcjtcbiAgICAgICAgICAgIHRoaXMuaW5uZXIgPSBpbm5lciB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtc2dPcklubmVyID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnT3JJbm5lci5uYW1lICsgXCIgXCIgKyBtc2dPcklubmVyLm1lc3NhZ2U7XG4gICAgICAgICAgICB0aGlzLmlubmVyID0gbXNnT3JJbm5lcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXJpdmUoRGV4aWVFcnJvcikuZnJvbShCYXNlRXhjZXB0aW9uKTtcbiAgICBvYmpbbmFtZV0gPSBEZXhpZUVycm9yO1xuICAgIHJldHVybiBvYmo7XG59LCB7fSk7XG4vLyBVc2UgRUNNQVNDUklQVCBzdGFuZGFyZCBleGNlcHRpb25zIHdoZXJlIGFwcGxpY2FibGU6XG5leGNlcHRpb25zLlN5bnRheCA9IFN5bnRheEVycm9yO1xuZXhjZXB0aW9ucy5UeXBlID0gVHlwZUVycm9yO1xuZXhjZXB0aW9ucy5SYW5nZSA9IFJhbmdlRXJyb3I7XG52YXIgZXhjZXB0aW9uTWFwID0gaWRiRG9tRXJyb3JOYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKG9iaiwgbmFtZSkge1xuICAgIG9ialtuYW1lICsgXCJFcnJvclwiXSA9IGV4Y2VwdGlvbnNbbmFtZV07XG4gICAgcmV0dXJuIG9iajtcbn0sIHt9KTtcbmZ1bmN0aW9uIG1hcEVycm9yKGRvbUVycm9yLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFkb21FcnJvciB8fCBkb21FcnJvciBpbnN0YW5jZW9mIERleGllRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgfHwgZG9tRXJyb3IgaW5zdGFuY2VvZiBTeW50YXhFcnJvciB8fCAhZG9tRXJyb3IubmFtZSB8fCAhZXhjZXB0aW9uTWFwW2RvbUVycm9yLm5hbWVdKVxuICAgICAgICByZXR1cm4gZG9tRXJyb3I7XG4gICAgdmFyIHJ2ID0gbmV3IGV4Y2VwdGlvbk1hcFtkb21FcnJvci5uYW1lXShtZXNzYWdlIHx8IGRvbUVycm9yLm1lc3NhZ2UsIGRvbUVycm9yKTtcbiAgICBpZiAoXCJzdGFja1wiIGluIGRvbUVycm9yKSB7XG4gICAgICAgIC8vIERlcml2ZSBzdGFjayBmcm9tIGlubmVyIGV4Y2VwdGlvbiBpZiBpdCBoYXMgYSBzdGFja1xuICAgICAgICBzZXRQcm9wKHJ2LCBcInN0YWNrXCIsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXIuc3RhY2s7XG4gICAgICAgICAgICB9IH0pO1xuICAgIH1cbiAgICByZXR1cm4gcnY7XG59XG52YXIgZnVsbE5hbWVFeGNlcHRpb25zID0gZXJyb3JMaXN0LnJlZHVjZShmdW5jdGlvbiAob2JqLCBuYW1lKSB7XG4gICAgaWYgKFtcIlN5bnRheFwiLCBcIlR5cGVcIiwgXCJSYW5nZVwiXS5pbmRleE9mKG5hbWUpID09PSAtMSlcbiAgICAgICAgb2JqW25hbWUgKyBcIkVycm9yXCJdID0gZXhjZXB0aW9uc1tuYW1lXTtcbiAgICByZXR1cm4gb2JqO1xufSwge30pO1xuZnVsbE5hbWVFeGNlcHRpb25zLk1vZGlmeUVycm9yID0gTW9kaWZ5RXJyb3I7XG5mdWxsTmFtZUV4Y2VwdGlvbnMuRGV4aWVFcnJvciA9IERleGllRXJyb3I7XG5mdWxsTmFtZUV4Y2VwdGlvbnMuQnVsa0Vycm9yID0gQnVsa0Vycm9yO1xuXG5mdW5jdGlvbiBub3AoKSB7IH1cbmZ1bmN0aW9uIG1pcnJvcih2YWwpIHsgcmV0dXJuIHZhbDsgfVxuZnVuY3Rpb24gcHVyZUZ1bmN0aW9uQ2hhaW4oZjEsIGYyKSB7XG4gICAgLy8gRW5hYmxlcyBjaGFpbmVkIGV2ZW50cyB0aGF0IHRha2VzIE9ORSBhcmd1bWVudCBhbmQgcmV0dXJucyBpdCB0byB0aGUgbmV4dCBmdW5jdGlvbiBpbiBjaGFpbi5cbiAgICAvLyBUaGlzIHBhdHRlcm4gaXMgdXNlZCBpbiB0aGUgaG9vayhcInJlYWRpbmdcIikgZXZlbnQuXG4gICAgaWYgKGYxID09IG51bGwgfHwgZjEgPT09IG1pcnJvcilcbiAgICAgICAgcmV0dXJuIGYyO1xuICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBmMihmMSh2YWwpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gY2FsbEJvdGgob24xLCBvbjIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgb24yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGhvb2tDcmVhdGluZ0NoYWluKGYxLCBmMikge1xuICAgIC8vIEVuYWJsZXMgY2hhaW5lZCBldmVudHMgdGhhdCB0YWtlcyBzZXZlcmFsIGFyZ3VtZW50cyBhbmQgbWF5IG1vZGlmeSBmaXJzdCBhcmd1bWVudCBieSBtYWtpbmcgYSBtb2RpZmljYXRpb24gYW5kIHRoZW4gcmV0dXJuaW5nIHRoZSBzYW1lIGluc3RhbmNlLlxuICAgIC8vIFRoaXMgcGF0dGVybiBpcyB1c2VkIGluIHRoZSBob29rKFwiY3JlYXRpbmdcIikgZXZlbnQuXG4gICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzID0gZjEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKHJlcyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gcmVzO1xuICAgICAgICB2YXIgb25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MsIC8vIEluIGNhc2UgZXZlbnQgbGlzdGVuZXIgaGFzIHNldCB0aGlzLm9uc3VjY2Vzc1xuICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yOyAvLyBJbiBjYXNlIGV2ZW50IGxpc3RlbmVyIGhhcyBzZXQgdGhpcy5vbmVycm9yXG4gICAgICAgIHRoaXMub25zdWNjZXNzID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgdmFyIHJlczIgPSBmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAob25zdWNjZXNzKVxuICAgICAgICAgICAgdGhpcy5vbnN1Y2Nlc3MgPSB0aGlzLm9uc3VjY2VzcyA/IGNhbGxCb3RoKG9uc3VjY2VzcywgdGhpcy5vbnN1Y2Nlc3MpIDogb25zdWNjZXNzO1xuICAgICAgICBpZiAob25lcnJvcilcbiAgICAgICAgICAgIHRoaXMub25lcnJvciA9IHRoaXMub25lcnJvciA/IGNhbGxCb3RoKG9uZXJyb3IsIHRoaXMub25lcnJvcikgOiBvbmVycm9yO1xuICAgICAgICByZXR1cm4gcmVzMiAhPT0gdW5kZWZpbmVkID8gcmVzMiA6IHJlcztcbiAgICB9O1xufVxuZnVuY3Rpb24gaG9va0RlbGV0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBmMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgb25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MsIC8vIEluIGNhc2UgZXZlbnQgbGlzdGVuZXIgaGFzIHNldCB0aGlzLm9uc3VjY2Vzc1xuICAgICAgICBvbmVycm9yID0gdGhpcy5vbmVycm9yOyAvLyBJbiBjYXNlIGV2ZW50IGxpc3RlbmVyIGhhcyBzZXQgdGhpcy5vbmVycm9yXG4gICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbmVycm9yID0gbnVsbDtcbiAgICAgICAgZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG9uc3VjY2VzcylcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgaWYgKG9uZXJyb3IpXG4gICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9uZXJyb3IgPyBjYWxsQm90aChvbmVycm9yLCB0aGlzLm9uZXJyb3IpIDogb25lcnJvcjtcbiAgICB9O1xufVxuZnVuY3Rpb24gaG9va1VwZGF0aW5nQ2hhaW4oZjEsIGYyKSB7XG4gICAgaWYgKGYxID09PSBub3ApXG4gICAgICAgIHJldHVybiBmMjtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1vZGlmaWNhdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGV4dGVuZChtb2RpZmljYXRpb25zLCByZXMpOyAvLyBJZiBmMSByZXR1cm5zIG5ldyBtb2RpZmljYXRpb25zLCBleHRlbmQgY2FsbGVyJ3MgbW9kaWZpY2F0aW9ucyB3aXRoIHRoZSByZXN1bHQgYmVmb3JlIGNhbGxpbmcgbmV4dCBpbiBjaGFpbi5cbiAgICAgICAgdmFyIG9uc3VjY2VzcyA9IHRoaXMub25zdWNjZXNzLCAvLyBJbiBjYXNlIGV2ZW50IGxpc3RlbmVyIGhhcyBzZXQgdGhpcy5vbnN1Y2Nlc3NcbiAgICAgICAgb25lcnJvciA9IHRoaXMub25lcnJvcjsgLy8gSW4gY2FzZSBldmVudCBsaXN0ZW5lciBoYXMgc2V0IHRoaXMub25lcnJvclxuICAgICAgICB0aGlzLm9uc3VjY2VzcyA9IG51bGw7XG4gICAgICAgIHRoaXMub25lcnJvciA9IG51bGw7XG4gICAgICAgIHZhciByZXMyID0gZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG9uc3VjY2VzcylcbiAgICAgICAgICAgIHRoaXMub25zdWNjZXNzID0gdGhpcy5vbnN1Y2Nlc3MgPyBjYWxsQm90aChvbnN1Y2Nlc3MsIHRoaXMub25zdWNjZXNzKSA6IG9uc3VjY2VzcztcbiAgICAgICAgaWYgKG9uZXJyb3IpXG4gICAgICAgICAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9uZXJyb3IgPyBjYWxsQm90aChvbmVycm9yLCB0aGlzLm9uZXJyb3IpIDogb25lcnJvcjtcbiAgICAgICAgcmV0dXJuIHJlcyA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIChyZXMyID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiByZXMyKSA6XG4gICAgICAgICAgICAoZXh0ZW5kKHJlcywgcmVzMikpO1xuICAgIH07XG59XG5mdW5jdGlvbiByZXZlcnNlU3RvcHBhYmxlRXZlbnRDaGFpbihmMSwgZjIpIHtcbiAgICBpZiAoZjEgPT09IG5vcClcbiAgICAgICAgcmV0dXJuIGYyO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcHJvbWlzYWJsZUNoYWluKGYxLCBmMikge1xuICAgIGlmIChmMSA9PT0gbm9wKVxuICAgICAgICByZXR1cm4gZjI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJlcyA9IGYxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChyZXMgJiYgdHlwZW9mIHJlcy50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgdGhpeiA9IHRoaXMsIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgcmV0dXJuIHJlcy50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZjIuYXBwbHkodGhpeiwgYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuXG4vKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTcgRGF2aWQgRmFobGFuZGVyXG4gKiBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCwgSmFudWFyeSAyMDA0LCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqL1xuLy9cbi8vIFByb21pc2UgYW5kIFpvbmUgKFBTRCkgZm9yIERleGllIGxpYnJhcnlcbi8vXG4vLyBJIHN0YXJ0ZWQgb3V0IHdyaXRpbmcgdGhpcyBQcm9taXNlIGNsYXNzIGJ5IGNvcHlpbmcgcHJvbWlzZS1saWdodCAoaHR0cHM6Ly9naXRodWIuY29tL3RheWxvcmhha2VzL3Byb21pc2UtbGlnaHQpIGJ5XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGF5bG9yaGFrZXMgLSBhbiBBKyBhbmQgRUNNQVNDUklQVCA2IGNvbXBsaWFudCBQcm9taXNlIGltcGxlbWVudGF0aW9uLlxuLy9cbi8vIEluIHByZXZpb3VzIHZlcnNpb25zIHRoaXMgd2FzIGZpeGVkIGJ5IG5vdCBjYWxsaW5nIHNldFRpbWVvdXQgd2hlbiBrbm93aW5nIHRoYXQgdGhlIHJlc29sdmUoKSBvciByZWplY3QoKSBjYW1lIGZyb20gYW5vdGhlclxuLy8gdGljay4gSW4gRGV4aWUgdjEuNC4wLCBJJ3ZlIHJld3JpdHRlbiB0aGUgUHJvbWlzZSBjbGFzcyBlbnRpcmVseS4gSnVzdCBzb21lIGZyYWdtZW50cyBvZiBwcm9taXNlLWxpZ2h0IGlzIGxlZnQuIEkgdXNlXG4vLyBhbm90aGVyIHN0cmF0ZWd5IG5vdyB0aGF0IHNpbXBsaWZpZXMgZXZlcnl0aGluZyBhIGxvdDogdG8gYWx3YXlzIGV4ZWN1dGUgY2FsbGJhY2tzIGluIGEgbmV3IG1pY3JvLXRhc2ssIGJ1dCBoYXZlIGFuIG93biBtaWNyby10YXNrXG4vLyBlbmdpbmUgdGhhdCBpcyBpbmRleGVkREIgY29tcGxpYW50IGFjcm9zcyBhbGwgYnJvd3NlcnMuXG4vLyBQcm9taXNlIGNsYXNzIGhhcyBhbHNvIGJlZW4gb3B0aW1pemVkIGEgbG90IHdpdGggaW5zcGlyYXRpb24gZnJvbSBibHVlYmlyZCAtIHRvIGF2b2lkIGNsb3N1cmVzIGFzIG11Y2ggYXMgcG9zc2libGUuXG4vLyBBbHNvIHdpdGggaW5zcGlyYXRpb24gZnJvbSBibHVlYmlyZCwgYXN5bmNyb25pYyBzdGFja3MgaW4gZGVidWcgbW9kZS5cbi8vXG4vLyBTcGVjaWZpYyBub24tc3RhbmRhcmQgZmVhdHVyZXMgb2YgdGhpcyBQcm9taXNlIGNsYXNzOlxuLy8gKiBDdXN0b20gem9uZSBzdXBwb3J0IChhLmsuYS4gUFNEKSB3aXRoIGFiaWxpdHkgdG8ga2VlcCB6b25lcyBhbHNvIHdoZW4gdXNpbmcgbmF0aXZlIHByb21pc2VzIGFzIHdlbGwgYXNcbi8vICAgbmF0aXZlIGFzeW5jIC8gYXdhaXQuXG4vLyAqIFByb21pc2UuZm9sbG93KCkgbWV0aG9kIGJ1aWx0IHVwb24gdGhlIGN1c3RvbSB6b25lIGVuZ2luZSwgdGhhdCBhbGxvd3MgdXNlciB0byB0cmFjayBhbGwgcHJvbWlzZXMgY3JlYXRlZCBmcm9tIGN1cnJlbnQgc3RhY2sgZnJhbWVcbi8vICAgYW5kIGJlbG93ICsgYWxsIHByb21pc2VzIHRoYXQgdGhvc2UgcHJvbWlzZXMgY3JlYXRlcyBvciBhd2FpdHMuXG4vLyAqIERldGVjdCBhbnkgdW5oYW5kbGVkIHByb21pc2UgaW4gYSBQU0Qtc2NvcGUgKFBTRC5vbnVuaGFuZGxlZCkuIFxuLy9cbi8vIERhdmlkIEZhaGxhbmRlciwgaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXJcbi8vXG4vLyBKdXN0IGEgcG9pbnRlciB0aGF0IG9ubHkgdGhpcyBtb2R1bGUga25vd3MgYWJvdXQuXG4vLyBVc2VkIGluIFByb21pc2UgY29uc3RydWN0b3IgdG8gZW11bGF0ZSBhIHByaXZhdGUgY29uc3RydWN0b3IuXG52YXIgSU5URVJOQUwgPSB7fTtcbi8vIEFzeW5jIHN0YWNrcyAobG9uZyBzdGFja3MpIG11c3Qgbm90IGdyb3cgaW5maW5pdGVseS5cbnZhciBMT05HX1NUQUNLU19DTElQX0xJTUlUID0gMTAwO1xudmFyIE1BWF9MT05HX1NUQUNLUyA9IDIwO1xudmFyIFpPTkVfRUNIT19MSU1JVCA9IDc7XG52YXIgbmF0aXZlUHJvbWlzZUluc3RhbmNlQW5kUHJvdG8gPSAoZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEJlIGFibGUgdG8gcGF0Y2ggbmF0aXZlIGFzeW5jIGZ1bmN0aW9uc1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKFwibGV0IEY9YXN5bmMgKCk9Pnt9LHA9RigpO3JldHVybiBbcCxPYmplY3QuZ2V0UHJvdG90eXBlT2YocCksUHJvbWlzZS5yZXNvbHZlKCksRi5jb25zdHJ1Y3Rvcl07XCIpKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHZhciBQID0gX2dsb2JhbC5Qcm9taXNlO1xuICAgICAgICByZXR1cm4gUCA/XG4gICAgICAgICAgICBbUC5yZXNvbHZlKCksIFAucHJvdG90eXBlLCBQLnJlc29sdmUoKV0gOlxuICAgICAgICAgICAgW107XG4gICAgfVxufSkoKTtcbnZhciByZXNvbHZlZE5hdGl2ZVByb21pc2UgPSBuYXRpdmVQcm9taXNlSW5zdGFuY2VBbmRQcm90b1swXTtcbnZhciBuYXRpdmVQcm9taXNlUHJvdG8gPSBuYXRpdmVQcm9taXNlSW5zdGFuY2VBbmRQcm90b1sxXTtcbnZhciByZXNvbHZlZEdsb2JhbFByb21pc2UgPSBuYXRpdmVQcm9taXNlSW5zdGFuY2VBbmRQcm90b1syXTtcbnZhciBuYXRpdmVQcm9taXNlVGhlbiA9IG5hdGl2ZVByb21pc2VQcm90byAmJiBuYXRpdmVQcm9taXNlUHJvdG8udGhlbjtcbnZhciBOYXRpdmVQcm9taXNlID0gcmVzb2x2ZWROYXRpdmVQcm9taXNlICYmIHJlc29sdmVkTmF0aXZlUHJvbWlzZS5jb25zdHJ1Y3RvcjtcbnZhciBBc3luY0Z1bmN0aW9uID0gbmF0aXZlUHJvbWlzZUluc3RhbmNlQW5kUHJvdG9bM107XG52YXIgcGF0Y2hHbG9iYWxQcm9taXNlID0gISFyZXNvbHZlZEdsb2JhbFByb21pc2U7XG52YXIgc3RhY2tfYmVpbmdfZ2VuZXJhdGVkID0gZmFsc2U7XG4vKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB1c2VkIG9ubHkgZm9yIHRoZSB2ZXJ5IGZpcnN0IHByb21pc2UgaW4gYSBwcm9taXNlIGNoYWluLlxuICAgQXMgc29vbiBhcyB0aGVuIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQsIGFsbCBuZXh0IHRhc2tzIHdpbGwgYmUgZXhlY3V0ZWQgaW4gbWljcm8gdGlja3NcbiAgIGVtdWxhdGVkIGluIHRoaXMgbW9kdWxlLiBGb3IgaW5kZXhlZERCIGNvbXBhdGliaWxpdHksIHRoaXMgbWVhbnMgdGhhdCBldmVyeSBtZXRob2QgbmVlZHMgdG9cbiAgIGV4ZWN1dGUgYXQgbGVhc3Qgb25lIHByb21pc2UgYmVmb3JlIGRvaW5nIGFuIGluZGV4ZWREQiBvcGVyYXRpb24uIERleGllIHdpbGwgYWx3YXlzIGNhbGxcbiAgIGRiLnJlYWR5KCkudGhlbigpIGZvciBldmVyeSBvcGVyYXRpb24gdG8gbWFrZSBzdXJlIHRoZSBpbmRleGVkREIgZXZlbnQgaXMgc3RhcnRlZCBpbiBhblxuICAgaW5kZXhlZERCLWNvbXBhdGlibGUgZW11bGF0ZWQgbWljcm8gdGFzayBsb29wLlxuKi9cbnZhciBzY2hlZHVsZVBoeXNpY2FsVGljayA9IHJlc29sdmVkR2xvYmFsUHJvbWlzZSA/XG4gICAgZnVuY3Rpb24gKCkgeyByZXNvbHZlZEdsb2JhbFByb21pc2UudGhlbihwaHlzaWNhbFRpY2spOyB9XG4gICAgOlxuICAgICAgICBfZ2xvYmFsLnNldEltbWVkaWF0ZSA/XG4gICAgICAgICAgICAvLyBzZXRJbW1lZGlhdGUgc3VwcG9ydGVkLiBUaG9zZSBtb2Rlcm4gcGxhdGZvcm1zIGFsc28gc3VwcG9ydHMgRnVuY3Rpb24uYmluZCgpLlxuICAgICAgICAgICAgc2V0SW1tZWRpYXRlLmJpbmQobnVsbCwgcGh5c2ljYWxUaWNrKSA6XG4gICAgICAgICAgICBfZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgP1xuICAgICAgICAgICAgICAgIC8vIE11dGF0aW9uT2JzZXJ2ZXIgc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGlkZGVuRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgKG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBoeXNpY2FsVGljaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZGVuRGl2ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfSkpLm9ic2VydmUoaGlkZGVuRGl2LCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkRpdi5zZXRBdHRyaWJ1dGUoJ2knLCAnMScpO1xuICAgICAgICAgICAgICAgIH0gOlxuICAgICAgICAgICAgICAgIC8vIE5vIHN1cHBvcnQgZm9yIHNldEltbWVkaWF0ZSBvciBNdXRhdGlvbk9ic2VydmVyLiBObyB3b3JyeSwgc2V0VGltZW91dCBpcyBvbmx5IGNhbGxlZFxuICAgICAgICAgICAgICAgIC8vIG9uY2UgdGltZS4gRXZlcnkgdGljayB0aGF0IGZvbGxvd3Mgd2lsbCBiZSBvdXIgZW11bGF0ZWQgbWljcm8gdGljay5cbiAgICAgICAgICAgICAgICAvLyBDb3VsZCBoYXZlIHVzZXMgc2V0VGltZW91dC5iaW5kKG51bGwsIDAsIHBoeXNpY2FsVGljaykgaWYgaXQgd2FzbnQgZm9yIHRoYXQgRkYxMyBhbmQgYmVsb3cgaGFzIGEgYnVnIFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgc2V0VGltZW91dChwaHlzaWNhbFRpY2ssIDApOyB9O1xuLy8gQ29uZmlndXJhYmxlIHRocm91Z2ggUHJvbWlzZS5zY2hlZHVsZXIuXG4vLyBEb24ndCBleHBvcnQgYmVjYXVzZSBpdCB3b3VsZCBiZSB1bnNhZmUgdG8gbGV0IHVua25vd25cbi8vIGNvZGUgY2FsbCBpdCB1bmxlc3MgdGhleSBkbyB0cnkuLmNhdGNoIHdpdGhpbiB0aGVpciBjYWxsYmFjay5cbi8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHJldHJpZXZlZCB0aHJvdWdoIGdldHRlciBvZiBQcm9taXNlLnNjaGVkdWxlciB0aG91Z2gsXG4vLyBidXQgdXNlcnMgbXVzdCBub3QgZG8gUHJvbWlzZS5zY2hlZHVsZXIgPSBteUZ1bmNUaGF0VGhyb3dzRXhjZXB0aW9uXG52YXIgYXNhcCQxID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgbWljcm90aWNrUXVldWUucHVzaChbY2FsbGJhY2ssIGFyZ3NdKTtcbiAgICBpZiAobmVlZHNOZXdQaHlzaWNhbFRpY2spIHtcbiAgICAgICAgc2NoZWR1bGVQaHlzaWNhbFRpY2soKTtcbiAgICAgICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICB9XG59O1xudmFyIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWU7XG52YXIgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlO1xudmFyIHVuaGFuZGxlZEVycm9ycyA9IFtdO1xudmFyIHJlamVjdGluZ0Vycm9ycyA9IFtdO1xudmFyIGN1cnJlbnRGdWxmaWxsZXIgPSBudWxsO1xudmFyIHJlamVjdGlvbk1hcHBlciA9IG1pcnJvcjsgLy8gUmVtb3ZlIGluIG5leHQgbWFqb3Igd2hlbiByZW1vdmluZyBlcnJvciBtYXBwaW5nIG9mIERPTUVycm9ycyBhbmQgRE9NRXhjZXB0aW9uc1xudmFyIGdsb2JhbFBTRCA9IHtcbiAgICBpZDogJ2dsb2JhbCcsXG4gICAgZ2xvYmFsOiB0cnVlLFxuICAgIHJlZjogMCxcbiAgICB1bmhhbmRsZWRzOiBbXSxcbiAgICBvbnVuaGFuZGxlZDogZ2xvYmFsRXJyb3IsXG4gICAgcGdwOiBmYWxzZSxcbiAgICBlbnY6IHt9LFxuICAgIGZpbmFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5oYW5kbGVkcy5mb3JFYWNoKGZ1bmN0aW9uICh1aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBnbG9iYWxFcnJvcih1aFswXSwgdWhbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xudmFyIFBTRCA9IGdsb2JhbFBTRDtcbnZhciBtaWNyb3RpY2tRdWV1ZSA9IFtdOyAvLyBDYWxsYmFja3MgdG8gY2FsbCBpbiB0aGlzIG9yIG5leHQgcGh5c2ljYWwgdGljay5cbnZhciBudW1TY2hlZHVsZWRDYWxscyA9IDA7IC8vIE51bWJlciBvZiBsaXN0ZW5lci1jYWxscyBsZWZ0IHRvIGRvIGluIHRoaXMgcGh5c2ljYWwgdGljay5cbnZhciB0aWNrRmluYWxpemVycyA9IFtdOyAvLyBGaW5hbGl6ZXJzIHRvIGNhbGwgd2hlbiB0aGVyZSBhcmUgbm8gbW9yZSBhc3luYyBjYWxscyBzY2hlZHVsZWQgd2l0aGluIGN1cnJlbnQgcGh5c2ljYWwgdGljay5cbmZ1bmN0aW9uIFByb21pc2UoZm4pIHtcbiAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLm9udW5jYXRjaGVkID0gbm9wOyAvLyBEZXByZWNhdGUgaW4gbmV4dCBtYWpvci4gTm90IG5lZWRlZC4gQmV0dGVyIHRvIHVzZSBnbG9iYWwgZXJyb3IgaGFuZGxlci5cbiAgICAvLyBBIGxpYnJhcnkgbWF5IHNldCBgcHJvbWlzZS5fbGliID0gdHJ1ZTtgIGFmdGVyIHByb21pc2UgaXMgY3JlYXRlZCB0byBtYWtlIHJlc29sdmUoKSBvciByZWplY3QoKVxuICAgIC8vIGV4ZWN1dGUgdGhlIG1pY3JvdGFzayBlbmdpbmUgaW1wbGljaXRlbHkgd2l0aGluIHRoZSBjYWxsIHRvIHJlc29sdmUoKSBvciByZWplY3QoKS5cbiAgICAvLyBUbyByZW1haW4gQSsgY29tcGxpYW50LCBhIGxpYnJhcnkgbXVzdCBvbmx5IHNldCBgX2xpYj10cnVlYCBpZiBpdCBjYW4gZ3VhcmFudGVlIHRoYXQgdGhlIHN0YWNrXG4gICAgLy8gb25seSBjb250YWlucyBsaWJyYXJ5IGNvZGUgd2hlbiBjYWxsaW5nIHJlc29sdmUoKSBvciByZWplY3QoKS5cbiAgICAvLyBSVUxFIE9GIFRIVU1COiBPTkxZIHNldCBfbGliID0gdHJ1ZSBmb3IgcHJvbWlzZXMgZXhwbGljaXRlbHkgcmVzb2x2aW5nL3JlamVjdGluZyBkaXJlY3RseSBmcm9tXG4gICAgLy8gZ2xvYmFsIHNjb3BlIChldmVudCBoYW5kbGVyLCB0aW1lciBldGMpIVxuICAgIHRoaXMuX2xpYiA9IGZhbHNlO1xuICAgIC8vIEN1cnJlbnQgYXN5bmMgc2NvcGVcbiAgICB2YXIgcHNkID0gKHRoaXMuX1BTRCA9IFBTRCk7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIHRoaXMuX3N0YWNrSG9sZGVyID0gZ2V0RXJyb3JXaXRoU3RhY2soKTtcbiAgICAgICAgdGhpcy5fcHJldiA9IG51bGw7XG4gICAgICAgIHRoaXMuX251bVByZXYgPSAwOyAvLyBOdW1iZXIgb2YgcHJldmlvdXMgcHJvbWlzZXMgKGZvciBsb25nIHN0YWNrcylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoZm4gIT09IElOVEVSTkFMKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm90IGEgZnVuY3Rpb24nKTtcbiAgICAgICAgLy8gUHJpdmF0ZSBjb25zdHJ1Y3RvciAoSU5URVJOQUwsIHN0YXRlLCB2YWx1ZSkuXG4gICAgICAgIC8vIFVzZWQgaW50ZXJuYWxseSBieSBQcm9taXNlLnJlc29sdmUoKSBhbmQgUHJvbWlzZS5yZWplY3QoKS5cbiAgICAgICAgdGhpcy5fc3RhdGUgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gYXJndW1lbnRzWzJdO1xuICAgICAgICBpZiAodGhpcy5fc3RhdGUgPT09IGZhbHNlKVxuICAgICAgICAgICAgaGFuZGxlUmVqZWN0aW9uKHRoaXMsIHRoaXMuX3ZhbHVlKTsgLy8gTWFwIGVycm9yLCBzZXQgc3RhY2sgYW5kIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IoKS5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zdGF0ZSA9IG51bGw7IC8vIG51bGwgKD1wZW5kaW5nKSwgZmFsc2UgKD1yZWplY3RlZCkgb3IgdHJ1ZSAoPXJlc29sdmVkKVxuICAgIHRoaXMuX3ZhbHVlID0gbnVsbDsgLy8gZXJyb3Igb3IgcmVzdWx0XG4gICAgKytwc2QucmVmOyAvLyBSZWZjb3VudGluZyBjdXJyZW50IHNjb3BlXG4gICAgZXhlY3V0ZVByb21pc2VUYXNrKHRoaXMsIGZuKTtcbn1cbi8vIFByZXBhcmUgYSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHB1dCBvbnRvIFByb21pc2UucHJvdG90eXBlLnRoZW5cbnZhciB0aGVuUHJvcCA9IHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBzZCA9IFBTRCwgbWljcm9UYXNrSWQgPSB0b3RhbEVjaG9lcztcbiAgICAgICAgZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwb3NzaWJsZUF3YWl0ID0gIXBzZC5nbG9iYWwgJiYgKHBzZCAhPT0gUFNEIHx8IG1pY3JvVGFza0lkICE9PSB0b3RhbEVjaG9lcyk7XG4gICAgICAgICAgICBpZiAocG9zc2libGVBd2FpdClcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgdmFyIHJ2ID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZVRvTGlzdGVuZXIoX3RoaXMsIG5ldyBMaXN0ZW5lcihuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uRnVsZmlsbGVkLCBwc2QsIHBvc3NpYmxlQXdhaXQpLCBuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uUmVqZWN0ZWQsIHBzZCwgcG9zc2libGVBd2FpdCksIHJlc29sdmUsIHJlamVjdCwgcHNkKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlYnVnICYmIGxpbmtUb1ByZXZpb3VzUHJvbWlzZShydiwgdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gcnY7XG4gICAgICAgIH1cbiAgICAgICAgdGhlbi5wcm90b3R5cGUgPSBJTlRFUk5BTDsgLy8gRm9yIGlkZW1wb3RlbnNlLCBzZWUgc2V0dGVyIGJlbG93LlxuICAgICAgICByZXR1cm4gdGhlbjtcbiAgICB9LFxuICAgIC8vIEJlIGlkZW1wb3RlbnQgYW5kIGFsbG93IGFub3RoZXIgZnJhbWV3b3JrIChzdWNoIGFzIHpvbmUuanMgb3IgYW5vdGhlciBpbnN0YW5jZSBvZiBhIERleGllLlByb21pc2UgbW9kdWxlKSB0byByZXBsYWNlIFByb21pc2UucHJvdG90eXBlLnRoZW5cbiAgICAvLyBhbmQgd2hlbiB0aGF0IGZyYW1ld29yayB3YW50cyB0byByZXN0b3JlIHRoZSBvcmlnaW5hbCBwcm9wZXJ0eSwgd2UgbXVzdCBpZGVudGlmeSB0aGF0IGFuZCByZXN0b3JlIHRoZSBvcmlnaW5hbCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHNldFByb3AodGhpcywgJ3RoZW4nLCB2YWx1ZSAmJiB2YWx1ZS5wcm90b3R5cGUgPT09IElOVEVSTkFMID9cbiAgICAgICAgICAgIHRoZW5Qcm9wIDogLy8gUmVzdG9yZSB0byBvcmlnaW5hbCBwcm9wZXJ0eSBkZXNjcmlwdG9yLlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7IC8vIEdldHRlciByZXR1cm5pbmcgcHJvdmlkZWQgdmFsdWUgKGJlaGF2ZXMgbGlrZSB2YWx1ZSBpcyBqdXN0IGNoYW5nZWQpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IHRoZW5Qcm9wLnNldCAvLyBLZWVwIGEgc2V0dGVyIHRoYXQgaXMgcHJlcGFyZWQgdG8gcmVzdG9yZSBvcmlnaW5hbC5cbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn07XG5wcm9wcyhQcm9taXNlLnByb3RvdHlwZSwge1xuICAgIHRoZW46IHRoZW5Qcm9wLFxuICAgIF90aGVuOiBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgLy8gQSBsaXR0bGUgdGluaWVyIHZlcnNpb24gb2YgdGhlbigpIHRoYXQgZG9uJ3QgaGF2ZSB0byBjcmVhdGUgYSByZXN1bHRpbmcgcHJvbWlzZS5cbiAgICAgICAgcHJvcGFnYXRlVG9MaXN0ZW5lcih0aGlzLCBuZXcgTGlzdGVuZXIobnVsbCwgbnVsbCwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIFBTRCkpO1xuICAgIH0sXG4gICAgY2F0Y2g6IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbiAgICAgICAgLy8gRmlyc3QgYXJndW1lbnQgaXMgdGhlIEVycm9yIHR5cGUgdG8gY2F0Y2hcbiAgICAgICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sIGhhbmRsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIHJldHVybiB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgYnkgaXRzIGNvbnN0cnVjdG9yIHR5cGUgKHNpbWlsYXIgdG8gamF2YSAvIGMrKyAvIGMjKVxuICAgICAgICAgICAgLy8gU2FtcGxlOiBwcm9taXNlLmNhdGNoKFR5cGVFcnJvciwgZnVuY3Rpb24gKGUpIHsgLi4uIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGVyciBpbnN0YW5jZW9mIHR5cGUgPyBoYW5kbGVyKGVycikgOiBQcm9taXNlUmVqZWN0KGVycik7XG4gICAgICAgIH0pXG4gICAgICAgICAgICA6IHRoaXMudGhlbihudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2hpbmcgZXJyb3JzIGJ5IHRoZSBlcnJvci5uYW1lIHByb3BlcnR5LiBNYWtlcyBzZW5zZSBmb3IgaW5kZXhlZERCIHdoZXJlIGVycm9yIHR5cGVcbiAgICAgICAgICAgICAgICAvLyBpcyBhbHdheXMgRE9NRXJyb3IgYnV0IHdoZXJlIGUubmFtZSB0ZWxscyB0aGUgYWN0dWFsIGVycm9yIHR5cGUuXG4gICAgICAgICAgICAgICAgLy8gU2FtcGxlOiBwcm9taXNlLmNhdGNoKCdDb25zdHJhaW50RXJyb3InLCBmdW5jdGlvbiAoZSkgeyAuLi4gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVyciAmJiBlcnIubmFtZSA9PT0gdHlwZSA/IGhhbmRsZXIoZXJyKSA6IFByb21pc2VSZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG4gICAgZmluYWxseTogZnVuY3Rpb24gKG9uRmluYWxseSkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgb25GaW5hbGx5KCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIG9uRmluYWxseSgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VSZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBzdGFjazoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdGFjaylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhY2s7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YWNrX2JlaW5nX2dlbmVyYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHN0YWNrcyA9IGdldFN0YWNrKHRoaXMsIFtdLCBNQVhfTE9OR19TVEFDS1MpO1xuICAgICAgICAgICAgICAgIHZhciBzdGFjayA9IHN0YWNrcy5qb2luKFwiXFxuRnJvbSBwcmV2aW91czogXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhY2sgPSBzdGFjazsgLy8gU3RhY2sgbWF5IGJlIHVwZGF0ZWQgb24gcmVqZWN0LlxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHN0YWNrX2JlaW5nX2dlbmVyYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICB0aW1lb3V0OiBmdW5jdGlvbiAobXMsIG1zZykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbXMgPCBJbmZpbml0eSA/XG4gICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KG5ldyBleGNlcHRpb25zLlRpbWVvdXQobXNnKSk7IH0sIG1zKTtcbiAgICAgICAgICAgICAgICBfdGhpcy50aGVuKHJlc29sdmUsIHJlamVjdCkuZmluYWxseShjbGVhclRpbWVvdXQuYmluZChudWxsLCBoYW5kbGUpKTtcbiAgICAgICAgICAgIH0pIDogdGhpcztcbiAgICB9XG59KTtcbmlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpXG4gICAgc2V0UHJvcChQcm9taXNlLnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCAnUHJvbWlzZScpO1xuLy8gTm93IHRoYXQgUHJvbWlzZS5wcm90b3R5cGUgaXMgZGVmaW5lZCwgd2UgaGF2ZSBhbGwgaXQgdGFrZXMgdG8gc2V0IGdsb2JhbFBTRC5lbnYuXG4vLyBFbnZpcm9ubWVudCBnbG9iYWxzIHNuYXBzaG90dGVkIG9uIGxlYXZpbmcgZ2xvYmFsIHpvbmVcbmdsb2JhbFBTRC5lbnYgPSBzbmFwU2hvdCgpO1xuZnVuY3Rpb24gTGlzdGVuZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHJlc29sdmUsIHJlamVjdCwgem9uZSkge1xuICAgIHRoaXMub25GdWxmaWxsZWQgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IG51bGw7XG4gICAgdGhpcy5vblJlamVjdGVkID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdGVkIDogbnVsbDtcbiAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICAgIHRoaXMucHNkID0gem9uZTtcbn1cbi8vIFByb21pc2UgU3RhdGljIFByb3BlcnRpZXNcbnByb3BzKFByb21pc2UsIHtcbiAgICBhbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKSAvLyBTdXBwb3J0cyBpdGVyYWJsZXMsIGltcGxpY2l0IGFyZ3VtZW50cyBhbmQgYXJyYXktbGlrZS5cbiAgICAgICAgICAgIC5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTsgLy8gSGFuZGxlIHBhcmFsbGVsbCBhc3luYy9hd2FpdHMgXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcbiAgICAgICAgICAgIHZhciByZW1haW5pbmcgPSB2YWx1ZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFsdWVzLmZvckVhY2goZnVuY3Rpb24gKGEsIGkpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2ldID0geDtcbiAgICAgICAgICAgICAgICBpZiAoIS0tcmVtYWluaW5nKVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgICAgICB9LCByZWplY3QpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdmFyIHJ2ID0gbmV3IFByb21pc2UoSU5URVJOQUwsIHRydWUsIHZhbHVlKTtcbiAgICAgICAgbGlua1RvUHJldmlvdXNQcm9taXNlKHJ2LCBjdXJyZW50RnVsZmlsbGVyKTtcbiAgICAgICAgcmV0dXJuIHJ2O1xuICAgIH0sXG4gICAgcmVqZWN0OiBQcm9taXNlUmVqZWN0LFxuICAgIHJhY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IGdldEFycmF5T2YuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5tYXAob25Qb3NzaWJsZVBhcmFsbGVsbEFzeW5jKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgUFNEOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNEOyB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gUFNEID0gdmFsdWU7IH1cbiAgICB9LFxuICAgIC8vdG90YWxFY2hvZXM6IHtnZXQ6ICgpPT50b3RhbEVjaG9lc30sXG4gICAgLy90YXNrOiB7Z2V0OiAoKT0+dGFza30sXG4gICAgbmV3UFNEOiBuZXdTY29wZSxcbiAgICB1c2VQU0Q6IHVzZVBTRCxcbiAgICBzY2hlZHVsZXI6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhc2FwJDE7IH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IGFzYXAkMSA9IHZhbHVlOyB9XG4gICAgfSxcbiAgICByZWplY3Rpb25NYXBwZXI6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3Rpb25NYXBwZXI7IH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7IHJlamVjdGlvbk1hcHBlciA9IHZhbHVlOyB9IC8vIE1hcCByZWplY3QgZmFpbHVyZXNcbiAgICB9LFxuICAgIGZvbGxvdzogZnVuY3Rpb24gKGZuLCB6b25lUHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBzZCA9IFBTRDtcbiAgICAgICAgICAgICAgICBwc2QudW5oYW5kbGVkcyA9IFtdOyAvLyBGb3IgdW5oYW5kbGVkIHN0YW5kYXJkLSBvciAzcmQgcGFydHkgUHJvbWlzZXMuIENoZWNrZWQgYXQgcHNkLmZpbmFsaXplKClcbiAgICAgICAgICAgICAgICBwc2Qub251bmhhbmRsZWQgPSByZWplY3Q7IC8vIFRyaWdnZXJlZCBkaXJlY3RseSBvbiB1bmhhbmRsZWQgcHJvbWlzZXMgb2YgdGhpcyBsaWJyYXJ5LlxuICAgICAgICAgICAgICAgIHBzZC5maW5hbGl6ZSA9IGNhbGxCb3RoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgLy8gVW5oYW5kbGVkIHN0YW5kYXJkIG9yIDNyZCBwYXJ0IHByb21pc2VzIGFyZSBwdXQgaW4gUFNELnVuaGFuZGxlZHMgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4YW1pbmVkIHVwb24gc2NvcGUgY29tcGxldGlvbiB3aGlsZSB1bmhhbmRsZWQgcmVqZWN0aW9ucyBpbiB0aGlzIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCB0cmlnZ2VyIGRpcmVjdGx5IHRocm91Z2ggcHNkLm9udW5oYW5kbGVkXG4gICAgICAgICAgICAgICAgICAgIHJ1bl9hdF9lbmRfb2ZfdGhpc19vcl9uZXh0X3BoeXNpY2FsX3RpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudW5oYW5kbGVkcy5sZW5ndGggPT09IDAgPyByZXNvbHZlKCkgOiByZWplY3QoX3RoaXMudW5oYW5kbGVkc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIHBzZC5maW5hbGl6ZSk7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH0sIHpvbmVQcm9wcywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4vKipcbiogVGFrZSBhIHBvdGVudGlhbGx5IG1pc2JlaGF2aW5nIHJlc29sdmVyIGZ1bmN0aW9uIGFuZCBtYWtlIHN1cmVcbiogb25GdWxmaWxsZWQgYW5kIG9uUmVqZWN0ZWQgYXJlIG9ubHkgY2FsbGVkIG9uY2UuXG4qXG4qIE1ha2VzIG5vIGd1YXJhbnRlZXMgYWJvdXQgYXN5bmNocm9ueS5cbiovXG5mdW5jdGlvbiBleGVjdXRlUHJvbWlzZVRhc2socHJvbWlzZSwgZm4pIHtcbiAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gICAgdHJ5IHtcbiAgICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IHNldHRsZWRcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgICAgICAgdmFyIHNob3VsZEV4ZWN1dGVUaWNrID0gcHJvbWlzZS5fbGliICYmIGJlZ2luTWljcm9UaWNrU2NvcGUoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGVQcm9taXNlVGFzayhwcm9taXNlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5fdGhlbihyZXNvbHZlLCByZWplY3QpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UuX3N0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG91bGRFeGVjdXRlVGljaylcbiAgICAgICAgICAgICAgICBlbmRNaWNyb1RpY2tTY29wZSgpO1xuICAgICAgICB9LCBoYW5kbGVSZWplY3Rpb24uYmluZChudWxsLCBwcm9taXNlKSk7IC8vIElmIEZ1bmN0aW9uLmJpbmQgaXMgbm90IHN1cHBvcnRlZC4gRXhjZXB0aW9uIGlzIGhhbmRsZWQgaW4gY2F0Y2ggYmVsb3dcbiAgICB9XG4gICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgIGhhbmRsZVJlamVjdGlvbihwcm9taXNlLCBleCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFuZGxlUmVqZWN0aW9uKHByb21pc2UsIHJlYXNvbikge1xuICAgIHJlamVjdGluZ0Vycm9ycy5wdXNoKHJlYXNvbik7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgdmFyIHNob3VsZEV4ZWN1dGVUaWNrID0gcHJvbWlzZS5fbGliICYmIGJlZ2luTWljcm9UaWNrU2NvcGUoKTtcbiAgICByZWFzb24gPSByZWplY3Rpb25NYXBwZXIocmVhc29uKTtcbiAgICBwcm9taXNlLl9zdGF0ZSA9IGZhbHNlO1xuICAgIHByb21pc2UuX3ZhbHVlID0gcmVhc29uO1xuICAgIGRlYnVnICYmIHJlYXNvbiAhPT0gbnVsbCAmJiB0eXBlb2YgcmVhc29uID09PSAnb2JqZWN0JyAmJiAhcmVhc29uLl9wcm9taXNlICYmIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9yaWdQcm9wID0gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKHJlYXNvbiwgXCJzdGFja1wiKTtcbiAgICAgICAgcmVhc29uLl9wcm9taXNlID0gcHJvbWlzZTtcbiAgICAgICAgc2V0UHJvcChyZWFzb24sIFwic3RhY2tcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrX2JlaW5nX2dlbmVyYXRlZCA/XG4gICAgICAgICAgICAgICAgICAgIG9yaWdQcm9wICYmIChvcmlnUHJvcC5nZXQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1Byb3AuZ2V0LmFwcGx5KHJlYXNvbikgOlxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ1Byb3AudmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5zdGFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLy8gQWRkIHRoZSBmYWlsdXJlIHRvIGEgbGlzdCBvZiBwb3NzaWJseSB1bmNhdWdodCBlcnJvcnNcbiAgICBhZGRQb3NzaWJseVVuaGFuZGxlZEVycm9yKHByb21pc2UpO1xuICAgIHByb3BhZ2F0ZUFsbExpc3RlbmVycyhwcm9taXNlKTtcbiAgICBpZiAoc2hvdWxkRXhlY3V0ZVRpY2spXG4gICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG59XG5mdW5jdGlvbiBwcm9wYWdhdGVBbGxMaXN0ZW5lcnMocHJvbWlzZSkge1xuICAgIC8vZGVidWcgJiYgbGlua1RvUHJldmlvdXNQcm9taXNlKHByb21pc2UpO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBwcm9taXNlLl9saXN0ZW5lcnM7XG4gICAgcHJvbWlzZS5fbGlzdGVuZXJzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICBwcm9wYWdhdGVUb0xpc3RlbmVyKHByb21pc2UsIGxpc3RlbmVyc1tpXSk7XG4gICAgfVxuICAgIHZhciBwc2QgPSBwcm9taXNlLl9QU0Q7XG4gICAgLS1wc2QucmVmIHx8IHBzZC5maW5hbGl6ZSgpOyAvLyBpZiBwc2QucmVmIHJlYWNoZXMgemVybywgY2FsbCBwc2QuZmluYWxpemUoKTtcbiAgICBpZiAobnVtU2NoZWR1bGVkQ2FsbHMgPT09IDApIHtcbiAgICAgICAgLy8gSWYgbnVtU2NoZWR1bGVkQ2FsbHMgaXMgMCwgaXQgbWVhbnMgdGhhdCBvdXIgc3RhY2sgaXMgbm90IGluIGEgY2FsbGJhY2sgb2YgYSBzY2hlZHVsZWQgY2FsbCxcbiAgICAgICAgLy8gYW5kIHRoYXQgbm8gZGVmZXJyZWRzIHdoZXJlIGxpc3RlbmluZyB0byB0aGlzIHJlamVjdGlvbiBvciBzdWNjZXNzLlxuICAgICAgICAvLyBTaW5jZSB0aGVyZSBpcyBhIHJpc2sgdGhhdCBvdXIgc3RhY2sgY2FuIGNvbnRhaW4gYXBwbGljYXRpb24gY29kZSB0aGF0IG1heVxuICAgICAgICAvLyBkbyBzdHVmZiBhZnRlciB0aGlzIGNvZGUgaXMgZmluaXNoZWQgdGhhdCBtYXkgZ2VuZXJhdGUgbmV3IGNhbGxzLCB3ZSBjYW5ub3RcbiAgICAgICAgLy8gY2FsbCBmaW5hbGl6ZXJzIGhlcmUuXG4gICAgICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgICAgIGFzYXAkMShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpOyAvLyBXaWxsIGRldGVjdCB1bmhhbmRsZWQgZXJyb3JzXG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwcm9wYWdhdGVUb0xpc3RlbmVyKHByb21pc2UsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBudWxsKSB7XG4gICAgICAgIHByb21pc2UuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY2IgPSBwcm9taXNlLl9zdGF0ZSA/IGxpc3RlbmVyLm9uRnVsZmlsbGVkIDogbGlzdGVuZXIub25SZWplY3RlZDtcbiAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgICAgLy8gVGhpcyBMaXN0ZW5lciBkb2VzbnQgaGF2ZSBhIGxpc3RlbmVyIGZvciB0aGUgZXZlbnQgYmVpbmcgdHJpZ2dlcmVkIChvbkZ1bGZpbGxlZCBvciBvblJlamVjdCkgc28gbGV0cyBmb3J3YXJkIHRoZSBldmVudCB0byBhbnkgZXZlbnR1YWwgbGlzdGVuZXJzIG9uIHRoZSBQcm9taXNlIGluc3RhbmNlIHJldHVybmVkIGJ5IHRoZW4oKSBvciBjYXRjaCgpXG4gICAgICAgIHJldHVybiAocHJvbWlzZS5fc3RhdGUgPyBsaXN0ZW5lci5yZXNvbHZlIDogbGlzdGVuZXIucmVqZWN0KShwcm9taXNlLl92YWx1ZSk7XG4gICAgfVxuICAgICsrbGlzdGVuZXIucHNkLnJlZjtcbiAgICArK251bVNjaGVkdWxlZENhbGxzO1xuICAgIGFzYXAkMShjYWxsTGlzdGVuZXIsIFtjYiwgcHJvbWlzZSwgbGlzdGVuZXJdKTtcbn1cbmZ1bmN0aW9uIGNhbGxMaXN0ZW5lcihjYiwgcHJvbWlzZSwgbGlzdGVuZXIpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBTZXQgc3RhdGljIHZhcmlhYmxlIGN1cnJlbnRGdWxmaWxsZXIgdG8gdGhlIHByb21pc2UgdGhhdCBpcyBiZWluZyBmdWxsZmlsbGVkLFxuICAgICAgICAvLyBzbyB0aGF0IHdlIGNvbm5lY3QgdGhlIGNoYWluIG9mIHByb21pc2VzIChmb3IgbG9uZyBzdGFja3Mgc3VwcG9ydClcbiAgICAgICAgY3VycmVudEZ1bGZpbGxlciA9IHByb21pc2U7XG4gICAgICAgIC8vIENhbGwgY2FsbGJhY2sgYW5kIHJlc29sdmUgb3VyIGxpc3RlbmVyIHdpdGggaXQncyByZXR1cm4gdmFsdWUuXG4gICAgICAgIHZhciByZXQsIHZhbHVlID0gcHJvbWlzZS5fdmFsdWU7XG4gICAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSkge1xuICAgICAgICAgICAgLy8gY2IgaXMgb25SZXNvbHZlZFxuICAgICAgICAgICAgcmV0ID0gY2IodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY2IgaXMgb25SZWplY3RlZFxuICAgICAgICAgICAgaWYgKHJlamVjdGluZ0Vycm9ycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmVqZWN0aW5nRXJyb3JzID0gW107XG4gICAgICAgICAgICByZXQgPSBjYih2YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmVqZWN0aW5nRXJyb3JzLmluZGV4T2YodmFsdWUpID09PSAtMSlcbiAgICAgICAgICAgICAgICBtYXJrRXJyb3JBc0hhbmRsZWQocHJvbWlzZSk7IC8vIENhbGxiYWNrIGRpZG50IGRvIFByb21pc2UucmVqZWN0KGVycikgbm9yIHJlamVjdChlcnIpIG9udG8gYW5vdGhlciBwcm9taXNlLlxuICAgICAgICB9XG4gICAgICAgIGxpc3RlbmVyLnJlc29sdmUocmV0KTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBpbiBjYWxsYmFjay4gUmVqZWN0IG91ciBsaXN0ZW5lci5cbiAgICAgICAgbGlzdGVuZXIucmVqZWN0KGUpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgLy8gUmVzdG9yZSBlbnYgYW5kIGN1cnJlbnRGdWxmaWxsZXIuXG4gICAgICAgIGN1cnJlbnRGdWxmaWxsZXIgPSBudWxsO1xuICAgICAgICBpZiAoLS1udW1TY2hlZHVsZWRDYWxscyA9PT0gMClcbiAgICAgICAgICAgIGZpbmFsaXplUGh5c2ljYWxUaWNrKCk7XG4gICAgICAgIC0tbGlzdGVuZXIucHNkLnJlZiB8fCBsaXN0ZW5lci5wc2QuZmluYWxpemUoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRTdGFjayhwcm9taXNlLCBzdGFja3MsIGxpbWl0KSB7XG4gICAgaWYgKHN0YWNrcy5sZW5ndGggPT09IGxpbWl0KVxuICAgICAgICByZXR1cm4gc3RhY2tzO1xuICAgIHZhciBzdGFjayA9IFwiXCI7XG4gICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBmYWxzZSkge1xuICAgICAgICB2YXIgZmFpbHVyZSA9IHByb21pc2UuX3ZhbHVlLCBlcnJvck5hbWUsIG1lc3NhZ2U7XG4gICAgICAgIGlmIChmYWlsdXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGVycm9yTmFtZSA9IGZhaWx1cmUubmFtZSB8fCBcIkVycm9yXCI7XG4gICAgICAgICAgICBtZXNzYWdlID0gZmFpbHVyZS5tZXNzYWdlIHx8IGZhaWx1cmU7XG4gICAgICAgICAgICBzdGFjayA9IHByZXR0eVN0YWNrKGZhaWx1cmUsIDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JOYW1lID0gZmFpbHVyZTsgLy8gSWYgZXJyb3IgaXMgdW5kZWZpbmVkIG9yIG51bGwsIHNob3cgdGhhdC5cbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrcy5wdXNoKGVycm9yTmFtZSArIChtZXNzYWdlID8gXCI6IFwiICsgbWVzc2FnZSA6IFwiXCIpICsgc3RhY2spO1xuICAgIH1cbiAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgc3RhY2sgPSBwcmV0dHlTdGFjayhwcm9taXNlLl9zdGFja0hvbGRlciwgMik7XG4gICAgICAgIGlmIChzdGFjayAmJiBzdGFja3MuaW5kZXhPZihzdGFjaykgPT09IC0xKVxuICAgICAgICAgICAgc3RhY2tzLnB1c2goc3RhY2spO1xuICAgICAgICBpZiAocHJvbWlzZS5fcHJldilcbiAgICAgICAgICAgIGdldFN0YWNrKHByb21pc2UuX3ByZXYsIHN0YWNrcywgbGltaXQpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhY2tzO1xufVxuZnVuY3Rpb24gbGlua1RvUHJldmlvdXNQcm9taXNlKHByb21pc2UsIHByZXYpIHtcbiAgICAvLyBTdXBwb3J0IGxvbmcgc3RhY2tzIGJ5IGxpbmtpbmcgdG8gcHJldmlvdXMgY29tcGxldGVkIHByb21pc2UuXG4gICAgdmFyIG51bVByZXYgPSBwcmV2ID8gcHJldi5fbnVtUHJldiArIDEgOiAwO1xuICAgIGlmIChudW1QcmV2IDwgTE9OR19TVEFDS1NfQ0xJUF9MSU1JVCkge1xuICAgICAgICBwcm9taXNlLl9wcmV2ID0gcHJldjtcbiAgICAgICAgcHJvbWlzZS5fbnVtUHJldiA9IG51bVByZXY7XG4gICAgfVxufVxuLyogVGhlIGNhbGxiYWNrIHRvIHNjaGVkdWxlIHdpdGggc2V0SW1tZWRpYXRlKCkgb3Igc2V0VGltZW91dCgpLlxuICAgSXQgcnVucyBhIHZpcnR1YWwgbWljcm90aWNrIGFuZCBleGVjdXRlcyBhbnkgY2FsbGJhY2sgcmVnaXN0ZXJlZCBpbiBtaWNyb3RpY2tRdWV1ZS5cbiAqL1xuZnVuY3Rpb24gcGh5c2ljYWxUaWNrKCkge1xuICAgIGJlZ2luTWljcm9UaWNrU2NvcGUoKSAmJiBlbmRNaWNyb1RpY2tTY29wZSgpO1xufVxuZnVuY3Rpb24gYmVnaW5NaWNyb1RpY2tTY29wZSgpIHtcbiAgICB2YXIgd2FzUm9vdEV4ZWMgPSBpc091dHNpZGVNaWNyb1RpY2s7XG4gICAgaXNPdXRzaWRlTWljcm9UaWNrID0gZmFsc2U7XG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSBmYWxzZTtcbiAgICByZXR1cm4gd2FzUm9vdEV4ZWM7XG59XG4vKiBFeGVjdXRlcyBtaWNyby10aWNrcyB3aXRob3V0IGRvaW5nIHRyeS4uY2F0Y2guXG4gICBUaGlzIGNhbiBiZSBwb3NzaWJsZSBiZWNhdXNlIHdlIG9ubHkgdXNlIHRoaXMgaW50ZXJuYWxseSBhbmRcbiAgIHRoZSByZWdpc3RlcmVkIGZ1bmN0aW9ucyBhcmUgZXhjZXB0aW9uLXNhZmUgKHRoZXkgZG8gdHJ5Li5jYXRjaFxuICAgaW50ZXJuYWxseSBiZWZvcmUgY2FsbGluZyBhbnkgZXh0ZXJuYWwgbWV0aG9kKS4gSWYgcmVnaXN0ZXJpbmdcbiAgIGZ1bmN0aW9ucyBpbiB0aGUgbWljcm90aWNrUXVldWUgdGhhdCBhcmUgbm90IGV4Y2VwdGlvbi1zYWZlLCB0aGlzXG4gICB3b3VsZCBkZXN0cm95IHRoZSBmcmFtZXdvcmsgYW5kIG1ha2UgaXQgaW5zdGFibGUuIFNvIHdlIGRvbid0IGV4cG9ydFxuICAgb3VyIGFzYXAgbWV0aG9kLlxuKi9cbmZ1bmN0aW9uIGVuZE1pY3JvVGlja1Njb3BlKCkge1xuICAgIHZhciBjYWxsYmFja3MsIGksIGw7XG4gICAgZG8ge1xuICAgICAgICB3aGlsZSAobWljcm90aWNrUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2FsbGJhY2tzID0gbWljcm90aWNrUXVldWU7XG4gICAgICAgICAgICBtaWNyb3RpY2tRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgbCA9IGNhbGxiYWNrcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYWxsYmFja3NbaV07XG4gICAgICAgICAgICAgICAgaXRlbVswXS5hcHBseShudWxsLCBpdGVtWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKG1pY3JvdGlja1F1ZXVlLmxlbmd0aCA+IDApO1xuICAgIGlzT3V0c2lkZU1pY3JvVGljayA9IHRydWU7XG4gICAgbmVlZHNOZXdQaHlzaWNhbFRpY2sgPSB0cnVlO1xufVxuZnVuY3Rpb24gZmluYWxpemVQaHlzaWNhbFRpY2soKSB7XG4gICAgdmFyIHVuaGFuZGxlZEVycnMgPSB1bmhhbmRsZWRFcnJvcnM7XG4gICAgdW5oYW5kbGVkRXJyb3JzID0gW107XG4gICAgdW5oYW5kbGVkRXJycy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHAuX1BTRC5vbnVuaGFuZGxlZC5jYWxsKG51bGwsIHAuX3ZhbHVlLCBwKTtcbiAgICB9KTtcbiAgICB2YXIgZmluYWxpemVycyA9IHRpY2tGaW5hbGl6ZXJzLnNsaWNlKDApOyAvLyBDbG9uZSBmaXJzdCBiZWNhdXNlIGZpbmFsaXplciBtYXkgcmVtb3ZlIGl0c2VsZiBmcm9tIGxpc3QuXG4gICAgdmFyIGkgPSBmaW5hbGl6ZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaSlcbiAgICAgICAgZmluYWxpemVyc1stLWldKCk7XG59XG5mdW5jdGlvbiBydW5fYXRfZW5kX29mX3RoaXNfb3JfbmV4dF9waHlzaWNhbF90aWNrKGZuKSB7XG4gICAgZnVuY3Rpb24gZmluYWxpemVyKCkge1xuICAgICAgICBmbigpO1xuICAgICAgICB0aWNrRmluYWxpemVycy5zcGxpY2UodGlja0ZpbmFsaXplcnMuaW5kZXhPZihmaW5hbGl6ZXIpLCAxKTtcbiAgICB9XG4gICAgdGlja0ZpbmFsaXplcnMucHVzaChmaW5hbGl6ZXIpO1xuICAgICsrbnVtU2NoZWR1bGVkQ2FsbHM7XG4gICAgYXNhcCQxKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKC0tbnVtU2NoZWR1bGVkQ2FsbHMgPT09IDApXG4gICAgICAgICAgICBmaW5hbGl6ZVBoeXNpY2FsVGljaygpO1xuICAgIH0sIFtdKTtcbn1cbmZ1bmN0aW9uIGFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IocHJvbWlzZSkge1xuICAgIC8vIE9ubHkgYWRkIHRvIHVuaGFuZGxlZEVycm9ycyBpZiBub3QgYWxyZWFkeSB0aGVyZS4gVGhlIGZpcnN0IG9uZSB0byBhZGQgdG8gdGhpcyBsaXN0XG4gICAgLy8gd2lsbCBiZSB1cG9uIHRoZSBmaXJzdCByZWplY3Rpb24gc28gdGhhdCB0aGUgcm9vdCBjYXVzZSAoZmlyc3QgcHJvbWlzZSBpbiB0aGVcbiAgICAvLyByZWplY3Rpb24gY2hhaW4pIGlzIHRoZSBvbmUgbGlzdGVkLlxuICAgIGlmICghdW5oYW5kbGVkRXJyb3JzLnNvbWUoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAuX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZTsgfSkpXG4gICAgICAgIHVuaGFuZGxlZEVycm9ycy5wdXNoKHByb21pc2UpO1xufVxuZnVuY3Rpb24gbWFya0Vycm9yQXNIYW5kbGVkKHByb21pc2UpIHtcbiAgICAvLyBDYWxsZWQgd2hlbiBhIHJlamVjdCBoYW5kbGVkIGlzIGFjdHVhbGx5IGJlaW5nIGNhbGxlZC5cbiAgICAvLyBTZWFyY2ggaW4gdW5oYW5kbGVkRXJyb3JzIGZvciBhbnkgcHJvbWlzZSB3aG9zIF92YWx1ZSBpcyB0aGlzIHByb21pc2VfdmFsdWUgKGxpc3RcbiAgICAvLyBjb250YWlucyBvbmx5IHJlamVjdGVkIHByb21pc2VzLCBhbmQgb25seSBvbmUgaXRlbSBwZXIgZXJyb3IpXG4gICAgdmFyIGkgPSB1bmhhbmRsZWRFcnJvcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpKVxuICAgICAgICBpZiAodW5oYW5kbGVkRXJyb3JzWy0taV0uX3ZhbHVlID09PSBwcm9taXNlLl92YWx1ZSkge1xuICAgICAgICAgICAgLy8gRm91bmQgYSBwcm9taXNlIHRoYXQgZmFpbGVkIHdpdGggdGhpcyBzYW1lIGVycm9yIG9iamVjdCBwb2ludGVyLFxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoYXQgc2luY2UgdGhlcmUgaXMgYSBsaXN0ZW5lciB0aGF0IGFjdHVhbGx5IHRha2VzIGNhcmUgb2YgaXQuXG4gICAgICAgICAgICB1bmhhbmRsZWRFcnJvcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG59XG5mdW5jdGlvbiBQcm9taXNlUmVqZWN0KHJlYXNvbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShJTlRFUk5BTCwgZmFsc2UsIHJlYXNvbik7XG59XG5mdW5jdGlvbiB3cmFwKGZuLCBlcnJvckNhdGNoZXIpIHtcbiAgICB2YXIgcHNkID0gUFNEO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3YXNSb290RXhlYyA9IGJlZ2luTWljcm9UaWNrU2NvcGUoKSwgb3V0ZXJTY29wZSA9IFBTRDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaFRvWm9uZShwc2QsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGVycm9yQ2F0Y2hlciAmJiBlcnJvckNhdGNoZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJTY29wZSwgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKHdhc1Jvb3RFeGVjKVxuICAgICAgICAgICAgICAgIGVuZE1pY3JvVGlja1Njb3BlKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuLy9cbi8vIHZhcmlhYmxlcyB1c2VkIGZvciBuYXRpdmUgYXdhaXQgc3VwcG9ydFxuLy9cbnZhciB0YXNrID0geyBhd2FpdHM6IDAsIGVjaG9lczogMCwgaWQ6IDAgfTsgLy8gVGhlIG9uZ29pbmcgbWFjcm8tdGFzayB3aGVuIHVzaW5nIHpvbmUtZWNob2luZy5cbnZhciB0YXNrQ291bnRlciA9IDA7IC8vIElEIGNvdW50ZXIgZm9yIG1hY3JvIHRhc2tzLlxudmFyIHpvbmVTdGFjayA9IFtdOyAvLyBTdGFjayBvZiBsZWZ0IHpvbmVzIHRvIHJlc3RvcmUgYXN5bmNocm9uaWNhbGx5LlxudmFyIHpvbmVFY2hvZXMgPSAwOyAvLyB6b25lRWNob2VzIGlzIGEgbXVzdCBpbiBvcmRlciB0byBwZXJzaXN0IHpvbmVzIGJldHdlZW4gbmF0aXZlIGF3YWl0IGV4cHJlc3Npb25zLlxudmFyIHRvdGFsRWNob2VzID0gMDsgLy8gSUQgY291bnRlciBmb3IgbWljcm8tdGFza3MuIFVzZWQgdG8gZGV0ZWN0IHBvc3NpYmxlIG5hdGl2ZSBhd2FpdCBpbiBvdXIgUHJvbWlzZS5wcm90b3R5cGUudGhlbi5cbnZhciB6b25lX2lkX2NvdW50ZXIgPSAwO1xuZnVuY3Rpb24gbmV3U2NvcGUoZm4sIHByb3BzJCQxLCBhMSwgYTIpIHtcbiAgICB2YXIgcGFyZW50ID0gUFNELCBwc2QgPSBPYmplY3QuY3JlYXRlKHBhcmVudCk7XG4gICAgcHNkLnBhcmVudCA9IHBhcmVudDtcbiAgICBwc2QucmVmID0gMDtcbiAgICBwc2QuZ2xvYmFsID0gZmFsc2U7XG4gICAgcHNkLmlkID0gKyt6b25lX2lkX2NvdW50ZXI7XG4gICAgLy8gUHJlcGFyZSBmb3IgcHJvbWlzZSBwYXRjaGluZyAoZG9uZSBpbiB1c2VQU0QpOlxuICAgIHZhciBnbG9iYWxFbnYgPSBnbG9iYWxQU0QuZW52O1xuICAgIHBzZC5lbnYgPSBwYXRjaEdsb2JhbFByb21pc2UgPyB7XG4gICAgICAgIFByb21pc2U6IFByb21pc2UsXG4gICAgICAgIFByb21pc2VQcm9wOiB7IHZhbHVlOiBQcm9taXNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0sXG4gICAgICAgIGFsbDogUHJvbWlzZS5hbGwsXG4gICAgICAgIHJhY2U6IFByb21pc2UucmFjZSxcbiAgICAgICAgcmVzb2x2ZTogUHJvbWlzZS5yZXNvbHZlLFxuICAgICAgICByZWplY3Q6IFByb21pc2UucmVqZWN0LFxuICAgICAgICBudGhlbjogZ2V0UGF0Y2hlZFByb21pc2VUaGVuKGdsb2JhbEVudi5udGhlbiwgcHNkKSxcbiAgICAgICAgZ3RoZW46IGdldFBhdGNoZWRQcm9taXNlVGhlbihnbG9iYWxFbnYuZ3RoZW4sIHBzZCkgLy8gZ2xvYmFsIHRoZW5cbiAgICB9IDoge307XG4gICAgaWYgKHByb3BzJCQxKVxuICAgICAgICBleHRlbmQocHNkLCBwcm9wcyQkMSk7XG4gICAgLy8gdW5oYW5kbGVkcyBhbmQgb251bmhhbmRsZWQgc2hvdWxkIG5vdCBiZSBzcGVjaWZpY2FsbHkgc2V0IGhlcmUuXG4gICAgLy8gTGVhdmUgdGhlbSBvbiBwYXJlbnQgcHJvdG90eXBlLlxuICAgIC8vIHVuaGFuZGxlZHMucHVzaChlcnIpIHdpbGwgcHVzaCB0byBwYXJlbnQncyBwcm90b3R5cGVcbiAgICAvLyBvbnVuaGFuZGxlZCgpIHdpbGwgY2FsbCBwYXJlbnRzIG9udW5oYW5kbGVkICh3aXRoIHRoaXMgc2NvcGUncyB0aGlzLXBvaW50ZXIgdGhvdWdoISlcbiAgICArK3BhcmVudC5yZWY7XG4gICAgcHNkLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAtLXRoaXMucGFyZW50LnJlZiB8fCB0aGlzLnBhcmVudC5maW5hbGl6ZSgpO1xuICAgIH07XG4gICAgdmFyIHJ2ID0gdXNlUFNEKHBzZCwgZm4sIGExLCBhMik7XG4gICAgaWYgKHBzZC5yZWYgPT09IDApXG4gICAgICAgIHBzZC5maW5hbGl6ZSgpO1xuICAgIHJldHVybiBydjtcbn1cbi8vIEZ1bmN0aW9uIHRvIGNhbGwgaWYgc2NvcGVGdW5jIHJldHVybnMgTmF0aXZlUHJvbWlzZVxuLy8gQWxzbyBmb3IgZWFjaCBOYXRpdmVQcm9taXNlIGluIHRoZSBhcmd1bWVudHMgdG8gUHJvbWlzZS5hbGwoKVxuZnVuY3Rpb24gaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKSB7XG4gICAgaWYgKCF0YXNrLmlkKVxuICAgICAgICB0YXNrLmlkID0gKyt0YXNrQ291bnRlcjtcbiAgICArK3Rhc2suYXdhaXRzO1xuICAgIHRhc2suZWNob2VzICs9IFpPTkVfRUNIT19MSU1JVDtcbiAgICByZXR1cm4gdGFzay5pZDtcbn1cbi8vIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiAndGhlbicgY2FsbHMgYmFjayBvbiBhIG5hdGl2ZSBwcm9taXNlIHdoZXJlIG9uQXdhaXRFeHBlY3RlZCgpIGhhZCBiZWVuIGNhbGxlZC5cbi8vIEFsc28gY2FsbCB0aGlzIHdoZW4gYSBuYXRpdmUgYXdhaXQgY2FsbHMgdGhlbiBtZXRob2Qgb24gYSBwcm9taXNlLiBJbiB0aGF0IGNhc2UsIGRvbid0IHN1cHBseVxuLy8gc291cmNlVGFza0lkIGJlY2F1c2Ugd2UgYWxyZWFkeSBrbm93IGl0IHJlZmVycyB0byBjdXJyZW50IHRhc2suXG5mdW5jdGlvbiBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cyhzb3VyY2VUYXNrSWQpIHtcbiAgICBpZiAoIXRhc2suYXdhaXRzIHx8IChzb3VyY2VUYXNrSWQgJiYgc291cmNlVGFza0lkICE9PSB0YXNrLmlkKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmICgtLXRhc2suYXdhaXRzID09PSAwKVxuICAgICAgICB0YXNrLmlkID0gMDtcbiAgICB0YXNrLmVjaG9lcyA9IHRhc2suYXdhaXRzICogWk9ORV9FQ0hPX0xJTUlUOyAvLyBXaWxsIHJlc2V0IGVjaG9lcyB0byAwIGlmIGF3YWl0cyBpcyAwLlxufVxuLy8gQ2FsbCBmcm9tIFByb21pc2UuYWxsKCkgYW5kIFByb21pc2UucmFjZSgpXG5mdW5jdGlvbiBvblBvc3NpYmxlUGFyYWxsZWxsQXN5bmMocG9zc2libGVQcm9taXNlKSB7XG4gICAgaWYgKHRhc2suZWNob2VzICYmIHBvc3NpYmxlUHJvbWlzZSAmJiBwb3NzaWJsZVByb21pc2UuY29uc3RydWN0b3IgPT09IE5hdGl2ZVByb21pc2UpIHtcbiAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgcmV0dXJuIHBvc3NpYmxlUHJvbWlzZS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBkZWNyZW1lbnRFeHBlY3RlZEF3YWl0cygpO1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwb3NzaWJsZVByb21pc2U7XG59XG5mdW5jdGlvbiB6b25lRW50ZXJFY2hvKHRhcmdldFpvbmUpIHtcbiAgICArK3RvdGFsRWNob2VzO1xuICAgIGlmICghdGFzay5lY2hvZXMgfHwgLS10YXNrLmVjaG9lcyA9PT0gMCkge1xuICAgICAgICB0YXNrLmVjaG9lcyA9IHRhc2suaWQgPSAwOyAvLyBDYW5jZWwgem9uZSBlY2hvaW5nLlxuICAgIH1cbiAgICB6b25lU3RhY2sucHVzaChQU0QpO1xuICAgIHN3aXRjaFRvWm9uZSh0YXJnZXRab25lLCB0cnVlKTtcbn1cbmZ1bmN0aW9uIHpvbmVMZWF2ZUVjaG8oKSB7XG4gICAgdmFyIHpvbmUgPSB6b25lU3RhY2tbem9uZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgIHpvbmVTdGFjay5wb3AoKTtcbiAgICBzd2l0Y2hUb1pvbmUoem9uZSwgZmFsc2UpO1xufVxuZnVuY3Rpb24gc3dpdGNoVG9ab25lKHRhcmdldFpvbmUsIGJFbnRlcmluZ1pvbmUpIHtcbiAgICB2YXIgY3VycmVudFpvbmUgPSBQU0Q7XG4gICAgaWYgKGJFbnRlcmluZ1pvbmUgPyB0YXNrLmVjaG9lcyAmJiAoIXpvbmVFY2hvZXMrKyB8fCB0YXJnZXRab25lICE9PSBQU0QpIDogem9uZUVjaG9lcyAmJiAoIS0tem9uZUVjaG9lcyB8fCB0YXJnZXRab25lICE9PSBQU0QpKSB7XG4gICAgICAgIC8vIEVudGVyIG9yIGxlYXZlIHpvbmUgYXN5bmNocm9uaWNhbGx5IGFzIHdlbGwsIHNvIHRoYXQgdGFza3MgaW5pdGlhdGVkIGR1cmluZyBjdXJyZW50IHRpY2tcbiAgICAgICAgLy8gd2lsbCBiZSBzdXJyb3VuZGVkIGJ5IHRoZSB6b25lIHdoZW4gdGhleSBhcmUgaW52b2tlZC5cbiAgICAgICAgZW5xdWV1ZU5hdGl2ZU1pY3JvVGFzayhiRW50ZXJpbmdab25lID8gem9uZUVudGVyRWNoby5iaW5kKG51bGwsIHRhcmdldFpvbmUpIDogem9uZUxlYXZlRWNobyk7XG4gICAgfVxuICAgIGlmICh0YXJnZXRab25lID09PSBQU0QpXG4gICAgICAgIHJldHVybjtcbiAgICBQU0QgPSB0YXJnZXRab25lOyAvLyBUaGUgYWN0dWFsIHpvbmUgc3dpdGNoIG9jY3VycyBhdCB0aGlzIGxpbmUuXG4gICAgLy8gU25hcHNob3Qgb24gZXZlcnkgbGVhdmUgZnJvbSBnbG9iYWwgem9uZS5cbiAgICBpZiAoY3VycmVudFpvbmUgPT09IGdsb2JhbFBTRClcbiAgICAgICAgZ2xvYmFsUFNELmVudiA9IHNuYXBTaG90KCk7XG4gICAgaWYgKHBhdGNoR2xvYmFsUHJvbWlzZSkge1xuICAgICAgICAvLyBMZXQncyBwYXRjaCB0aGUgZ2xvYmFsIGFuZCBuYXRpdmUgUHJvbWlzZXMgKG1heSBiZSBzYW1lIG9yIG1heSBiZSBkaWZmZXJlbnQpXG4gICAgICAgIHZhciBHbG9iYWxQcm9taXNlID0gZ2xvYmFsUFNELmVudi5Qcm9taXNlO1xuICAgICAgICAvLyBTd2ljaCBlbnZpcm9ubWVudHMgKG1heSBiZSBQU0Qtem9uZSBvciB0aGUgZ2xvYmFsIHpvbmUuIEJvdGggYXBwbHkuKVxuICAgICAgICB2YXIgdGFyZ2V0RW52ID0gdGFyZ2V0Wm9uZS5lbnY7XG4gICAgICAgIC8vIENoYW5nZSBQcm9taXNlLnByb3RvdHlwZS50aGVuIGZvciBuYXRpdmUgYW5kIGdsb2JhbCBQcm9taXNlICh0aGV5IE1BWSBkaWZmZXIgb24gcG9seWZpbGxlZCBlbnZpcm9ubWVudHMsIGJ1dCBib3RoIGNhbiBiZSBhY2Nlc3NlZClcbiAgICAgICAgLy8gTXVzdCBiZSBkb25lIG9uIGVhY2ggem9uZSBjaGFuZ2UgYmVjYXVzZSB0aGUgcGF0Y2hlZCBtZXRob2QgY29udGFpbnMgdGFyZ2V0Wm9uZSBpbiBpdHMgY2xvc3VyZS5cbiAgICAgICAgbmF0aXZlUHJvbWlzZVByb3RvLnRoZW4gPSB0YXJnZXRFbnYubnRoZW47XG4gICAgICAgIEdsb2JhbFByb21pc2UucHJvdG90eXBlLnRoZW4gPSB0YXJnZXRFbnYuZ3RoZW47XG4gICAgICAgIGlmIChjdXJyZW50Wm9uZS5nbG9iYWwgfHwgdGFyZ2V0Wm9uZS5nbG9iYWwpIHtcbiAgICAgICAgICAgIC8vIExlYXZpbmcgb3IgZW50ZXJpbmcgZ2xvYmFsIHpvbmUuIEl0J3MgdGltZSB0byBwYXRjaCAvIHJlc3RvcmUgZ2xvYmFsIFByb21pc2UuXG4gICAgICAgICAgICAvLyBTZXQgdGhpcyBQcm9taXNlIHRvIHdpbmRvdy5Qcm9taXNlIHNvIHRoYXQgdHJhbnNpbGVkIGFzeW5jIGZ1bmN0aW9ucyB3aWxsIHdvcmsgb24gRmlyZWZveCwgU2FmYXJpIGFuZCBJRSwgYXMgd2VsbCBhcyB3aXRoIFpvbmVqcyBhbmQgYW5ndWxhci5cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZ2xvYmFsLCAnUHJvbWlzZScsIHRhcmdldEVudi5Qcm9taXNlUHJvcCk7XG4gICAgICAgICAgICAvLyBTdXBwb3J0IFByb21pc2UuYWxsKCkgZXRjIHRvIHdvcmsgaW5kZXhlZERCLXNhZmUgYWxzbyB3aGVuIHBlb3BsZSBhcmUgaW5jbHVkaW5nIGVzNi1wcm9taXNlIGFzIGEgbW9kdWxlICh0aGV5IG1pZ2h0XG4gICAgICAgICAgICAvLyBub3QgYmUgYWNjZXNzaW5nIGdsb2JhbC5Qcm9taXNlIGJ1dCBhIGxvY2FsIHJlZmVyZW5jZSB0byBpdClcbiAgICAgICAgICAgIEdsb2JhbFByb21pc2UuYWxsID0gdGFyZ2V0RW52LmFsbDtcbiAgICAgICAgICAgIEdsb2JhbFByb21pc2UucmFjZSA9IHRhcmdldEVudi5yYWNlO1xuICAgICAgICAgICAgR2xvYmFsUHJvbWlzZS5yZXNvbHZlID0gdGFyZ2V0RW52LnJlc29sdmU7XG4gICAgICAgICAgICBHbG9iYWxQcm9taXNlLnJlamVjdCA9IHRhcmdldEVudi5yZWplY3Q7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBzbmFwU2hvdCgpIHtcbiAgICB2YXIgR2xvYmFsUHJvbWlzZSA9IF9nbG9iYWwuUHJvbWlzZTtcbiAgICByZXR1cm4gcGF0Y2hHbG9iYWxQcm9taXNlID8ge1xuICAgICAgICBQcm9taXNlOiBHbG9iYWxQcm9taXNlLFxuICAgICAgICBQcm9taXNlUHJvcDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfZ2xvYmFsLCBcIlByb21pc2VcIiksXG4gICAgICAgIGFsbDogR2xvYmFsUHJvbWlzZS5hbGwsXG4gICAgICAgIHJhY2U6IEdsb2JhbFByb21pc2UucmFjZSxcbiAgICAgICAgcmVzb2x2ZTogR2xvYmFsUHJvbWlzZS5yZXNvbHZlLFxuICAgICAgICByZWplY3Q6IEdsb2JhbFByb21pc2UucmVqZWN0LFxuICAgICAgICBudGhlbjogbmF0aXZlUHJvbWlzZVByb3RvLnRoZW4sXG4gICAgICAgIGd0aGVuOiBHbG9iYWxQcm9taXNlLnByb3RvdHlwZS50aGVuXG4gICAgfSA6IHt9O1xufVxuZnVuY3Rpb24gdXNlUFNEKHBzZCwgZm4sIGExLCBhMiwgYTMpIHtcbiAgICB2YXIgb3V0ZXJTY29wZSA9IFBTRDtcbiAgICB0cnkge1xuICAgICAgICBzd2l0Y2hUb1pvbmUocHNkLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGZuKGExLCBhMiwgYTMpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgc3dpdGNoVG9ab25lKG91dGVyU2NvcGUsIGZhbHNlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBlbnF1ZXVlTmF0aXZlTWljcm9UYXNrKGpvYikge1xuICAgIC8vXG4gICAgLy8gUHJlY29uZGl0aW9uOiBuYXRpdmVQcm9taXNlVGhlbiAhPT0gdW5kZWZpbmVkXG4gICAgLy9cbiAgICBuYXRpdmVQcm9taXNlVGhlbi5jYWxsKHJlc29sdmVkTmF0aXZlUHJvbWlzZSwgam9iKTtcbn1cbmZ1bmN0aW9uIG5hdGl2ZUF3YWl0Q29tcGF0aWJsZVdyYXAoZm4sIHpvbmUsIHBvc3NpYmxlQXdhaXQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nID8gZm4gOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvdXRlclpvbmUgPSBQU0Q7XG4gICAgICAgIGlmIChwb3NzaWJsZUF3YWl0KVxuICAgICAgICAgICAgaW5jcmVtZW50RXhwZWN0ZWRBd2FpdHMoKTtcbiAgICAgICAgc3dpdGNoVG9ab25lKHpvbmUsIHRydWUpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBzd2l0Y2hUb1pvbmUob3V0ZXJab25lLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0UGF0Y2hlZFByb21pc2VUaGVuKG9yaWdUaGVuLCB6b25lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvblJlc29sdmVkLCBvblJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiBvcmlnVGhlbi5jYWxsKHRoaXMsIG5hdGl2ZUF3YWl0Q29tcGF0aWJsZVdyYXAob25SZXNvbHZlZCwgem9uZSwgZmFsc2UpLCBuYXRpdmVBd2FpdENvbXBhdGlibGVXcmFwKG9uUmVqZWN0ZWQsIHpvbmUsIGZhbHNlKSk7XG4gICAgfTtcbn1cbnZhciBVTkhBTkRMRURSRUpFQ1RJT04gPSBcInVuaGFuZGxlZHJlamVjdGlvblwiO1xuZnVuY3Rpb24gZ2xvYmFsRXJyb3IoZXJyLCBwcm9taXNlKSB7XG4gICAgdmFyIHJ2O1xuICAgIHRyeSB7XG4gICAgICAgIHJ2ID0gcHJvbWlzZS5vbnVuY2F0Y2hlZChlcnIpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkgeyB9XG4gICAgaWYgKHJ2ICE9PSBmYWxzZSlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBldmVudCwgZXZlbnREYXRhID0geyBwcm9taXNlOiBwcm9taXNlLCByZWFzb246IGVyciB9O1xuICAgICAgICAgICAgaWYgKF9nbG9iYWwuZG9jdW1lbnQgJiYgZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICAgICAgICAgIGV2ZW50LmluaXRFdmVudChVTkhBTkRMRURSRUpFQ1RJT04sIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIGV4dGVuZChldmVudCwgZXZlbnREYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKF9nbG9iYWwuQ3VzdG9tRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudChVTkhBTkRMRURSRUpFQ1RJT04sIHsgZGV0YWlsOiBldmVudERhdGEgfSk7XG4gICAgICAgICAgICAgICAgZXh0ZW5kKGV2ZW50LCBldmVudERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50ICYmIF9nbG9iYWwuZGlzcGF0Y2hFdmVudCkge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmICghX2dsb2JhbC5Qcm9taXNlUmVqZWN0aW9uRXZlbnQgJiYgX2dsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gbmF0aXZlIHN1cHBvcnQgZm9yIFByb21pc2VSZWplY3Rpb25FdmVudCBidXQgdXNlciBoYXMgc2V0IHdpbmRvdy5vbnVuaGFuZGxlZHJlamVjdGlvbi4gTWFudWFsbHkgY2FsbCBpdC5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24oZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuaGFuZGxlZCByZWplY3Rpb246IFwiICsgKGVyci5zdGFjayB8fCBlcnIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG59XG52YXIgcmVqZWN0aW9uID0gUHJvbWlzZS5yZWplY3Q7XG5cbmZ1bmN0aW9uIEV2ZW50cyhjdHgpIHtcbiAgICB2YXIgZXZzID0ge307XG4gICAgdmFyIHJ2ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAoc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgLy8gU3Vic2NyaWJlLiBJZiBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0aGFuIGp1c3QgdGhlIHN1YnNjcmliZXIgd2FzIHByb3ZpZGVkLCBmb3J3YXJkIHRoZW0gYXMgd2VsbC5cbiAgICAgICAgICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShpIC0gMSk7XG4gICAgICAgICAgICB3aGlsZSAoLS1pKVxuICAgICAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZXZzW2V2ZW50TmFtZV0uc3Vic2NyaWJlLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgKGV2ZW50TmFtZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gaW50ZXJmYWNlIGFsbG93aW5nIHRvIGZpcmUgb3IgdW5zdWJzY3JpYmUgZnJvbSBldmVudFxuICAgICAgICAgICAgcmV0dXJuIGV2c1tldmVudE5hbWVdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBydi5hZGRFdmVudFR5cGUgPSBhZGQ7XG4gICAgZm9yICh2YXIgaSA9IDEsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIGFkZChhcmd1bWVudHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcnY7XG4gICAgZnVuY3Rpb24gYWRkKGV2ZW50TmFtZSwgY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnROYW1lID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiBhZGRDb25maWd1cmVkRXZlbnRzKGV2ZW50TmFtZSk7XG4gICAgICAgIGlmICghY2hhaW5GdW5jdGlvbilcbiAgICAgICAgICAgIGNoYWluRnVuY3Rpb24gPSByZXZlcnNlU3RvcHBhYmxlRXZlbnRDaGFpbjtcbiAgICAgICAgaWYgKCFkZWZhdWx0RnVuY3Rpb24pXG4gICAgICAgICAgICBkZWZhdWx0RnVuY3Rpb24gPSBub3A7XG4gICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnM6IFtdLFxuICAgICAgICAgICAgZmlyZTogZGVmYXVsdEZ1bmN0aW9uLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5zdWJzY3JpYmVycy5pbmRleE9mKGNiKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5wdXNoKGNiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maXJlID0gY2hhaW5GdW5jdGlvbihjb250ZXh0LmZpcmUsIGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Vic2NyaWJlcnMgPSBjb250ZXh0LnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuICE9PSBjYjsgfSk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5maXJlID0gY29udGV4dC5zdWJzY3JpYmVycy5yZWR1Y2UoY2hhaW5GdW5jdGlvbiwgZGVmYXVsdEZ1bmN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZXZzW2V2ZW50TmFtZV0gPSBydltldmVudE5hbWVdID0gY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFkZENvbmZpZ3VyZWRFdmVudHMoY2ZnKSB7XG4gICAgICAgIC8vIGV2ZW50cyh0aGlzLCB7cmVhZGluZzogW2Z1bmN0aW9uQ2hhaW4sIG5vcF19KTtcbiAgICAgICAga2V5cyhjZmcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBjZmdbZXZlbnROYW1lXTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGFyZ3MpKSB7XG4gICAgICAgICAgICAgICAgYWRkKGV2ZW50TmFtZSwgY2ZnW2V2ZW50TmFtZV1bMF0sIGNmZ1tldmVudE5hbWVdWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3MgPT09ICdhc2FwJykge1xuICAgICAgICAgICAgICAgIC8vIFJhdGhlciB0aGFuIGFwcHJvYWNoaW5nIGV2ZW50IHN1YnNjcmlwdGlvbiB1c2luZyBhIGZ1bmN0aW9uYWwgYXBwcm9hY2gsIHdlIGhlcmUgZG8gaXQgaW4gYSBmb3ItbG9vcCB3aGVyZSBzdWJzY3JpYmVyIGlzIGV4ZWN1dGVkIGluIGl0cyBvd24gc3RhY2tcbiAgICAgICAgICAgICAgICAvLyBlbmFibGluZyB0aGF0IGFueSBleGNlcHRpb24gdGhhdCBvY2N1ciB3b250IGRpc3R1cmIgdGhlIGluaXRpYXRvciBhbmQgYWxzbyBub3QgbmVzY2Vzc2FyeSBiZSBjYXRjaGVkIGFuZCBmb3Jnb3R0ZW4uXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBhZGQoZXZlbnROYW1lLCBtaXJyb3IsIGZ1bmN0aW9uIGZpcmUoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9wdGltYXphdGlvbi1zYWZlIGNsb25pbmcgb2YgYXJndW1lbnRzIGludG8gYXJncy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsIGVhY2ggc3Vic2NyaWJlcjpcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNhcChmdW5jdGlvbiBmaXJlRXZlbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiSW52YWxpZCBldmVudCBjb25maWdcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLypcbiAqIERleGllLmpzIC0gYSBtaW5pbWFsaXN0aWMgd3JhcHBlciBmb3IgSW5kZXhlZERCXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE3IERhdmlkIEZhaGxhbmRlclxuICpcbiAqIFZlcnNpb24ge3ZlcnNpb259LCB7ZGF0ZX1cbiAqXG4gKiBodHRwOi8vZGV4aWUub3JnXG4gKlxuICogQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNCwgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICovXG52YXIgREVYSUVfVkVSU0lPTiA9ICd7dmVyc2lvbn0nO1xudmFyIG1heFN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoNjU1MzUpO1xudmFyIG1heEtleSA9IChmdW5jdGlvbiAoKSB7IHRyeSB7XG4gICAgSURCS2V5UmFuZ2Uub25seShbW11dKTtcbiAgICByZXR1cm4gW1tdXTtcbn1cbmNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG1heFN0cmluZztcbn0gfSkoKTtcbnZhciBtaW5LZXkgPSAtSW5maW5pdHk7XG52YXIgSU5WQUxJRF9LRVlfQVJHVU1FTlQgPSBcIkludmFsaWQga2V5IHByb3ZpZGVkLiBLZXlzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgRGF0ZSBvciBBcnJheTxzdHJpbmcgfCBudW1iZXIgfCBEYXRlPi5cIjtcbnZhciBTVFJJTkdfRVhQRUNURUQgPSBcIlN0cmluZyBleHBlY3RlZC5cIjtcbnZhciBjb25uZWN0aW9ucyA9IFtdO1xudmFyIGlzSUVPckVkZ2UgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAvKE1TSUV8VHJpZGVudHxFZGdlKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbnZhciBoYXNJRURlbGV0ZU9iamVjdFN0b3JlQnVnID0gaXNJRU9yRWRnZTtcbnZhciBoYW5nc09uRGVsZXRlTGFyZ2VLZXlSYW5nZSA9IGlzSUVPckVkZ2U7XG52YXIgZGV4aWVTdGFja0ZyYW1lRmlsdGVyID0gZnVuY3Rpb24gKGZyYW1lKSB7IHJldHVybiAhLyhkZXhpZVxcLmpzfGRleGllXFwubWluXFwuanMpLy50ZXN0KGZyYW1lKTsgfTtcbnZhciBkYk5hbWVzREI7IC8vIEdsb2JhbCBkYXRhYmFzZSBmb3IgYmFja2luZyBEZXhpZS5nZXREYXRhYmFzZU5hbWVzKCkgb24gYnJvd3NlciB3aXRob3V0IGluZGV4ZWREQi53ZWJraXRHZXREYXRhYmFzZU5hbWVzKCkgXG4vLyBJbml0IGRlYnVnXG5zZXREZWJ1ZyhkZWJ1ZywgZGV4aWVTdGFja0ZyYW1lRmlsdGVyKTtcbmZ1bmN0aW9uIERleGllKGRiTmFtZSwgb3B0aW9ucykge1xuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9wdGlvbnNcIiB0eXBlPVwiT2JqZWN0XCIgb3B0aW9uYWw9XCJ0cnVlXCI+U3BlY2lmeSBvbmx5IGlmIHlvdSB3aWNoIHRvIGNvbnRyb2wgd2hpY2ggYWRkb25zIHRoYXQgc2hvdWxkIHJ1biBvbiB0aGlzIGluc3RhbmNlPC9wYXJhbT5cbiAgICB2YXIgZGVwcyA9IERleGllLmRlcGVuZGVuY2llcztcbiAgICB2YXIgb3B0cyA9IGV4dGVuZCh7XG4gICAgICAgIC8vIERlZmF1bHQgT3B0aW9uc1xuICAgICAgICBhZGRvbnM6IERleGllLmFkZG9ucyxcbiAgICAgICAgYXV0b09wZW46IHRydWUsXG4gICAgICAgIGluZGV4ZWREQjogZGVwcy5pbmRleGVkREIsXG4gICAgICAgIElEQktleVJhbmdlOiBkZXBzLklEQktleVJhbmdlIC8vIEJhY2tlbmQgSURCS2V5UmFuZ2UgYXBpLiBEZWZhdWx0IHRvIGJyb3dzZXIgZW52LlxuICAgIH0sIG9wdGlvbnMpO1xuICAgIHZhciBhZGRvbnMgPSBvcHRzLmFkZG9ucywgYXV0b09wZW4gPSBvcHRzLmF1dG9PcGVuLCBpbmRleGVkREIgPSBvcHRzLmluZGV4ZWREQiwgSURCS2V5UmFuZ2UgPSBvcHRzLklEQktleVJhbmdlO1xuICAgIHZhciBnbG9iYWxTY2hlbWEgPSB0aGlzLl9kYlNjaGVtYSA9IHt9O1xuICAgIHZhciB2ZXJzaW9ucyA9IFtdO1xuICAgIHZhciBkYlN0b3JlTmFtZXMgPSBbXTtcbiAgICB2YXIgYWxsVGFibGVzID0ge307XG4gICAgLy8vPHZhciB0eXBlPVwiSURCRGF0YWJhc2VcIiAvPlxuICAgIHZhciBpZGJkYiA9IG51bGw7IC8vIEluc3RhbmNlIG9mIElEQkRhdGFiYXNlXG4gICAgdmFyIGRiT3BlbkVycm9yID0gbnVsbDtcbiAgICB2YXIgaXNCZWluZ09wZW5lZCA9IGZhbHNlO1xuICAgIHZhciBvblJlYWR5QmVpbmdGaXJlZCA9IG51bGw7XG4gICAgdmFyIG9wZW5Db21wbGV0ZSA9IGZhbHNlO1xuICAgIHZhciBSRUFET05MWSA9IFwicmVhZG9ubHlcIiwgUkVBRFdSSVRFID0gXCJyZWFkd3JpdGVcIjtcbiAgICB2YXIgZGIgPSB0aGlzO1xuICAgIHZhciBkYlJlYWR5UmVzb2x2ZSwgZGJSZWFkeVByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBkYlJlYWR5UmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfSksIGNhbmNlbE9wZW4sIG9wZW5DYW5jZWxsZXIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICAgIGNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgfSk7XG4gICAgdmFyIGF1dG9TY2hlbWEgPSB0cnVlO1xuICAgIHZhciBoYXNOYXRpdmVHZXREYXRhYmFzZU5hbWVzID0gISFnZXROYXRpdmVHZXREYXRhYmFzZU5hbWVzRm4oaW5kZXhlZERCKSwgaGFzR2V0QWxsO1xuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIC8vIERlZmF1bHQgc3Vic2NyaWJlcnMgdG8gXCJ2ZXJzaW9uY2hhbmdlXCIgYW5kIFwiYmxvY2tlZFwiLlxuICAgICAgICAvLyBDYW4gYmUgb3ZlcnJpZGRlbiBieSBjdXN0b20gaGFuZGxlcnMuIElmIGN1c3RvbSBoYW5kbGVycyByZXR1cm4gZmFsc2UsIHRoZXNlIGRlZmF1bHRcbiAgICAgICAgLy8gYmVoYXZpb3VycyB3aWxsIGJlIHByZXZlbnRlZC5cbiAgICAgICAgZGIub24oXCJ2ZXJzaW9uY2hhbmdlXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBmb3IgdmVyc2lvbmNoYW5nZSBldmVudCBpcyB0byBjbG9zZSBkYXRhYmFzZSBjb25uZWN0aW9uLlxuICAgICAgICAgICAgLy8gQ2FsbGVyIGNhbiBvdmVycmlkZSB0aGlzIGJlaGF2aW9yIGJ5IGRvaW5nIGRiLm9uKFwidmVyc2lvbmNoYW5nZVwiLCBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH0pO1xuICAgICAgICAgICAgLy8gTGV0J3Mgbm90IGJsb2NrIHRoZSBvdGhlciB3aW5kb3cgZnJvbSBtYWtpbmcgaXQncyBkZWxldGUoKSBvciBvcGVuKCkgY2FsbC5cbiAgICAgICAgICAgIC8vIE5PVEUhIFRoaXMgZXZlbnQgaXMgbmV2ZXIgZmlyZWQgaW4gSUUsRWRnZSBvciBTYWZhcmkuXG4gICAgICAgICAgICBpZiAoZXYubmV3VmVyc2lvbiA+IDApXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQW5vdGhlciBjb25uZWN0aW9uIHdhbnRzIHRvIHVwZ3JhZGUgZGF0YWJhc2UgJ1wiICsgZGIubmFtZSArIFwiJy4gQ2xvc2luZyBkYiBub3cgdG8gcmVzdW1lIHRoZSB1cGdyYWRlLlwiKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBbm90aGVyIGNvbm5lY3Rpb24gd2FudHMgdG8gZGVsZXRlIGRhdGFiYXNlICdcIiArIGRiLm5hbWUgKyBcIicuIENsb3NpbmcgZGIgbm93IHRvIHJlc3VtZSB0aGUgZGVsZXRlIHJlcXVlc3QuXCIpO1xuICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIC8vIEluIG1hbnkgd2ViIGFwcGxpY2F0aW9ucywgaXQgd291bGQgYmUgcmVjb21tZW5kZWQgdG8gZm9yY2Ugd2luZG93LnJlbG9hZCgpXG4gICAgICAgICAgICAvLyB3aGVuIHRoaXMgZXZlbnQgb2NjdXJzLiBUbyBkbyB0aGF0LCBzdWJzY3JpYmUgdG8gdGhlIHZlcnNpb25jaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgIC8vIGFuZCBjYWxsIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSkgaWYgZXYubmV3VmVyc2lvbiA+IDAgKG5vdCBhIGRlbGV0aW9uKVxuICAgICAgICAgICAgLy8gVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHlvdXIgY3VycmVudCB3ZWIgYXBwIG9idmlvdXNseSBoYXMgb2xkIHNjaGVtYSBjb2RlIHRoYXQgbmVlZHNcbiAgICAgICAgICAgIC8vIHRvIGJlIHVwZGF0ZWQuIEFub3RoZXIgd2luZG93IGdvdCBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIGFwcCBhbmQgbmVlZHMgdG8gdXBncmFkZSBEQiBidXRcbiAgICAgICAgICAgIC8vIHlvdXIgd2luZG93IGlzIGJsb2NraW5nIGl0IHVubGVzcyB3ZSBjbG9zZSBpdCBoZXJlLlxuICAgICAgICB9KTtcbiAgICAgICAgZGIub24oXCJibG9ja2VkXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgaWYgKCFldi5uZXdWZXJzaW9uIHx8IGV2Lm5ld1ZlcnNpb24gPCBldi5vbGRWZXJzaW9uKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkRleGllLmRlbGV0ZSgnXCIgKyBkYi5uYW1lICsgXCInKSB3YXMgYmxvY2tlZFwiKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVcGdyYWRlICdcIiArIGRiLm5hbWUgKyBcIicgYmxvY2tlZCBieSBvdGhlciBjb25uZWN0aW9uIGhvbGRpbmcgdmVyc2lvbiBcIiArIGV2Lm9sZFZlcnNpb24gLyAxMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFZlcnNpb25pbmcgRnJhbWV3b3JrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgdGhpcy52ZXJzaW9uID0gZnVuY3Rpb24gKHZlcnNpb25OdW1iZXIpIHtcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmVyc2lvbk51bWJlclwiIHR5cGU9XCJOdW1iZXJcIj48L3BhcmFtPlxuICAgICAgICAvLy8gPHJldHVybnMgdHlwZT1cIlZlcnNpb25cIj48L3JldHVybnM+XG4gICAgICAgIGlmIChpZGJkYiB8fCBpc0JlaW5nT3BlbmVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiQ2Fubm90IGFkZCB2ZXJzaW9uIHdoZW4gZGF0YWJhc2UgaXMgb3BlblwiKTtcbiAgICAgICAgdGhpcy52ZXJubyA9IE1hdGgubWF4KHRoaXMudmVybm8sIHZlcnNpb25OdW1iZXIpO1xuICAgICAgICB2YXIgdmVyc2lvbkluc3RhbmNlID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Ll9jZmcudmVyc2lvbiA9PT0gdmVyc2lvbk51bWJlcjsgfSlbMF07XG4gICAgICAgIGlmICh2ZXJzaW9uSW5zdGFuY2UpXG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbkluc3RhbmNlO1xuICAgICAgICB2ZXJzaW9uSW5zdGFuY2UgPSBuZXcgVmVyc2lvbih2ZXJzaW9uTnVtYmVyKTtcbiAgICAgICAgdmVyc2lvbnMucHVzaCh2ZXJzaW9uSW5zdGFuY2UpO1xuICAgICAgICB2ZXJzaW9ucy5zb3J0KGxvd2VyVmVyc2lvbkZpcnN0KTtcbiAgICAgICAgLy8gRGlzYWJsZSBhdXRvc2NoZW1hIG1vZGUsIGFzIGF0IGxlYXN0IG9uZSB2ZXJzaW9uIGlzIHNwZWNpZmllZC5cbiAgICAgICAgYXV0b1NjaGVtYSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gdmVyc2lvbkluc3RhbmNlO1xuICAgIH07XG4gICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2NmZyA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OdW1iZXIsXG4gICAgICAgICAgICBzdG9yZXNTb3VyY2U6IG51bGwsXG4gICAgICAgICAgICBkYnNjaGVtYToge30sXG4gICAgICAgICAgICB0YWJsZXM6IHt9LFxuICAgICAgICAgICAgY29udGVudFVwZ3JhZGU6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yZXMoe30pOyAvLyBEZXJpdmUgZWFybGllciBzY2hlbWFzIGJ5IGRlZmF1bHQuXG4gICAgfVxuICAgIGV4dGVuZChWZXJzaW9uLnByb3RvdHlwZSwge1xuICAgICAgICBzdG9yZXM6IGZ1bmN0aW9uIChzdG9yZXMpIHtcbiAgICAgICAgICAgIC8vLyA8c3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyAgIERlZmluZXMgdGhlIHNjaGVtYSBmb3IgYSBwYXJ0aWN1bGFyIHZlcnNpb25cbiAgICAgICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdG9yZXNcIiB0eXBlPVwiT2JqZWN0XCI+XG4gICAgICAgICAgICAvLy8gRXhhbXBsZTogPGJyLz5cbiAgICAgICAgICAgIC8vLyAgIHt1c2VyczogXCJpZCsrLGZpcnN0LGxhc3QsJmFtcDt1c2VybmFtZSwqZW1haWxcIiwgPGJyLz5cbiAgICAgICAgICAgIC8vLyAgIHBhc3N3b3JkczogXCJpZCsrLCZhbXA7dXNlcm5hbWVcIn08YnIvPlxuICAgICAgICAgICAgLy8vIDxici8+XG4gICAgICAgICAgICAvLy8gU3ludGF4OiB7VGFibGU6IFwiW3ByaW1hcnlLZXldWysrXSxbJmFtcDtdWypdaW5kZXgxLFsmYW1wO11bKl1pbmRleDIsLi4uXCJ9PGJyLz48YnIvPlxuICAgICAgICAgICAgLy8vIFNwZWNpYWwgY2hhcmFjdGVyczo8YnIvPlxuICAgICAgICAgICAgLy8vICBcIiZhbXA7XCIgIG1lYW5zIHVuaXF1ZSBrZXksIDxici8+XG4gICAgICAgICAgICAvLy8gIFwiKlwiICBtZWFucyB2YWx1ZSBpcyBtdWx0aUVudHJ5LCA8YnIvPlxuICAgICAgICAgICAgLy8vICBcIisrXCIgbWVhbnMgYXV0by1pbmNyZW1lbnQgYW5kIG9ubHkgYXBwbGljYWJsZSBmb3IgcHJpbWFyeSBrZXkgPGJyLz5cbiAgICAgICAgICAgIC8vLyA8L3BhcmFtPlxuICAgICAgICAgICAgdGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSA9IHRoaXMuX2NmZy5zdG9yZXNTb3VyY2UgPyBleHRlbmQodGhpcy5fY2ZnLnN0b3Jlc1NvdXJjZSwgc3RvcmVzKSA6IHN0b3JlcztcbiAgICAgICAgICAgIC8vIERlcml2ZSBzdG9yZXMgZnJvbSBlYXJsaWVyIHZlcnNpb25zIGlmIHRoZXkgYXJlIG5vdCBleHBsaWNpdGVseSBzcGVjaWZpZWQgYXMgbnVsbCBvciBhIG5ldyBzeW50YXguXG4gICAgICAgICAgICB2YXIgc3RvcmVzU3BlYyA9IHt9O1xuICAgICAgICAgICAgdmVyc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGV4dGVuZChzdG9yZXNTcGVjLCB2ZXJzaW9uLl9jZmcuc3RvcmVzU291cmNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGRic2NoZW1hID0gKHRoaXMuX2NmZy5kYnNjaGVtYSA9IHt9KTtcbiAgICAgICAgICAgIHRoaXMuX3BhcnNlU3RvcmVzU3BlYyhzdG9yZXNTcGVjLCBkYnNjaGVtYSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhdGVzdCBzY2hlbWEgdG8gdGhpcyB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVBJXG4gICAgICAgICAgICBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBkYnNjaGVtYTtcbiAgICAgICAgICAgIHJlbW92ZVRhYmxlc0FwaShbYWxsVGFibGVzLCBkYiwgVHJhbnNhY3Rpb24ucHJvdG90eXBlXSk7IC8vIEtlZXAgVHJhbnNhY3Rpb24ucHJvdG90eXBlIGV2ZW4gdGhvdWdoIGl0IHNob3VsZCBiZSBkZXByLlxuICAgICAgICAgICAgc2V0QXBpT25QbGFjZShbYWxsVGFibGVzLCBkYiwgVHJhbnNhY3Rpb24ucHJvdG90eXBlLCB0aGlzLl9jZmcudGFibGVzXSwga2V5cyhkYnNjaGVtYSksIGRic2NoZW1hKTtcbiAgICAgICAgICAgIGRiU3RvcmVOYW1lcyA9IGtleXMoZGJzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZ3JhZGU6IGZ1bmN0aW9uICh1cGdyYWRlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2NmZy5jb250ZW50VXBncmFkZSA9IHVwZ3JhZGVGdW5jdGlvbjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBfcGFyc2VTdG9yZXNTcGVjOiBmdW5jdGlvbiAoc3RvcmVzLCBvdXRTY2hlbWEpIHtcbiAgICAgICAgICAgIGtleXMoc3RvcmVzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmVzW3RhYmxlTmFtZV0gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlVGVtcGxhdGUgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ZXMgPSBwYXJzZUluZGV4U3ludGF4KHN0b3Jlc1t0YWJsZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByaW1LZXkgPSBpbmRleGVzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmltS2V5Lm11bHRpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiUHJpbWFyeSBrZXkgY2Fubm90IGJlIG11bHRpLXZhbHVlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByaW1LZXkua2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpbnN0YW5jZVRlbXBsYXRlLCBwcmltS2V5LmtleVBhdGgsIHByaW1LZXkuYXV0byA/IDAgOiBwcmltS2V5LmtleVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpbmRleGVzLmZvckVhY2goZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeC5hdXRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIk9ubHkgcHJpbWFyeSBrZXkgY2FuIGJlIG1hcmtlZCBhcyBhdXRvSW5jcmVtZW50ICgrKylcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlkeC5rZXlQYXRoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlNjaGVtYShcIkluZGV4IG11c3QgaGF2ZSBhIG5hbWUgYW5kIGNhbm5vdCBiZSBhbiBlbXB0eSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaW5zdGFuY2VUZW1wbGF0ZSwgaWR4LmtleVBhdGgsIGlkeC5jb21wb3VuZCA/IGlkeC5rZXlQYXRoLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBcIlwiOyB9KSA6IFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgb3V0U2NoZW1hW3RhYmxlTmFtZV0gPSBuZXcgVGFibGVTY2hlbWEodGFibGVOYW1lLCBwcmltS2V5LCBpbmRleGVzLCBpbnN0YW5jZVRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIHJ1blVwZ3JhZGVycyhvbGRWZXJzaW9uLCBpZGJ0cmFucywgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0cmFucyA9IGRiLl9jcmVhdGVUcmFuc2FjdGlvbihSRUFEV1JJVEUsIGRiU3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKTtcbiAgICAgICAgdHJhbnMuY3JlYXRlKGlkYnRyYW5zKTtcbiAgICAgICAgdHJhbnMuX2NvbXBsZXRpb24uY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgdmFyIHJlamVjdFRyYW5zYWN0aW9uID0gdHJhbnMuX3JlamVjdC5iaW5kKHRyYW5zKTtcbiAgICAgICAgbmV3U2NvcGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICBpZiAob2xkVmVyc2lvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0YWJsZXM6XG4gICAgICAgICAgICAgICAga2V5cyhnbG9iYWxTY2hlbWEpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5wcmltS2V5LCBnbG9iYWxTY2hlbWFbdGFibGVOYW1lXS5pbmRleGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBQcm9taXNlLmZvbGxvdyhmdW5jdGlvbiAoKSB7IHJldHVybiBkYi5vbi5wb3B1bGF0ZS5maXJlKHRyYW5zKTsgfSkuY2F0Y2gocmVqZWN0VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHVwZGF0ZVRhYmxlc0FuZEluZGV4ZXMob2xkVmVyc2lvbiwgdHJhbnMsIGlkYnRyYW5zKS5jYXRjaChyZWplY3RUcmFuc2FjdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVUYWJsZXNBbmRJbmRleGVzKG9sZFZlcnNpb24sIHRyYW5zLCBpZGJ0cmFucykge1xuICAgICAgICAvLyBVcGdyYWRlIHZlcnNpb24gdG8gdmVyc2lvbiwgc3RlcC1ieS1zdGVwIGZyb20gb2xkZXN0IHRvIG5ld2VzdCB2ZXJzaW9uLlxuICAgICAgICAvLyBFYWNoIHRyYW5zYWN0aW9uIG9iamVjdCB3aWxsIGNvbnRhaW4gdGhlIHRhYmxlIHNldCB0aGF0IHdhcyBjdXJyZW50IGluIHRoYXQgdmVyc2lvbiAoYnV0IGFsc28gbm90LXlldC1kZWxldGVkIHRhYmxlcyBmcm9tIGl0cyBwcmV2aW91cyB2ZXJzaW9uKVxuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgdmFyIG9sZFZlcnNpb25TdHJ1Y3QgPSB2ZXJzaW9ucy5maWx0ZXIoZnVuY3Rpb24gKHZlcnNpb24pIHsgcmV0dXJuIHZlcnNpb24uX2NmZy52ZXJzaW9uID09PSBvbGRWZXJzaW9uOyB9KVswXTtcbiAgICAgICAgaWYgKCFvbGRWZXJzaW9uU3RydWN0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVXBncmFkZShcIkRleGllIHNwZWNpZmljYXRpb24gb2YgY3VycmVudGx5IGluc3RhbGxlZCBEQiB2ZXJzaW9uIGlzIG1pc3NpbmdcIik7XG4gICAgICAgIGdsb2JhbFNjaGVtYSA9IGRiLl9kYlNjaGVtYSA9IG9sZFZlcnNpb25TdHJ1Y3QuX2NmZy5kYnNjaGVtYTtcbiAgICAgICAgdmFyIGFueUNvbnRlbnRVcGdyYWRlckhhc1J1biA9IGZhbHNlO1xuICAgICAgICB2YXIgdmVyc1RvUnVuID0gdmVyc2lvbnMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2Ll9jZmcudmVyc2lvbiA+IG9sZFZlcnNpb247IH0pO1xuICAgICAgICB2ZXJzVG9SdW4uZm9yRWFjaChmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidmVyc2lvblwiIHR5cGU9XCJWZXJzaW9uXCI+PC9wYXJhbT5cbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRTY2hlbWEgPSBnbG9iYWxTY2hlbWE7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1NjaGVtYSA9IHZlcnNpb24uX2NmZy5kYnNjaGVtYTtcbiAgICAgICAgICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhvbGRTY2hlbWEsIGlkYnRyYW5zKTtcbiAgICAgICAgICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhuZXdTY2hlbWEsIGlkYnRyYW5zKTtcbiAgICAgICAgICAgICAgICBnbG9iYWxTY2hlbWEgPSBkYi5fZGJTY2hlbWEgPSBuZXdTY2hlbWE7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBnZXRTY2hlbWFEaWZmKG9sZFNjaGVtYSwgbmV3U2NoZW1hKTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGFibGVzICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5mb3JFYWNoKGZ1bmN0aW9uICh0dXBsZSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVUYWJsZShpZGJ0cmFucywgdHVwbGVbMF0sIHR1cGxlWzFdLnByaW1LZXksIHR1cGxlWzFdLmluZGV4ZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIENoYW5nZSB0YWJsZXNcbiAgICAgICAgICAgICAgICBkaWZmLmNoYW5nZS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZS5yZWNyZWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuVXBncmFkZShcIk5vdCB5ZXQgc3VwcG9ydCBmb3IgY2hhbmdpbmcgcHJpbWFyeSBrZXlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSBpZGJ0cmFucy5vYmplY3RTdG9yZShjaGFuZ2UubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgaW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmFkZC5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRJbmRleChzdG9yZSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5jaGFuZ2UuZm9yRWFjaChmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGVsZXRlSW5kZXgoaWR4Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEluZGV4KHN0b3JlLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgaW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmRlbC5mb3JFYWNoKGZ1bmN0aW9uIChpZHhOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZGVsZXRlSW5kZXgoaWR4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uLl9jZmcuY29udGVudFVwZ3JhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYW55Q29udGVudFVwZ3JhZGVySGFzUnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuZm9sbG93KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24uX2NmZy5jb250ZW50VXBncmFkZSh0cmFucyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcXVldWUucHVzaChmdW5jdGlvbiAoaWRidHJhbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFueUNvbnRlbnRVcGdyYWRlckhhc1J1biB8fCAhaGFzSUVEZWxldGVPYmplY3RTdG9yZUJ1Zykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2NoZW1hID0gdmVyc2lvbi5fY2ZnLmRic2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgb2xkIHRhYmxlc1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVSZW1vdmVkVGFibGVzKG5ld1NjaGVtYSwgaWRidHJhbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gTm93LCBjcmVhdGUgYSBxdWV1ZSBleGVjdXRpb24gZW5naW5lXG4gICAgICAgIGZ1bmN0aW9uIHJ1blF1ZXVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXVlLmxlbmd0aCA/IFByb21pc2UucmVzb2x2ZShxdWV1ZS5zaGlmdCgpKHRyYW5zLmlkYnRyYW5zKSkudGhlbihydW5RdWV1ZSkgOlxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5RdWV1ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlTWlzc2luZ1RhYmxlcyhnbG9iYWxTY2hlbWEsIGlkYnRyYW5zKTsgLy8gQXQgbGFzdCwgbWFrZSBzdXJlIHRvIGNyZWF0ZSBhbnkgbWlzc2luZyB0YWJsZXMuIChOZWVkZWQgYnkgYWRkb25zIHRoYXQgYWRkIHN0b3JlcyB0byBEQiB3aXRob3V0IHNwZWNpZnlpbmcgdmVyc2lvbilcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFNjaGVtYURpZmYob2xkU2NoZW1hLCBuZXdTY2hlbWEpIHtcbiAgICAgICAgdmFyIGRpZmYgPSB7XG4gICAgICAgICAgICBkZWw6IFtdLFxuICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgIGNoYW5nZTogW10gLy8gQXJyYXkgb2Yge25hbWU6IHRhYmxlTmFtZSwgcmVjcmVhdGU6IG5ld0RlZmluaXRpb24sIGRlbDogZGVsSW5kZXhOYW1lcywgYWRkOiBuZXdJbmRleERlZnMsIGNoYW5nZTogY2hhbmdlZEluZGV4RGVmc31cbiAgICAgICAgfTtcbiAgICAgICAgZm9yICh2YXIgdGFibGUgaW4gb2xkU2NoZW1hKSB7XG4gICAgICAgICAgICBpZiAoIW5ld1NjaGVtYVt0YWJsZV0pXG4gICAgICAgICAgICAgICAgZGlmZi5kZWwucHVzaCh0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh0YWJsZSBpbiBuZXdTY2hlbWEpIHtcbiAgICAgICAgICAgIHZhciBvbGREZWYgPSBvbGRTY2hlbWFbdGFibGVdLCBuZXdEZWYgPSBuZXdTY2hlbWFbdGFibGVdO1xuICAgICAgICAgICAgaWYgKCFvbGREZWYpIHtcbiAgICAgICAgICAgICAgICBkaWZmLmFkZC5wdXNoKFt0YWJsZSwgbmV3RGVmXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hhbmdlID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVmOiBuZXdEZWYsXG4gICAgICAgICAgICAgICAgICAgIHJlY3JlYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGVsOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYWRkOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG9sZERlZi5wcmltS2V5LnNyYyAhPT0gbmV3RGVmLnByaW1LZXkuc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByaW1hcnkga2V5IGhhcyBjaGFuZ2VkLiBSZW1vdmUgYW5kIHJlLWFkZCB0YWJsZS5cbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlLnJlY3JlYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2FtZSBwcmltYXJ5IGtleS4gSnVzdCBmaW5kIG91dCB3aGF0IGRpZmZlcnM6XG4gICAgICAgICAgICAgICAgICAgIHZhciBvbGRJbmRleGVzID0gb2xkRGVmLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0luZGV4ZXMgPSBuZXdEZWYuaWR4QnlOYW1lO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpZHhOYW1lIGluIG9sZEluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3SW5kZXhlc1tpZHhOYW1lXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UuZGVsLnB1c2goaWR4TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpZHhOYW1lIGluIG5ld0luZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRJZHggPSBvbGRJbmRleGVzW2lkeE5hbWVdLCBuZXdJZHggPSBuZXdJbmRleGVzW2lkeE5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbGRJZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlLmFkZC5wdXNoKG5ld0lkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGRJZHguc3JjICE9PSBuZXdJZHguc3JjKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZS5jaGFuZ2UucHVzaChuZXdJZHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2UuZGVsLmxlbmd0aCA+IDAgfHwgY2hhbmdlLmFkZC5sZW5ndGggPiAwIHx8IGNoYW5nZS5jaGFuZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZi5jaGFuZ2UucHVzaChjaGFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaWZmO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVUYWJsZShpZGJ0cmFucywgdGFibGVOYW1lLCBwcmltS2V5LCBpbmRleGVzKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImlkYnRyYW5zXCIgdHlwZT1cIklEQlRyYW5zYWN0aW9uXCI+PC9wYXJhbT5cbiAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMuZGIuY3JlYXRlT2JqZWN0U3RvcmUodGFibGVOYW1lLCBwcmltS2V5LmtleVBhdGggPyB7IGtleVBhdGg6IHByaW1LZXkua2V5UGF0aCwgYXV0b0luY3JlbWVudDogcHJpbUtleS5hdXRvIH0gOiB7IGF1dG9JbmNyZW1lbnQ6IHByaW1LZXkuYXV0byB9KTtcbiAgICAgICAgaW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uIChpZHgpIHsgYWRkSW5kZXgoc3RvcmUsIGlkeCk7IH0pO1xuICAgICAgICByZXR1cm4gc3RvcmU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdUYWJsZXMobmV3U2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICBrZXlzKG5ld1NjaGVtYSkuZm9yRWFjaChmdW5jdGlvbiAodGFibGVOYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKGlkYnRyYW5zLCB0YWJsZU5hbWUsIG5ld1NjaGVtYVt0YWJsZU5hbWVdLnByaW1LZXksIG5ld1NjaGVtYVt0YWJsZU5hbWVdLmluZGV4ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVsZXRlUmVtb3ZlZFRhYmxlcyhuZXdTY2hlbWEsIGlkYnRyYW5zKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRidHJhbnMuZGIub2JqZWN0U3RvcmVOYW1lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHN0b3JlTmFtZSA9IGlkYnRyYW5zLmRiLm9iamVjdFN0b3JlTmFtZXNbaV07XG4gICAgICAgICAgICBpZiAobmV3U2NoZW1hW3N0b3JlTmFtZV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlkYnRyYW5zLmRiLmRlbGV0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYWRkSW5kZXgoc3RvcmUsIGlkeCkge1xuICAgICAgICBzdG9yZS5jcmVhdGVJbmRleChpZHgubmFtZSwgaWR4LmtleVBhdGgsIHsgdW5pcXVlOiBpZHgudW5pcXVlLCBtdWx0aUVudHJ5OiBpZHgubXVsdGkgfSk7XG4gICAgfVxuICAgIC8vXG4gICAgLy9cbiAgICAvLyAgICAgIERleGllIFByb3RlY3RlZCBBUElcbiAgICAvL1xuICAgIC8vXG4gICAgdGhpcy5fYWxsVGFibGVzID0gYWxsVGFibGVzO1xuICAgIHRoaXMuX2NyZWF0ZVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGRic2NoZW1hLCBwYXJlbnRUcmFuc2FjdGlvbik7XG4gICAgfTtcbiAgICAvKiBHZW5lcmF0ZSBhIHRlbXBvcmFyeSB0cmFuc2FjdGlvbiB3aGVuIGRiIG9wZXJhdGlvbnMgYXJlIGRvbmUgb3V0c2lkZSBhIHRyYW5zYWN0aW9uIHNjb3BlLlxuICAgICovXG4gICAgZnVuY3Rpb24gdGVtcFRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGZuKSB7XG4gICAgICAgIGlmICghb3BlbkNvbXBsZXRlICYmICghUFNELmxldFRocm91Z2gpKSB7XG4gICAgICAgICAgICBpZiAoIWlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWF1dG9PcGVuKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgIGRiLm9wZW4oKS5jYXRjaChub3ApOyAvLyBPcGVuIGluIGJhY2tncm91bmQuIElmIGlmIGZhaWxzLCBpdCB3aWxsIGJlIGNhdGNoZWQgYnkgdGhlIGZpbmFsIHByb21pc2UgYW55d2F5LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdGVtcFRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGZuKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdHJhbnMgPSBkYi5fY3JlYXRlVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZ2xvYmFsU2NoZW1hKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdHJhbnMuY3JlYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFucy5fcHJvbWlzZShtb2RlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Njb3BlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgUFNELnRyYW5zID0gdHJhbnM7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihyZXNvbHZlLCByZWplY3QsIHRyYW5zKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIC8vIEluc3RlYWQgb2YgcmVzb2x2aW5nIHZhbHVlIGRpcmVjdGx5LCB3YWl0IHdpdGggcmVzb2x2aW5nIGl0IHVudGlsIHRyYW5zYWN0aW9uIGhhcyBjb21wbGV0ZWQuXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHRoZSBkYXRhIHdvdWxkIG5vdCBiZSBpbiB0aGUgREIgaWYgcmVxdWVzdGluZyBpdCBpbiB0aGUgdGhlbigpIG9wZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBTcGVjaWZpY2FsbHksIHRvIGVuc3VyZSB0aGF0IHRoZSBmb2xsb3dpbmcgZXhwcmVzc2lvbiB3aWxsIHdvcms6XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgIGRiLmZyaWVuZHMucHV0KHtuYW1lOiBcIkFybmVcIn0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgIGRiLmZyaWVuZHMud2hlcmUoXCJuYW1lXCIpLmVxdWFscyhcIkFybmVcIikuY291bnQoZnVuY3Rpb24oY291bnQpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgYXNzZXJ0IChjb3VudCA9PT0gMSk7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gICB9KTtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFucy5fY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdDsgfSk7XG4gICAgICAgICAgICB9KTsgLyouY2F0Y2goZXJyID0+IHsgLy8gRG9uJ3QgZG8gdGhpcyBhcyBvZiBub3cuIElmIHdvdWxkIGFmZmVjdCBidWxrLSBhbmQgbW9kaWZ5IG1ldGhvZHMgaW4gYSB3YXkgdGhhdCBjb3VsZCBiZSBtb3JlIGludHVpdGl2ZS4gQnV0IHdhaXQhIE1heWJlIGNoYW5nZSBpbiBuZXh0IG1ham9yLlxuICAgICAgICAgICAgICAgIHRyYW5zLl9yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGVycik7XG4gICAgICAgICAgICB9KTsqL1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3doZW5SZWFkeSA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gb3BlbkNvbXBsZXRlIHx8IFBTRC5sZXRUaHJvdWdoID8gZm4oKSA6IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmICghaXNCZWluZ09wZW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICghYXV0b09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBleGNlcHRpb25zLkRhdGFiYXNlQ2xvc2VkKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRiLm9wZW4oKS5jYXRjaChub3ApOyAvLyBPcGVuIGluIGJhY2tncm91bmQuIElmIGlmIGZhaWxzLCBpdCB3aWxsIGJlIGNhdGNoZWQgYnkgdGhlIGZpbmFsIHByb21pc2UgYW55d2F5LlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGJSZWFkeVByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KS50aGVuKGZuKTtcbiAgICB9O1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgLy8gICAgICBEZXhpZSBBUElcbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICB0aGlzLnZlcm5vID0gMDtcbiAgICB0aGlzLm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpc0JlaW5nT3BlbmVkIHx8IGlkYmRiKVxuICAgICAgICAgICAgcmV0dXJuIGRiUmVhZHlQcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZGJPcGVuRXJyb3IgPyByZWplY3Rpb24oZGJPcGVuRXJyb3IpIDogZGI7IH0pO1xuICAgICAgICBkZWJ1ZyAmJiAob3BlbkNhbmNlbGxlci5fc3RhY2tIb2xkZXIgPSBnZXRFcnJvcldpdGhTdGFjaygpKTsgLy8gTGV0IHN0YWNrcyBwb2ludCB0byB3aGVuIG9wZW4oKSB3YXMgY2FsbGVkIHJhdGhlciB0aGFuIHdoZXJlIG5ldyBEZXhpZSgpIHdhcyBjYWxsZWQuXG4gICAgICAgIGlzQmVpbmdPcGVuZWQgPSB0cnVlO1xuICAgICAgICBkYk9wZW5FcnJvciA9IG51bGw7XG4gICAgICAgIG9wZW5Db21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAvLyBGdW5jdGlvbiBwb2ludGVycyB0byBjYWxsIHdoZW4gdGhlIGNvcmUgb3BlbmluZyBwcm9jZXNzIGNvbXBsZXRlcy5cbiAgICAgICAgdmFyIHJlc29sdmVEYlJlYWR5ID0gZGJSZWFkeVJlc29sdmUsIFxuICAgICAgICAvLyB1cGdyYWRlVHJhbnNhY3Rpb24gdG8gYWJvcnQgb24gZmFpbHVyZS5cbiAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbb3BlbkNhbmNlbGxlciwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIE11bHRpcGx5IGRiLnZlcm5vIHdpdGggMTAgd2lsbCBiZSBuZWVkZWQgdG8gd29ya2Fyb3VuZCB1cGdyYWRpbmcgYnVnIGluIElFOlxuICAgICAgICAgICAgICAgIC8vIElFIGZhaWxzIHdoZW4gZGVsZXRpbmcgb2JqZWN0U3RvcmUgYWZ0ZXIgcmVhZGluZyBmcm9tIGl0LlxuICAgICAgICAgICAgICAgIC8vIEEgZnV0dXJlIHZlcnNpb24gb2YgRGV4aWUuanMgd2lsbCBzdG9wb3ZlciBhbiBpbnRlcm1lZGlhdGUgdmVyc2lvbiB0byB3b3JrYXJvdW5kIHRoaXMuXG4gICAgICAgICAgICAgICAgLy8gQXQgdGhhdCBwb2ludCwgd2Ugd2FudCB0byBiZSBiYWNrd2FyZCBjb21wYXRpYmxlLiBDb3VsZCBoYXZlIGJlZW4gbXVsdGlwbGllZCB3aXRoIDIsIGJ1dCBieSB1c2luZyAxMCwgaXQgaXMgZWFzaWVyIHRvIG1hcCB0aGUgbnVtYmVyIHRvIHRoZSByZWFsIHZlcnNpb24gbnVtYmVyLlxuICAgICAgICAgICAgICAgIC8vIElmIG5vIEFQSSwgdGhyb3chXG4gICAgICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoXCJpbmRleGVkREIgQVBJIG5vdCBmb3VuZC4gSWYgdXNpbmcgSUUxMCssIG1ha2Ugc3VyZSB0byBydW4geW91ciBjb2RlIG9uIGEgc2VydmVyIFVSTCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIihub3QgbG9jYWxseSkuIElmIHVzaW5nIG9sZCBTYWZhcmkgdmVyc2lvbnMsIG1ha2Ugc3VyZSB0byBpbmNsdWRlIGluZGV4ZWREQiBwb2x5ZmlsbC5cIik7XG4gICAgICAgICAgICAgICAgdmFyIHJlcSA9IGF1dG9TY2hlbWEgPyBpbmRleGVkREIub3BlbihkYk5hbWUpIDogaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBNYXRoLnJvdW5kKGRiLnZlcm5vICogMTApKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuTWlzc2luZ0FQSShcIkluZGV4ZWREQiBBUEkgbm90IGF2YWlsYWJsZVwiKTsgLy8gTWF5IGhhcHBlbiBpbiBTYWZhcmkgcHJpdmF0ZSBtb2RlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXIvRGV4aWUuanMvaXNzdWVzLzEzNFxuICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uYmxvY2tlZCA9IHdyYXAoZmlyZU9uQmxvY2tlZCk7XG4gICAgICAgICAgICAgICAgcmVxLm9udXBncmFkZW5lZWRlZCA9IHdyYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uID0gcmVxLnRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXV0b1NjaGVtYSAmJiAhZGIuX2FsbG93RW1wdHlEQikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbGVyIGRpZCBub3Qgc3BlY2lmeSBhIHZlcnNpb24gb3Igc2NoZW1hLiBEb2luZyB0aGF0IGlzIG9ubHkgYWNjZXB0YWJsZSBmb3Igb3BlbmluZyBhbHJlYWQgZXhpc3RpbmcgZGF0YWJhc2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgb251cGdyYWRlbmVlZGVkIGlzIGNhbGxlZCBpdCBtZWFucyBkYXRhYmFzZSBkaWQgbm90IGV4aXN0LiBSZWplY3QgdGhlIG9wZW4oKSBwcm9taXNlIGFuZCBtYWtlIHN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGNyZWF0ZSBhIG5ldyBkYXRhYmFzZSBieSBhY2NpZGVudCBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBwcmV2ZW50RGVmYXVsdDsgLy8gUHJvaGliaXQgb25hYm9ydCBlcnJvciBmcm9tIGZpcmluZyBiZWZvcmUgd2UncmUgZG9uZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVUcmFuc2FjdGlvbi5hYm9ydCgpOyAvLyBBYm9ydCB0cmFuc2FjdGlvbiAod291bGQgaG9wZSB0aGF0IHRoaXMgd291bGQgbWFrZSBEQiBkaXNhcHBlYXIgYnV0IGl0IGRvZXNudC4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbG9zZSBkYXRhYmFzZSBhbmQgZGVsZXRlIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLnJlc3VsdC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHJlcSA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpOyAvLyBUaGUgdXBncmFkZSB0cmFuc2FjdGlvbiBpcyBhdG9taWMsIGFuZCBqYXZhc2NyaXB0IGlzIHNpbmdsZSB0aHJlYWRlZCAtIG1lYW5pbmcgdGhhdCB0aGVyZSBpcyBubyByaXNrIHRoYXQgd2UgZGVsZXRlIHNvbWVvbmUgZWxzZXMgZGF0YWJhc2UgaGVyZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHJlcS5vbnN1Y2Nlc3MgPSBkZWxyZXEub25lcnJvciA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgZXhjZXB0aW9ucy5Ob1N1Y2hEYXRhYmFzZShcIkRhdGFiYXNlIFwiICsgZGJOYW1lICsgXCIgZG9lc250IGV4aXN0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBncmFkZVRyYW5zYWN0aW9uLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRWZXIgPSBlLm9sZFZlcnNpb24gPiBNYXRoLnBvdygyLCA2MikgPyAwIDogZS5vbGRWZXJzaW9uOyAvLyBTYWZhcmkgOCBmaXguXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5VcGdyYWRlcnMob2xkVmVyIC8gMTAsIHVwZ3JhZGVUcmFuc2FjdGlvbiwgcmVqZWN0LCByZXEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcmUgb3BlbmluZyBwcm9jZWR1cmUgY29tcGxldGUuIE5vdyBsZXQncyBqdXN0IHJlY29yZCBzb21lIHN0dWZmLlxuICAgICAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZGJkYiA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLnB1c2goZGIpOyAvLyBVc2VkIGZvciBlbXVsYXRpbmcgdmVyc2lvbmNoYW5nZSBldmVudCBvbiBJRS9FZGdlL1NhZmFyaS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dG9TY2hlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkR2xvYmFsU2NoZW1hKCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlkYmRiLm9iamVjdFN0b3JlTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGp1c3RUb0V4aXN0aW5nSW5kZXhOYW1lcyhnbG9iYWxTY2hlbWEsIGlkYmRiLnRyYW5zYWN0aW9uKHNhZmFyaU11bHRpU3RvcmVGaXgoaWRiZGIub2JqZWN0U3RvcmVOYW1lcyksIFJFQURPTkxZKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSBtYXkgYmFpbCBvdXQgaWYgPiAxIHN0b3JlIG5hbWVzLiBIb3dldmVyLCB0aGlzIHNob3VsZG50IGJlIGEgc2hvd3N0b3BwZXIuIElzc3VlICMxMjAuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWRiZGIub252ZXJzaW9uY2hhbmdlID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLl92Y0ZpcmVkID0gdHJ1ZTsgLy8gZGV0ZWN0IGltcGxlbWVudGF0aW9ucyB0aGF0IG5vdCBzdXBwb3J0IHZlcnNpb25jaGFuZ2UgKElFL0VkZ2UvU2FmYXJpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGIub24oXCJ2ZXJzaW9uY2hhbmdlXCIpLmZpcmUoZXYpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNOYXRpdmVHZXREYXRhYmFzZU5hbWVzICYmIGRiTmFtZSAhPT0gJ19fZGJuYW1lcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiTmFtZXNEQi5kYm5hbWVzLnB1dCh7IG5hbWU6IGRiTmFtZSB9KS5jYXRjaChub3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgfSldKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEJlZm9yZSBmaW5hbGx5IHJlc29sdmluZyB0aGUgZGJSZWFkeVByb21pc2UgYW5kIHRoaXMgcHJvbWlzZSxcbiAgICAgICAgICAgIC8vIGNhbGwgYW5kIGF3YWl0IGFsbCBvbigncmVhZHknKSBzdWJzY3JpYmVyczpcbiAgICAgICAgICAgIC8vIERleGllLnZpcCgpIG1ha2VzIHN1YnNjcmliZXJzIGFibGUgdG8gdXNlIHRoZSBkYXRhYmFzZSB3aGlsZSBiZWluZyBvcGVuZWQuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbXVzdCBzaW5jZSB0aGVzZSBzdWJzY3JpYmVycyB0YWtlIHBhcnQgb2YgdGhlIG9wZW5pbmcgcHJvY2VkdXJlLlxuICAgICAgICAgICAgb25SZWFkeUJlaW5nRmlyZWQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoRGV4aWUudmlwKGRiLm9uLnJlYWR5LmZpcmUpKS50aGVuKGZ1bmN0aW9uIGZpcmVSZW1haW5kZXJzKCkge1xuICAgICAgICAgICAgICAgIGlmIChvblJlYWR5QmVpbmdGaXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgYWRkaXRpb25hbCBzdWJzY3JpYmVycyB0byBkYi5vbigncmVhZHknKSB3ZXJlIGFkZGVkIGR1cmluZyB0aGUgdGltZSBkYi5vbi5yZWFkeS5maXJlIHdhcyBleGVjdXRlZC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbWFpbmRlcnMgPSBvblJlYWR5QmVpbmdGaXJlZC5yZWR1Y2UocHJvbWlzYWJsZUNoYWluLCBub3ApO1xuICAgICAgICAgICAgICAgICAgICBvblJlYWR5QmVpbmdGaXJlZCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKERleGllLnZpcChyZW1haW5kZXJzKSkudGhlbihmaXJlUmVtYWluZGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb25SZWFkeUJlaW5nRmlyZWQgPSBudWxsO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIGRiLm9wZW4oKSB3aXRoIHRoZSBkYiBpbnN0YW5jZS5cbiAgICAgICAgICAgIGlzQmVpbmdPcGVuZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBkYjtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBEaWQgd2UgZmFpbCB3aXRoaW4gb251cGdyYWRlbmVlZGVkPyBNYWtlIHN1cmUgdG8gYWJvcnQgdGhlIHVwZ3JhZGUgdHJhbnNhY3Rpb24gc28gaXQgZG9lc250IGNvbW1pdC5cbiAgICAgICAgICAgICAgICB1cGdyYWRlVHJhbnNhY3Rpb24gJiYgdXBncmFkZVRyYW5zYWN0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICBpc0JlaW5nT3BlbmVkID0gZmFsc2U7IC8vIFNldCBiZWZvcmUgY2FsbGluZyBkYi5jbG9zZSgpIHNvIHRoYXQgaXQgZG9lc250IHJlamVjdCBvcGVuQ2FuY2VsbGVyIGFnYWluIChsZWFkcyB0byB1bmhhbmRsZWQgcmVqZWN0aW9uIGV2ZW50KS5cbiAgICAgICAgICAgIGRiLmNsb3NlKCk7IC8vIENsb3NlcyBhbmQgcmVzZXRzIGlkYmRiLCByZW1vdmVzIGNvbm5lY3Rpb25zLCByZXNldHMgZGJSZWFkeVByb21pc2UgYW5kIG9wZW5DYW5jZWxsZXIgc28gdGhhdCBhIGxhdGVyIGRiLm9wZW4oKSBpcyBmcmVzaC5cbiAgICAgICAgICAgIC8vIEEgY2FsbCB0byBkYi5jbG9zZSgpIG1heSBoYXZlIG1hZGUgb24tcmVhZHkgc3Vic2NyaWJlcnMgZmFpbC4gVXNlIGRiT3BlbkVycm9yIGlmIHNldCwgc2luY2UgZXJyIGNvdWxkIGJlIGEgZm9sbG93LXVwIGVycm9yIG9uIHRoYXQuXG4gICAgICAgICAgICBkYk9wZW5FcnJvciA9IGVycjsgLy8gUmVjb3JkIHRoZSBlcnJvci4gSXQgd2lsbCBiZSB1c2VkIHRvIHJlamVjdCBmdXJ0aGVyIHByb21pc2VzIG9mIGRiIG9wZXJhdGlvbnMuXG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0aW9uKGRiT3BlbkVycm9yKTtcbiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvcGVuQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgcmVzb2x2ZURiUmVhZHkoKTsgLy8gZGJSZWFkeVByb21pc2UgaXMgcmVzb2x2ZWQgbm8gbWF0dGVyIGlmIG9wZW4oKSByZWplY3RzIG9yIHJlc29sdmVkLiBJdCdzIGp1c3QgdG8gd2FrZSB1cCB3YWl0ZXJzLlxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZHggPSBjb25uZWN0aW9ucy5pbmRleE9mKGRiKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKVxuICAgICAgICAgICAgY29ubmVjdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIGlmIChpZGJkYikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZGJkYi5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgaWRiZGIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGF1dG9PcGVuID0gZmFsc2U7XG4gICAgICAgIGRiT3BlbkVycm9yID0gbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoKTtcbiAgICAgICAgaWYgKGlzQmVpbmdPcGVuZWQpXG4gICAgICAgICAgICBjYW5jZWxPcGVuKGRiT3BlbkVycm9yKTtcbiAgICAgICAgLy8gUmVzZXQgZGJSZWFkeVByb21pc2UgcHJvbWlzZTpcbiAgICAgICAgZGJSZWFkeVByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgZGJSZWFkeVJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICAgICAgb3BlbkNhbmNlbGxlciA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgICAgICAgIGNhbmNlbE9wZW4gPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYXNBcmd1bWVudHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmIChoYXNBcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiQXJndW1lbnRzIG5vdCBhbGxvd2VkIGluIGRiLmRlbGV0ZSgpXCIpO1xuICAgICAgICAgICAgaWYgKGlzQmVpbmdPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBkYlJlYWR5UHJvbWlzZS50aGVuKGRvRGVsZXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvRGVsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBkb0RlbGV0ZSgpIHtcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHZhciByZXEgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoZGJOYW1lKTtcbiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzTmF0aXZlR2V0RGF0YWJhc2VOYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGJOYW1lc0RCLmRibmFtZXMuZGVsZXRlKGRiTmFtZSkuY2F0Y2gobm9wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICByZXEub25ibG9ja2VkID0gZmlyZU9uQmxvY2tlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLmJhY2tlbmREQiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGlkYmRiO1xuICAgIH07XG4gICAgdGhpcy5pc09wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpZGJkYiAhPT0gbnVsbDtcbiAgICB9O1xuICAgIHRoaXMuaGFzQmVlbkNsb3NlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRiT3BlbkVycm9yICYmIChkYk9wZW5FcnJvciBpbnN0YW5jZW9mIGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQpO1xuICAgIH07XG4gICAgdGhpcy5oYXNGYWlsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBkYk9wZW5FcnJvciAhPT0gbnVsbDtcbiAgICB9O1xuICAgIHRoaXMuZHluYW1pY2FsbHlPcGVuZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhdXRvU2NoZW1hO1xuICAgIH07XG4gICAgLy9cbiAgICAvLyBQcm9wZXJ0aWVzXG4gICAgLy9cbiAgICB0aGlzLm5hbWUgPSBkYk5hbWU7XG4gICAgLy8gZGIudGFibGVzIC0gYW4gYXJyYXkgb2YgYWxsIFRhYmxlIGluc3RhbmNlcy5cbiAgICBwcm9wcyh0aGlzLCB7XG4gICAgICAgIHRhYmxlczoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJBcnJheVwiIGVsZW1lbnRUeXBlPVwiVGFibGVcIiAvPlxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlzKGFsbFRhYmxlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBhbGxUYWJsZXNbbmFtZV07IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy9cbiAgICAvLyBFdmVudHNcbiAgICAvL1xuICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJwb3B1bGF0ZVwiLCBcImJsb2NrZWRcIiwgXCJ2ZXJzaW9uY2hhbmdlXCIsIHsgcmVhZHk6IFtwcm9taXNhYmxlQ2hhaW4sIG5vcF0gfSk7XG4gICAgdGhpcy5vbi5yZWFkeS5zdWJzY3JpYmUgPSBvdmVycmlkZSh0aGlzLm9uLnJlYWR5LnN1YnNjcmliZSwgZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN1YnNjcmliZXIsIGJTdGlja3kpIHtcbiAgICAgICAgICAgIERleGllLnZpcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wZW5Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEYXRhYmFzZSBhbHJlYWR5IG9wZW4uIENhbGwgc3Vic2NyaWJlciBhc2FwLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRiT3BlbkVycm9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYlN0aWNreTogQWxzbyBzdWJzY3JpYmUgdG8gZnV0dXJlIG9wZW4gc3VjZXNzZXMgKGFmdGVyIGNsb3NlIC8gcmVvcGVuKSBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJTdGlja3kpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9uUmVhZHlCZWluZ0ZpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRiLm9uKCdyZWFkeScpIHN1YnNjcmliZXJzIGFyZSBjdXJyZW50bHkgYmVpbmcgZXhlY3V0ZWQgYW5kIGhhdmUgbm90IHlldCByZXNvbHZlZCBvciByZWplY3RlZFxuICAgICAgICAgICAgICAgICAgICBvblJlYWR5QmVpbmdGaXJlZC5wdXNoKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYlN0aWNreSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERhdGFiYXNlIG5vdCB5ZXQgb3Blbi4gU3Vic2NyaWJlIHRvIGl0LlxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGJTdGlja3kgaXMgZmFsc3ksIG1ha2Ugc3VyZSB0byB1bnN1YnNjcmliZSBzdWJzY3JpYmVyIHdoZW4gZmlyZWQgb25jZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiU3RpY2t5KVxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlKGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiLm9uLnJlYWR5LnVuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRiLm9uLnJlYWR5LnVuc3Vic2NyaWJlKHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vLyA8c3VtbWFyeT5cbiAgICAgICAgLy8vXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm1vZGVcIiB0eXBlPVwiU3RyaW5nXCI+XCJyXCIgZm9yIHJlYWRvbmx5LCBvciBcInJ3XCIgZm9yIHJlYWR3cml0ZTwvcGFyYW0+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInRhYmxlSW5zdGFuY2VzXCI+VGFibGUgaW5zdGFuY2UsIEFycmF5IG9mIFRhYmxlIGluc3RhbmNlcywgU3RyaW5nIG9yIFN0cmluZyBBcnJheSBvZiBvYmplY3Qgc3RvcmVzIHRvIGluY2x1ZGUgaW4gdGhlIHRyYW5zYWN0aW9uPC9wYXJhbT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic2NvcGVGdW5jXCIgdHlwZT1cIkZ1bmN0aW9uXCI+RnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoIHRyYW5zYWN0aW9uPC9wYXJhbT5cbiAgICAgICAgdmFyIGFyZ3MgPSBleHRyYWN0VHJhbnNhY3Rpb25BcmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGV4dHJhY3RUcmFuc2FjdGlvbkFyZ3MobW9kZSwgX3RhYmxlQXJnc18sIHNjb3BlRnVuYykge1xuICAgICAgICAvLyBMZXQgdGFibGUgYXJndW1lbnRzIGJlIGFsbCBhcmd1bWVudHMgYmV0d2VlbiBtb2RlIGFuZCBsYXN0IGFyZ3VtZW50LlxuICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChpIDwgMilcbiAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIlRvbyBmZXcgYXJndW1lbnRzXCIpO1xuICAgICAgICAvLyBQcmV2ZW50IG9wdGltemF0aW9uIGtpbGxlciAoaHR0cHM6Ly9naXRodWIuY29tL3BldGthYW50b25vdi9ibHVlYmlyZC93aWtpL09wdGltaXphdGlvbi1raWxsZXJzIzMyLWxlYWtpbmctYXJndW1lbnRzKVxuICAgICAgICAvLyBhbmQgY2xvbmUgYXJndW1lbnRzIGV4Y2VwdCB0aGUgZmlyc3Qgb25lIGludG8gbG9jYWwgdmFyICdhcmdzJy5cbiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSAtIDEpO1xuICAgICAgICB3aGlsZSAoLS1pKVxuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIC8vIExldCBzY29wZUZ1bmMgYmUgdGhlIGxhc3QgYXJndW1lbnQgYW5kIHBvcCBpdCBzbyB0aGF0IGFyZ3Mgbm93IG9ubHkgY29udGFpbiB0aGUgdGFibGUgYXJndW1lbnRzLlxuICAgICAgICBzY29wZUZ1bmMgPSBhcmdzLnBvcCgpO1xuICAgICAgICB2YXIgdGFibGVzID0gZmxhdHRlbihhcmdzKTsgLy8gU3VwcG9ydCB1c2luZyBhcnJheSBhcyBtaWRkbGUgYXJndW1lbnQsIG9yIGEgbWl4IG9mIGFycmF5cyBhbmQgbm9uLWFycmF5cy5cbiAgICAgICAgcmV0dXJuIFttb2RlLCB0YWJsZXMsIHNjb3BlRnVuY107XG4gICAgfVxuICAgIHRoaXMuX3RyYW5zYWN0aW9uID0gZnVuY3Rpb24gKG1vZGUsIHRhYmxlcywgc2NvcGVGdW5jKSB7XG4gICAgICAgIHZhciBwYXJlbnRUcmFuc2FjdGlvbiA9IFBTRC50cmFucztcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGFyZW50IHRyYW5zYWN0aW9ucyBpcyBib3VuZCB0byB0aGlzIGRiIGluc3RhbmNlLCBhbmQgaWYgY2FsbGVyIHdhbnRzIHRvIHJldXNlIGl0XG4gICAgICAgIGlmICghcGFyZW50VHJhbnNhY3Rpb24gfHwgcGFyZW50VHJhbnNhY3Rpb24uZGIgIT09IGRiIHx8IG1vZGUuaW5kZXhPZignIScpICE9PSAtMSlcbiAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uID0gbnVsbDtcbiAgICAgICAgdmFyIG9ubHlJZkNvbXBhdGlibGUgPSBtb2RlLmluZGV4T2YoJz8nKSAhPT0gLTE7XG4gICAgICAgIG1vZGUgPSBtb2RlLnJlcGxhY2UoJyEnLCAnJykucmVwbGFjZSgnPycsICcnKTsgLy8gT2suIFdpbGwgY2hhbmdlIGFyZ3VtZW50c1swXSBhcyB3ZWxsIGJ1dCB3ZSB3b250IHRvdWNoIGFyZ3VtZW50cyBoZW5jZWZvcnRoLlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEdldCBzdG9yZU5hbWVzIGZyb20gYXJndW1lbnRzLiBFaXRoZXIgdGhyb3VnaCBnaXZlbiB0YWJsZSBpbnN0YW5jZXMsIG9yIHRocm91Z2ggZ2l2ZW4gdGFibGUgbmFtZXMuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgdmFyIHN0b3JlTmFtZXMgPSB0YWJsZXMubWFwKGZ1bmN0aW9uICh0YWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSB0YWJsZSBpbnN0YW5jZW9mIFRhYmxlID8gdGFibGUubmFtZSA6IHRhYmxlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RvcmVOYW1lICE9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGFibGUgYXJndW1lbnQgdG8gRGV4aWUudHJhbnNhY3Rpb24oKS4gT25seSBUYWJsZSBvciBTdHJpbmcgYXJlIGFsbG93ZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlTmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFJlc29sdmUgbW9kZS4gQWxsb3cgc2hvcnRjdXRzIFwiclwiIGFuZCBcInJ3XCIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaWYgKG1vZGUgPT0gXCJyXCIgfHwgbW9kZSA9PSBSRUFET05MWSlcbiAgICAgICAgICAgICAgICBtb2RlID0gUkVBRE9OTFk7XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlID09IFwicndcIiB8fCBtb2RlID09IFJFQURXUklURSlcbiAgICAgICAgICAgICAgICBtb2RlID0gUkVBRFdSSVRFO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkludmFsaWQgdHJhbnNhY3Rpb24gbW9kZTogXCIgKyBtb2RlKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIEJhc2ljIGNoZWNrc1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbi5tb2RlID09PSBSRUFET05MWSAmJiBtb2RlID09PSBSRUFEV1JJVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ubHlJZkNvbXBhdGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwYXduIG5ldyB0cmFuc2FjdGlvbiBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50VHJhbnNhY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlN1YlRyYW5zYWN0aW9uKFwiQ2Fubm90IGVudGVyIGEgc3ViLXRyYW5zYWN0aW9uIHdpdGggUkVBRFdSSVRFIG1vZGUgd2hlbiBwYXJlbnQgdHJhbnNhY3Rpb24gaXMgUkVBRE9OTFlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uICYmIHBhcmVudFRyYW5zYWN0aW9uLnN0b3JlTmFtZXMuaW5kZXhPZihzdG9yZU5hbWUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwYXduIG5ldyB0cmFuc2FjdGlvbiBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU3ViVHJhbnNhY3Rpb24oXCJUYWJsZSBcIiArIHN0b3JlTmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiBub3QgaW5jbHVkZWQgaW4gcGFyZW50IHRyYW5zYWN0aW9uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvbmx5SWZDb21wYXRpYmxlICYmIHBhcmVudFRyYW5zYWN0aW9uICYmICFwYXJlbnRUcmFuc2FjdGlvbi5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gJz8nIG1vZGUgc2hvdWxkIG5vdCBrZWVwIHVzaW5nIGFuIGluYWN0aXZlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50VHJhbnNhY3Rpb24gP1xuICAgICAgICAgICAgICAgIHBhcmVudFRyYW5zYWN0aW9uLl9wcm9taXNlKG51bGwsIGZ1bmN0aW9uIChfLCByZWplY3QpIHsgcmVqZWN0KGUpOyB9KSA6XG4gICAgICAgICAgICAgICAgcmVqZWN0aW9uKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgaXMgYSBzdWItdHJhbnNhY3Rpb24sIGxvY2sgdGhlIHBhcmVudCBhbmQgdGhlbiBsYXVuY2ggdGhlIHN1Yi10cmFuc2FjdGlvbi5cbiAgICAgICAgcmV0dXJuIChwYXJlbnRUcmFuc2FjdGlvbiA/XG4gICAgICAgICAgICBwYXJlbnRUcmFuc2FjdGlvbi5fcHJvbWlzZShtb2RlLCBlbnRlclRyYW5zYWN0aW9uU2NvcGUsIFwibG9ja1wiKSA6XG4gICAgICAgICAgICBQU0QudHJhbnMgP1xuICAgICAgICAgICAgICAgIC8vIG5vIHBhcmVudCB0cmFuc2FjdGlvbiBkZXNwaXRlIFBTRC50cmFucyBleGlzdHMuIE1ha2Ugc3VyZSBhbHNvXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgem9uZSB3ZSBjcmVhdGUgaXMgbm90IGEgc3ViLXpvbmUgb2YgY3VycmVudCwgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIFByb21pc2UuZm9sbG93KCkgc2hvdWxkIG5vdCB3YWl0IGZvciBpdCBpZiBzby5cbiAgICAgICAgICAgICAgICB1c2VQU0QoUFNELnRyYW5zbGVzcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gZGIuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uU2NvcGUpOyB9KSA6XG4gICAgICAgICAgICAgICAgZGIuX3doZW5SZWFkeShlbnRlclRyYW5zYWN0aW9uU2NvcGUpKTtcbiAgICAgICAgZnVuY3Rpb24gZW50ZXJUcmFuc2FjdGlvblNjb3BlKCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIEtlZXAgYSBwb2ludGVyIHRvIGxhc3Qgbm9uLXRyYW5zYWN0aW9uYWwgUFNEIHRvIHVzZSBpZiBzb21lb25lIGNhbGxzIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKCkuXG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zbGVzcyA9IFBTRC50cmFuc2xlc3MgfHwgUFNEO1xuICAgICAgICAgICAgICAgIC8vIE91ciB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgICAgICAvL3JldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zID0gZGIuX2NyZWF0ZVRyYW5zYWN0aW9uKG1vZGUsIHN0b3JlTmFtZXMsIGdsb2JhbFNjaGVtYSwgcGFyZW50VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgICAgIC8vIExldCB0aGUgdHJhbnNhY3Rpb24gaW5zdGFuY2UgYmUgcGFydCBvZiBhIFByb21pc2Utc3BlY2lmaWMgZGF0YSAoUFNEKSB2YWx1ZS5cbiAgICAgICAgICAgICAgICB2YXIgem9uZVByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuczogdHJhbnMsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGVzczogdHJhbnNsZXNzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW11bGF0ZSB0cmFuc2FjdGlvbiBjb21taXQgYXdhcmVuZXNzIGZvciBpbm5lciB0cmFuc2FjdGlvbiAobXVzdCAnY29tbWl0JyB3aGVuIHRoZSBpbm5lciB0cmFuc2FjdGlvbiBoYXMgbm8gbW9yZSBvcGVyYXRpb25zIG9uZ29pbmcpXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLmlkYnRyYW5zID0gcGFyZW50VHJhbnNhY3Rpb24uaWRidHJhbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cmFucy5jcmVhdGUoKTsgLy8gQ3JlYXRlIHRoZSBiYWNrZW5kIHRyYW5zYWN0aW9uIHNvIHRoYXQgY29tcGxldGUoKSBvciBlcnJvcigpIHdpbGwgdHJpZ2dlciBldmVuIGlmIG5vIG9wZXJhdGlvbiBpcyBtYWRlIHVwb24gaXQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQgZm9yIG5hdGl2ZSBhc3luYyBhd2FpdC5cbiAgICAgICAgICAgICAgICBpZiAoc2NvcGVGdW5jLmNvbnN0cnVjdG9yID09PSBBc3luY0Z1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudEV4cGVjdGVkQXdhaXRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZUZvbGxvd2VkID0gUHJvbWlzZS5mb2xsb3coZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBjYWxsIHRoZSBzY29wZSBmdW5jdGlvbiB3aXRoIG91ciB0YWJsZSBhbmQgdHJhbnNhY3Rpb24gYXJndW1lbnRzLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNjb3BlRnVuYy5jYWxsKHRyYW5zLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlLmNvbnN0cnVjdG9yID09PSBOYXRpdmVQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlY3JlbWVudG9yID0gZGVjcmVtZW50RXhwZWN0ZWRBd2FpdHMuYmluZChudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZS50aGVuKGRlY3JlbWVudG9yLCBkZWNyZW1lbnRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmV0dXJuVmFsdWUubmV4dCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgcmV0dXJuVmFsdWUudGhyb3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY29wZUZ1bmMgcmV0dXJuZWQgYW4gaXRlcmF0b3Igd2l0aCB0aHJvdy1zdXBwb3J0LiBIYW5kbGUgeWllbGQgYXMgYXdhaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBhd2FpdEl0ZXJhdG9yKHJldHVyblZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHpvbmVQcm9wcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChyZXR1cm5WYWx1ZSAmJiB0eXBlb2YgcmV0dXJuVmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICAgICAgICAgIC8vIFByb21pc2UgcmV0dXJuZWQuIFVzZXIgdXNlcyBwcm9taXNlLXN0eWxlIHRyYW5zYWN0aW9ucy5cbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHJldHVyblZhbHVlKS50aGVuKGZ1bmN0aW9uICh4KSB7IHJldHVybiB0cmFucy5hY3RpdmUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgeCAvLyBUcmFuc2FjdGlvbiBzdGlsbCBhY3RpdmUuIENvbnRpbnVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZWplY3Rpb24obmV3IGV4Y2VwdGlvbnMuUHJlbWF0dXJlQ29tbWl0KFwiVHJhbnNhY3Rpb24gY29tbWl0dGVkIHRvbyBlYXJseS4gU2VlIGh0dHA6Ly9iaXQubHkvMmtkY2tNblwiKSk7IH0pXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vIHByb21pc2UgcmV0dXJuZWQuIFdhaXQgZm9yIGFsbCBvdXRzdGFuZGluZyBwcm9taXNlcyBiZWZvcmUgY29udGludWluZy4gXG4gICAgICAgICAgICAgICAgICAgIDogcHJvbWlzZUZvbGxvd2VkLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcmV0dXJuVmFsdWU7IH0pKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YiB0cmFuc2FjdGlvbnMgZG9uJ3QgcmVhY3QgdG8gaWRidHJhbnMub25jb21wbGV0ZS4gV2UgbXVzdCB0cmlnZ2VyIGEgY29tcGxldGlvbjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3Jlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgdHJhbnMuX2NvbXBsZXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gKGlmIHJvb3QgdHJhbnNhY3Rpb24sIHRoaXMgbWVhbnMgJ2NvbXBsZXRlJyBldmVudC4gSWYgc3ViLXRyYW5zYWN0aW9uLCB3ZSd2ZSBqdXN0IGZpcmVkIGl0IG91cnNlbHZlcylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zLl9jb21wbGV0aW9uLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4geDsgfSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnMuX3JlamVjdChlKTsgLy8gWWVzLCBhYm92ZSB0aGVuLWhhbmRsZXIgd2VyZSBtYXliZSBub3QgY2FsbGVkIGJlY2F1c2Ugb2YgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpbiBzY29wZUZ1bmMhXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3Rpb24oZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJUYWJsZVwiPjwvcmV0dXJucz5cbiAgICAgICAgaWYgKCFoYXNPd24oYWxsVGFibGVzLCB0YWJsZU5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkVGFibGUoXCJUYWJsZSBcIiArIHRhYmxlTmFtZSArIFwiIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbGxUYWJsZXNbdGFibGVOYW1lXTtcbiAgICB9O1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFRhYmxlIENsYXNzXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgZnVuY3Rpb24gVGFibGUobmFtZSwgdGFibGVTY2hlbWEsIG9wdGlvbmFsVHJhbnMpIHtcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibmFtZVwiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHRhYmxlU2NoZW1hO1xuICAgICAgICB0aGlzLl90eCA9IG9wdGlvbmFsVHJhbnM7XG4gICAgICAgIHRoaXMuaG9vayA9IGFsbFRhYmxlc1tuYW1lXSA/IGFsbFRhYmxlc1tuYW1lXS5ob29rIDogRXZlbnRzKG51bGwsIHtcbiAgICAgICAgICAgIFwiY3JlYXRpbmdcIjogW2hvb2tDcmVhdGluZ0NoYWluLCBub3BdLFxuICAgICAgICAgICAgXCJyZWFkaW5nXCI6IFtwdXJlRnVuY3Rpb25DaGFpbiwgbWlycm9yXSxcbiAgICAgICAgICAgIFwidXBkYXRpbmdcIjogW2hvb2tVcGRhdGluZ0NoYWluLCBub3BdLFxuICAgICAgICAgICAgXCJkZWxldGluZ1wiOiBbaG9va0RlbGV0aW5nQ2hhaW4sIG5vcF1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QsIGRvbmUsIHN1cHBvcnRIb29rcykge1xuICAgICAgICByZXR1cm4gKHN1cHBvcnRIb29rcyA/IGhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlciA6IGV2ZW50UmVqZWN0SGFuZGxlcikoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGVycm9yTGlzdC5wdXNoKGUpO1xuICAgICAgICAgICAgZG9uZSAmJiBkb25lKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWxrRGVsZXRlKGlkYnN0b3JlLCB0cmFucywga2V5c09yVHVwbGVzLCBoYXNEZWxldGVIb29rLCBkZWxldGluZ0hvb2spIHtcbiAgICAgICAgLy8gSWYgaGFzRGVsZXRlSG9vaywga2V5c09yVHVwbGVzIG11c3QgYmUgYW4gYXJyYXkgb2YgdHVwbGVzOiBbW2tleTEsIHZhbHVlMl0sW2tleTIsdmFsdWUyXSwuLi5dLFxuICAgICAgICAvLyBlbHNlIGtleXNPclR1cGxlcyBtdXN0IGJlIGp1c3QgYW4gYXJyYXkgb2Yga2V5czogW2tleTEsIGtleTIsIC4uLl0uXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgbGVuID0ga2V5c09yVHVwbGVzLmxlbmd0aCwgbGFzdEl0ZW0gPSBsZW4gLSAxO1xuICAgICAgICAgICAgaWYgKGxlbiA9PT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgaWYgKCFoYXNEZWxldGVIb29rKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRic3RvcmUuZGVsZXRlKGtleXNPclR1cGxlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBsYXN0SXRlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGhvb2tDdHgsIGVycm9ySGFuZGxlciA9IGhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpLCBzdWNjZXNzSGFuZGxlciA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIobnVsbCk7XG4gICAgICAgICAgICAgICAgdHJ5Q2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob29rQ3R4ID0geyBvbnN1Y2Nlc3M6IG51bGwsIG9uZXJyb3I6IG51bGwgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0dXBsZSA9IGtleXNPclR1cGxlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0aW5nSG9vay5jYWxsKGhvb2tDdHgsIHR1cGxlWzBdLCB0dXBsZVsxXSwgdHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGlkYnN0b3JlLmRlbGV0ZSh0dXBsZVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEuX2hvb2tDdHggPSBob29rQ3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbGFzdEl0ZW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3NIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBob29rQ3R4Lm9uZXJyb3IgJiYgaG9va0N0eC5vbmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByb3BzKFRhYmxlLnByb3RvdHlwZSwge1xuICAgICAgICAvL1xuICAgICAgICAvLyBUYWJsZSBQcm90ZWN0ZWQgTWV0aG9kc1xuICAgICAgICAvL1xuICAgICAgICBfdHJhbnM6IGZ1bmN0aW9uIGdldFRyYW5zYWN0aW9uKG1vZGUsIGZuLCB3cml0ZUxvY2tlZCkge1xuICAgICAgICAgICAgdmFyIHRyYW5zID0gdGhpcy5fdHggfHwgUFNELnRyYW5zO1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zICYmIHRyYW5zLmRiID09PSBkYiA/XG4gICAgICAgICAgICAgICAgdHJhbnMgPT09IFBTRC50cmFucyA/XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zLl9wcm9taXNlKG1vZGUsIGZuLCB3cml0ZUxvY2tlZCkgOlxuICAgICAgICAgICAgICAgICAgICBuZXdTY29wZShmdW5jdGlvbiAoKSB7IHJldHVybiB0cmFucy5fcHJvbWlzZShtb2RlLCBmbiwgd3JpdGVMb2NrZWQpOyB9LCB7IHRyYW5zOiB0cmFucywgdHJhbnNsZXNzOiBQU0QudHJhbnNsZXNzIHx8IFBTRCB9KSA6XG4gICAgICAgICAgICAgICAgdGVtcFRyYW5zYWN0aW9uKG1vZGUsIFt0aGlzLm5hbWVdLCBmbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9pZGJzdG9yZTogZnVuY3Rpb24gZ2V0SURCT2JqZWN0U3RvcmUobW9kZSwgZm4sIHdyaXRlTG9ja2VkKSB7XG4gICAgICAgICAgICB2YXIgdGFibGVOYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VwcGx5SWRiU3RvcmUocmVzb2x2ZSwgcmVqZWN0LCB0cmFucykge1xuICAgICAgICAgICAgICAgIGlmICh0cmFucy5zdG9yZU5hbWVzLmluZGV4T2YodGFibGVOYW1lKSA9PT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk5vdEZvdW5kKFwiVGFibGVcIiArIHRhYmxlTmFtZSArIFwiIG5vdCBwYXJ0IG9mIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmbihyZXNvbHZlLCByZWplY3QsIHRyYW5zLmlkYnRyYW5zLm9iamVjdFN0b3JlKHRhYmxlTmFtZSksIHRyYW5zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucyhtb2RlLCBzdXBwbHlJZGJTdG9yZSwgd3JpdGVMb2NrZWQpO1xuICAgICAgICB9LFxuICAgICAgICAvL1xuICAgICAgICAvLyBUYWJsZSBQdWJsaWMgTWV0aG9kc1xuICAgICAgICAvL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrZXlPckNyaXQsIGNiKSB7XG4gICAgICAgICAgICBpZiAoa2V5T3JDcml0ICYmIGtleU9yQ3JpdC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKGtleU9yQ3JpdCkuZmlyc3QoY2IpO1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkYnN0b3JlKFJFQURPTkxZLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgIHZhciByZXEgPSBpZGJzdG9yZS5nZXQoa2V5T3JDcml0KTtcbiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzZWxmLmhvb2sucmVhZGluZy5maXJlKHJlcS5yZXN1bHQpKTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgIH0sXG4gICAgICAgIHdoZXJlOiBmdW5jdGlvbiAoaW5kZXhPckNyaXQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5kZXhPckNyaXQgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2hlcmVDbGF1c2UodGhpcywgaW5kZXhPckNyaXQpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoaW5kZXhPckNyaXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgV2hlcmVDbGF1c2UodGhpcywgXCJbXCIgKyBpbmRleE9yQ3JpdC5qb2luKCcrJykgKyBcIl1cIik7XG4gICAgICAgICAgICAvLyBpbmRleE9yQ3JpdCBpcyBhbiBvYmplY3QgbWFwIG9mIHtba2V5UGF0aF06dmFsdWV9IFxuICAgICAgICAgICAgdmFyIGtleVBhdGhzID0ga2V5cyhpbmRleE9yQ3JpdCk7XG4gICAgICAgICAgICBpZiAoa2V5UGF0aHMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgIC8vIE9ubHkgb25lIGNyaXRlcmEuIFRoaXMgd2FzIHRoZSBlYXN5IGNhc2U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLndoZXJlKGtleVBhdGhzWzBdKVxuICAgICAgICAgICAgICAgICAgICAuZXF1YWxzKGluZGV4T3JDcml0W2tleVBhdGhzWzBdXSk7XG4gICAgICAgICAgICAvLyBNdWx0aXBsZSBjcml0ZXJpYXMuXG4gICAgICAgICAgICAvLyBMZXQncyB0cnkgZmluZGluZyBhIGNvbXBvdW5kIGluZGV4IHRoYXQgbWF0Y2hlcyBhbGwga2V5UGF0aHMgaW5cbiAgICAgICAgICAgIC8vIGFyYnJpdGFyeSBvcmRlcjpcbiAgICAgICAgICAgIHZhciBjb21wb3VuZEluZGV4ID0gdGhpcy5zY2hlbWEuaW5kZXhlcy5jb25jYXQodGhpcy5zY2hlbWEucHJpbUtleSkuZmlsdGVyKGZ1bmN0aW9uIChpeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpeC5jb21wb3VuZCAmJlxuICAgICAgICAgICAgICAgICAgICBrZXlQYXRocy5ldmVyeShmdW5jdGlvbiAoa2V5UGF0aCkgeyByZXR1cm4gaXgua2V5UGF0aC5pbmRleE9mKGtleVBhdGgpID49IDA7IH0pICYmXG4gICAgICAgICAgICAgICAgICAgIGl4LmtleVBhdGguZXZlcnkoZnVuY3Rpb24gKGtleVBhdGgpIHsgcmV0dXJuIGtleVBhdGhzLmluZGV4T2Yoa2V5UGF0aCkgPj0gMDsgfSk7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIGlmIChjb21wb3VuZEluZGV4ICYmIG1heEtleSAhPT0gbWF4U3RyaW5nKVxuICAgICAgICAgICAgICAgIC8vIENvb2whIFdlIGZvdW5kIHN1Y2ggY29tcG91bmQgaW5kZXhcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhpcyBicm93c2VyIHN1cHBvcnRzIGNvbXBvdW5kIGluZGV4ZXMgKG1heEtleSAhPT0gbWF4U3RyaW5nKSFcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUoY29tcG91bmRJbmRleC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAuZXF1YWxzKGNvbXBvdW5kSW5kZXgua2V5UGF0aC5tYXAoZnVuY3Rpb24gKGtwKSB7IHJldHVybiBpbmRleE9yQ3JpdFtrcF07IH0pKTtcbiAgICAgICAgICAgIGlmICghY29tcG91bmRJbmRleClcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJUaGUgcXVlcnkgXCIgKyBKU09OLnN0cmluZ2lmeShpbmRleE9yQ3JpdCkgKyBcIiBvbiBcIiArIHRoaXMubmFtZSArIFwiIHdvdWxkIGJlbmVmaXQgb2YgYSBcIiArXG4gICAgICAgICAgICAgICAgICAgIChcImNvbXBvdW5kIGluZGV4IFtcIiArIGtleVBhdGhzLmpvaW4oJysnKSArIFwiXVwiKSk7XG4gICAgICAgICAgICAvLyBPaywgbm93IGxldCdzIGZhbGxiYWNrIHRvIGZpbmRpbmcgYXQgbGVhc3Qgb25lIG1hdGNoaW5nIGluZGV4XG4gICAgICAgICAgICAvLyBhbmQgZmlsdGVyIHRoZSByZXN0LlxuICAgICAgICAgICAgdmFyIGlkeEJ5TmFtZSA9IHRoaXMuc2NoZW1hLmlkeEJ5TmFtZTtcbiAgICAgICAgICAgIHZhciBzaW1wbGVJbmRleCA9IGtleVBhdGhzLnJlZHVjZShmdW5jdGlvbiAociwga2V5UGF0aCkgeyByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHJbMF0gfHwgaWR4QnlOYW1lW2tleVBhdGhdLFxuICAgICAgICAgICAgICAgIHJbMF0gfHwgIWlkeEJ5TmFtZVtrZXlQYXRoXSA/XG4gICAgICAgICAgICAgICAgICAgIGNvbWJpbmUoclsxXSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuICcnICsgZ2V0QnlLZXlQYXRoKHgsIGtleVBhdGgpID09XG4gICAgICAgICAgICAgICAgICAgICAgICAnJyArIGluZGV4T3JDcml0W2tleVBhdGhdOyB9KVxuICAgICAgICAgICAgICAgICAgICA6IHJbMV1cbiAgICAgICAgICAgIF07IH0sIFtudWxsLCBudWxsXSk7XG4gICAgICAgICAgICB2YXIgaWR4ID0gc2ltcGxlSW5kZXhbMF07XG4gICAgICAgICAgICByZXR1cm4gaWR4ID9cbiAgICAgICAgICAgICAgICB0aGlzLndoZXJlKGlkeC5uYW1lKS5lcXVhbHMoaW5kZXhPckNyaXRbaWR4LmtleVBhdGhdKVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHNpbXBsZUluZGV4WzFdKSA6XG4gICAgICAgICAgICAgICAgY29tcG91bmRJbmRleCA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyKHNpbXBsZUluZGV4WzFdKSA6IC8vIEhhcyBjb21wb3VuZCBidXQgYnJvd3NlciBiYWQuIEFsbG93IGZpbHRlci5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53aGVyZShrZXlQYXRocykuZXF1YWxzKCcnKTsgLy8gTm8gaW5kZXggYXQgYWxsLiBGYWlsIGxhemlseS5cbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuY291bnQoY2IpO1xuICAgICAgICB9LFxuICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLm9mZnNldChvZmZzZXQpO1xuICAgICAgICB9LFxuICAgICAgICBsaW1pdDogZnVuY3Rpb24gKG51bVJvd3MpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmxpbWl0KG51bVJvd3MpO1xuICAgICAgICB9LFxuICAgICAgICByZXZlcnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5yZXZlcnNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlcjogZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0NvbGxlY3Rpb24oKS5hbmQoZmlsdGVyRnVuY3Rpb24pO1xuICAgICAgICB9LFxuICAgICAgICBlYWNoOiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLmVhY2goZm4pO1xuICAgICAgICB9LFxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQ29sbGVjdGlvbigpLnRvQXJyYXkoY2IpO1xuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihuZXcgV2hlcmVDbGF1c2UodGhpcywgaXNBcnJheShpbmRleCkgP1xuICAgICAgICAgICAgICAgIFwiW1wiICsgaW5kZXguam9pbignKycpICsgXCJdXCIgOlxuICAgICAgICAgICAgICAgIGluZGV4KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRvQ29sbGVjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKG5ldyBXaGVyZUNsYXVzZSh0aGlzKSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1hcFRvQ2xhc3M6IGZ1bmN0aW9uIChjb25zdHJ1Y3Rvciwgc3RydWN0dXJlKSB7XG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgICAgICAvLy8gICAgIE1hcCB0YWJsZSB0byBhIGphdmFzY3JpcHQgY29uc3RydWN0b3IgZnVuY3Rpb24uIE9iamVjdHMgcmV0dXJuZWQgZnJvbSB0aGUgZGF0YWJhc2Ugd2lsbCBiZSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcywgbWFraW5nXG4gICAgICAgICAgICAvLy8gICAgIGl0IHBvc3NpYmxlIHRvIHRoZSBpbnN0YW5jZU9mIG9wZXJhdG9yIGFzIHdlbGwgYXMgZXh0ZW5kaW5nIHRoZSBjbGFzcyB1c2luZyBjb25zdHJ1Y3Rvci5wcm90b3R5cGUubWV0aG9kID0gZnVuY3Rpb24oKXsuLi59LlxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImNvbnN0cnVjdG9yXCI+Q29uc3RydWN0b3IgZnVuY3Rpb24gcmVwcmVzZW50aW5nIHRoZSBjbGFzcy48L3BhcmFtPlxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwic3RydWN0dXJlXCIgb3B0aW9uYWw9XCJ0cnVlXCI+SGVscHMgSURFIGNvZGUgY29tcGxldGlvbiBieSBrbm93aW5nIHRoZSBtZW1iZXJzIHRoYXQgb2JqZWN0cyBjb250YWluIGFuZCBub3QganVzdCB0aGUgaW5kZXhlcy4gQWxzb1xuICAgICAgICAgICAgLy8vIGtub3cgd2hhdCB0eXBlIGVhY2ggbWVtYmVyIGhhcy4gRXhhbXBsZToge25hbWU6IFN0cmluZywgZW1haWxBZGRyZXNzZXM6IFtTdHJpbmddLCBwYXNzd29yZH08L3BhcmFtPlxuICAgICAgICAgICAgdGhpcy5zY2hlbWEubWFwcGVkQ2xhc3MgPSBjb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZVRlbXBsYXRlID0gT2JqZWN0LmNyZWF0ZShjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICAgICAgICAgICAgaWYgKHN0cnVjdHVyZSkge1xuICAgICAgICAgICAgICAgIC8vIHN0cnVjdHVyZSBhbmQgaW5zdGFuY2VUZW1wbGF0ZSBpcyBmb3IgSURFIGNvZGUgY29tcGV0aW9uIG9ubHkgd2hpbGUgY29uc3RydWN0b3IucHJvdG90eXBlIGlzIGZvciBhY3R1YWwgaW5oZXJpdGFuY2UuXG4gICAgICAgICAgICAgICAgYXBwbHlTdHJ1Y3R1cmUoaW5zdGFuY2VUZW1wbGF0ZSwgc3RydWN0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2NoZW1hLmluc3RhbmNlVGVtcGxhdGUgPSBpbnN0YW5jZVRlbXBsYXRlO1xuICAgICAgICAgICAgLy8gTm93LCBzdWJzY3JpYmUgdG8gdGhlIHdoZW4oXCJyZWFkaW5nXCIpIGV2ZW50IHRvIG1ha2UgYWxsIG9iamVjdHMgdGhhdCBjb21lIG91dCBmcm9tIHRoaXMgdGFibGUgaW5oZXJpdCBmcm9tIGdpdmVuIGNsYXNzXG4gICAgICAgICAgICAvLyBubyBtYXR0ZXIgd2hpY2ggbWV0aG9kIHRvIHVzZSBmb3IgcmVhZGluZyAoVGFibGUuZ2V0KCkgb3IgVGFibGUud2hlcmUoLi4uKS4uLiApXG4gICAgICAgICAgICB2YXIgcmVhZEhvb2sgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmo7IC8vIE5vIHZhbGlkIG9iamVjdC4gKFZhbHVlIGlzIG51bGwpLiBSZXR1cm4gYXMgaXMuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IG9iamVjdCB0aGF0IGRlcml2ZXMgZnJvbSBjb25zdHJ1Y3RvcjpcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgIC8vIENsb25lIG1lbWJlcnM6XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBvYmopXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24ob2JqLCBtKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzW21dID0gb2JqW21dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc2NoZW1hLnJlYWRIb29rKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob29rLnJlYWRpbmcudW5zdWJzY3JpYmUodGhpcy5zY2hlbWEucmVhZEhvb2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY2hlbWEucmVhZEhvb2sgPSByZWFkSG9vaztcbiAgICAgICAgICAgIHRoaXMuaG9vayhcInJlYWRpbmdcIiwgcmVhZEhvb2spO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgICAgICB9LFxuICAgICAgICBkZWZpbmVDbGFzczogZnVuY3Rpb24gKHN0cnVjdHVyZSkge1xuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAgICAgLy8vICAgICBEZWZpbmUgYWxsIG1lbWJlcnMgb2YgdGhlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyB0aGUgdGFibGUuIFRoaXMgd2lsbCBoZWxwIGNvZGUgY29tcGxldGlvbiBvZiB3aGVuIG9iamVjdHMgYXJlIHJlYWQgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIC8vLyAgICAgYXMgd2VsbCBhcyBtYWtpbmcgaXQgcG9zc2libGUgdG8gZXh0ZW5kIHRoZSBwcm90b3R5cGUgb2YgdGhlIHJldHVybmVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0cnVjdHVyZVwiPkhlbHBzIElERSBjb2RlIGNvbXBsZXRpb24gYnkga25vd2luZyB0aGUgbWVtYmVycyB0aGF0IG9iamVjdHMgY29udGFpbiBhbmQgbm90IGp1c3QgdGhlIGluZGV4ZXMuIEFsc29cbiAgICAgICAgICAgIC8vLyBrbm93IHdoYXQgdHlwZSBlYWNoIG1lbWJlciBoYXMuIEV4YW1wbGU6IHtuYW1lOiBTdHJpbmcsIGVtYWlsQWRkcmVzc2VzOiBbU3RyaW5nXSwgcHJvcGVydGllczoge3Nob2VTaXplOiBOdW1iZXJ9fTwvcGFyYW0+XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXBUb0NsYXNzKERleGllLmRlZmluZUNsYXNzKHN0cnVjdHVyZSksIHN0cnVjdHVyZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGJ1bGtEZWxldGU6IGZ1bmN0aW9uIChrZXlzJCQxKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob29rLmRlbGV0aW5nLmZpcmUgPT09IG5vcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZGJzdG9yZShSRUFEV1JJVEUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlLCB0cmFucykge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1bGtEZWxldGUoaWRic3RvcmUsIHRyYW5zLCBrZXlzJCQxLCBmYWxzZSwgbm9wKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICAgICAgICAgICAgICAud2hlcmUoJzppZCcpXG4gICAgICAgICAgICAgICAgICAgIC5hbnlPZihrZXlzJCQxKVxuICAgICAgICAgICAgICAgICAgICAuZGVsZXRlKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyB9KTsgLy8gUmVzb2x2ZSB3aXRoIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYnVsa1B1dDogZnVuY3Rpb24gKG9iamVjdHMsIGtleXMkJDEpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgIGlmICghaWRic3RvcmUua2V5UGF0aCAmJiAhX3RoaXMuc2NoZW1hLnByaW1LZXkuYXV0byAmJiAha2V5cyQkMSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiYnVsa1B1dCgpIHdpdGggbm9uLWluYm91bmQga2V5cyByZXF1aXJlcyBrZXlzIGFycmF5IGluIHNlY29uZCBhcmd1bWVudFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoaWRic3RvcmUua2V5UGF0aCAmJiBrZXlzJCQxKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJidWxrUHV0KCk6IGtleXMgYXJndW1lbnQgaW52YWxpZCBvbiB0YWJsZXMgd2l0aCBpbmJvdW5kIGtleXNcIik7XG4gICAgICAgICAgICAgICAgaWYgKGtleXMkJDEgJiYga2V5cyQkMS5sZW5ndGggIT09IG9iamVjdHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJBcmd1bWVudHMgb2JqZWN0cyBhbmQga2V5cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoXCIpO1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTsgLy8gQ2FsbGVyIHByb3ZpZGVkIGVtcHR5IGxpc3QuXG4gICAgICAgICAgICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckxpc3QubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEJ1bGtFcnJvcihfdGhpcy5uYW1lICsgXCIuYnVsa1B1dCgpOiBcIiArIGVycm9yTGlzdC5sZW5ndGggKyBcIiBvZiBcIiArIG51bU9ianMgKyBcIiBvcGVyYXRpb25zIGZhaWxlZFwiLCBlcnJvckxpc3QpKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciByZXEsIGVycm9yTGlzdCA9IFtdLCBlcnJvckhhbmRsZXIsIG51bU9ianMgPSBvYmplY3RzLmxlbmd0aCwgdGFibGUgPSBfdGhpcztcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaG9vay5jcmVhdGluZy5maXJlID09PSBub3AgJiYgX3RoaXMuaG9vay51cGRhdGluZy5maXJlID09PSBub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gU3RhbmRhcmQgQnVsayAobm8gJ2NyZWF0aW5nJyBvciAndXBkYXRpbmcnIGhvb2tzIHRvIGNhcmUgYWJvdXQpXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlciA9IEJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbChlcnJvckxpc3QpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iamVjdHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEgPSBrZXlzJCQxID8gaWRic3RvcmUucHV0KG9iamVjdHNbaV0sIGtleXMkJDFbaV0pIDogaWRic3RvcmUucHV0KG9iamVjdHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBlcnJvckhhbmRsZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNhdGNoIHN1Y2Nlc3Mgb3IgZXJyb3Igb24gdGhlIGxhc3Qgb3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY29yZGluZyB0byB0aGUgSURCIHNwZWMuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gQnVsa0Vycm9ySGFuZGxlckNhdGNoQWxsKGVycm9yTGlzdCwgZG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBldmVudFN1Y2Nlc3NIYW5kbGVyKGRvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVmZmVjdGl2ZUtleXMgPSBrZXlzJCQxIHx8IGlkYnN0b3JlLmtleVBhdGggJiYgb2JqZWN0cy5tYXAoZnVuY3Rpb24gKG8pIHsgcmV0dXJuIGdldEJ5S2V5UGF0aChvLCBpZGJzdG9yZS5rZXlQYXRoKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIG1hcCBvZiB7W2tleV06IG9iamVjdH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdExvb2t1cCA9IGVmZmVjdGl2ZUtleXMgJiYgYXJyYXlUb09iamVjdChlZmZlY3RpdmVLZXlzLCBmdW5jdGlvbiAoa2V5LCBpKSB7IHJldHVybiBrZXkgIT0gbnVsbCAmJiBba2V5LCBvYmplY3RzW2ldXTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gIWVmZmVjdGl2ZUtleXMgP1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXV0by1pbmNyZW1lbnRlZCBrZXktbGVzcyBvYmplY3RzIG9ubHkgd2l0aG91dCBhbnkga2V5cyBhcmd1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmJ1bGtBZGQob2JqZWN0cykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2V5cyBwcm92aWRlZC4gRWl0aGVyIGFzIGluYm91bmQgaW4gcHJvdmlkZWQgb2JqZWN0cywgb3IgYXMgYSBrZXlzIGFyZ3VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmVnaW4gd2l0aCB1cGRhdGluZyB0aG9zZSB0aGF0IGV4aXN0cyBpbiBEQjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLndoZXJlKCc6aWQnKS5hbnlPZihlZmZlY3RpdmVLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkgIT0gbnVsbDsgfSkpLm1vZGlmeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG9iamVjdExvb2t1cFt0aGlzLnByaW1LZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdExvb2t1cFt0aGlzLnByaW1LZXldID0gbnVsbDsgLy8gTWFyayBhcyBcImRvbid0IGFkZCB0aGlzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKE1vZGlmeUVycm9yLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTGlzdCA9IGUuZmFpbHVyZXM7IC8vIE5vIG5lZWQgdG8gY29uY2F0IGhlcmUuIFRoZXNlIGFyZSB0aGUgZmlyc3QgZXJyb3JzIGFkZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm93LCBsZXQncyBleGFtaW5lIHdoaWNoIGl0ZW1zIGRpZG50IGV4aXN0IHNvIHdlIGNhbiBhZGQgdGhlbTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Jqc1RvQWRkID0gW10sIGtleXNUb0FkZCA9IGtleXMkJDEgJiYgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXRlcmF0ZSBiYWNrd2FyZHMuIFdoeT8gQmVjYXVzZSBpZiBzYW1lIGtleSB3YXMgdXNlZCB0d2ljZSwganVzdCBhZGQgdGhlIGxhc3Qgb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBlZmZlY3RpdmVLZXlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBlZmZlY3RpdmVLZXlzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IG51bGwgfHwgb2JqZWN0TG9va3VwW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ianNUb0FkZC5wdXNoKG9iamVjdHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cyQkMSAmJiBrZXlzVG9BZGQucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdExvb2t1cFtrZXldID0gbnVsbDsgLy8gTWFyayBhcyBcImRvbnQgYWRkIGFnYWluXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgaXRlbXMgYXJlIGluIHJldmVyc2Ugb3JkZXIgc28gcmV2ZXJzZSB0aGVtIGJlZm9yZSBhZGRpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291bGQgYmUgaW1wb3J0YW50IGluIG9yZGVyIHRvIGdldCBhdXRvLWluY3JlbWVudGVkIGtleXMgdGhlIHdheSB0aGUgY2FsbGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd291bGQgZXhwZWN0LiBDb3VsZCBoYXZlIHVzZWQgdW5zaGlmdCBpbnN0ZWFkIG9mIHB1c2goKS9yZXZlcnNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0OiBodHRwOi8vanNwZXJmLmNvbS91bnNoaWZ0LXZzLXJldmVyc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpzVG9BZGQucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXMkJDEgJiYga2V5c1RvQWRkLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUuYnVsa0FkZChvYmpzVG9BZGQsIGtleXNUb0FkZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChsYXN0QWRkZWRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHdpdGgga2V5IG9mIHRoZSBsYXN0IG9iamVjdCBpbiBnaXZlbiBhcmd1bWVudHMgdG8gYnVsa1B1dCgpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0RWZmZWN0aXZlS2V5ID0gZWZmZWN0aXZlS2V5c1tlZmZlY3RpdmVLZXlzLmxlbmd0aCAtIDFdOyAvLyBLZXkgd2FzIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0RWZmZWN0aXZlS2V5ICE9IG51bGwgPyBsYXN0RWZmZWN0aXZlS2V5IDogbGFzdEFkZGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihkb25lKS5jYXRjaChCdWxrRXJyb3IsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25jYXQgZmFpbHVyZSBmcm9tIE1vZGlmeUVycm9yIGFuZCByZWplY3QgdXNpbmcgb3VyICdkb25lJyBtZXRob2QuXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckxpc3QgPSBlcnJvckxpc3QuY29uY2F0KGUuZmFpbHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIFwibG9ja2VkXCIpOyAvLyBJZiBjYWxsZWQgZnJvbSB0cmFuc2FjdGlvbiBzY29wZSwgbG9jayB0cmFuc2FjdGlvbiB0aWwgYWxsIHN0ZXBzIGFyZSBkb25lLlxuICAgICAgICB9LFxuICAgICAgICBidWxrQWRkOiBmdW5jdGlvbiAob2JqZWN0cywga2V5cyQkMSkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLCBjcmVhdGluZ0hvb2sgPSB0aGlzLmhvb2suY3JlYXRpbmcuZmlyZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZGJzdG9yZShSRUFEV1JJVEUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlLCB0cmFucykge1xuICAgICAgICAgICAgICAgIGlmICghaWRic3RvcmUua2V5UGF0aCAmJiAhc2VsZi5zY2hlbWEucHJpbUtleS5hdXRvICYmICFrZXlzJCQxKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJidWxrQWRkKCkgd2l0aCBub24taW5ib3VuZCBrZXlzIHJlcXVpcmVzIGtleXMgYXJyYXkgaW4gc2Vjb25kIGFyZ3VtZW50XCIpO1xuICAgICAgICAgICAgICAgIGlmIChpZGJzdG9yZS5rZXlQYXRoICYmIGtleXMkJDEpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcImJ1bGtBZGQoKToga2V5cyBhcmd1bWVudCBpbnZhbGlkIG9uIHRhYmxlcyB3aXRoIGluYm91bmQga2V5c1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5cyQkMSAmJiBrZXlzJCQxLmxlbmd0aCAhPT0gb2JqZWN0cy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLkludmFsaWRBcmd1bWVudChcIkFyZ3VtZW50cyBvYmplY3RzIGFuZCBrZXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcIik7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpOyAvLyBDYWxsZXIgcHJvdmlkZWQgZW1wdHkgbGlzdC5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkb25lKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JMaXN0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBCdWxrRXJyb3Ioc2VsZi5uYW1lICsgXCIuYnVsa0FkZCgpOiBcIiArIGVycm9yTGlzdC5sZW5ndGggKyBcIiBvZiBcIiArIG51bU9ianMgKyBcIiBvcGVyYXRpb25zIGZhaWxlZFwiLCBlcnJvckxpc3QpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlcSwgZXJyb3JMaXN0ID0gW10sIGVycm9ySGFuZGxlciwgc3VjY2Vzc0hhbmRsZXIsIG51bU9ianMgPSBvYmplY3RzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY3JlYXRpbmdIb29rICE9PSBub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIHN1YnNjcmliZXJzIHRvIGhvb2soJ2NyZWF0aW5nJylcbiAgICAgICAgICAgICAgICAgICAgLy8gTXVzdCBiZWhhdmUgYXMgZG9jdW1lbnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBpZGJzdG9yZS5rZXlQYXRoLCBob29rQ3R4O1xuICAgICAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIgPSBCdWxrRXJyb3JIYW5kbGVyQ2F0Y2hBbGwoZXJyb3JMaXN0LCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0hhbmRsZXIgPSBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB0cnlDYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iamVjdHMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9va0N0eCA9IHsgb25lcnJvcjogbnVsbCwgb25zdWNjZXNzOiBudWxsIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGtleXMkJDEgJiYga2V5cyQkMVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gb2JqZWN0c1tpXSwgZWZmZWN0aXZlS2V5ID0ga2V5cyQkMSA/IGtleSA6IGtleVBhdGggPyBnZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoKSA6IHVuZGVmaW5lZCwga2V5VG9Vc2UgPSBjcmVhdGluZ0hvb2suY2FsbChob29rQ3R4LCBlZmZlY3RpdmVLZXksIG9iaiwgdHJhbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3RpdmVLZXkgPT0gbnVsbCAmJiBrZXlUb1VzZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBkZWVwQ2xvbmUob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChvYmosIGtleVBhdGgsIGtleVRvVXNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGtleVRvVXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IGtleSAhPSBudWxsID8gaWRic3RvcmUuYWRkKG9iaiwga2V5KSA6IGlkYnN0b3JlLmFkZChvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5faG9va0N0eCA9IGhvb2tDdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBsIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvb2tDdHgub25zdWNjZXNzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHN1Y2Nlc3NIYW5kbGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9va0N0eC5vbmVycm9yICYmIGhvb2tDdHgub25lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBCdWxrRXJyb3JIYW5kbGVyQ2F0Y2hBbGwoZXJyb3JMaXN0LCBkb25lLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIoZG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBTdGFuZGFyZCBCdWxrIChubyAnY3JlYXRpbmcnIGhvb2sgdG8gY2FyZSBhYm91dClcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyID0gQnVsa0Vycm9ySGFuZGxlckNhdGNoQWxsKGVycm9yTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcSA9IGtleXMkJDEgPyBpZGJzdG9yZS5hZGQob2JqZWN0c1tpXSwga2V5cyQkMVtpXSkgOiBpZGJzdG9yZS5hZGQob2JqZWN0c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGVycm9ySGFuZGxlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gY2F0Y2ggc3VjY2VzcyBvciBlcnJvciBvbiB0aGUgbGFzdCBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBJREIgc3BlYy5cbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBCdWxrRXJyb3JIYW5kbGVyQ2F0Y2hBbGwoZXJyb3JMaXN0LCBkb25lKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGV2ZW50U3VjY2Vzc0hhbmRsZXIoZG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgICAgICAvLy8gICBBZGQgYW4gb2JqZWN0IHRvIHRoZSBkYXRhYmFzZS4gSW4gY2FzZSBhbiBvYmplY3Qgd2l0aCBzYW1lIHByaW1hcnkga2V5IGFscmVhZHkgZXhpc3RzLCB0aGUgb2JqZWN0IHdpbGwgbm90IGJlIGFkZGVkLlxuICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm9ialwiIHR5cGU9XCJPYmplY3RcIj5BIGphdmFzY3JpcHQgb2JqZWN0IHRvIGluc2VydDwvcGFyYW0+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlcIiBvcHRpb25hbD1cInRydWVcIj5QcmltYXJ5IGtleTwvcGFyYW0+XG4gICAgICAgICAgICB2YXIgY3JlYXRpbmdIb29rID0gdGhpcy5ob29rLmNyZWF0aW5nLmZpcmU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaG9va0N0eCA9IHsgb25zdWNjZXNzOiBudWxsLCBvbmVycm9yOiBudWxsIH07XG4gICAgICAgICAgICAgICAgaWYgKGNyZWF0aW5nSG9vayAhPT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlZmZlY3RpdmVLZXkgPSAoa2V5ICE9IG51bGwpID8ga2V5IDogKGlkYnN0b3JlLmtleVBhdGggPyBnZXRCeUtleVBhdGgob2JqLCBpZGJzdG9yZS5rZXlQYXRoKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlUb1VzZSA9IGNyZWF0aW5nSG9vay5jYWxsKGhvb2tDdHgsIGVmZmVjdGl2ZUtleSwgb2JqLCB0cmFucyk7IC8vIEFsbG93IHN1YnNjcmliZXJzIHRvIHdoZW4oXCJjcmVhdGluZ1wiKSB0byBnZW5lcmF0ZSB0aGUga2V5LlxuICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0aXZlS2V5ID09IG51bGwgJiYga2V5VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkYnN0b3JlLmtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwgaWRic3RvcmUua2V5UGF0aCwga2V5VG9Vc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGtleVRvVXNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBrZXkgIT0gbnVsbCA/IGlkYnN0b3JlLmFkZChvYmosIGtleSkgOiBpZGJzdG9yZS5hZGQob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLl9ob29rQ3R4ID0gaG9va0N0eDtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBob29rZWRFdmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIoZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogUmVtb3ZlIHRoZXNlIHR3byBsaW5lcyBpbiBuZXh0IG1ham9yIHJlbGVhc2UgKDIuMD8pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIG5vIGdvb2QgcHJhY3RpY2UgdG8gaGF2ZSBzaWRlIGVmZmVjdHMgb24gcHJvdmlkZWQgcGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBpZGJzdG9yZS5rZXlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleVBhdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKG9iaiwga2V5UGF0aCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChob29rQ3R4Lm9uZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBob29rQ3R4Lm9uZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHB1dDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAgICAgLy8vICAgQWRkIGFuIG9iamVjdCB0byB0aGUgZGF0YWJhc2UgYnV0IGluIGNhc2UgYW4gb2JqZWN0IHdpdGggc2FtZSBwcmltYXJ5IGtleSBhbHJlYWQgZXhpc3RzLCB0aGUgZXhpc3Rpbmcgb25lIHdpbGwgZ2V0IHVwZGF0ZWQuXG4gICAgICAgICAgICAvLy8gPC9zdW1tYXJ5PlxuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwib2JqXCIgdHlwZT1cIk9iamVjdFwiPkEgamF2YXNjcmlwdCBvYmplY3QgdG8gaW5zZXJ0IG9yIHVwZGF0ZTwvcGFyYW0+XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlcIiBvcHRpb25hbD1cInRydWVcIj5QcmltYXJ5IGtleTwvcGFyYW0+XG4gICAgICAgICAgICB2YXIgY3JlYXRpbmdIb29rID0gdGhpcy5ob29rLmNyZWF0aW5nLmZpcmUsIHVwZGF0aW5nSG9vayA9IHRoaXMuaG9vay51cGRhdGluZy5maXJlO1xuICAgICAgICAgICAgaWYgKGNyZWF0aW5nSG9vayAhPT0gbm9wIHx8IHVwZGF0aW5nSG9vayAhPT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyBQZW9wbGUgbGlzdGVucyB0byB3aGVuKFwiY3JlYXRpbmdcIikgb3Igd2hlbihcInVwZGF0aW5nXCIpIGV2ZW50cyFcbiAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IGtub3cgd2hldGhlciB0aGUgcHV0IG9wZXJhdGlvbiByZXN1bHRzIGluIGFuIENSRUFURSBvciBVUERBVEUuXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IHRoaXMuc2NoZW1hLnByaW1LZXkua2V5UGF0aDtcbiAgICAgICAgICAgICAgICB2YXIgZWZmZWN0aXZlS2V5ID0gKGtleSAhPT0gdW5kZWZpbmVkKSA/IGtleSA6IChrZXlQYXRoICYmIGdldEJ5S2V5UGF0aChvYmosIGtleVBhdGgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0aXZlS2V5ID09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZChvYmopO1xuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGtleSBpcyBvcHRpb25hbCwgbWFrZSBzdXJlIHdlIGdldCBpdCBmcm9tIG9iaiBpZiBub3QgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAvLyBQcmltYXJ5IGtleSBleGlzdC4gTG9jayB0cmFuc2FjdGlvbiBhbmQgdHJ5IG1vZGlmeWluZyBleGlzdGluZy4gSWYgbm90aGluZyBtb2RpZmllZCwgY2FsbCBhZGQoKS5cbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBvYmogYmVmb3JlIHRoaXMgYXN5bmMgY2FsbC4gSWYgY2FsbGVyIG1vZGlmaWVzIG9iaiB0aGUgbGluZSBhZnRlciBwdXQoKSwgdGhlIElEQiBzcGVjIHJlcXVpcmVzIHRoYXQgaXQgc2hvdWxkIG5vdCBhZmZlY3Qgb3BlcmF0aW9uLlxuICAgICAgICAgICAgICAgIG9iaiA9IGRlZXBDbG9uZShvYmopO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFucyhSRUFEV1JJVEUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhlZmZlY3RpdmVLZXkpLm1vZGlmeShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIGV4dGlzdGluZyB2YWx1ZSB3aXRoIG91ciBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENSVUQgZXZlbnQgZmlyaW5nIGhhbmRsZWQgaW4gQ29sbGVjdGlvbi5tb2RpZnkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG9iajtcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoY291bnQpIHsgcmV0dXJuIGNvdW50ID09PSAwID8gX3RoaXMuYWRkKG9iaiwga2V5KSA6IGVmZmVjdGl2ZUtleTsgfSk7XG4gICAgICAgICAgICAgICAgfSwgXCJsb2NrZWRcIik7IC8vIExvY2sgbmVlZGVkIGJlY2F1c2Ugb3BlcmF0aW9uIGlzIHNwbGl0dGVkIGludG8gbW9kaWZ5KCkgYW5kIGFkZCgpLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzdGFuZGFyZCBJREIgcHV0KCkgbWV0aG9kLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZGJzdG9yZShSRUFEV1JJVEUsIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBrZXkgIT09IHVuZGVmaW5lZCA/IGlkYnN0b3JlLnB1dChvYmosIGtleSkgOiBpZGJzdG9yZS5wdXQob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5UGF0aCA9IGlkYnN0b3JlLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgob2JqLCBrZXlQYXRoLCBldi50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZGVsZXRlJzogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwia2V5XCI+UHJpbWFyeSBrZXkgb2YgdGhlIG9iamVjdCB0byBkZWxldGU8L3BhcmFtPlxuICAgICAgICAgICAgaWYgKHRoaXMuaG9vay5kZWxldGluZy5zdWJzY3JpYmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBQZW9wbGUgbGlzdGVucyB0byB3aGVuKFwiZGVsZXRpbmdcIikgZXZlbnQuIE11c3QgaW1wbGVtZW50IGRlbGV0ZSB1c2luZyBDb2xsZWN0aW9uLmRlbGV0ZSgpIHRoYXQgd2lsbFxuICAgICAgICAgICAgICAgIC8vIGNhbGwgdGhlIENSVUQgZXZlbnQuIE9ubHkgQ29sbGVjdGlvbi5kZWxldGUoKSB3aWxsIGtub3cgd2hldGhlciBhbiBvYmplY3Qgd2FzIGFjdHVhbGx5IGRlbGV0ZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2hlcmUoXCI6aWRcIikuZXF1YWxzKGtleSkuZGVsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyBvbmUgbGlzdGVucy4gVXNlIHN0YW5kYXJkIElEQiBkZWxldGUoKSBtZXRob2QuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkYnN0b3JlKFJFQURXUklURSwgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IGlkYnN0b3JlLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gd3JhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhvb2suZGVsZXRpbmcuc3Vic2NyaWJlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8gUGVvcGxlIGxpc3RlbnMgdG8gd2hlbihcImRlbGV0aW5nXCIpIGV2ZW50LiBNdXN0IGltcGxlbWVudCBkZWxldGUgdXNpbmcgQ29sbGVjdGlvbi5kZWxldGUoKSB0aGF0IHdpbGxcbiAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBDUlVEIGV2ZW50LiBPbmx5IENvbGxlY3Rpb24uZGVsZXRlKCkgd2lsbCBrbm93cyB3aGljaCBvYmplY3RzIHRoYXQgYXJlIGFjdHVhbGx5IGRlbGV0ZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Db2xsZWN0aW9uKCkuZGVsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faWRic3RvcmUoUkVBRFdSSVRFLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRic3RvcmUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHdyYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGtleU9yT2JqZWN0LCBtb2RpZmljYXRpb25zKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1vZGlmaWNhdGlvbnMgIT09ICdvYmplY3QnIHx8IGlzQXJyYXkobW9kaWZpY2F0aW9ucykpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KFwiTW9kaWZpY2F0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC5cIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleU9yT2JqZWN0ID09PSAnb2JqZWN0JyAmJiAhaXNBcnJheShrZXlPck9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAvLyBvYmplY3QgdG8gbW9kaWZ5LiBBbHNvIG1vZGlmeSBnaXZlbiBvYmplY3Qgd2l0aCB0aGUgbW9kaWZpY2F0aW9uczpcbiAgICAgICAgICAgICAgICBrZXlzKG1vZGlmaWNhdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0QnlLZXlQYXRoKGtleU9yT2JqZWN0LCBrZXlQYXRoLCBtb2RpZmljYXRpb25zW2tleVBhdGhdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZ2V0QnlLZXlQYXRoKGtleU9yT2JqZWN0LCB0aGlzLnNjaGVtYS5wcmltS2V5LmtleVBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5JbnZhbGlkQXJndW1lbnQoXCJHaXZlbiBvYmplY3QgZG9lcyBub3QgY29udGFpbiBpdHMgcHJpbWFyeSBrZXlcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndoZXJlKFwiOmlkXCIpLmVxdWFscyhrZXkpLm1vZGlmeShtb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGtleSB0byBtb2RpZnlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53aGVyZShcIjppZFwiKS5lcXVhbHMoa2V5T3JPYmplY3QpLm1vZGlmeShtb2RpZmljYXRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFRyYW5zYWN0aW9uIENsYXNzXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgZnVuY3Rpb24gVHJhbnNhY3Rpb24obW9kZSwgc3RvcmVOYW1lcywgZGJzY2hlbWEsIHBhcmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgIC8vLyAgICBUcmFuc2FjdGlvbiBjbGFzcy4gUmVwcmVzZW50cyBhIGRhdGFiYXNlIHRyYW5zYWN0aW9uLiBBbGwgb3BlcmF0aW9ucyBvbiBkYiBnb2VzIHRocm91Z2ggYSBUcmFuc2FjdGlvbi5cbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwibW9kZVwiIHR5cGU9XCJTdHJpbmdcIj5Bbnkgb2YgXCJyZWFkd3JpdGVcIiBvciBcInJlYWRvbmx5XCI8L3BhcmFtPlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdG9yZU5hbWVzXCIgdHlwZT1cIkFycmF5XCI+QXJyYXkgb2YgdGFibGUgbmFtZXMgdG8gb3BlcmF0ZSBvbjwvcGFyYW0+XG4gICAgICAgIHRoaXMuZGIgPSBkYjtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5zdG9yZU5hbWVzID0gc3RvcmVOYW1lcztcbiAgICAgICAgdGhpcy5pZGJ0cmFucyA9IG51bGw7XG4gICAgICAgIHRoaXMub24gPSBFdmVudHModGhpcywgXCJjb21wbGV0ZVwiLCBcImVycm9yXCIsIFwiYWJvcnRcIik7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50IHx8IG51bGw7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVjdWxvY2sgPSAwO1xuICAgICAgICB0aGlzLl9ibG9ja2VkRnVuY3MgPSBbXTtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlamVjdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3dhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICB0aGlzLl93YWl0aW5nUXVldWUgPSBudWxsO1xuICAgICAgICB0aGlzLl9zcGluQ291bnQgPSAwOyAvLyBKdXN0IGZvciBkZWJ1Z2dpbmcgd2FpdEZvcigpXG4gICAgICAgIHRoaXMuX2NvbXBsZXRpb24gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICBfdGhpcy5fcmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY29tcGxldGlvbi50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMub24uY29tcGxldGUuZmlyZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHdhc0FjdGl2ZSA9IF90aGlzLmFjdGl2ZTtcbiAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMub24uZXJyb3IuZmlyZShlKTtcbiAgICAgICAgICAgIF90aGlzLnBhcmVudCA/XG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50Ll9yZWplY3QoZSkgOlxuICAgICAgICAgICAgICAgIHdhc0FjdGl2ZSAmJiBfdGhpcy5pZGJ0cmFucyAmJiBfdGhpcy5pZGJ0cmFucy5hYm9ydCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTsgLy8gSW5kaWNhdGUgd2UgYWN0dWFsbHkgRE8gTk9UIGNhdGNoIHRoaXMgZXJyb3IuXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcm9wcyhUcmFuc2FjdGlvbi5wcm90b3R5cGUsIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gVHJhbnNhY3Rpb24gUHJvdGVjdGVkIE1ldGhvZHMgKG5vdCByZXF1aXJlZCBieSBBUEkgdXNlcnMsIGJ1dCBuZWVkZWQgaW50ZXJuYWxseSBhbmQgZXZlbnR1YWxseSBieSBkZXhpZSBleHRlbnNpb25zKVxuICAgICAgICAvL1xuICAgICAgICBfbG9jazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYXNzZXJ0KCFQU0QuZ2xvYmFsKTsgLy8gTG9ja2luZyBhbmQgdW5sb2NraW5nIHJldWlyZXMgdG8gYmUgd2l0aGluIGEgUFNEIHNjb3BlLlxuICAgICAgICAgICAgLy8gVGVtcG9yYXJ5IHNldCBhbGwgcmVxdWVzdHMgaW50byBhIHBlbmRpbmcgcXVldWUgaWYgdGhleSBhcmUgY2FsbGVkIGJlZm9yZSBkYXRhYmFzZSBpcyByZWFkeS5cbiAgICAgICAgICAgICsrdGhpcy5fcmVjdWxvY2s7IC8vIFJlY3Vyc2l2ZSByZWFkL3dyaXRlIGxvY2sgcGF0dGVybiB1c2luZyBQU0QgKFByb21pc2UgU3BlY2lmaWMgRGF0YSkgaW5zdGVhZCBvZiBUTFMgKFRocmVhZCBMb2NhbCBTdG9yYWdlKVxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlY3Vsb2NrID09PSAxICYmICFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgIFBTRC5sb2NrT3duZXJGb3IgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIF91bmxvY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFzc2VydCghUFNELmdsb2JhbCk7IC8vIExvY2tpbmcgYW5kIHVubG9ja2luZyByZXVpcmVzIHRvIGJlIHdpdGhpbiBhIFBTRCBzY29wZS5cbiAgICAgICAgICAgIGlmICgtLXRoaXMuX3JlY3Vsb2NrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFQU0QuZ2xvYmFsKVxuICAgICAgICAgICAgICAgICAgICBQU0QubG9ja093bmVyRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fYmxvY2tlZEZ1bmNzLmxlbmd0aCA+IDAgJiYgIXRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbkFuZFBTRCA9IHRoaXMuX2Jsb2NrZWRGdW5jcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlUFNEKGZuQW5kUFNEWzFdLCBmbkFuZFBTRFswXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBfbG9ja2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBDaGVja3MgaWYgYW55IHdyaXRlLWxvY2sgaXMgYXBwbGllZCBvbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVG8gc2ltcGxpZnkgdGhlIERleGllIEFQSSBmb3IgZXh0ZW5zaW9uIGltcGxlbWVudGF0aW9ucywgd2Ugc3VwcG9ydCByZWN1cnNpdmUgbG9ja3MuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGFjY29tcGxpc2hlZCBieSB1c2luZyBcIlByb21pc2UgU3BlY2lmaWMgRGF0YVwiIChQU0QpLlxuICAgICAgICAgICAgLy8gUFNEIGRhdGEgaXMgYm91bmQgdG8gYSBQcm9taXNlIGFuZCBhbnkgY2hpbGQgUHJvbWlzZSBlbWl0dGVkIHRocm91Z2ggdGhlbigpIG9yIHJlc29sdmUoIG5ldyBQcm9taXNlKCkgKS5cbiAgICAgICAgICAgIC8vIFBTRCBpcyBsb2NhbCB0byBjb2RlIGV4ZWN1dGluZyBvbiB0b3Agb2YgdGhlIGNhbGwgc3RhY2tzIG9mIGFueSBvZiBhbnkgY29kZSBleGVjdXRlZCBieSBQcm9taXNlKCk6XG4gICAgICAgICAgICAvLyAgICAgICAgICogY2FsbGJhY2sgZ2l2ZW4gdG8gdGhlIFByb21pc2UoKSBjb25zdHJ1Y3RvciAgKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3Qpey4uLn0pXG4gICAgICAgICAgICAvLyAgICAgICAgICogY2FsbGJhY2tzIGdpdmVuIHRvIHRoZW4oKS9jYXRjaCgpL2ZpbmFsbHkoKSBtZXRob2RzIChmdW5jdGlvbiAodmFsdWUpey4uLn0pXG4gICAgICAgICAgICAvLyBJZiBjcmVhdGluZyBhIG5ldyBpbmRlcGVuZGFudCBQcm9taXNlIGluc3RhbmNlIGZyb20gd2l0aGluIGEgUHJvbWlzZSBjYWxsIHN0YWNrLCB0aGUgbmV3IFByb21pc2Ugd2lsbCBkZXJpdmUgdGhlIFBTRCBmcm9tIHRoZSBjYWxsIHN0YWNrIG9mIHRoZSBwYXJlbnQgUHJvbWlzZS5cbiAgICAgICAgICAgIC8vIERlcml2YXRpb24gaXMgZG9uZSBzbyB0aGF0IHRoZSBpbm5lciBQU0QgX19wcm90b19fIHBvaW50cyB0byB0aGUgb3V0ZXIgUFNELlxuICAgICAgICAgICAgLy8gUFNELmxvY2tPd25lckZvciB3aWxsIHBvaW50IHRvIGN1cnJlbnQgdHJhbnNhY3Rpb24gb2JqZWN0IGlmIHRoZSBjdXJyZW50bHkgZXhlY3V0aW5nIFBTRCBzY29wZSBvd25zIHRoZSBsb2NrLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY3Vsb2NrICYmIFBTRC5sb2NrT3duZXJGb3IgIT09IHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGlkYnRyYW5zKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICBhc3NlcnQoIXRoaXMuaWRidHJhbnMpO1xuICAgICAgICAgICAgaWYgKCFpZGJ0cmFucyAmJiAhaWRiZGIpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRiT3BlbkVycm9yICYmIGRiT3BlbkVycm9yLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRhdGFiYXNlQ2xvc2VkRXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVycm9ycyB3aGVyZSBpdCBpcyBubyBkaWZmZXJlbmNlIHdoZXRoZXIgaXQgd2FzIGNhdXNlZCBieSB0aGUgdXNlciBvcGVyYXRpb24gb3IgYW4gZWFybGllciBjYWxsIHRvIGRiLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuRGF0YWJhc2VDbG9zZWQoZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTWlzc2luZ0FQSUVycm9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFcnJvcnMgd2hlcmUgaXQgaXMgbm8gZGlmZmVyZW5jZSB3aGV0aGVyIGl0IHdhcyBjYXVzZWQgYnkgdGhlIHVzZXIgb3BlcmF0aW9uIG9yIGFuIGVhcmxpZXIgY2FsbCB0byBkYi5vcGVuKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLk1pc3NpbmdBUEkoZGJPcGVuRXJyb3IubWVzc2FnZSwgZGJPcGVuRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBpdCBjbGVhciB0aGF0IHRoZSB1c2VyIG9wZXJhdGlvbiB3YXMgbm90IHdoYXQgY2F1c2VkIHRoZSBlcnJvciAtIHRoZSBlcnJvciBoYWQgb2NjdXJyZWQgZWFybGllciBvbiBkYi5vcGVuKCkhXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9ucy5PcGVuRmFpbGVkKGRiT3BlbkVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb25zLlRyYW5zYWN0aW9uSW5hY3RpdmUoKTtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9jb21wbGV0aW9uLl9zdGF0ZSA9PT0gbnVsbCk7XG4gICAgICAgICAgICBpZGJ0cmFucyA9IHRoaXMuaWRidHJhbnMgPSBpZGJ0cmFucyB8fCBpZGJkYi50cmFuc2FjdGlvbihzYWZhcmlNdWx0aVN0b3JlRml4KHRoaXMuc3RvcmVOYW1lcyksIHRoaXMubW9kZSk7XG4gICAgICAgICAgICBpZGJ0cmFucy5vbmVycm9yID0gd3JhcChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdChldik7IC8vIFByb2hpYml0IGRlZmF1bHQgYnViYmxpbmcgdG8gd2luZG93LmVycm9yXG4gICAgICAgICAgICAgICAgX3RoaXMuX3JlamVjdChpZGJ0cmFucy5lcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uYWJvcnQgPSB3cmFwKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0KGV2KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgJiYgX3RoaXMuX3JlamVjdChuZXcgZXhjZXB0aW9ucy5BYm9ydChpZGJ0cmFucy5lcnJvcikpO1xuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uKFwiYWJvcnRcIikuZmlyZShldik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlkYnRyYW5zLm9uY29tcGxldGUgPSB3cmFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX3Byb21pc2U6IGZ1bmN0aW9uIChtb2RlLCBmbiwgYldyaXRlTG9jaykge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmIChtb2RlID09PSBSRUFEV1JJVEUgJiYgdGhpcy5tb2RlICE9PSBSRUFEV1JJVEUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5SZWFkT25seShcIlRyYW5zYWN0aW9uIGlzIHJlYWRvbmx5XCIpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihuZXcgZXhjZXB0aW9ucy5UcmFuc2FjdGlvbkluYWN0aXZlKCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2tlZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Jsb2NrZWRGdW5jcy5wdXNoKFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3Byb21pc2UobW9kZSwgZm4sIGJXcml0ZUxvY2spLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFBTRF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYldyaXRlTG9jaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2xvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBydiA9IGZuKHJlc29sdmUsIHJlamVjdCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ2ICYmIHJ2LnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnYudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcC5maW5hbGx5KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl91bmxvY2soKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIHAuX2xpYiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBydiA9IGZuKHJlc29sdmUsIHJlamVjdCwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocnYgJiYgcnYudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ2LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwLl9saWIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfcm9vdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50ID8gdGhpcy5wYXJlbnQuX3Jvb3QoKSA6IHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIHdhaXRGb3I6IGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICAvLyBBbHdheXMgb3BlcmF0ZSBvbiB0aGUgcm9vdCB0cmFuc2FjdGlvbiAoaW4gY2FzZSB0aGlzIGlzIGEgc3ViIHN0cmFuc2FjdGlvbilcbiAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5fcm9vdCgpO1xuICAgICAgICAgICAgLy8gRm9yIHN0YWJpbGl0eSByZWFzb25zLCBjb252ZXJ0IHBhcmFtZXRlciB0byBwcm9taXNlIG5vIG1hdHRlciB3aGF0IHR5cGUgaXMgcGFzc2VkIHRvIHdhaXRGb3IoKS5cbiAgICAgICAgICAgIC8vIChXZSBtdXN0IGJlIGFibGUgdG8gY2FsbCAudGhlbigpIG9uIGl0LilcbiAgICAgICAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUocHJvbWlzZSk7XG4gICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0Zvcikge1xuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgY2FsbGVkIHdhaXRGb3IoKS4gV2FpdCBmb3IgYm90aCB0byBjb21wbGV0ZS5cbiAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gcm9vdC5fd2FpdGluZ0Zvci50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb21pc2U7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2UncmUgbm90IGluIHdhaXRpbmcgc3RhdGUuIFN0YXJ0IHdhaXRpbmcgc3RhdGUuXG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ0ZvciA9IHByb21pc2U7XG4gICAgICAgICAgICAgICAgcm9vdC5fd2FpdGluZ1F1ZXVlID0gW107XG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgaW50ZXJhY3Rpbmcgd2l0aCBpbmRleGVkREIgdW50aWwgcHJvbWlzZSBjb21wbGV0ZXM6XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gcm9vdC5pZGJ0cmFucy5vYmplY3RTdG9yZShyb290LnN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbiBzcGluKCkge1xuICAgICAgICAgICAgICAgICAgICArK3Jvb3QuX3NwaW5Db3VudDsgLy8gRm9yIGRlYnVnZ2luZyBvbmx5XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyb290Ll93YWl0aW5nUXVldWUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgKHJvb3QuX3dhaXRpbmdRdWV1ZS5zaGlmdCgpKSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm9vdC5fd2FpdGluZ0ZvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmdldCgtSW5maW5pdHkpLm9uc3VjY2VzcyA9IHNwaW47XG4gICAgICAgICAgICAgICAgfSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjdXJyZW50V2FpdFByb21pc2UgPSByb290Ll93YWl0aW5nRm9yO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcm9vdC5fd2FpdGluZ1F1ZXVlLnB1c2god3JhcChyZXNvbHZlLmJpbmQobnVsbCwgcmVzKSkpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByb290Ll93YWl0aW5nUXVldWUucHVzaCh3cmFwKHJlamVjdC5iaW5kKG51bGwsIGVycikpKTsgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyb290Ll93YWl0aW5nRm9yID09PSBjdXJyZW50V2FpdFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIG9uZSBhZGRlZCBhIHdhaXQgYWZ0ZXIgdXMuIFNhZmUgdG8gc3RvcCB0aGUgc3Bpbm5pbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICByb290Ll93YWl0aW5nRm9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRyYW5zYWN0aW9uIFB1YmxpYyBQcm9wZXJ0aWVzIGFuZCBNZXRob2RzXG4gICAgICAgIC8vXG4gICAgICAgIGFib3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSAmJiB0aGlzLl9yZWplY3QobmV3IGV4Y2VwdGlvbnMuQWJvcnQoKSk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICB0YWJsZXM6IHtcbiAgICAgICAgICAgIGdldDogZGVwcmVjYXRlZChcIlRyYW5zYWN0aW9uLnRhYmxlc1wiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBhbGxUYWJsZXM7IH0pXG4gICAgICAgIH0sXG4gICAgICAgIHRhYmxlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIHRhYmxlID0gZGIudGFibGUobmFtZSk7IC8vIERvbid0IGNoZWNrIHRoYXQgdGFibGUgaXMgcGFydCBvZiB0cmFuc2FjdGlvbi4gSXQgbXVzdCBmYWlsIGxhemlseSFcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGFibGUobmFtZSwgdGFibGUuc2NoZW1hLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFdoZXJlQ2xhdXNlXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgZnVuY3Rpb24gV2hlcmVDbGF1c2UodGFibGUsIGluZGV4LCBvckNvbGxlY3Rpb24pIHtcbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidGFibGVcIiB0eXBlPVwiVGFibGVcIj48L3BhcmFtPlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJpbmRleFwiIHR5cGU9XCJTdHJpbmdcIiBvcHRpb25hbD1cInRydWVcIj48L3BhcmFtPlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJvckNvbGxlY3Rpb25cIiB0eXBlPVwiQ29sbGVjdGlvblwiIG9wdGlvbmFsPVwidHJ1ZVwiPjwvcGFyYW0+XG4gICAgICAgIHRoaXMuX2N0eCA9IHtcbiAgICAgICAgICAgIHRhYmxlOiB0YWJsZSxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCA9PT0gXCI6aWRcIiA/IG51bGwgOiBpbmRleCxcbiAgICAgICAgICAgIG9yOiBvckNvbGxlY3Rpb25cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvcHMoV2hlcmVDbGF1c2UucHJvdG90eXBlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFdoZXJlQ2xhdXNlIHByaXZhdGUgbWV0aG9kc1xuICAgICAgICBmdW5jdGlvbiBmYWlsKGNvbGxlY3Rpb25PcldoZXJlQ2xhdXNlLCBlcnIsIFQpIHtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UgaW5zdGFuY2VvZiBXaGVyZUNsYXVzZSA/XG4gICAgICAgICAgICAgICAgbmV3IENvbGxlY3Rpb24oY29sbGVjdGlvbk9yV2hlcmVDbGF1c2UpIDpcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uX2N0eC5lcnJvciA9IFQgPyBuZXcgVChlcnIpIDogbmV3IFR5cGVFcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZW1wdHlDb2xsZWN0aW9uKHdoZXJlQ2xhdXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24od2hlcmVDbGF1c2UsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIElEQktleVJhbmdlLm9ubHkoXCJcIik7IH0pLmxpbWl0KDApO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVwcGVyRmFjdG9yeShkaXIpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXIgPT09IFwibmV4dFwiID8gZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9VcHBlckNhc2UoKTsgfSA6IGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnRvTG93ZXJDYXNlKCk7IH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbG93ZXJGYWN0b3J5KGRpcikge1xuICAgICAgICAgICAgcmV0dXJuIGRpciA9PT0gXCJuZXh0XCIgPyBmdW5jdGlvbiAocykgeyByZXR1cm4gcy50b0xvd2VyQ2FzZSgpOyB9IDogZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMudG9VcHBlckNhc2UoKTsgfTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBuZXh0Q2FzaW5nKGtleSwgbG93ZXJLZXksIHVwcGVyTmVlZGxlLCBsb3dlck5lZWRsZSwgY21wLCBkaXIpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1pbihrZXkubGVuZ3RoLCBsb3dlck5lZWRsZS5sZW5ndGgpO1xuICAgICAgICAgICAgdmFyIGxscCA9IC0xO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsd3JLZXlDaGFyID0gbG93ZXJLZXlbaV07XG4gICAgICAgICAgICAgICAgaWYgKGx3cktleUNoYXIgIT09IGxvd2VyTmVlZGxlW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCB1cHBlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgaSkgKyB1cHBlck5lZWRsZVtpXSArIHVwcGVyTmVlZGxlLnN1YnN0cihpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbXAoa2V5W2ldLCBsb3dlck5lZWRsZVtpXSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleS5zdWJzdHIoMCwgaSkgKyBsb3dlck5lZWRsZVtpXSArIHVwcGVyTmVlZGxlLnN1YnN0cihpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsbHAgPj0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGxscCkgKyBsb3dlcktleVtsbHBdICsgdXBwZXJOZWVkbGUuc3Vic3RyKGxscCArIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNtcChrZXlbaV0sIGx3cktleUNoYXIpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgbGxwID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZW5ndGggPCBsb3dlck5lZWRsZS5sZW5ndGggJiYgZGlyID09PSBcIm5leHRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5ICsgdXBwZXJOZWVkbGUuc3Vic3RyKGtleS5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA8IGtleS5sZW5ndGggJiYgZGlyID09PSBcInByZXZcIilcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LnN1YnN0cigwLCB1cHBlck5lZWRsZS5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIChsbHAgPCAwID8gbnVsbCA6IGtleS5zdWJzdHIoMCwgbGxwKSArIGxvd2VyTmVlZGxlW2xscF0gKyB1cHBlck5lZWRsZS5zdWJzdHIobGxwICsgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZElnbm9yZUNhc2VBbGdvcml0aG0od2hlcmVDbGF1c2UsIG1hdGNoLCBuZWVkbGVzLCBzdWZmaXgpIHtcbiAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5lZWRsZXNcIiB0eXBlPVwiQXJyYXlcIiBlbGVtZW50VHlwZT1cIlN0cmluZ1wiPjwvcGFyYW0+XG4gICAgICAgICAgICB2YXIgdXBwZXIsIGxvd2VyLCBjb21wYXJlLCB1cHBlck5lZWRsZXMsIGxvd2VyTmVlZGxlcywgZGlyZWN0aW9uLCBuZXh0S2V5U3VmZml4LCBuZWVkbGVzTGVuID0gbmVlZGxlcy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIW5lZWRsZXMuZXZlcnkoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHR5cGVvZiBzID09PSAnc3RyaW5nJzsgfSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh3aGVyZUNsYXVzZSwgU1RSSU5HX0VYUEVDVEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXREaXJlY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICAgICAgdXBwZXIgPSB1cHBlckZhY3RvcnkoZGlyKTtcbiAgICAgICAgICAgICAgICBsb3dlciA9IGxvd2VyRmFjdG9yeShkaXIpO1xuICAgICAgICAgICAgICAgIGNvbXBhcmUgPSAoZGlyID09PSBcIm5leHRcIiA/IHNpbXBsZUNvbXBhcmUgOiBzaW1wbGVDb21wYXJlUmV2ZXJzZSk7XG4gICAgICAgICAgICAgICAgdmFyIG5lZWRsZUJvdW5kcyA9IG5lZWRsZXMubWFwKGZ1bmN0aW9uIChuZWVkbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbG93ZXI6IGxvd2VyKG5lZWRsZSksIHVwcGVyOiB1cHBlcihuZWVkbGUpIH07XG4gICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZShhLmxvd2VyLCBiLmxvd2VyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB1cHBlck5lZWRsZXMgPSBuZWVkbGVCb3VuZHMubWFwKGZ1bmN0aW9uIChuYikgeyByZXR1cm4gbmIudXBwZXI7IH0pO1xuICAgICAgICAgICAgICAgIGxvd2VyTmVlZGxlcyA9IG5lZWRsZUJvdW5kcy5tYXAoZnVuY3Rpb24gKG5iKSB7IHJldHVybiBuYi5sb3dlcjsgfSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gZGlyO1xuICAgICAgICAgICAgICAgIG5leHRLZXlTdWZmaXggPSAoZGlyID09PSBcIm5leHRcIiA/IFwiXCIgOiBzdWZmaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdERpcmVjdGlvbihcIm5leHRcIik7XG4gICAgICAgICAgICB2YXIgYyA9IG5ldyBDb2xsZWN0aW9uKHdoZXJlQ2xhdXNlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKHVwcGVyTmVlZGxlc1swXSwgbG93ZXJOZWVkbGVzW25lZWRsZXNMZW4gLSAxXSArIHN1ZmZpeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGMuX29uZGlyZWN0aW9uY2hhbmdlID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZXZlbnQgb25seXMgb2NjdXIgYmVmb3JlIGZpbHRlciBpcyBjYWxsZWQgdGhlIGZpcnN0IHRpbWUuXG4gICAgICAgICAgICAgICAgaW5pdERpcmVjdGlvbihkaXJlY3Rpb24pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBmaXJzdFBvc3NpYmxlTmVlZGxlID0gMDtcbiAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiY3Vyc29yXCIgdHlwZT1cIklEQkN1cnNvclwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwiYWR2YW5jZVwiIHR5cGU9XCJGdW5jdGlvblwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwicmVzb2x2ZVwiIHR5cGU9XCJGdW5jdGlvblwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGN1cnNvci5rZXk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIGxvd2VyS2V5ID0gbG93ZXIoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gobG93ZXJLZXksIGxvd2VyTmVlZGxlcywgZmlyc3RQb3NzaWJsZU5lZWRsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RQb3NzaWJsZU5lZWRsZTsgaSA8IG5lZWRsZXNMZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhc2luZyA9IG5leHRDYXNpbmcoa2V5LCBsb3dlcktleSwgdXBwZXJOZWVkbGVzW2ldLCBsb3dlck5lZWRsZXNbaV0sIGNvbXBhcmUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FzaW5nID09PSBudWxsICYmIGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UG9zc2libGVOZWVkbGUgPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nID09PSBudWxsIHx8IGNvbXBhcmUobG93ZXN0UG9zc2libGVDYXNpbmcsIGNhc2luZykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG93ZXN0UG9zc2libGVDYXNpbmcgPSBjYXNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvd2VzdFBvc3NpYmxlQ2FzaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHsgY3Vyc29yLmNvbnRpbnVlKGxvd2VzdFBvc3NpYmxlQ2FzaW5nICsgbmV4dEtleVN1ZmZpeCk7IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfVxuICAgICAgICAvL1xuICAgICAgICAvLyBXaGVyZUNsYXVzZSBwdWJsaWMgbWV0aG9kc1xuICAgICAgICAvL1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmV0d2VlbjogZnVuY3Rpb24gKGxvd2VyLCB1cHBlciwgaW5jbHVkZUxvd2VyLCBpbmNsdWRlVXBwZXIpIHtcbiAgICAgICAgICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgICAgICAgICAgLy8vICAgICBGaWx0ZXIgb3V0IHJlY29yZHMgd2hvc2Ugd2hlcmUtZmllbGQgbGF5cyBiZXR3ZWVuIGdpdmVuIGxvd2VyIGFuZCB1cHBlciB2YWx1ZXMuIEFwcGxpZXMgdG8gU3RyaW5ncywgTnVtYmVycyBhbmQgRGF0ZXMuXG4gICAgICAgICAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJsb3dlclwiPjwvcGFyYW0+XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwidXBwZXJcIj48L3BhcmFtPlxuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluY2x1ZGVMb3dlclwiIG9wdGlvbmFsPVwidHJ1ZVwiPldoZXRoZXIgaXRlbXMgdGhhdCBlcXVhbHMgbG93ZXIgc2hvdWxkIGJlIGluY2x1ZGVkLiBEZWZhdWx0IHRydWUuPC9wYXJhbT5cbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJpbmNsdWRlVXBwZXJcIiBvcHRpb25hbD1cInRydWVcIj5XaGV0aGVyIGl0ZW1zIHRoYXQgZXF1YWxzIHVwcGVyIHNob3VsZCBiZSBpbmNsdWRlZC4gRGVmYXVsdCBmYWxzZS48L3BhcmFtPlxuICAgICAgICAgICAgICAgIC8vLyA8cmV0dXJucyB0eXBlPVwiQ29sbGVjdGlvblwiPjwvcmV0dXJucz5cbiAgICAgICAgICAgICAgICBpbmNsdWRlTG93ZXIgPSBpbmNsdWRlTG93ZXIgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRvIHRydWVcbiAgICAgICAgICAgICAgICBpbmNsdWRlVXBwZXIgPSBpbmNsdWRlVXBwZXIgPT09IHRydWU7IC8vIERlZmF1bHQgdG8gZmFsc2VcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNtcChsb3dlciwgdXBwZXIpID4gMCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChjbXAobG93ZXIsIHVwcGVyKSA9PT0gMCAmJiAoaW5jbHVkZUxvd2VyIHx8IGluY2x1ZGVVcHBlcikgJiYgIShpbmNsdWRlTG93ZXIgJiYgaW5jbHVkZVVwcGVyKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpOyAvLyBXb3JrYXJvdW5kIGZvciBpZGlvdGljIFczQyBTcGVjaWZpY2F0aW9uIHRoYXQgRGF0YUVycm9yIG11c3QgYmUgdGhyb3duIGlmIGxvd2VyID4gdXBwZXIuIFRoZSBuYXR1cmFsIHJlc3VsdCB3b3VsZCBiZSB0byByZXR1cm4gYW4gZW1wdHkgY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKGxvd2VyLCB1cHBlciwgIWluY2x1ZGVMb3dlciwgIWluY2x1ZGVVcHBlcik7IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIElEQktleVJhbmdlLm9ubHkodmFsdWUpOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhYm92ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIElEQktleVJhbmdlLmxvd2VyQm91bmQodmFsdWUsIHRydWUpOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhYm92ZU9yRXF1YWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHZhbHVlKTsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVsb3c6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbih0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBJREJLZXlSYW5nZS51cHBlckJvdW5kKHZhbHVlLCB0cnVlKTsgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVsb3dPckVxdWFsOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gSURCS2V5UmFuZ2UudXBwZXJCb3VuZCh2YWx1ZSk7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXJ0c1dpdGg6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdHJcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFNUUklOR19FWFBFQ1RFRCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmV0d2VlbihzdHIsIHN0ciArIG1heFN0cmluZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnRzV2l0aElnbm9yZUNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzdHJcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgICAgICAgICBpZiAoc3RyID09PSBcIlwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydHNXaXRoKHN0cik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZElnbm9yZUNhc2VBbGdvcml0aG0odGhpcywgZnVuY3Rpb24gKHgsIGEpIHsgcmV0dXJuIHguaW5kZXhPZihhWzBdKSA9PT0gMDsgfSwgW3N0cl0sIG1heFN0cmluZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXF1YWxzSWdub3JlQ2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInN0clwiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgICAgICAgICAgICAgIHJldHVybiBhZGRJZ25vcmVDYXNlQWxnb3JpdGhtKHRoaXMsIGZ1bmN0aW9uICh4LCBhKSB7IHJldHVybiB4ID09PSBhWzBdOyB9LCBbc3RyXSwgXCJcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW55T2ZJZ25vcmVDYXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkgeyByZXR1cm4gYS5pbmRleE9mKHgpICE9PSAtMTsgfSwgc2V0LCBcIlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGFydHNXaXRoQW55T2ZJZ25vcmVDYXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldCA9IGdldEFycmF5T2YuYXBwbHkoTk9fQ0hBUl9BUlJBWSwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0Lmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkSWdub3JlQ2FzZUFsZ29yaXRobSh0aGlzLCBmdW5jdGlvbiAoeCwgYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5zb21lKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5pbmRleE9mKG4pID09PSAwO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCBzZXQsIG1heFN0cmluZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW55T2Y6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHZhciBjb21wYXJlID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHNldC5zb3J0KGNvbXBhcmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBjID0gbmV3IENvbGxlY3Rpb24odGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gSURCS2V5UmFuZ2UuYm91bmQoc2V0WzBdLCBzZXRbc2V0Lmxlbmd0aCAtIDFdKTsgfSk7XG4gICAgICAgICAgICAgICAgYy5fb25kaXJlY3Rpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSAoZGlyZWN0aW9uID09PSBcIm5leHRcIiA/IGFzY2VuZGluZyA6IGRlc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgICAgICBzZXQuc29ydChjb21wYXJlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBjLl9hZGRBbGdvcml0aG0oZnVuY3Rpb24gKGN1cnNvciwgYWR2YW5jZSwgcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY3Vyc29yLmtleTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmUoa2V5LCBzZXRbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGN1cnNvciBoYXMgcGFzc2VkIGJleW9uZCB0aGlzIGtleS4gQ2hlY2sgbmV4dC5cbiAgICAgICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBzZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gbmV4dC4gU3RvcCBzZWFyY2hpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBhcmUoa2V5LCBzZXRbaV0pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBjdXJzb3IgdmFsdWUgc2hvdWxkIGJlIGluY2x1ZGVkIGFuZCB3ZSBzaG91bGQgY29udGludWUgYSBzaW5nbGUgc3RlcCBpbiBjYXNlIG5leHQgaXRlbSBoYXMgdGhlIHNhbWUga2V5IG9yIHBvc3NpYmx5IG91ciBuZXh0IGtleSBpbiBzZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnNvci5rZXkgbm90IHlldCBhdCBzZXRbaV0uIEZvcndhcmQgY3Vyc29yIHRvIHRoZSBuZXh0IGtleSB0byBodW50IGZvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUoc2V0W2ldKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub3RFcXVhbDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5BbnlSYW5nZShbW21pbktleSwgdmFsdWVdLCBbdmFsdWUsIG1heEtleV1dLCB7IGluY2x1ZGVMb3dlcnM6IGZhbHNlLCBpbmNsdWRlVXBwZXJzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub25lT2Y6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24odGhpcyk7IC8vIFJldHVybiBlbnRpcmUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzZXQuc29ydChhc2NlbmRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBJTlZBTElEX0tFWV9BUkdVTUVOVCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBbXCJhXCIsXCJiXCIsXCJjXCJdIHRvIGEgc2V0IG9mIHJhbmdlcyBmb3IgYmV0d2Vlbi9hYm92ZS9iZWxvdzogW1ttaW5LZXksXCJhXCJdLCBbXCJhXCIsXCJiXCJdLCBbXCJiXCIsXCJjXCJdLCBbXCJjXCIsbWF4S2V5XV1cbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VzID0gc2V0LnJlZHVjZShmdW5jdGlvbiAocmVzLCB2YWwpIHsgcmV0dXJuIHJlcyA/IHJlcy5jb25jYXQoW1tyZXNbcmVzLmxlbmd0aCAtIDFdWzFdLCB2YWxdXSkgOiBbW21pbktleSwgdmFsXV07IH0sIG51bGwpO1xuICAgICAgICAgICAgICAgIHJhbmdlcy5wdXNoKFtzZXRbc2V0Lmxlbmd0aCAtIDFdLCBtYXhLZXldKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbkFueVJhbmdlKHJhbmdlcywgeyBpbmNsdWRlTG93ZXJzOiBmYWxzZSwgaW5jbHVkZVVwcGVyczogZmFsc2UgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqIEZpbHRlciBvdXQgdmFsdWVzIHdpdGhpbmcgZ2l2ZW4gc2V0IG9mIHJhbmdlcy5cbiAgICAgICAgICAgICogRXhhbXBsZSwgZ2l2ZSBjaGlsZHJlbiBhbmQgZWxkZXJzIGEgcmViYXRlIG9mIDUwJTpcbiAgICAgICAgICAgICpcbiAgICAgICAgICAgICogICBkYi5mcmllbmRzLndoZXJlKCdhZ2UnKS5pbkFueVJhbmdlKFtbMCwxOF0sWzY1LEluZmluaXR5XV0pLm1vZGlmeSh7UmViYXRlOiAxLzJ9KTtcbiAgICAgICAgICAgICpcbiAgICAgICAgICAgICogQHBhcmFtIHsoc3RyaW5nfG51bWJlcnxEYXRlfEFycmF5KVtdW119IHJhbmdlc1xuICAgICAgICAgICAgKiBAcGFyYW0ge3tpbmNsdWRlTG93ZXJzOiBib29sZWFuLCBpbmNsdWRlVXBwZXJzOiBib29sZWFufX0gb3B0aW9uc1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluQW55UmFuZ2U6IGZ1bmN0aW9uIChyYW5nZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2VzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5Q29sbGVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJhbmdlcy5ldmVyeShmdW5jdGlvbiAocmFuZ2UpIHsgcmV0dXJuIHJhbmdlWzBdICE9PSB1bmRlZmluZWQgJiYgcmFuZ2VbMV0gIT09IHVuZGVmaW5lZCAmJiBhc2NlbmRpbmcocmFuZ2VbMF0sIHJhbmdlWzFdKSA8PSAwOyB9KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCh0aGlzLCBcIkZpcnN0IGFyZ3VtZW50IHRvIGluQW55UmFuZ2UoKSBtdXN0IGJlIGFuIEFycmF5IG9mIHR3by12YWx1ZSBBcnJheXMgW2xvd2VyLHVwcGVyXSB3aGVyZSB1cHBlciBtdXN0IG5vdCBiZSBsb3dlciB0aGFuIGxvd2VyXCIsIGV4Y2VwdGlvbnMuSW52YWxpZEFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGluY2x1ZGVMb3dlcnMgPSAhb3B0aW9ucyB8fCBvcHRpb25zLmluY2x1ZGVMb3dlcnMgIT09IGZhbHNlOyAvLyBEZWZhdWx0IHRvIHRydWVcbiAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZVVwcGVycyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlVXBwZXJzID09PSB0cnVlOyAvLyBEZWZhdWx0IHRvIGZhbHNlXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkUmFuZ2UocmFuZ2VzLCBuZXdSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJhbmdlcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbXAobmV3UmFuZ2VbMF0sIHJhbmdlWzFdKSA8IDAgJiYgY21wKG5ld1JhbmdlWzFdLCByYW5nZVswXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMF0gPSBtaW4ocmFuZ2VbMF0sIG5ld1JhbmdlWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSA9IG1heChyYW5nZVsxXSwgbmV3UmFuZ2VbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VzLnB1c2gobmV3UmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc29ydERpcmVjdGlvbiA9IGFzY2VuZGluZztcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByYW5nZVNvcnRlcihhLCBiKSB7IHJldHVybiBzb3J0RGlyZWN0aW9uKGFbMF0sIGJbMF0pOyB9XG4gICAgICAgICAgICAgICAgLy8gSm9pbiBvdmVybGFwcGluZyByYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgc2V0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHNldCA9IHJhbmdlcy5yZWR1Y2UoYWRkUmFuZ2UsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0LnNvcnQocmFuZ2VTb3J0ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwodGhpcywgSU5WQUxJRF9LRVlfQVJHVU1FTlQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGtleUlzQmV5b25kQ3VycmVudEVudHJ5ID0gaW5jbHVkZVVwcGVycyA/XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFzY2VuZGluZyhrZXksIHNldFtpXVsxXSkgPiAwOyB9IDpcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gYXNjZW5kaW5nKGtleSwgc2V0W2ldWzFdKSA+PSAwOyB9O1xuICAgICAgICAgICAgICAgIHZhciBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeSA9IGluY2x1ZGVMb3dlcnMgP1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W2ldWzBdKSA+IDA7IH0gOlxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZXNjZW5kaW5nKGtleSwgc2V0W2ldWzBdKSA+PSAwOyB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFrZXlJc0JleW9uZEN1cnJlbnRFbnRyeShrZXkpICYmICFrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hlY2tLZXkgPSBrZXlJc0JleW9uZEN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IG5ldyBDb2xsZWN0aW9uKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKHNldFswXVswXSwgc2V0W3NldC5sZW5ndGggLSAxXVsxXSwgIWluY2x1ZGVMb3dlcnMsICFpbmNsdWRlVXBwZXJzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjLl9vbmRpcmVjdGlvbmNoYW5nZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrS2V5ID0ga2V5SXNCZXlvbmRDdXJyZW50RW50cnk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0RGlyZWN0aW9uID0gYXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tLZXkgPSBrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSBkZXNjZW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldC5zb3J0KHJhbmdlU29ydGVyKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGMuX2FkZEFsZ29yaXRobShmdW5jdGlvbiAoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBjdXJzb3Iua2V5O1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hlY2tLZXkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGN1cnNvciBoYXMgcGFzc2VkIGJleW9uZCB0aGlzIGtleS4gQ2hlY2sgbmV4dC5cbiAgICAgICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBzZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gbmV4dC4gU3RvcCBzZWFyY2hpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleVdpdGhpbkN1cnJlbnRSYW5nZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3VycmVudCBjdXJzb3IgdmFsdWUgc2hvdWxkIGJlIGluY2x1ZGVkIGFuZCB3ZSBzaG91bGQgY29udGludWUgYSBzaW5nbGUgc3RlcCBpbiBjYXNlIG5leHQgaXRlbSBoYXMgdGhlIHNhbWUga2V5IG9yIHBvc3NpYmx5IG91ciBuZXh0IGtleSBpbiBzZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjbXAoa2V5LCBzZXRbaV1bMV0pID09PSAwIHx8IGNtcChrZXksIHNldFtpXVswXSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY2x1ZGVVcHBlciBvciBpbmNsdWRlTG93ZXIgaXMgZmFsc2Ugc28ga2V5V2l0aGluQ3VycmVudFJhbmdlKCkgcmV0dXJucyBmYWxzZSBldmVuIHRob3VnaCB3ZSBhcmUgYXQgcmFuZ2UgYm9yZGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgdG8gbmV4dCBrZXkgYnV0IGRvbid0IGluY2x1ZGUgdGhpcyBvbmUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJzb3Iua2V5IG5vdCB5ZXQgYXQgc2V0W2ldLiBGb3J3YXJkIGN1cnNvciB0byB0aGUgbmV4dCBrZXkgdG8gaHVudCBmb3IuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29ydERpcmVjdGlvbiA9PT0gYXNjZW5kaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoc2V0W2ldWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZShzZXRbaV1bMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGFydHNXaXRoQW55T2Y6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0ID0gZ2V0QXJyYXlPZi5hcHBseShOT19DSEFSX0FSUkFZLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIGlmICghc2V0LmV2ZXJ5KGZ1bmN0aW9uIChzKSB7IHJldHVybiB0eXBlb2YgcyA9PT0gJ3N0cmluZyc7IH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKHRoaXMsIFwic3RhcnRzV2l0aEFueU9mKCkgb25seSB3b3JrcyB3aXRoIHN0cmluZ3NcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXQubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlDb2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluQW55UmFuZ2Uoc2V0Lm1hcChmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbc3RyLCBzdHIgKyBtYXhTdHJpbmddO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyBDb2xsZWN0aW9uIENsYXNzXG4gICAgLy9cbiAgICAvL1xuICAgIC8vXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbih3aGVyZUNsYXVzZSwga2V5UmFuZ2VHZW5lcmF0b3IpIHtcbiAgICAgICAgLy8vIDxzdW1tYXJ5PlxuICAgICAgICAvLy9cbiAgICAgICAgLy8vIDwvc3VtbWFyeT5cbiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwid2hlcmVDbGF1c2VcIiB0eXBlPVwiV2hlcmVDbGF1c2VcIj5XaGVyZSBjbGF1c2UgaW5zdGFuY2U8L3BhcmFtPlxuICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJrZXlSYW5nZUdlbmVyYXRvclwiIHZhbHVlPVwiZnVuY3Rpb24oKXsgcmV0dXJuIElEQktleVJhbmdlLmJvdW5kKDAsMSk7fVwiIG9wdGlvbmFsPVwidHJ1ZVwiPjwvcGFyYW0+XG4gICAgICAgIHZhciBrZXlSYW5nZSA9IG51bGwsIGVycm9yID0gbnVsbDtcbiAgICAgICAgaWYgKGtleVJhbmdlR2VuZXJhdG9yKVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBrZXlSYW5nZSA9IGtleVJhbmdlR2VuZXJhdG9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB2YXIgd2hlcmVDdHggPSB3aGVyZUNsYXVzZS5fY3R4LCB0YWJsZSA9IHdoZXJlQ3R4LnRhYmxlO1xuICAgICAgICB0aGlzLl9jdHggPSB7XG4gICAgICAgICAgICB0YWJsZTogdGFibGUsXG4gICAgICAgICAgICBpbmRleDogd2hlcmVDdHguaW5kZXgsXG4gICAgICAgICAgICBpc1ByaW1LZXk6ICghd2hlcmVDdHguaW5kZXggfHwgKHRhYmxlLnNjaGVtYS5wcmltS2V5LmtleVBhdGggJiYgd2hlcmVDdHguaW5kZXggPT09IHRhYmxlLnNjaGVtYS5wcmltS2V5Lm5hbWUpKSxcbiAgICAgICAgICAgIHJhbmdlOiBrZXlSYW5nZSxcbiAgICAgICAgICAgIGtleXNPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgIGRpcjogXCJuZXh0XCIsXG4gICAgICAgICAgICB1bmlxdWU6IFwiXCIsXG4gICAgICAgICAgICBhbGdvcml0aG06IG51bGwsXG4gICAgICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgICAgICByZXBsYXlGaWx0ZXI6IG51bGwsXG4gICAgICAgICAgICBqdXN0TGltaXQ6IHRydWUsXG4gICAgICAgICAgICBpc01hdGNoOiBudWxsLFxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgbGltaXQ6IEluZmluaXR5LFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgb3I6IHdoZXJlQ3R4Lm9yLFxuICAgICAgICAgICAgdmFsdWVNYXBwZXI6IHRhYmxlLmhvb2sucmVhZGluZy5maXJlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzUGxhaW5LZXlSYW5nZShjdHgsIGlnbm9yZUxpbWl0RmlsdGVyKSB7XG4gICAgICAgIHJldHVybiAhKGN0eC5maWx0ZXIgfHwgY3R4LmFsZ29yaXRobSB8fCBjdHgub3IpICYmXG4gICAgICAgICAgICAoaWdub3JlTGltaXRGaWx0ZXIgPyBjdHguanVzdExpbWl0IDogIWN0eC5yZXBsYXlGaWx0ZXIpO1xuICAgIH1cbiAgICBwcm9wcyhDb2xsZWN0aW9uLnByb3RvdHlwZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBDb2xsZWN0aW9uIFByaXZhdGUgRnVuY3Rpb25zXG4gICAgICAgIC8vXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZpbHRlcihjdHgsIGZuKSB7XG4gICAgICAgICAgICBjdHguZmlsdGVyID0gY29tYmluZShjdHguZmlsdGVyLCBmbik7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWRkUmVwbGF5RmlsdGVyKGN0eCwgZmFjdG9yeSwgaXNMaW1pdEZpbHRlcikge1xuICAgICAgICAgICAgdmFyIGN1cnIgPSBjdHgucmVwbGF5RmlsdGVyO1xuICAgICAgICAgICAgY3R4LnJlcGxheUZpbHRlciA9IGN1cnIgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBjb21iaW5lKGN1cnIoKSwgZmFjdG9yeSgpKTsgfSA6IGZhY3Rvcnk7XG4gICAgICAgICAgICBjdHguanVzdExpbWl0ID0gaXNMaW1pdEZpbHRlciAmJiAhY3VycjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZGRNYXRjaEZpbHRlcihjdHgsIGZuKSB7XG4gICAgICAgICAgICBjdHguaXNNYXRjaCA9IGNvbWJpbmUoY3R4LmlzTWF0Y2gsIGZuKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHBhcmFtIGN0eCB7XG4gICAgICAgICAqICAgICAgaXNQcmltS2V5OiBib29sZWFuLFxuICAgICAgICAgKiAgICAgIHRhYmxlOiBUYWJsZSxcbiAgICAgICAgICogICAgICBpbmRleDogc3RyaW5nXG4gICAgICAgICAqIH1cbiAgICAgICAgICogQHBhcmFtIHN0b3JlIElEQk9iamVjdFN0b3JlXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5kZXhPclN0b3JlKGN0eCwgc3RvcmUpIHtcbiAgICAgICAgICAgIGlmIChjdHguaXNQcmltS2V5KVxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZTtcbiAgICAgICAgICAgIHZhciBpbmRleFNwZWMgPSBjdHgudGFibGUuc2NoZW1hLmlkeEJ5TmFtZVtjdHguaW5kZXhdO1xuICAgICAgICAgICAgaWYgKCFpbmRleFNwZWMpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbnMuU2NoZW1hKFwiS2V5UGF0aCBcIiArIGN0eC5pbmRleCArIFwiIG9uIG9iamVjdCBzdG9yZSBcIiArIHN0b3JlLm5hbWUgKyBcIiBpcyBub3QgaW5kZXhlZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZS5pbmRleChpbmRleFNwZWMubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEBwYXJhbSBjdHgge1xuICAgICAgICAgKiAgICAgIGlzUHJpbUtleTogYm9vbGVhbixcbiAgICAgICAgICogICAgICB0YWJsZTogVGFibGUsXG4gICAgICAgICAqICAgICAgaW5kZXg6IHN0cmluZyxcbiAgICAgICAgICogICAgICBrZXlzT25seTogYm9vbGVhbixcbiAgICAgICAgICogICAgICByYW5nZT86IElEQktleVJhbmdlLFxuICAgICAgICAgKiAgICAgIGRpcjogXCJuZXh0XCIgfCBcInByZXZcIlxuICAgICAgICAgKiB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBvcGVuQ3Vyc29yKGN0eCwgc3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBpZHhPclN0b3JlID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgc3RvcmUpO1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5rZXlzT25seSAmJiAnb3BlbktleUN1cnNvcicgaW4gaWR4T3JTdG9yZSA/XG4gICAgICAgICAgICAgICAgaWR4T3JTdG9yZS5vcGVuS2V5Q3Vyc29yKGN0eC5yYW5nZSB8fCBudWxsLCBjdHguZGlyICsgY3R4LnVuaXF1ZSkgOlxuICAgICAgICAgICAgICAgIGlkeE9yU3RvcmUub3BlbkN1cnNvcihjdHgucmFuZ2UgfHwgbnVsbCwgY3R4LmRpciArIGN0eC51bmlxdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGl0ZXIoY3R4LCBmbiwgcmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgdmFyIGZpbHRlciA9IGN0eC5yZXBsYXlGaWx0ZXIgPyBjb21iaW5lKGN0eC5maWx0ZXIsIGN0eC5yZXBsYXlGaWx0ZXIoKSkgOiBjdHguZmlsdGVyO1xuICAgICAgICAgICAgaWYgKCFjdHgub3IpIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRlKG9wZW5DdXJzb3IoY3R4LCBpZGJzdG9yZSksIGNvbWJpbmUoY3R4LmFsZ29yaXRobSwgZmlsdGVyKSwgZm4sIHJlc29sdmUsIHJlamVjdCwgIWN0eC5rZXlzT25seSAmJiBjdHgudmFsdWVNYXBwZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZXQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdmVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZWJvdGgoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKytyZXNvbHZlZCA9PT0gMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7IC8vIFNlZW1zIGxpa2Ugd2UganVzdCBzdXBwb3J0IG9yIGJ0d24gbWF4IDIgZXhwcmVzc2lvbnMsIGJ1dCB0aGVyZSBhcmUgbm8gbGltaXQgYmVjYXVzZSB3ZSBkbyByZWN1cnNpb24uXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdW5pb24oaXRlbSwgY3Vyc29yLCBhZHZhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlciB8fCBmaWx0ZXIoY3Vyc29yLCBhZHZhbmNlLCByZXNvbHZlYm90aCwgcmVqZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmltYXJ5S2V5ID0gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnICsgcHJpbWFyeUtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnJyArIG5ldyBVaW50OEFycmF5KHByaW1hcnlLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzT3duKHNldCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZuKGl0ZW0sIGN1cnNvciwgYWR2YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN0eC5vci5faXRlcmF0ZSh1bmlvbiwgcmVzb2x2ZWJvdGgsIHJlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICBpdGVyYXRlKG9wZW5DdXJzb3IoY3R4LCBpZGJzdG9yZSksIGN0eC5hbGdvcml0aG0sIHVuaW9uLCByZXNvbHZlYm90aCwgcmVqZWN0LCAhY3R4LmtleXNPbmx5ICYmIGN0eC52YWx1ZU1hcHBlcik7XG4gICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIENvbGxlY3Rpb24gUHJvdGVjdGVkIEZ1bmN0aW9uc1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIF9yZWFkOiBmdW5jdGlvbiAoZm4sIGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4LmVycm9yID9cbiAgICAgICAgICAgICAgICAgICAgY3R4LnRhYmxlLl90cmFucyhudWxsLCByZWplY3Rpb24uYmluZChudWxsLCBjdHguZXJyb3IpKSA6XG4gICAgICAgICAgICAgICAgICAgIGN0eC50YWJsZS5faWRic3RvcmUoUkVBRE9OTFksIGZuKS50aGVuKGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfd3JpdGU6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5lcnJvciA/XG4gICAgICAgICAgICAgICAgICAgIGN0eC50YWJsZS5fdHJhbnMobnVsbCwgcmVqZWN0aW9uLmJpbmQobnVsbCwgY3R4LmVycm9yKSkgOlxuICAgICAgICAgICAgICAgICAgICBjdHgudGFibGUuX2lkYnN0b3JlKFJFQURXUklURSwgZm4sIFwibG9ja2VkXCIpOyAvLyBXaGVuIGRvaW5nIHdyaXRlIG9wZXJhdGlvbnMgb24gY29sbGVjdGlvbnMsIGFsd2F5cyBsb2NrIHRoZSBvcGVyYXRpb24gc28gdGhhdCB1cGNvbWluZyBvcGVyYXRpb25zIGdldHMgcXVldWVkLlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hZGRBbGdvcml0aG06IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgY3R4LmFsZ29yaXRobSA9IGNvbWJpbmUoY3R4LmFsZ29yaXRobSwgZm4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pdGVyYXRlOiBmdW5jdGlvbiAoZm4sIHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlcih0aGlzLl9jdHgsIGZuLCByZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24gKHByb3BzJCQxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJ2ID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmNvbnN0cnVjdG9yLnByb3RvdHlwZSksIGN0eCA9IE9iamVjdC5jcmVhdGUodGhpcy5fY3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcHMkJDEpXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZChjdHgsIHByb3BzJCQxKTtcbiAgICAgICAgICAgICAgICBydi5fY3R4ID0gY3R4O1xuICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByYXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdHgudmFsdWVNYXBwZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBDb2xsZWN0aW9uIFB1YmxpYyBtZXRob2RzXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyKGN0eCwgZm4sIHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvdW50OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIGlmIChpc1BsYWluS2V5UmFuZ2UoY3R4LCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgcGxhaW4ga2V5IHJhbmdlLiBXZSBjYW4gdXNlIHRoZSBjb3VudCgpIG1ldGhvZCBpZiB0aGUgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZ2V0SW5kZXhPclN0b3JlKGN0eCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IChjdHgucmFuZ2UgPyBpZHguY291bnQoY3R4LnJhbmdlKSA6IGlkeC5jb3VudCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKE1hdGgubWluKGUudGFyZ2V0LnJlc3VsdCwgY3R4LmxpbWl0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBBbGdvcml0aG1zLCBmaWx0ZXJzIG9yIGV4cHJlc3Npb25zIGFyZSBhcHBsaWVkLiBOZWVkIHRvIGNvdW50IG1hbnVhbGx5LlxuICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcihjdHgsIGZ1bmN0aW9uICgpIHsgKytjb3VudDsgcmV0dXJuIGZhbHNlOyB9LCBmdW5jdGlvbiAoKSB7IHJlc29sdmUoY291bnQpOyB9LCByZWplY3QsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgY2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3J0Qnk6IGZ1bmN0aW9uIChrZXlQYXRoLCBjYikge1xuICAgICAgICAgICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImtleVBhdGhcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBrZXlQYXRoLnNwbGl0KCcuJykucmV2ZXJzZSgpLCBsYXN0UGFydCA9IHBhcnRzWzBdLCBsYXN0SW5kZXggPSBwYXJ0cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldHZhbChvYmosIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dmFsKG9ialtwYXJ0c1tpXV0sIGkgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtsYXN0UGFydF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBvcmRlciA9IHRoaXMuX2N0eC5kaXIgPT09IFwibmV4dFwiID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNvcnRlcihhLCBiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhVmFsID0gZ2V0dmFsKGEsIGxhc3RJbmRleCksIGJWYWwgPSBnZXR2YWwoYiwgbGFzdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFWYWwgPCBiVmFsID8gLW9yZGVyIDogYVZhbCA+IGJWYWwgPyBvcmRlciA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuc29ydChzb3J0ZXIpO1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0dldEFsbCAmJiBjdHguZGlyID09PSAnbmV4dCcgJiYgaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkgJiYgY3R4LmxpbWl0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBvcHRpbWF0aW9uIGlmIHdlIGNvdWxkIHVzZSBJREJPYmplY3RTdG9yZS5nZXRBbGwoKSBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSURCS2V5UmFuZ2UuZ2V0QWxsKCk6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVhZGluZ0hvb2sgPSBjdHgudGFibGUuaG9vay5yZWFkaW5nLmZpcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4T3JTdG9yZSA9IGdldEluZGV4T3JTdG9yZShjdHgsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBjdHgubGltaXQgPCBJbmZpbml0eSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4T3JTdG9yZS5nZXRBbGwoY3R4LnJhbmdlLCBjdHgubGltaXQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhPclN0b3JlLmdldEFsbChjdHgucmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBldmVudFJlamVjdEhhbmRsZXIocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSByZWFkaW5nSG9vayA9PT0gbWlycm9yID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN1Y2Nlc3NIYW5kbGVyKHJlc29sdmUpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFN1Y2Nlc3NIYW5kbGVyKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLm1hcChyZWFkaW5nSG9vaykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldHRpbmcgYXJyYXkgdGhyb3VnaCBhIGN1cnNvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVyKGN0eCwgZnVuY3Rpb24gKGl0ZW0pIHsgYS5wdXNoKGl0ZW0pOyB9LCBmdW5jdGlvbiBhcnJheUNvbXBsZXRlKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvZmZzZXQ6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgY3R4Lm9mZnNldCArPSBvZmZzZXQ7IC8vIEZvciBjb3VudCgpXG4gICAgICAgICAgICAgICAgaWYgKGlzUGxhaW5LZXlSYW5nZShjdHgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcihjdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0TGVmdCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldExlZnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vZmZzZXRMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShvZmZzZXRMZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGRSZXBsYXlGaWx0ZXIoY3R4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiAoLS1vZmZzZXRMZWZ0IDwgMCk7IH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW1pdDogZnVuY3Rpb24gKG51bVJvd3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdHgubGltaXQgPSBNYXRoLm1pbih0aGlzLl9jdHgubGltaXQsIG51bVJvd3MpOyAvLyBGb3IgY291bnQoKVxuICAgICAgICAgICAgICAgIGFkZFJlcGxheUZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3NMZWZ0ID0gbnVtUm93cztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtLXJvd3NMZWZ0IDw9IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZShyZXNvbHZlKTsgLy8gU3RvcCBhZnRlciB0aGlzIGl0ZW0gaGFzIGJlZW4gaW5jbHVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3dzTGVmdCA+PSAwOyAvLyBJZiBudW1Sb3dzIGlzIGFscmVhZHkgYmVsb3cgMCwgcmV0dXJuIGZhbHNlIGJlY2F1c2UgdGhlbiAwIHdhcyBwYXNzZWQgdG8gbnVtUm93cyBpbml0aWFsbHkuIE90aGVyd2lzZSB3ZSB3b3VsZG50IGNvbWUgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1bnRpbDogZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uLCBiSW5jbHVkZVN0b3BFbnRyeSkge1xuICAgICAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IsIGFkdmFuY2UsIHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlckZ1bmN0aW9uKGN1cnNvci52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkdmFuY2UocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYkluY2x1ZGVTdG9wRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpcnN0OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5saW1pdCgxKS50b0FycmF5KGZ1bmN0aW9uIChhKSB7IHJldHVybiBhWzBdOyB9KS50aGVuKGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXN0OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXZlcnNlKCkuZmlyc3QoY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbHRlcjogZnVuY3Rpb24gKGZpbHRlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8vIDxwYXJhbSBuYW1lPVwianNGdW5jdGlvbkZpbHRlclwiIHR5cGU9XCJGdW5jdGlvblwiPmZ1bmN0aW9uKHZhbCl7cmV0dXJuIHRydWUvZmFsc2V9PC9wYXJhbT5cbiAgICAgICAgICAgICAgICBhZGRGaWx0ZXIodGhpcy5fY3R4LCBmdW5jdGlvbiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJGdW5jdGlvbihjdXJzb3IudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIG1hdGNoIGZpbHRlcnMgbm90IHVzZWQgaW4gRGV4aWUuanMgYnV0IGNhbiBiZSB1c2VkIGJ5IDNyZCBwYXJ0IGxpYnJhcmllcyB0byB0ZXN0IGFcbiAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIGZvciBhIG1hdGNoIHdpdGhvdXQgcXVlcnlpbmcgREIuIFVzZWQgYnkgRGV4aWUuT2JzZXJ2YWJsZS5cbiAgICAgICAgICAgICAgICBhZGRNYXRjaEZpbHRlcih0aGlzLl9jdHgsIGZpbHRlckZ1bmN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbmQ6IGZ1bmN0aW9uIChmaWx0ZXJGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcihmaWx0ZXJGdW5jdGlvbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3I6IGZ1bmN0aW9uIChpbmRleE5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdoZXJlQ2xhdXNlKHRoaXMuX2N0eC50YWJsZSwgaW5kZXhOYW1lLCB0aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXZlcnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3R4LmRpciA9ICh0aGlzLl9jdHguZGlyID09PSBcInByZXZcIiA/IFwibmV4dFwiIDogXCJwcmV2XCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vbmRpcmVjdGlvbmNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25kaXJlY3Rpb25jaGFuZ2UodGhpcy5fY3R4LmRpcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzYzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlYWNoS2V5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4O1xuICAgICAgICAgICAgICAgIGN0eC5rZXlzT25seSA9ICFjdHguaXNNYXRjaDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2YWwsIGN1cnNvcikgeyBjYihjdXJzb3Iua2V5LCBjdXJzb3IpOyB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlYWNoVW5pcXVlS2V5OiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdHgudW5pcXVlID0gXCJ1bmlxdWVcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoS2V5KGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlYWNoUHJpbWFyeUtleTogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcbiAgICAgICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodmFsLCBjdXJzb3IpIHsgY2IoY3Vyc29yLnByaW1hcnlLZXksIGN1cnNvcik7IH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGtleXM6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgY3R4LmtleXNPbmx5ID0gIWN0eC5pc01hdGNoO1xuICAgICAgICAgICAgICAgIHZhciBhID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIGEucHVzaChjdXJzb3Iua2V5KTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJpbWFyeUtleXM6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLl9jdHg7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0dldEFsbCAmJiBjdHguZGlyID09PSAnbmV4dCcgJiYgaXNQbGFpbktleVJhbmdlKGN0eCwgdHJ1ZSkgJiYgY3R4LmxpbWl0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIG9wdGltYXRpb24gaWYgd2UgY291bGQgdXNlIElEQk9iamVjdFN0b3JlLmdldEFsbEtleXMoKSBvclxuICAgICAgICAgICAgICAgICAgICAvLyBJREJLZXlSYW5nZS5nZXRBbGxLZXlzKCk6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4T3JTdG9yZSA9IGdldEluZGV4T3JTdG9yZShjdHgsIGlkYnN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBjdHgubGltaXQgPCBJbmZpbml0eSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4T3JTdG9yZS5nZXRBbGxLZXlzKGN0eC5yYW5nZSwgY3R4LmxpbWl0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4T3JTdG9yZS5nZXRBbGxLZXlzKGN0eC5yYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGV2ZW50U3VjY2Vzc0hhbmRsZXIocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHgua2V5c09ubHkgPSAhY3R4LmlzTWF0Y2g7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtLCBjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICAgICAgfSkudGhlbihjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdW5pcXVlS2V5czogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3R4LnVuaXF1ZSA9IFwidW5pcXVlXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMua2V5cyhjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlyc3RLZXk6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxpbWl0KDEpLmtleXMoZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGFbMF07IH0pLnRoZW4oY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxhc3RLZXk6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJldmVyc2UoKS5maXJzdEtleShjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzdGluY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LCBpZHggPSBjdHguaW5kZXggJiYgY3R4LnRhYmxlLnNjaGVtYS5pZHhCeU5hbWVbY3R4LmluZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoIWlkeCB8fCAhaWR4Lm11bHRpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsgLy8gZGlzdGluY3QoKSBvbmx5IG1ha2VzIGRpZmZlcmVuY2llcyBvbiBtdWx0aUVudHJ5IGluZGV4ZXMuXG4gICAgICAgICAgICAgICAgdmFyIHNldCA9IHt9O1xuICAgICAgICAgICAgICAgIGFkZEZpbHRlcih0aGlzLl9jdHgsIGZ1bmN0aW9uIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0cktleSA9IGN1cnNvci5wcmltYXJ5S2V5LnRvU3RyaW5nKCk7IC8vIENvbnZlcnRzIGFueSBEYXRlIHRvIFN0cmluZywgU3RyaW5nIHRvIFN0cmluZywgTnVtYmVyIHRvIFN0cmluZyBhbmQgQXJyYXkgdG8gY29tbWEtc2VwYXJhdGVkIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBoYXNPd24oc2V0LCBzdHJLZXkpO1xuICAgICAgICAgICAgICAgICAgICBzZXRbc3RyS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhZm91bmQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE1ldGhvZHMgdGhhdCBtdXRhdGUgc3RvcmFnZVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIG1vZGlmeTogZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXMsIGN0eCA9IHRoaXMuX2N0eCwgaG9vayA9IGN0eC50YWJsZS5ob29rLCB1cGRhdGluZ0hvb2sgPSBob29rLnVwZGF0aW5nLmZpcmUsIGRlbGV0aW5nSG9vayA9IGhvb2suZGVsZXRpbmcuZmlyZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fd3JpdGUoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCwgaWRic3RvcmUsIHRyYW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RpZnllcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGFuZ2VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2VzIGlzIGEgZnVuY3Rpb24gdGhhdCBtYXkgdXBkYXRlLCBhZGQgb3IgZGVsZXRlIHByb3B0ZXJ0aWVzIG9yIGV2ZW4gcmVxdWlyZSBhIGRlbGV0aW9uIHRoZSBvYmplY3QgaXRzZWxmIChkZWxldGUgdGhpcy5pdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0aW5nSG9vayA9PT0gbm9wICYmIGRlbGV0aW5nSG9vayA9PT0gbm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9vbmUgY2FyZXMgYWJvdXQgd2hhdCBpcyBiZWluZyBjaGFuZ2VkLiBKdXN0IGxldCB0aGUgbW9kaWZpZXIgZnVuY3Rpb24gYmUgdGhlIGdpdmVuIGFyZ3VtZW50IGFzIGlzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmeWVyID0gY2hhbmdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlb3BsZSB3YW50IHRvIGtub3cgZXhhY3RseSB3aGF0IGlzIGJlaW5nIG1vZGlmaWVkIG9yIGRlbGV0ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0IG1vZGlmeWVyIGJlIGEgcHJveHkgZnVuY3Rpb24gdGhhdCBmaW5kcyBvdXQgd2hhdCBjaGFuZ2VzIHRoZSBjYWxsZXIgaXMgYWN0dWFsbHkgZG9pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgY2FsbCB0aGUgaG9va3MgYWNjb3JkaW5nbHkhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JpZ0l0ZW0gPSBkZWVwQ2xvbmUoaXRlbSk7IC8vIENsb25lIHRoZSBpdGVtIGZpcnN0IHNvIHdlIGNhbiBjb21wYXJlIGxhdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZXMuY2FsbCh0aGlzLCBpdGVtLCB0aGlzKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIENhbGwgdGhlIHJlYWwgbW9kaWZ5ZXIgZnVuY3Rpb24gKElmIGl0IHJldHVybnMgZmFsc2UgZXhwbGljaXRlbHksIGl0IG1lYW5zIGl0IGRvbnQgd2FudCB0byBtb2RpZnkgYW55dGluZyBvbiB0aGlzIG9iamVjdClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNPd24odGhpcywgXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlYWwgbW9kaWZ5ZXIgZnVuY3Rpb24gcmVxdWVzdHMgYSBkZWxldGlvbiBvZiB0aGUgb2JqZWN0LiBJbmZvcm0gdGhlIGRlbGV0aW5nSG9vayB0aGF0IGEgZGVsZXRpb24gaXMgdGFraW5nIHBsYWNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRpbmdIb29rLmNhbGwodGhpcywgdGhpcy5wcmltS2V5LCBpdGVtLCB0cmFucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBkZWxldGlvbi4gQ2hlY2sgd2hhdCB3YXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdERpZmYgPSBnZXRPYmplY3REaWZmKG9yaWdJdGVtLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRpdGlvbmFsQ2hhbmdlcyA9IHVwZGF0aW5nSG9vay5jYWxsKHRoaXMsIG9iamVjdERpZmYsIHRoaXMucHJpbUtleSwgb3JpZ0l0ZW0sIHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsQ2hhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvb2sgd2FudCB0byBhcHBseSBhZGRpdGlvbmFsIG1vZGlmaWNhdGlvbnMuIE1ha2Ugc3VyZSB0byBmdWxsZmlsbCB0aGUgd2lsbCBvZiB0aGUgaG9vay5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzKGFkZGl0aW9uYWxDaGFuZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCBhZGRpdGlvbmFsQ2hhbmdlc1trZXlQYXRoXSk7IC8vIEFkZGluZyB7a2V5UGF0aDogdW5kZWZpbmVkfSBtZWFucyB0aGF0IHRoZSBrZXlQYXRoIHNob3VsZCBiZSBkZWxldGVkLiBIYW5kbGVkIGJ5IHNldEJ5S2V5UGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh1cGRhdGluZ0hvb2sgPT09IG5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlcyBpcyBhIHNldCBvZiB7a2V5UGF0aDogdmFsdWV9IGFuZCBubyBvbmUgaXMgbGlzdGVuaW5nIHRvIHRoZSB1cGRhdGluZyBob29rLlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGhzID0ga2V5cyhjaGFuZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW1LZXlzID0ga2V5UGF0aHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnl0aGluZ01vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1LZXlzOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBrZXlQYXRoc1tpXSwgdmFsID0gY2hhbmdlc1trZXlQYXRoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoKSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRCeUtleVBhdGgoaXRlbSwga2V5UGF0aCwgdmFsKTsgLy8gQWRkaW5nIHtrZXlQYXRoOiB1bmRlZmluZWR9IG1lYW5zIHRoYXQgdGhlIGtleVBhdGggc2hvdWxkIGJlIGRlbGV0ZWQuIEhhbmRsZWQgYnkgc2V0QnlLZXlQYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnl0aGluZ01vZGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW55dGhpbmdNb2RpZmllZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2VzIGlzIGEgc2V0IG9mIHtrZXlQYXRoOiB2YWx1ZX0gYW5kIHBlb3BsZSBhcmUgbGlzdGVuaW5nIHRvIHRoZSB1cGRhdGluZyBob29rIHNvIHdlIG5lZWQgdG8gY2FsbCBpdCBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IGl0IHRvIGFkZCBhZGRpdGlvbmFsIG1vZGlmaWNhdGlvbnMgdG8gbWFrZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnQ2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzID0gc2hhbGxvd0Nsb25lKG9yaWdDaGFuZ2VzKTsgLy8gTGV0J3Mgd29yayB3aXRoIGEgY2xvbmUgb2YgdGhlIGNoYW5nZXMga2V5UGF0aC92YWx1ZSBzZXQgc28gdGhhdCB3ZSBjYW4gcmVzdG9yZSBpdCBpbiBjYXNlIGEgaG9vayBleHRlbmRzIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZ5ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnl0aGluZ01vZGlmaWVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGl0aW9uYWxDaGFuZ2VzID0gdXBkYXRpbmdIb29rLmNhbGwodGhpcywgY2hhbmdlcywgdGhpcy5wcmltS2V5LCBkZWVwQ2xvbmUoaXRlbSksIHRyYW5zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbENoYW5nZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZChjaGFuZ2VzLCBhZGRpdGlvbmFsQ2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5cyhjaGFuZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBjaGFuZ2VzW2tleVBhdGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0QnlLZXlQYXRoKGl0ZW0sIGtleVBhdGgpICE9PSB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJ5S2V5UGF0aChpdGVtLCBrZXlQYXRoLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55dGhpbmdNb2RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbENoYW5nZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBzaGFsbG93Q2xvbmUob3JpZ0NoYW5nZXMpOyAvLyBSZXN0b3JlIG9yaWdpbmFsIGNoYW5nZXMgZm9yIG5leHQgaXRlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFueXRoaW5nTW9kaWZpZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhaWx1cmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsS2V5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEtleSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1vZGlmeUl0ZW0oaXRlbSwgY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50S2V5ID0gY3Vyc29yLnByaW1hcnlLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpc0NvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbUtleTogY3Vyc29yLnByaW1hcnlLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25zdWNjZXNzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbmVycm9yKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxLZXlzLnB1c2godGhpc0NvbnRleHQucHJpbUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tGaW5pc2hlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBDYXRjaCB0aGVzZSBlcnJvcnMgYW5kIGxldCBhIGZpbmFsIHJlamVjdGlvbiBkZWNpZGUgd2hldGhlciBvciBub3QgdG8gYWJvcnQgZW50aXJlIHRyYW5zYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZ5ZXIuY2FsbCh0aGlzQ29udGV4dCwgaXRlbSwgdGhpc0NvbnRleHQpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiRGVsZXRlID0gIWhhc093bih0aGlzQ29udGV4dCwgXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IChiRGVsZXRlID8gY3Vyc29yLmRlbGV0ZSgpIDogY3Vyc29yLnVwZGF0ZSh0aGlzQ29udGV4dC52YWx1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuX2hvb2tDdHggPSB0aGlzQ29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBob29rZWRFdmVudFJlamVjdEhhbmRsZXIob25lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsrc3VjY2Vzc0NvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tGaW5pc2hlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvbmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXNDb250ZXh0Lm9uc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvb2sgd2lsbCBleHBlY3QgZWl0aGVyIG9uZXJyb3Igb3Igb25zdWNjZXNzIHRvIGFsd2F5cyBiZSBjYWxsZWQhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NvbnRleHQub25zdWNjZXNzKHRoaXNDb250ZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkb1JlamVjdChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbEtleXMucHVzaChjdXJyZW50S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IE1vZGlmeUVycm9yKFwiRXJyb3IgbW9kaWZ5aW5nIG9uZSBvciBtb3JlIG9iamVjdHNcIiwgZmFpbHVyZXMsIHN1Y2Nlc3NDb3VudCwgZmFpbEtleXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjaGVja0ZpbmlzaGVkKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZXJhdGlvbkNvbXBsZXRlICYmIHN1Y2Nlc3NDb3VudCArIGZhaWx1cmVzLmxlbmd0aCA9PT0gY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFpbHVyZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9SZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoc3VjY2Vzc0NvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb25lKCkucmF3KCkuX2l0ZXJhdGUobW9kaWZ5SXRlbSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tGaW5pc2hlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBkb1JlamVjdCwgaWRic3RvcmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkZWxldGUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LCByYW5nZSA9IGN0eC5yYW5nZSwgZGVsZXRpbmdIb29rID0gY3R4LnRhYmxlLmhvb2suZGVsZXRpbmcuZmlyZSwgaGFzRGVsZXRlSG9vayA9IGRlbGV0aW5nSG9vayAhPT0gbm9wO1xuICAgICAgICAgICAgICAgIGlmICghaGFzRGVsZXRlSG9vayAmJlxuICAgICAgICAgICAgICAgICAgICBpc1BsYWluS2V5UmFuZ2UoY3R4KSAmJlxuICAgICAgICAgICAgICAgICAgICAoKGN0eC5pc1ByaW1LZXkgJiYgIWhhbmdzT25EZWxldGVMYXJnZUtleVJhbmdlKSB8fCAhcmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1heSB1c2UgSURCT2JqZWN0U3RvcmUuZGVsZXRlKElEQktleVJhbmdlKSBpbiB0aGlzIGNhc2UgKElzc3VlICMyMDgpXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBjaHJvbWl1bSwgdGhpcyBpcyB0aGUgd2F5IG1vc3Qgb3B0aW1pemVkIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBJRS9FZGdlLCB0aGlzIGNvdWxkIGhhbmcgdGhlIGluZGV4ZWREQiBlbmdpbmUgYW5kIG1ha2Ugb3BlcmF0aW5nIHN5c3RlbSBpbnN0YWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZGZhaGxhbmRlci81YTM5MzI4ZjAyOWRlMTgyMjJjZjIxMjVkNTZjMzhmNylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dyaXRlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIGlkYnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdXIgQVBJIGNvbnRyYWN0IGlzIHRvIHJldHVybiBhIGNvdW50IG9mIGRlbGV0ZWQgaXRlbXMsIHNvIHdlIGhhdmUgdG8gY291bnQoKSBiZWZvcmUgZGVsZXRlKCkuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpLCBjb3VudFJlcSA9IChyYW5nZSA/IGlkYnN0b3JlLmNvdW50KHJhbmdlKSA6IGlkYnN0b3JlLmNvdW50KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRSZXEub25lcnJvciA9IG9uZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudFJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gY291bnRSZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeUNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbFJlcSA9IChyYW5nZSA/IGlkYnN0b3JlLmRlbGV0ZShyYW5nZSkgOiBpZGJzdG9yZS5jbGVhcigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsUmVxLm9uZXJyb3IgPSBvbmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxSZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZShjb3VudCk7IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdmVyc2lvbiB0byB1c2Ugd2hlbiBjb2xsZWN0aW9uIGlzIG5vdCBhIHZhbmlsbGEgSURCS2V5UmFuZ2Ugb24gdGhlIHByaW1hcnkga2V5LlxuICAgICAgICAgICAgICAgIC8vIERpdmlkZSBpbnRvIGNodW5rcyB0byBub3Qgc3RhcnZlIFJBTS5cbiAgICAgICAgICAgICAgICAvLyBJZiBoYXMgZGVsZXRlIGhvb2ssIHdlIHdpbGwgaGF2ZSB0byBjb2xsZWN0IG5vdCBqdXN0IGtleXMgYnV0IGFsc28gb2JqZWN0cywgc28gaXQgd2lsbCB1c2VcbiAgICAgICAgICAgICAgICAvLyBtb3JlIG1lbW9yeSBhbmQgbmVlZCBsb3dlciBjaHVuayBzaXplLlxuICAgICAgICAgICAgICAgIHZhciBDSFVOS1NJWkUgPSBoYXNEZWxldGVIb29rID8gMjAwMCA6IDEwMDAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl93cml0ZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBpZGJzdG9yZSwgdHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAvLyBDbG9uZSBjb2xsZWN0aW9uIGFuZCBjaGFuZ2UgaXRzIHRhYmxlIGFuZCBzZXQgYSBsaW1pdCBvZiBDSFVOS1NJWkUgb24gdGhlIGNsb25lZCBDb2xsZWN0aW9uIGluc3RhbmNlLlxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IF90aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xvbmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5c09ubHk6ICFjdHguaXNNYXRjaCAmJiAhaGFzRGVsZXRlSG9va1xuICAgICAgICAgICAgICAgICAgICB9KSAvLyBsb2FkIGp1c3Qga2V5cyAodW5sZXNzIGZpbHRlcigpIG9yIGFuZCgpIG9yIGRlbGV0ZUhvb2sgaGFzIHN1YnNjcmliZXJzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpc3RpbmN0KCkgLy8gSW4gY2FzZSBtdWx0aUVudHJ5IGlzIHVzZWQsIG5ldmVyIGRlbGV0ZSBzYW1lIGtleSB0d2ljZSBiZWNhdXNlIHJlc3VsdGluZyBjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgLmxpbWl0KENIVU5LU0laRSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yYXcoKTsgLy8gRG9uJ3QgZmlsdGVyIHRocm91Z2ggcmVhZGluZy1ob29rcyAobGlrZSBtYXBwZWQgY2xhc3NlcyBldGMpXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzT3JUdXBsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UncmUgZ29ubmEgZG8gdGhpbmdzIG9uIGFzIG1hbnkgY2h1bmtzIHRoYXQgYXJlIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHJlY3Vyc2lvbiBvZiBuZXh0Q2h1bmsgZnVuY3Rpb246XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0Q2h1bmsgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBjb2xsZWN0aW9uLmVhY2goaGFzRGVsZXRlSG9vayA/IGZ1bmN0aW9uICh2YWwsIGN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29tZWJvZHkgc3Vic2NyaWJlcyB0byBob29rKCdkZWxldGluZycpLiBDb2xsZWN0IGFsbCBwcmltYXJ5IGtleXMgYW5kIHRoZWlyIHZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgdGhlIGhvb2sgY2FuIGJlIGNhbGxlZCB3aXRoIGl0cyB2YWx1ZXMgaW4gYnVsa0RlbGV0ZSgpLlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5c09yVHVwbGVzLnB1c2goW2N1cnNvci5wcmltYXJ5S2V5LCBjdXJzb3IudmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfSA6IGZ1bmN0aW9uICh2YWwsIGN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gb25lIHN1YnNjcmliZXMgdG8gaG9vaygnZGVsZXRpbmcnKS4gQ29sbGVjdCBvbmx5IHByaW1hcnkga2V5czpcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNPclR1cGxlcy5wdXNoKGN1cnNvci5wcmltYXJ5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWl1bSBkZWxldGVzIGZhc3RlciB3aGVuIGRvaW5nIGl0IGluIHNvcnQgb3JkZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNEZWxldGVIb29rID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlzT3JUdXBsZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYXNjZW5kaW5nKGFbMF0sIGJbMF0pOyB9KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5c09yVHVwbGVzLnNvcnQoYXNjZW5kaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidWxrRGVsZXRlKGlkYnN0b3JlLCB0cmFucywga2V5c09yVHVwbGVzLCBoYXNEZWxldGVIb29rLCBkZWxldGluZ0hvb2spO1xuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudCA9IGtleXNPclR1cGxlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50ICs9IGNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5c09yVHVwbGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnQgPCBDSFVOS1NJWkUgPyB0b3RhbENvdW50IDogbmV4dENodW5rKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5leHRDaHVuaygpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcbiAgICAvL1xuICAgIC8vXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEhlbHAgZnVuY3Rpb25zIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vXG4gICAgLy9cbiAgICAvL1xuICAgIGZ1bmN0aW9uIGxvd2VyVmVyc2lvbkZpcnN0KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEuX2NmZy52ZXJzaW9uIC0gYi5fY2ZnLnZlcnNpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEFwaU9uUGxhY2Uob2JqcywgdGFibGVOYW1lcywgZGJzY2hlbWEpIHtcbiAgICAgICAgdGFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBkYnNjaGVtYVt0YWJsZU5hbWVdO1xuICAgICAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoISh0YWJsZU5hbWUgaW4gb2JqKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqID09PSBUcmFuc2FjdGlvbi5wcm90b3R5cGUgfHwgb2JqIGluc3RhbmNlb2YgVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9iaiBpcyBhIFRyYW5zYWN0aW9uIHByb3RvdHlwZSAob3IgcHJvdG90eXBlIG9mIGEgc3ViY2xhc3MgdG8gVHJhbnNhY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSBBUEkgYSBnZXR0ZXIgdGhhdCByZXR1cm5zIHRoaXMudGFibGUodGFibGVOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChvYmosIHRhYmxlTmFtZSwgeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMudGFibGUodGFibGVOYW1lKTsgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhYmxlIHdpbGwgbm90IGJlIGJvdW5kIHRvIGEgdHJhbnNhY3Rpb24gKHdpbGwgdXNlIERleGllLmN1cnJlbnRUcmFuc2FjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialt0YWJsZU5hbWVdID0gbmV3IFRhYmxlKHRhYmxlTmFtZSwgc2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVGFibGVzQXBpKG9ianMpIHtcbiAgICAgICAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqW2tleV0gaW5zdGFuY2VvZiBUYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9ialtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXRlcmF0ZShyZXEsIGZpbHRlciwgZm4sIHJlc29sdmUsIHJlamVjdCwgdmFsdWVNYXBwZXIpIHtcbiAgICAgICAgLy8gQXBwbHkgdmFsdWVNYXBwZXIgKGhvb2soJ3JlYWRpbmcnKSBvciBtYXBwcGVkIGNsYXNzKVxuICAgICAgICB2YXIgbWFwcGVkRm4gPSB2YWx1ZU1hcHBlciA/IGZ1bmN0aW9uICh4LCBjLCBhKSB7IHJldHVybiBmbih2YWx1ZU1hcHBlcih4KSwgYywgYSk7IH0gOiBmbjtcbiAgICAgICAgLy8gV3JhcCBmbiB3aXRoIFBTRCBhbmQgbWljcm90aWNrIHN0dWZmIGZyb20gUHJvbWlzZS5cbiAgICAgICAgdmFyIHdyYXBwZWRGbiA9IHdyYXAobWFwcGVkRm4sIHJlamVjdCk7XG4gICAgICAgIGlmICghcmVxLm9uZXJyb3IpXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpO1xuICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gdHJ5Y2F0Y2hlcihmdW5jdGlvbiBmaWx0ZXJfcmVjb3JkKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmdW5jdGlvbiAoKSB7IGN1cnNvci5jb250aW51ZSgpOyB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKGN1cnNvciwgZnVuY3Rpb24gKGFkdmFuY2VyKSB7IGMgPSBhZHZhbmNlcjsgfSwgcmVzb2x2ZSwgcmVqZWN0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZWRGbihjdXJzb3IudmFsdWUsIGN1cnNvciwgZnVuY3Rpb24gKGFkdmFuY2VyKSB7IGMgPSBhZHZhbmNlcjsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IHRyeWNhdGNoZXIoZnVuY3Rpb24gZmlsdGVyX3JlY29yZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gZnVuY3Rpb24gKCkgeyBjdXJzb3IuY29udGludWUoKTsgfTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlZEZuKGN1cnNvci52YWx1ZSwgY3Vyc29yLCBmdW5jdGlvbiAoYWR2YW5jZXIpIHsgYyA9IGFkdmFuY2VyOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VJbmRleFN5bnRheChpbmRleGVzKSB7XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImluZGV4ZXNcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAgICAgLy8vIDxyZXR1cm5zIHR5cGU9XCJBcnJheVwiIGVsZW1lbnRUeXBlPVwiSW5kZXhTcGVjXCI+PC9yZXR1cm5zPlxuICAgICAgICB2YXIgcnYgPSBbXTtcbiAgICAgICAgaW5kZXhlcy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICBpbmRleCA9IGluZGV4LnRyaW0oKTtcbiAgICAgICAgICAgIHZhciBuYW1lID0gaW5kZXgucmVwbGFjZSgvKFsmKl18XFwrXFwrKS9nLCBcIlwiKTsgLy8gUmVtb3ZlIFwiJlwiLCBcIisrXCIgYW5kIFwiKlwiXG4gICAgICAgICAgICAvLyBMZXQga2V5UGF0aCBvZiBcIlthK2JdXCIgYmUgW1wiYVwiLFwiYlwiXTpcbiAgICAgICAgICAgIHZhciBrZXlQYXRoID0gL15cXFsvLnRlc3QobmFtZSkgPyBuYW1lLm1hdGNoKC9eXFxbKC4qKVxcXSQvKVsxXS5zcGxpdCgnKycpIDogbmFtZTtcbiAgICAgICAgICAgIHJ2LnB1c2gobmV3IEluZGV4U3BlYyhuYW1lLCBrZXlQYXRoIHx8IG51bGwsIC9cXCYvLnRlc3QoaW5kZXgpLCAvXFwqLy50ZXN0KGluZGV4KSwgL1xcK1xcKy8udGVzdChpbmRleCksIGlzQXJyYXkoa2V5UGF0aCksIC9cXC4vLnRlc3QoaW5kZXgpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcnY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNtcChrZXkxLCBrZXkyKSB7XG4gICAgICAgIHJldHVybiBpbmRleGVkREIuY21wKGtleTEsIGtleTIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtaW4oYSwgYikge1xuICAgICAgICByZXR1cm4gY21wKGEsIGIpIDwgMCA/IGEgOiBiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtYXgoYSwgYikge1xuICAgICAgICByZXR1cm4gY21wKGEsIGIpID4gMCA/IGEgOiBiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICAgICAgICByZXR1cm4gaW5kZXhlZERCLmNtcChhLCBiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVzY2VuZGluZyhhLCBiKSB7XG4gICAgICAgIHJldHVybiBpbmRleGVkREIuY21wKGIsIGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzaW1wbGVDb21wYXJlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPCBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNpbXBsZUNvbXBhcmVSZXZlcnNlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbWJpbmUoZmlsdGVyMSwgZmlsdGVyMikge1xuICAgICAgICByZXR1cm4gZmlsdGVyMSA/XG4gICAgICAgICAgICBmaWx0ZXIyID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBmaWx0ZXIxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgJiYgZmlsdGVyMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9IDpcbiAgICAgICAgICAgICAgICBmaWx0ZXIxIDpcbiAgICAgICAgICAgIGZpbHRlcjI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRHbG9iYWxTY2hlbWEoKSB7XG4gICAgICAgIGRiLnZlcm5vID0gaWRiZGIudmVyc2lvbiAvIDEwO1xuICAgICAgICBkYi5fZGJTY2hlbWEgPSBnbG9iYWxTY2hlbWEgPSB7fTtcbiAgICAgICAgZGJTdG9yZU5hbWVzID0gc2xpY2UoaWRiZGIub2JqZWN0U3RvcmVOYW1lcywgMCk7XG4gICAgICAgIGlmIChkYlN0b3JlTmFtZXMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuOyAvLyBEYXRhYmFzZSBjb250YWlucyBubyBzdG9yZXMuXG4gICAgICAgIHZhciB0cmFucyA9IGlkYmRiLnRyYW5zYWN0aW9uKHNhZmFyaU11bHRpU3RvcmVGaXgoZGJTdG9yZU5hbWVzKSwgJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGRiU3RvcmVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zLm9iamVjdFN0b3JlKHN0b3JlTmFtZSksIGtleVBhdGggPSBzdG9yZS5rZXlQYXRoLCBkb3R0ZWQgPSBrZXlQYXRoICYmIHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyAmJiBrZXlQYXRoLmluZGV4T2YoJy4nKSAhPT0gLTE7XG4gICAgICAgICAgICB2YXIgcHJpbUtleSA9IG5ldyBJbmRleFNwZWMoa2V5UGF0aCwga2V5UGF0aCB8fCBcIlwiLCBmYWxzZSwgZmFsc2UsICEhc3RvcmUuYXV0b0luY3JlbWVudCwga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCAhPT0gJ3N0cmluZycsIGRvdHRlZCk7XG4gICAgICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdG9yZS5pbmRleE5hbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkYmluZGV4ID0gc3RvcmUuaW5kZXgoc3RvcmUuaW5kZXhOYW1lc1tqXSk7XG4gICAgICAgICAgICAgICAga2V5UGF0aCA9IGlkYmluZGV4LmtleVBhdGg7XG4gICAgICAgICAgICAgICAgZG90dGVkID0ga2V5UGF0aCAmJiB0eXBlb2Yga2V5UGF0aCA9PT0gJ3N0cmluZycgJiYga2V5UGF0aC5pbmRleE9mKCcuJykgIT09IC0xO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IG5ldyBJbmRleFNwZWMoaWRiaW5kZXgubmFtZSwga2V5UGF0aCwgISFpZGJpbmRleC51bmlxdWUsICEhaWRiaW5kZXgubXVsdGlFbnRyeSwgZmFsc2UsIGtleVBhdGggJiYgdHlwZW9mIGtleVBhdGggIT09ICdzdHJpbmcnLCBkb3R0ZWQpO1xuICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbG9iYWxTY2hlbWFbc3RvcmVOYW1lXSA9IG5ldyBUYWJsZVNjaGVtYShzdG9yZU5hbWUsIHByaW1LZXksIGluZGV4ZXMsIHt9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEFwaU9uUGxhY2UoW2FsbFRhYmxlc10sIGtleXMoZ2xvYmFsU2NoZW1hKSwgZ2xvYmFsU2NoZW1hKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMoc2NoZW1hLCBpZGJ0cmFucykge1xuICAgICAgICAvLy8gPHN1bW1hcnk+XG4gICAgICAgIC8vLyBJc3N1ZSAjMzAgUHJvYmxlbSB3aXRoIGV4aXN0aW5nIGRiIC0gYWRqdXN0IHRvIGV4aXN0aW5nIGluZGV4IG5hbWVzIHdoZW4gbWlncmF0aW5nIGZyb20gbm9uLWRleGllIGRiXG4gICAgICAgIC8vLyA8L3N1bW1hcnk+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cInNjaGVtYVwiIHR5cGU9XCJPYmplY3RcIj5NYXAgYmV0d2VlbiBuYW1lIGFuZCBUYWJsZVNjaGVtYTwvcGFyYW0+XG4gICAgICAgIC8vLyA8cGFyYW0gbmFtZT1cImlkYnRyYW5zXCIgdHlwZT1cIklEQlRyYW5zYWN0aW9uXCI+PC9wYXJhbT5cbiAgICAgICAgdmFyIHN0b3JlTmFtZXMgPSBpZGJ0cmFucy5kYi5vYmplY3RTdG9yZU5hbWVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0b3JlTmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzdG9yZU5hbWUgPSBzdG9yZU5hbWVzW2ldO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gaWRidHJhbnMub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIGhhc0dldEFsbCA9ICdnZXRBbGwnIGluIHN0b3JlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdG9yZS5pbmRleE5hbWVzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4TmFtZSA9IHN0b3JlLmluZGV4TmFtZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGtleVBhdGggPSBzdG9yZS5pbmRleChpbmRleE5hbWUpLmtleVBhdGg7XG4gICAgICAgICAgICAgICAgdmFyIGRleGllTmFtZSA9IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IGtleVBhdGggOiBcIltcIiArIHNsaWNlKGtleVBhdGgpLmpvaW4oJysnKSArIFwiXVwiO1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWFbc3RvcmVOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhTcGVjID0gc2NoZW1hW3N0b3JlTmFtZV0uaWR4QnlOYW1lW2RleGllTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleFNwZWMpXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleFNwZWMubmFtZSA9IGluZGV4TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnVnIHdpdGggZ2V0QWxsKCkgb24gU2FmYXJpIHZlcjw2MDQgb24gV29ya2VycyBvbmx5LCBzZWUgZGlzY3Vzc2lvbiBmb2xsb3dpbmcgUFIgIzU3OVxuICAgICAgICBpZiAoL1NhZmFyaS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgICAgICAgICAgIS8oQ2hyb21lXFwvfEVkZ2VcXC8pLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmXG4gICAgICAgICAgICBfZ2xvYmFsLldvcmtlckdsb2JhbFNjb3BlICYmIF9nbG9iYWwgaW5zdGFuY2VvZiBfZ2xvYmFsLldvcmtlckdsb2JhbFNjb3BlICYmXG4gICAgICAgICAgICBbXS5jb25jYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvU2FmYXJpXFwvKFxcZCopLykpWzFdIDwgNjA0KSB7XG4gICAgICAgICAgICBoYXNHZXRBbGwgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaXJlT25CbG9ja2VkKGV2KSB7XG4gICAgICAgIGRiLm9uKFwiYmxvY2tlZFwiKS5maXJlKGV2KTtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCAobm90IGZ1bGx5KikgZm9yIG1pc3NpbmcgXCJ2ZXJzaW9uY2hhbmdlXCIgZXZlbnQgaW4gSUUsRWRnZSBhbmQgU2FmYXJpOlxuICAgICAgICBjb25uZWN0aW9uc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5uYW1lID09PSBkYi5uYW1lICYmIGMgIT09IGRiICYmICFjLl92Y0ZpcmVkOyB9KVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYykgeyByZXR1cm4gYy5vbihcInZlcnNpb25jaGFuZ2VcIikuZmlyZShldik7IH0pO1xuICAgIH1cbiAgICBleHRlbmQodGhpcywge1xuICAgICAgICBDb2xsZWN0aW9uOiBDb2xsZWN0aW9uLFxuICAgICAgICBUYWJsZTogVGFibGUsXG4gICAgICAgIFRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbixcbiAgICAgICAgVmVyc2lvbjogVmVyc2lvbixcbiAgICAgICAgV2hlcmVDbGF1c2U6IFdoZXJlQ2xhdXNlXG4gICAgfSk7XG4gICAgaW5pdCgpO1xuICAgIGFkZG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICBmbihkYik7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVR5cGUodHlwZSkge1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IHR5cGUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheSh0eXBlKSkge1xuICAgICAgICByZXR1cm4gW3BhcnNlVHlwZSh0eXBlWzBdKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgJiYgdHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHZhciBydiA9IHt9O1xuICAgICAgICBhcHBseVN0cnVjdHVyZShydiwgdHlwZSk7XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGx5U3RydWN0dXJlKG9iaiwgc3RydWN0dXJlKSB7XG4gICAga2V5cyhzdHJ1Y3R1cmUpLmZvckVhY2goZnVuY3Rpb24gKG1lbWJlcikge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZVR5cGUoc3RydWN0dXJlW21lbWJlcl0pO1xuICAgICAgICBvYmpbbWVtYmVyXSA9IHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBob29rZWRFdmVudFN1Y2Nlc3NIYW5kbGVyKHJlc29sdmUpIHtcbiAgICAvLyB3cmFwKCkgaXMgbmVlZGVkIHdoZW4gY2FsbGluZyBob29rcyBiZWNhdXNlIHRoZSByYXJlIHNjZW5hcmlvIG9mOlxuICAgIC8vICAqIGhvb2sgZG9lcyBhIGRiIG9wZXJhdGlvbiB0aGF0IGZhaWxzIGltbWVkaWF0ZWx5IChJREIgdGhyb3dzIGV4Y2VwdGlvbilcbiAgICAvLyAgICBGb3IgY2FsbGluZyBkYiBvcGVyYXRpb25zIG9uIGNvcnJlY3QgdHJhbnNhY3Rpb24sIHdyYXAgbWFrZXMgc3VyZSB0byBzZXQgUFNEIGNvcnJlY3RseS5cbiAgICAvLyAgICB3cmFwKCkgd2lsbCBhbHNvIGV4ZWN1dGUgaW4gYSB2aXJ0dWFsIHRpY2suXG4gICAgLy8gICogSWYgbm90IHdyYXBwZWQgaW4gYSB2aXJ0dWFsIHRpY2ssIGRpcmVjdCBleGNlcHRpb24gd2lsbCBsYXVuY2ggYSBuZXcgcGh5c2ljYWwgdGljay5cbiAgICAvLyAgKiBJZiB0aGlzIHdhcyB0aGUgbGFzdCBldmVudCBpbiB0aGUgYnVsaywgdGhlIHByb21pc2Ugd2lsbCByZXNvbHZlIGFmdGVyIGEgcGh5c2ljYWwgdGlja1xuICAgIC8vICAgIGFuZCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBoYXZlIGNvbW1pdHRlZCBhbHJlYWR5LlxuICAgIC8vIElmIG5vIGhvb2ssIHRoZSB2aXJ0dWFsIHRpY2sgd2lsbCBiZSBleGVjdXRlZCBpbiB0aGUgcmVqZWN0KCkvcmVzb2x2ZSBvZiB0aGUgZmluYWwgcHJvbWlzZSxcbiAgICAvLyBiZWNhdXNlIGl0IGlzIGFsd2F5cyBtYXJrZWQgd2l0aCBfbGliID0gdHJ1ZSB3aGVuIGNyZWF0ZWQgdXNpbmcgVHJhbnNhY3Rpb24uX3Byb21pc2UoKS5cbiAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHJlcSA9IGV2ZW50LnRhcmdldCwgY3R4ID0gcmVxLl9ob29rQ3R4LCAvLyBDb250YWlucyB0aGUgaG9vayBlcnJvciBoYW5kbGVyLiBQdXQgaGVyZSBpbnN0ZWFkIG9mIGNsb3N1cmUgdG8gYm9vc3QgcGVyZm9ybWFuY2UuXG4gICAgICAgIHJlc3VsdCA9IGN0eC52YWx1ZSB8fCByZXEucmVzdWx0LCAvLyBQYXNzIHRoZSBvYmplY3QgdmFsdWUgb24gdXBkYXRlcy4gVGhlIHJlc3VsdCBmcm9tIElEQiBpcyB0aGUgcHJpbWFyeSBrZXkuXG4gICAgICAgIGhvb2tTdWNjZXNzSGFuZGxlciA9IGN0eCAmJiBjdHgub25zdWNjZXNzO1xuICAgICAgICBob29rU3VjY2Vzc0hhbmRsZXIgJiYgaG9va1N1Y2Nlc3NIYW5kbGVyKHJlc3VsdCk7XG4gICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShyZXN1bHQpO1xuICAgIH0sIHJlc29sdmUpO1xufVxuZnVuY3Rpb24gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCkge1xuICAgIHJldHVybiB3cmFwKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChldmVudCk7XG4gICAgICAgIHJlamVjdChldmVudC50YXJnZXQuZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBldmVudFN1Y2Nlc3NIYW5kbGVyKHJlc29sdmUpIHtcbiAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmVzb2x2ZShldmVudC50YXJnZXQucmVzdWx0KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlcihyZWplY3QpIHtcbiAgICByZXR1cm4gd3JhcChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gU2VlIGNvbW1lbnQgb24gaG9va2VkRXZlbnRTdWNjZXNzSGFuZGxlcigpIHdoeSB3cmFwKCkgaXMgbmVlZGVkIG9ubHkgd2hlbiBzdXBwb3J0aW5nIGhvb2tzLlxuICAgICAgICB2YXIgcmVxID0gZXZlbnQudGFyZ2V0LCBlcnIgPSByZXEuZXJyb3IsIGN0eCA9IHJlcS5faG9va0N0eCwgLy8gQ29udGFpbnMgdGhlIGhvb2sgZXJyb3IgaGFuZGxlci4gUHV0IGhlcmUgaW5zdGVhZCBvZiBjbG9zdXJlIHRvIGJvb3N0IHBlcmZvcm1hbmNlLlxuICAgICAgICBob29rRXJyb3JIYW5kbGVyID0gY3R4ICYmIGN0eC5vbmVycm9yO1xuICAgICAgICBob29rRXJyb3JIYW5kbGVyICYmIGhvb2tFcnJvckhhbmRsZXIoZXJyKTtcbiAgICAgICAgcHJldmVudERlZmF1bHQoZXZlbnQpO1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKVxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59XG5mdW5jdGlvbiBhd2FpdEl0ZXJhdG9yKGl0ZXJhdG9yKSB7XG4gICAgdmFyIGNhbGxOZXh0ID0gZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gaXRlcmF0b3IubmV4dChyZXN1bHQpOyB9LCBkb1Rocm93ID0gZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBpdGVyYXRvci50aHJvdyhlcnJvcik7IH0sIG9uU3VjY2VzcyA9IHN0ZXAoY2FsbE5leHQpLCBvbkVycm9yID0gc3RlcChkb1Rocm93KTtcbiAgICBmdW5jdGlvbiBzdGVwKGdldE5leHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHZhciBuZXh0ID0gZ2V0TmV4dCh2YWwpLCB2YWx1ZSA9IG5leHQudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gbmV4dC5kb25lID8gdmFsdWUgOlxuICAgICAgICAgICAgICAgICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlLnRoZW4gIT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICAgICAgICBpc0FycmF5KHZhbHVlKSA/IFByb21pc2UuYWxsKHZhbHVlKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcikgOiBvblN1Y2Nlc3ModmFsdWUpIDpcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHN0ZXAoY2FsbE5leHQpKCk7XG59XG4vL1xuLy8gSW5kZXhTcGVjIHN0cnVjdFxuLy9cbmZ1bmN0aW9uIEluZGV4U3BlYyhuYW1lLCBrZXlQYXRoLCB1bmlxdWUsIG11bHRpLCBhdXRvLCBjb21wb3VuZCwgZG90dGVkKSB7XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwibmFtZVwiIHR5cGU9XCJTdHJpbmdcIj48L3BhcmFtPlxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImtleVBhdGhcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJ1bmlxdWVcIiB0eXBlPVwiQm9vbGVhblwiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwibXVsdGlcIiB0eXBlPVwiQm9vbGVhblwiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiYXV0b1wiIHR5cGU9XCJCb29sZWFuXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJjb21wb3VuZFwiIHR5cGU9XCJCb29sZWFuXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJkb3R0ZWRcIiB0eXBlPVwiQm9vbGVhblwiPjwvcGFyYW0+XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmtleVBhdGggPSBrZXlQYXRoO1xuICAgIHRoaXMudW5pcXVlID0gdW5pcXVlO1xuICAgIHRoaXMubXVsdGkgPSBtdWx0aTtcbiAgICB0aGlzLmF1dG8gPSBhdXRvO1xuICAgIHRoaXMuY29tcG91bmQgPSBjb21wb3VuZDtcbiAgICB0aGlzLmRvdHRlZCA9IGRvdHRlZDtcbiAgICB2YXIga2V5UGF0aFNyYyA9IHR5cGVvZiBrZXlQYXRoID09PSAnc3RyaW5nJyA/IGtleVBhdGggOiBrZXlQYXRoICYmICgnWycgKyBbXS5qb2luLmNhbGwoa2V5UGF0aCwgJysnKSArICddJyk7XG4gICAgdGhpcy5zcmMgPSAodW5pcXVlID8gJyYnIDogJycpICsgKG11bHRpID8gJyonIDogJycpICsgKGF1dG8gPyBcIisrXCIgOiBcIlwiKSArIGtleVBhdGhTcmM7XG59XG4vL1xuLy8gVGFibGVTY2hlbWEgc3RydWN0XG4vL1xuZnVuY3Rpb24gVGFibGVTY2hlbWEobmFtZSwgcHJpbUtleSwgaW5kZXhlcywgaW5zdGFuY2VUZW1wbGF0ZSkge1xuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcmltS2V5XCIgdHlwZT1cIkluZGV4U3BlY1wiPjwvcGFyYW0+XG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiaW5kZXhlc1wiIHR5cGU9XCJBcnJheVwiIGVsZW1lbnRUeXBlPVwiSW5kZXhTcGVjXCI+PC9wYXJhbT5cbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJpbnN0YW5jZVRlbXBsYXRlXCIgdHlwZT1cIk9iamVjdFwiPjwvcGFyYW0+XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnByaW1LZXkgPSBwcmltS2V5IHx8IG5ldyBJbmRleFNwZWMoKTtcbiAgICB0aGlzLmluZGV4ZXMgPSBpbmRleGVzIHx8IFtuZXcgSW5kZXhTcGVjKCldO1xuICAgIHRoaXMuaW5zdGFuY2VUZW1wbGF0ZSA9IGluc3RhbmNlVGVtcGxhdGU7XG4gICAgdGhpcy5tYXBwZWRDbGFzcyA9IG51bGw7XG4gICAgdGhpcy5pZHhCeU5hbWUgPSBhcnJheVRvT2JqZWN0KGluZGV4ZXMsIGZ1bmN0aW9uIChpbmRleCkgeyByZXR1cm4gW2luZGV4Lm5hbWUsIGluZGV4XTsgfSk7XG59XG5mdW5jdGlvbiBzYWZhcmlNdWx0aVN0b3JlRml4KHN0b3JlTmFtZXMpIHtcbiAgICByZXR1cm4gc3RvcmVOYW1lcy5sZW5ndGggPT09IDEgPyBzdG9yZU5hbWVzWzBdIDogc3RvcmVOYW1lcztcbn1cbmZ1bmN0aW9uIGdldE5hdGl2ZUdldERhdGFiYXNlTmFtZXNGbihpbmRleGVkREIpIHtcbiAgICB2YXIgZm4gPSBpbmRleGVkREIgJiYgKGluZGV4ZWREQi5nZXREYXRhYmFzZU5hbWVzIHx8IGluZGV4ZWREQi53ZWJraXRHZXREYXRhYmFzZU5hbWVzKTtcbiAgICByZXR1cm4gZm4gJiYgZm4uYmluZChpbmRleGVkREIpO1xufVxuLy8gRXhwb3J0IEVycm9yIGNsYXNzZXNcbnByb3BzKERleGllLCBmdWxsTmFtZUV4Y2VwdGlvbnMpOyAvLyBEZXhpZS5YWFhFcnJvciA9IGNsYXNzIFhYWEVycm9yIHsuLi59O1xuLy9cbi8vIFN0YXRpYyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzXG4vLyBcbnByb3BzKERleGllLCB7XG4gICAgLy9cbiAgICAvLyBTdGF0aWMgZGVsZXRlKCkgbWV0aG9kLlxuICAgIC8vXG4gICAgZGVsZXRlOiBmdW5jdGlvbiAoZGF0YWJhc2VOYW1lKSB7XG4gICAgICAgIHZhciBkYiA9IG5ldyBEZXhpZShkYXRhYmFzZU5hbWUpLCBwcm9taXNlID0gZGIuZGVsZXRlKCk7XG4gICAgICAgIHByb21pc2Uub25ibG9ja2VkID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBkYi5vbihcImJsb2NrZWRcIiwgZm4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH0sXG4gICAgLy9cbiAgICAvLyBTdGF0aWMgZXhpc3RzKCkgbWV0aG9kLlxuICAgIC8vXG4gICAgZXhpc3RzOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IERleGllKG5hbWUpLm9wZW4oKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KS5jYXRjaChEZXhpZS5Ob1N1Y2hEYXRhYmFzZUVycm9yLCBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIC8vIFN0YXRpYyBtZXRob2QgZm9yIHJldHJpZXZpbmcgYSBsaXN0IG9mIGFsbCBleGlzdGluZyBkYXRhYmFzZXMgYXQgY3VycmVudCBob3N0LlxuICAgIC8vXG4gICAgZ2V0RGF0YWJhc2VOYW1lczogZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHZhciBnZXREYXRhYmFzZU5hbWVzID0gZ2V0TmF0aXZlR2V0RGF0YWJhc2VOYW1lc0ZuKERleGllLmRlcGVuZGVuY2llcy5pbmRleGVkREIpO1xuICAgICAgICByZXR1cm4gZ2V0RGF0YWJhc2VOYW1lcyA/IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciByZXEgPSBnZXREYXRhYmFzZU5hbWVzKCk7XG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShzbGljZShldmVudC50YXJnZXQucmVzdWx0LCAwKSk7IC8vIENvbnZlcnN0IERPTVN0cmluZ0xpc3QgdG8gQXJyYXk8U3RyaW5nPlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZXZlbnRSZWplY3RIYW5kbGVyKHJlamVjdCk7XG4gICAgICAgIH0pLnRoZW4oY2IpIDogZGJOYW1lc0RCLmRibmFtZXMudG9Db2xsZWN0aW9uKCkucHJpbWFyeUtleXMoY2IpO1xuICAgIH0sXG4gICAgZGVmaW5lQ2xhc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gRGVmYXVsdCBjb25zdHJ1Y3RvciBhYmxlIHRvIGNvcHkgZ2l2ZW4gcHJvcGVydGllcyBpbnRvIHRoaXMgb2JqZWN0LlxuICAgICAgICBmdW5jdGlvbiBDbGFzcyhwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAvLy8gPHBhcmFtIG5hbWU9XCJwcm9wZXJ0aWVzXCIgdHlwZT1cIk9iamVjdFwiIG9wdGlvbmFsPVwidHJ1ZVwiPlByb3BlcnRpZXMgdG8gaW5pdGlhbGl6ZSBvYmplY3Qgd2l0aC5cbiAgICAgICAgICAgIC8vLyA8L3BhcmFtPlxuICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDbGFzcztcbiAgICB9LFxuICAgIGFwcGx5U3RydWN0dXJlOiBhcHBseVN0cnVjdHVyZSxcbiAgICBpZ25vcmVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKHNjb3BlRnVuYykge1xuICAgICAgICAvLyBJbiBjYXNlIGNhbGxlciBpcyB3aXRoaW4gYSB0cmFuc2FjdGlvbiBidXQgbmVlZHMgdG8gY3JlYXRlIGEgc2VwYXJhdGUgdHJhbnNhY3Rpb24uXG4gICAgICAgIC8vIEV4YW1wbGUgb2YgdXNhZ2U6XG4gICAgICAgIC8vXG4gICAgICAgIC8vIExldCdzIHNheSB3ZSBoYXZlIGEgbG9nZ2VyIGZ1bmN0aW9uIGluIG91ciBhcHAuIE90aGVyIGFwcGxpY2F0aW9uLWxvZ2ljIHNob3VsZCBiZSB1bmF3YXJlIG9mIHRoZVxuICAgICAgICAvLyBsb2dnZXIgZnVuY3Rpb24gYW5kIG5vdCBuZWVkIHRvIGluY2x1ZGUgdGhlICdsb2dlbnRyaWVzJyB0YWJsZSBpbiBhbGwgdHJhbnNhY3Rpb24gaXQgcGVyZm9ybXMuXG4gICAgICAgIC8vIFRoZSBsb2dnaW5nIHNob3VsZCBhbHdheXMgYmUgZG9uZSBpbiBhIHNlcGFyYXRlIHRyYW5zYWN0aW9uIGFuZCBub3QgYmUgZGVwZW5kYW50IG9uIHRoZSBjdXJyZW50XG4gICAgICAgIC8vIHJ1bm5pbmcgdHJhbnNhY3Rpb24gY29udGV4dC4gVGhlbiB5b3UgY291bGQgdXNlIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKCkgdG8gcnVuIGNvZGUgdGhhdCBzdGFydHMgYSBuZXcgdHJhbnNhY3Rpb24uXG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgICBEZXhpZS5pZ25vcmVUcmFuc2FjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gICAgICAgICBkYi5sb2dlbnRyaWVzLmFkZChuZXdMb2dFbnRyeSk7XG4gICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gVW5sZXNzIHVzaW5nIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKCksIHRoZSBhYm92ZSBleGFtcGxlIHdvdWxkIHRyeSB0byByZXVzZSB0aGUgY3VycmVudCB0cmFuc2FjdGlvblxuICAgICAgICAvLyBpbiBjdXJyZW50IFByb21pc2Utc2NvcGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEFuIGFsdGVybmF0aXZlIHRvIERleGllLmlnbm9yZVRyYW5zYWN0aW9uKCkgd291bGQgYmUgc2V0SW1tZWRpYXRlKCkgb3Igc2V0VGltZW91dCgpLiBUaGUgcmVhc29uIHdlIHN0aWxsIHByb3ZpZGUgYW5cbiAgICAgICAgLy8gQVBJIGZvciB0aGlzIGJlY2F1c2VcbiAgICAgICAgLy8gIDEpIFRoZSBpbnRlbnRpb24gb2Ygd3JpdGluZyB0aGUgc3RhdGVtZW50IGNvdWxkIGJlIHVuY2xlYXIgaWYgdXNpbmcgc2V0SW1tZWRpYXRlKCkgb3Igc2V0VGltZW91dCgpLlxuICAgICAgICAvLyAgMikgc2V0VGltZW91dCgpIHdvdWxkIHdhaXQgdW5uZXNjZXNzYXJ5IHVudGlsIGZpcmluZy4gVGhpcyBpcyBob3dldmVyIG5vdCB0aGUgY2FzZSB3aXRoIHNldEltbWVkaWF0ZSgpLlxuICAgICAgICAvLyAgMykgc2V0SW1tZWRpYXRlKCkgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgRVMgc3RhbmRhcmQuXG4gICAgICAgIC8vICA0KSBZb3UgbWlnaHQgd2FudCB0byBrZWVwIG90aGVyIFBTRCBzdGF0ZSB0aGF0IHdhcyBzZXQgaW4gYSBwYXJlbnQgUFNELCBzdWNoIGFzIFBTRC5sZXRUaHJvdWdoLlxuICAgICAgICByZXR1cm4gUFNELnRyYW5zID9cbiAgICAgICAgICAgIHVzZVBTRChQU0QudHJhbnNsZXNzLCBzY29wZUZ1bmMpIDogLy8gVXNlIHRoZSBjbG9zZXN0IHBhcmVudCB0aGF0IHdhcyBub24tdHJhbnNhY3Rpb25hbC5cbiAgICAgICAgICAgIHNjb3BlRnVuYygpOyAvLyBObyBuZWVkIHRvIGNoYW5nZSBzY29wZSBiZWNhdXNlIHRoZXJlIGlzIG5vIG9uZ29pbmcgdHJhbnNhY3Rpb24uXG4gICAgfSxcbiAgICB2aXA6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAvLyBUbyBiZSB1c2VkIGJ5IHN1YnNjcmliZXJzIHRvIHRoZSBvbigncmVhZHknKSBldmVudC5cbiAgICAgICAgLy8gVGhpcyB3aWxsIGxldCBjYWxsZXIgdGhyb3VnaCB0byBhY2Nlc3MgREIgZXZlbiB3aGVuIGl0IGlzIGJsb2NrZWQgd2hpbGUgdGhlIGRiLnJlYWR5KCkgc3Vic2NyaWJlcnMgYXJlIGZpcmluZy5cbiAgICAgICAgLy8gVGhpcyB3b3VsZCBoYXZlIHdvcmtlZCBhdXRvbWF0aWNhbGx5IGlmIHdlIHdlcmUgY2VydGFpbiB0aGF0IHRoZSBQcm92aWRlciB3YXMgdXNpbmcgRGV4aWUuUHJvbWlzZSBmb3IgYWxsIGFzeW5jcm9uaWMgb3BlcmF0aW9ucy4gVGhlIHByb21pc2UgUFNEXG4gICAgICAgIC8vIGZyb20gdGhlIHByb3ZpZGVyLmNvbm5lY3QoKSBjYWxsIHdvdWxkIHRoZW4gYmUgZGVyaXZlZCBhbGwgdGhlIHdheSB0byB3aGVuIHByb3ZpZGVyIHdvdWxkIGNhbGwgbG9jYWxEYXRhYmFzZS5hcHBseUNoYW5nZXMoKS4gQnV0IHNpbmNlXG4gICAgICAgIC8vIHRoZSBwcm92aWRlciBtb3JlIGxpa2VseSBpcyB1c2luZyBub24tcHJvbWlzZSBhc3luYyBBUElzIG9yIG90aGVyIHRoZW5hYmxlIGltcGxlbWVudGF0aW9ucywgd2UgY2Fubm90IGFzc3VtZSB0aGF0LlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgb25seSB1c2VmdWwgZm9yIG9uKCdyZWFkeScpIHN1YnNjcmliZXJzIHRoYXQgaXMgcmV0dXJuaW5nIGEgUHJvbWlzZSBmcm9tIHRoZSBldmVudC4gSWYgbm90IHVzaW5nIHZpcCgpXG4gICAgICAgIC8vIHRoZSBkYXRhYmFzZSBjb3VsZCBkZWFkbG9jayBzaW5jZSBpdCB3b250IG9wZW4gdW50aWwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGFuZCBhbnkgbm9uLVZJUGVkIG9wZXJhdGlvbiBzdGFydGVkIGJ5XG4gICAgICAgIC8vIHRoZSBjYWxsZXIgd2lsbCBub3QgcmVzb2x2ZSB1bnRpbCBkYXRhYmFzZSBpcyBvcGVuZWQuXG4gICAgICAgIHJldHVybiBuZXdTY29wZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBQU0QubGV0VGhyb3VnaCA9IHRydWU7IC8vIE1ha2Ugc3VyZSB3ZSBhcmUgbGV0IHRocm91Z2ggaWYgc3RpbGwgYmxvY2tpbmcgZGIgZHVlIHRvIG9ucmVhZHkgaXMgZmlyaW5nLlxuICAgICAgICAgICAgcmV0dXJuIGZuKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmM6IGZ1bmN0aW9uIChnZW5lcmF0b3JGbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgcnYgPSBhd2FpdEl0ZXJhdG9yKGdlbmVyYXRvckZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgICAgIGlmICghcnYgfHwgdHlwZW9mIHJ2LnRoZW4gIT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocnYpO1xuICAgICAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHNwYXduOiBmdW5jdGlvbiAoZ2VuZXJhdG9yRm4sIGFyZ3MsIHRoaXopIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBydiA9IGF3YWl0SXRlcmF0b3IoZ2VuZXJhdG9yRm4uYXBwbHkodGhpeiwgYXJncyB8fCBbXSkpO1xuICAgICAgICAgICAgaWYgKCFydiB8fCB0eXBlb2YgcnYudGhlbiAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJ2KTtcbiAgICAgICAgICAgIHJldHVybiBydjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGlvbihlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gRGV4aWUuY3VycmVudFRyYW5zYWN0aW9uIHByb3BlcnR5XG4gICAgY3VycmVudFRyYW5zYWN0aW9uOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUFNELnRyYW5zIHx8IG51bGw7IH1cbiAgICB9LFxuICAgIHdhaXRGb3I6IGZ1bmN0aW9uIChwcm9taXNlT3JGdW5jdGlvbiwgb3B0aW9uYWxUaW1lb3V0KSB7XG4gICAgICAgIC8vIElmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIGludm9rZSBpdCBhbmQgcGFzcyB0aGUgcmV0dXJuaW5nIHZhbHVlIHRvIFRyYW5zYWN0aW9uLndhaXRGb3IoKVxuICAgICAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh0eXBlb2YgcHJvbWlzZU9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgPyBEZXhpZS5pZ25vcmVUcmFuc2FjdGlvbihwcm9taXNlT3JGdW5jdGlvbikgOiBwcm9taXNlT3JGdW5jdGlvbilcbiAgICAgICAgICAgIC50aW1lb3V0KG9wdGlvbmFsVGltZW91dCB8fCA2MDAwMCk7IC8vIERlZmF1bHQgdGhlIHRpbWVvdXQgdG8gb25lIG1pbnV0ZS4gQ2FsbGVyIG1heSBzcGVjaWZ5IEluZmluaXR5IGlmIHJlcXVpcmVkLiAgICAgICBcbiAgICAgICAgLy8gUnVuIGdpdmVuIHByb21pc2Ugb24gY3VycmVudCB0cmFuc2FjdGlvbi4gSWYgbm8gY3VycmVudCB0cmFuc2FjdGlvbiwganVzdCByZXR1cm4gYSBEZXhpZSBwcm9taXNlIGJhc2VkXG4gICAgICAgIC8vIG9uIGdpdmVuIHZhbHVlLlxuICAgICAgICByZXR1cm4gUFNELnRyYW5zID8gUFNELnRyYW5zLndhaXRGb3IocHJvbWlzZSkgOiBwcm9taXNlO1xuICAgIH0sXG4gICAgLy8gRXhwb3J0IG91ciBQcm9taXNlIGltcGxlbWVudGF0aW9uIHNpbmNlIGl0IGNhbiBiZSBoYW5keSBhcyBhIHN0YW5kYWxvbmUgUHJvbWlzZSBpbXBsZW1lbnRhdGlvblxuICAgIFByb21pc2U6IFByb21pc2UsXG4gICAgLy8gRGV4aWUuZGVidWcgcHJvcHRlcnk6XG4gICAgLy8gRGV4aWUuZGVidWcgPSBmYWxzZVxuICAgIC8vIERleGllLmRlYnVnID0gdHJ1ZVxuICAgIC8vIERleGllLmRlYnVnID0gXCJkZXhpZVwiIC0gZG9uJ3QgaGlkZSBkZXhpZSdzIHN0YWNrIGZyYW1lcy5cbiAgICBkZWJ1Zzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRlYnVnOyB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc2V0RGVidWcodmFsdWUsIHZhbHVlID09PSAnZGV4aWUnID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSA6IGRleGllU3RhY2tGcmFtZUZpbHRlcik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vIEV4cG9ydCBvdXIgZGVyaXZlL2V4dGVuZC9vdmVycmlkZSBtZXRob2RvbG9neVxuICAgIGRlcml2ZTogZGVyaXZlLFxuICAgIGV4dGVuZDogZXh0ZW5kLFxuICAgIHByb3BzOiBwcm9wcyxcbiAgICBvdmVycmlkZTogb3ZlcnJpZGUsXG4gICAgLy8gRXhwb3J0IG91ciBFdmVudHMoKSBmdW5jdGlvbiAtIGNhbiBiZSBoYW5keSBhcyBhIHRvb2xraXRcbiAgICBFdmVudHM6IEV2ZW50cyxcbiAgICAvLyBVdGlsaXRpZXNcbiAgICBnZXRCeUtleVBhdGg6IGdldEJ5S2V5UGF0aCxcbiAgICBzZXRCeUtleVBhdGg6IHNldEJ5S2V5UGF0aCxcbiAgICBkZWxCeUtleVBhdGg6IGRlbEJ5S2V5UGF0aCxcbiAgICBzaGFsbG93Q2xvbmU6IHNoYWxsb3dDbG9uZSxcbiAgICBkZWVwQ2xvbmU6IGRlZXBDbG9uZSxcbiAgICBnZXRPYmplY3REaWZmOiBnZXRPYmplY3REaWZmLFxuICAgIGFzYXA6IGFzYXAsXG4gICAgbWF4S2V5OiBtYXhLZXksXG4gICAgbWluS2V5OiBtaW5LZXksXG4gICAgLy8gQWRkb24gcmVnaXN0cnlcbiAgICBhZGRvbnM6IFtdLFxuICAgIC8vIEdsb2JhbCBEQiBjb25uZWN0aW9uIGxpc3RcbiAgICBjb25uZWN0aW9uczogY29ubmVjdGlvbnMsXG4gICAgTXVsdGlNb2RpZnlFcnJvcjogZXhjZXB0aW9ucy5Nb2RpZnksXG4gICAgZXJybmFtZXM6IGVycm5hbWVzLFxuICAgIC8vIEV4cG9ydCBvdGhlciBzdGF0aWMgY2xhc3Nlc1xuICAgIEluZGV4U3BlYzogSW5kZXhTcGVjLFxuICAgIFRhYmxlU2NoZW1hOiBUYWJsZVNjaGVtYSxcbiAgICAvL1xuICAgIC8vIERlcGVuZGVuY2llc1xuICAgIC8vXG4gICAgLy8gVGhlc2Ugd2lsbCBhdXRvbWF0aWNhbGx5IHdvcmsgaW4gYnJvd3NlcnMgd2l0aCBpbmRleGVkREIgc3VwcG9ydCwgb3Igd2hlcmUgYW4gaW5kZXhlZERCIHBvbHlmaWxsIGhhcyBiZWVuIGluY2x1ZGVkLlxuICAgIC8vXG4gICAgLy8gSW4gbm9kZS5qcywgaG93ZXZlciwgdGhlc2UgcHJvcGVydGllcyBtdXN0IGJlIHNldCBcIm1hbnVhbGx5XCIgYmVmb3JlIGluc3RhbnNpYXRpbmcgYSBuZXcgRGV4aWUoKS5cbiAgICAvLyBGb3Igbm9kZS5qcywgeW91IG5lZWQgdG8gcmVxdWlyZSBpbmRleGVkZGItanMgb3Igc2ltaWxhciBhbmQgdGhlbiBzZXQgdGhlc2UgZGVwcy5cbiAgICAvL1xuICAgIGRlcGVuZGVuY2llczoge1xuICAgICAgICAvLyBSZXF1aXJlZDpcbiAgICAgICAgaW5kZXhlZERCOiBfZ2xvYmFsLmluZGV4ZWREQiB8fCBfZ2xvYmFsLm1vekluZGV4ZWREQiB8fCBfZ2xvYmFsLndlYmtpdEluZGV4ZWREQiB8fCBfZ2xvYmFsLm1zSW5kZXhlZERCLFxuICAgICAgICBJREJLZXlSYW5nZTogX2dsb2JhbC5JREJLZXlSYW5nZSB8fCBfZ2xvYmFsLndlYmtpdElEQktleVJhbmdlXG4gICAgfSxcbiAgICAvLyBBUEkgVmVyc2lvbiBOdW1iZXI6IFR5cGUgTnVtYmVyLCBtYWtlIHN1cmUgdG8gYWx3YXlzIHNldCBhIHZlcnNpb24gbnVtYmVyIHRoYXQgY2FuIGJlIGNvbXBhcmFibGUgY29ycmVjdGx5LiBFeGFtcGxlOiAwLjksIDAuOTEsIDAuOTIsIDEuMCwgMS4wMSwgMS4xLCAxLjIsIDEuMjEsIGV0Yy5cbiAgICBzZW1WZXI6IERFWElFX1ZFUlNJT04sXG4gICAgdmVyc2lvbjogREVYSUVfVkVSU0lPTi5zcGxpdCgnLicpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKG4pIHsgcmV0dXJuIHBhcnNlSW50KG4pOyB9KVxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChwLCBjLCBpKSB7IHJldHVybiBwICsgKGMgLyBNYXRoLnBvdygxMCwgaSAqIDIpKTsgfSksXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RmYWhsYW5kZXIvRGV4aWUuanMvaXNzdWVzLzE4NlxuICAgIC8vIHR5cGVzY3JpcHQgY29tcGlsZXIgdHNjIGluIG1vZGUgdHMtLT5lczUgJiBjb21tb25KUywgd2lsbCBleHBlY3QgcmVxdWlyZSgpIHRvIHJldHVyblxuICAgIC8vIHguZGVmYXVsdC4gV29ya2Fyb3VuZDogU2V0IERleGllLmRlZmF1bHQgPSBEZXhpZS5cbiAgICBkZWZhdWx0OiBEZXhpZSxcbiAgICAvLyBNYWtlIGl0IHBvc3NpYmxlIHRvIGltcG9ydCB7RGV4aWV9IChub24tZGVmYXVsdCBpbXBvcnQpXG4gICAgLy8gUmVhc29uIDE6IE1heSBzd2l0Y2ggdG8gdGhhdCBpbiBmdXR1cmUuXG4gICAgLy8gUmVhc29uIDI6IFdlIGRlY2xhcmUgaXQgYm90aCBkZWZhdWx0IGFuZCBuYW1lZCBleHBvcnRlZCBpbiBkLnRzIHRvIG1ha2UgaXQgcG9zc2libGVcbiAgICAvLyB0byBsZXQgYWRkb25zIGV4dGVuZCB0aGUgRGV4aWUgaW50ZXJmYWNlIHdpdGggVHlwZXNjcmlwdCAyLjEgKHdvcmtzIG9ubHkgd2hlbiBleHBsaWNpdGVseVxuICAgIC8vIGV4cG9ydGluZyB0aGUgc3ltYm9sLCBub3QganVzdCBkZWZhdWx0IGV4cG9ydGluZylcbiAgICBEZXhpZTogRGV4aWVcbn0pO1xuLy8gTWFwIERPTUVycm9ycyBhbmQgRE9NRXhjZXB0aW9ucyB0byBjb3JyZXNwb25kaW5nIERleGllIGVycm9ycy4gTWF5IGNoYW5nZSBpbiBEZXhpZSB2Mi4wLlxuUHJvbWlzZS5yZWplY3Rpb25NYXBwZXIgPSBtYXBFcnJvcjtcbi8vIEluaXRpYWxpemUgZGJOYW1lc0RCICh3b24ndCBldmVyIGJlIG9wZW5lZCBvbiBjaHJvbWl1bSBicm93c2VycycpXG5kYk5hbWVzREIgPSBuZXcgRGV4aWUoJ19fZGJuYW1lcycpO1xuZGJOYW1lc0RCLnZlcnNpb24oMSkuc3RvcmVzKHsgZGJuYW1lczogJ25hbWUnIH0pO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBNaWdyYXRlIGZyb20gRGV4aWUgMS54IGRhdGFiYXNlIG5hbWVzIHN0b3JlZCBpbiBsb2NhbFN0b3JhZ2U6XG4gICAgdmFyIERCTkFNRVMgPSAnRGV4aWUuRGF0YWJhc2VOYW1lcyc7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09IHVuZGVmaW5lZCAmJiBfZ2xvYmFsLmRvY3VtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIEhhdmUgbG9jYWxTdG9yYWdlIGFuZCBpcyBub3QgZXhlY3V0aW5nIGluIGEgd29ya2VyLiBMZXRzIG1pZ3JhdGUgZnJvbSBEZXhpZSAxLnguXG4gICAgICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKERCTkFNRVMpIHx8IFwiW11cIilcbiAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gZGJOYW1lc0RCLmRibmFtZXMucHV0KHsgbmFtZTogbmFtZSB9KS5jYXRjaChub3ApOyB9KTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKERCTkFNRVMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChfZSkgeyB9XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBEZXhpZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRleGllLmVzLmpzLm1hcFxuIiwiaW1wb3J0IERleGllIGZyb20gXCJkZXhpZVwiO1xuXG4vKipcbiAqIFdyYXBwZXIgY2xhc3MgZm9yIERleGllLlxuICogV2l0aCBtZXRob2RzIGZvciBpbmRleGVkRGJcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgRGV4eWUgZXh0ZW5kcyBEZXhpZSB7XG4gICAgcHJpdmF0ZSByZXNwb25zZXM6IERleGllLlRhYmxlPElSYXRlc1Jlc3BvbmNlLCBudW1iZXI+O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwicmF0ZXNEQlwiKTtcbiAgICAgICAgdGhpcy52ZXJzaW9uKDEpLnN0b3Jlcyh7XG4gICAgICAgICAgICByZXNwb25zZXM6IFwiKytpZCwgYmFzZSwgZGF0ZSwgcmF0ZXMsIHN1Y2Nlc3MsIHRpbWVzdGFtcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TGF0ZXN0UmVzcG9uY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhYmxlKFwicmVzcG9uc2VzXCIpXG4gICAgICAgICAgICAub3JkZXJCeShcImlkXCIpXG4gICAgICAgICAgICAubGFzdCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsYXRlc3RSZXNwb25jZShyZXNwb25jZU9uZSwgcmVzcG9uY2VUd28pOiBJUmF0ZXNSZXNwb25jZSB7XG4gICAgICAgIGNvbnN0IGxhdGVzdCA9IHJlc3BvbmNlVHdvIHx8IHJlc3BvbmNlT25lO1xuICAgICAgICB0aGlzLnRhYmxlKFwicmVzcG9uc2VzXCIpLnB1dChsYXRlc3QpO1xuICAgICAgICByZXR1cm4gbGF0ZXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0NhY2hlZERhdGFWYWxpZChyZXNwb25jZSkge1xuICAgICAgICAvLyB0b2RvIGRlY2lkZSBmZXRjaCBvciBub3QgdG8gbWF4IHZhbGlkIHRpbWVcbiAgICAgICAgcmV0dXJuIHJlc3BvbmNlO1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIElSYXRlc1Jlc3BvbmNlIHtcbiAgICAvLyB0b2RvIHJlZmluZSB0eXBlc1xuICAgIGlkOiBudW1iZXI7XG4gICAgYmFzZTogbnVtYmVyO1xuICAgIGRhdGU6IG51bWJlcjtcbiAgICByYXRlczogbnVtYmVyO1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG59XG4iLCJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IEFubnlhbmcsIElDb252ZXJ0RGF0YSB9IGZyb20gXCIuL2FubnlhbmdcIjtcbmltcG9ydCB7IE9ubGluZSB9IGZyb20gXCIuL29ubGluZVwiO1xuXG4vKipcbiAqIERvbSBtYW5pcHVsYXRpb24gY2xhc3NcbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgRG9tIHtcbiAgICBwdWJsaWMgZWxlbWVudHM6IE1hcDxIVE1MRWxlbWVudD4gPSBuZXcgTWFwPEhUTUxFbGVtZW50PigpO1xuICAgIHB1YmxpYyBjb252ZXJ0UmVxdXN0JCA9IG5ldyBTdWJqZWN0PElDb252ZXJ0RGF0YT4oKVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhbm55YW5nOiBBbm55YW5nLCBwcml2YXRlIG9ubGluZTogT25saW5lKXtcbiAgICAgICAgdGhpcy5wYXJzZURvbSgpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuYW5ueWFuZy5hY3RpdmF0ZWQkLnN1YnNjcmliZSgoYWN0aXZhdGVkOiBib29sZWFuKSA9PiB0aGlzLmFjdGl2YXRlTGlzdGVuQnV0dG9uKGFjdGl2YXRlZCkpO1xuICAgICAgICB0aGlzLmFubnlhbmcuY29udmVydFJlcXVzdCQuc3Vic2NyaWJlKChjb252ZXJ0RGF0YTogSUNvbnZlcnREYXRhKSA9PiB0aGlzLnNldFZhbHVlcyhjb252ZXJ0RGF0YSkpO1xuICAgICAgICB0aGlzLm9ubGluZS5vbmxpbmUkLnN1YnNjcmliZSgoc3RhdHVzOiBzdHJpbmcpID0+IHRoaXMuc2V0T25saW5lU3RhdHVzKHN0YXR1cykpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIHBhcnNlRG9tKCl7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuYWRkKFwibGlzdGVuXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdGVuXCIpKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5hZGQoXCJjdXJyZW5jeS1mcm9tXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVuY3ktZnJvbVwiKSk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuYWRkKFwiY3VycmVuY3ktdG9cIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXJyZW5jeS10b1wiKSk7XG4gICAgICAgIHRoaXMuZWxlbWVudHMuYWRkKFwiYW1vdW50XCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYW1vdW50XCIpKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5hZGQoXCJyZXN1bHRcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXN1bHRcIikpO1xuICAgICAgICB0aGlzLmVsZW1lbnRzLmFkZChcIm9ubGluZVwiLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9ubGluZVwiKSk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgYWRkRXZlbnRMaXN0ZW5lcnMoKXtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5nZXQoXCJsaXN0ZW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuYW5ueWFuZy5zdGFydCgpKTtcbiAgICAgICAgdGhpcy5lbGVtZW50cy5nZXQoXCJjdXJyZW5jeS1mcm9tXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4gdGhpcy5jb252ZXJ0RnJvbURvbSgpKSBcbiAgICAgICAgdGhpcy5lbGVtZW50cy5nZXQoXCJjdXJyZW5jeS10b1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHRoaXMuY29udmVydEZyb21Eb20oKSlcbiAgICAgICAgdGhpcy5lbGVtZW50cy5nZXQoXCJhbW91bnRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHRoaXMuY29udmVydEZyb21Eb20oKSlcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGNvbnZlcnRGcm9tRG9tKCl7XG4gICAgICAgIGlmKCEoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJhbW91bnRcIikpLnZhbHVlIHx8ICEoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJjdXJyZW5jeS1mcm9tXCIpKS52YWx1ZSB8fCAhKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudHMuZ2V0KFwiY3VycmVuY3ktdG9cIikpLnZhbHVlKSByZXR1cm47XG4gICAgICAgIHRoaXMuY29udmVydFJlcXVzdCQubmV4dCh7XG4gICAgICAgICAgICBhbW91bnQ6IHBhcnNlSW50KCg8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnRzLmdldChcImFtb3VudFwiKSkudmFsdWUpLFxuICAgICAgICAgICAgY3VycmVuY3lGcm9tOiAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJjdXJyZW5jeS1mcm9tXCIpKS52YWx1ZSwgXG4gICAgICAgICAgICBjdXJyZW5jeVRvOiAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJjdXJyZW5jeS10b1wiKSkudmFsdWVcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsdWVzKGNvbnZlcnREYXRhKXtcbiAgICAgICAgaWYoKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudHMuZ2V0KFwiY3VycmVuY3ktZnJvbVwiKSkudmFsdWUgIT0gY29udmVydERhdGEuY3VycmVuY3lGcm9tKXtcbiAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnRzLmdldChcImN1cnJlbmN5LWZyb21cIikpLnZhbHVlID0gY29udmVydERhdGEuY3VycmVuY3lGcm9tO1xuICAgICAgICB9XG4gICAgICAgIGlmKCg8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnRzLmdldChcImN1cnJlbmN5LXRvXCIpKS52YWx1ZSAhPSBjb252ZXJ0RGF0YS5jdXJyZW5jeVRvKXtcbiAgICAgICAgICAgICg8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnRzLmdldChcImN1cnJlbmN5LXRvXCIpKS52YWx1ZSA9IGNvbnZlcnREYXRhLmN1cnJlbmN5VG87XG4gICAgICAgIH1cbiAgICAgICAgaWYoKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudHMuZ2V0KFwiYW1vdW50XCIpKS52YWx1ZSAhPSBjb252ZXJ0RGF0YS5hbW91bnQudG9GaXhlZCgyKSl7XG4gICAgICAgICAgICAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJhbW91bnRcIikpLnZhbHVlID0gY29udmVydERhdGEuYW1vdW50LnRvRml4ZWQoMik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFjdGl2YXRlTGlzdGVuQnV0dG9uKGFjdGl2YXRlZDogYm9vbGVhbil7XG4gICAgICAgIGFjdGl2YXRlZCBcbiAgICAgICAgICAgID8gKDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuZWxlbWVudHMuZ2V0KFwibGlzdGVuXCIpKS5jbGFzc0xpc3QuYWRkKFwiYmctc3VjY2Vzc1wiKVxuICAgICAgICAgICAgOiAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJsaXN0ZW5cIikpLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1zdWNjZXNzXCIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0T25saW5lU3RhdHVzKHN0YXR1czogc3RyaW5nKXtcbiAgICAgICAgc3RhdHVzICE9IFwib25saW5lXCIgXG4gICAgICAgICAgICA/ICg8SFRNTElucHV0RWxlbWVudD50aGlzLmVsZW1lbnRzLmdldChcIm9ubGluZVwiKSkuY2xhc3NMaXN0LmFkZChcImJnLWRhbmdlclwiKVxuICAgICAgICAgICAgOiAoPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5lbGVtZW50cy5nZXQoXCJvbmxpbmVcIikpLmNsYXNzTGlzdC5yZW1vdmUoXCJiZy1kYW5nZXJcIik7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmVsZW1lbnRzLmdldChcIm9ubGluZVwiKS5pbm5lckhUTUwgPSBzdGF0dXMudG9VcHBlckNhc2UoKTtcbiAgICB9XG59XG5cbmNsYXNzIE1hcDxUPiB7XG4gICAgcHJpdmF0ZSBpdGVtczogeyBba2V5OiBzdHJpbmddOiBUIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pdGVtcyA9IHt9O1xuICAgIH1cblxuICAgIGFkZChrZXk6IHN0cmluZywgdmFsdWU6IFQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pdGVtc1trZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5pdGVtcztcbiAgICB9XG5cbiAgICBnZXQoa2V5OiBzdHJpbmcpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNba2V5XTtcbiAgICB9XG59IiwiaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBEb20gfSBmcm9tIFwiLi9kb21cIjtcblxuLyoqXG4gKiBPbmxpbmUgY2xhc3MgbGlzdGVucyB0byBuZXR3b3JrIGFuZCBmaXJlcyBzdHJlYW0gb24gbmV0d29yayBzdGF0dXMgY2hhbmdlcy5cbiAqIEBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgT25saW5lIHtcbiAgIC8qKlxuICAgICogU3RyZWFtIHRoYXQgZmlyZXMgd2hlbmV2ZXIgbmV0d29yayBzdGF0dXMgY2hhbmdlcy5cbiAgICAqIEBwdWJsaWNcbiAgICAqL1xuICAgIHB1YmxpYyBvbmxpbmUkID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG4gICAvKipcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQWRkZXMgbmV0d29yayBldmVudCBsaXN0ZW5lcnNcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCl7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsICgpID0+IHRoaXMudXBkYXRlT25saW5lU3RhdHVzKCkpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgKCkgPT4gdGhpcy51cGRhdGVPbmxpbmVTdGF0dXMoKSk7XG4gICAgICAgIHRoaXMudXBkYXRlT25saW5lU3RhdHVzKCk7XG4gICAgfVxuXG4gICAvKipcbiAgICAqIEBtZXRob2RcbiAgICAqIEZpcmVzIGV2ZW50IGluIHN0cmVhbVxuICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVPbmxpbmVTdGF0dXMoKSB7XG4gICAgICAgIHRoaXMub25saW5lJC5uZXh0KG5hdmlnYXRvci5vbkxpbmUgPyBcIm9ubGluZVwiIDogXCJvZmZsaW5lXCIpO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQSBjbGFzcyBmb3IgcmVnaXN0ZXJpbmcgYW5kIGNvbnRyb2xsaW5nIHNlcnZpY2Ugd29ya2VyLlxuICogQGNsYXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlV29ya2VyQ29udHJvbGxlciB7XG4gICAvKipcbiAgICAqIExpc3Qgb2Ygc2VydmljZSB3b3JrZXJzIHRoYXQgbmVlZHMgdG8gYmUgcmVnaXN0ZXJlZFxuICAgICogQHR5cGUgQXJyYXk8c3RyaW5nPlxuICAgICogQHByaXZhdGVcbiAgICAqL1xuICAgIHByaXZhdGUgc2VydmljZVdvcmtlcnMgPSBbXG4gICAgICAgIFwiL2RhdGEtc3luY2hyb25pc2VyLnNlcnZpY2UuanNcIixcbiAgICBdO1xuXG4gICAvKipcbiAgICAqIEBjb25zdHJ1Y3RvclxuICAgICogQ2hlY2tzIGV4aXN0aW5nIHdvcmtlciBhbmQgcmVnaXN0ZXJzIG5ldyBvbiBpZiBpdFwicyB1bnJlZ2lzdGVyZWRcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBpZiAoIShcInNlcnZpY2VXb3JrZXJcIiBpbiBuYXZpZ2F0b3IpKSByZXR1cm47XG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKVxuICAgICAgICAgICAgLnRoZW4oKHJlZ2lzdHJhdGlvbnM6IFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb25bXSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25zLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlcnMuZm9yRWFjaCgoc2VydmljZVdvcmtlcjogc3RyaW5nKSA9PiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlclxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlZ2lzdGVyKHNlcnZpY2VXb3JrZXIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFubnlhbmcgfSBmcm9tIFwiLi9hbm55YW5nXCI7XG5pbXBvcnQgeyBDb252ZXJ0ZXIgfSBmcm9tIFwiLi9jb252ZXJ0ZXJcIjtcbmltcG9ydCB7IERhdGFDb2xsZWN0b3IgfSBmcm9tIFwiLi9kYXRhLWNvbGxlY3RvclwiO1xuaW1wb3J0IHsgRGV4eWUgfSBmcm9tIFwiLi9kZXh5ZVwiO1xuaW1wb3J0IHsgRG9tIH0gZnJvbSBcIi4vZG9tXCI7XG5pbXBvcnQgeyBPbmxpbmUgfSBmcm9tIFwiLi9vbmxpbmVcIjtcbmltcG9ydCB7IFNlcnZpY2VXb3JrZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vc2VydmljZS13b3JrZXItY29udHJvbGxlclwiO1xuXG4vKipcbiAqIEFwcGxpY2F0aW9uIEJvb3RzdHJhcCBjbGFzc1xuICogRGVjbGFyZXMgYWxsIGNsYXNlc1xuICogQGNsYXNzXG4gKi9cbmNsYXNzIEFwcENsYXNzIHtcbiAgICBwdWJsaWMgc2VydmljZVdvcmtlckNvbnRyb2xsZXIgPSBuZXcgU2VydmljZVdvcmtlckNvbnRyb2xsZXIoKTtcbiAgICBwdWJsaWMgZGV4eWUgPSBuZXcgRGV4eWUoKTtcbiAgICBwdWJsaWMgZGF0YUNvbGxlY3RvciA9IG5ldyBEYXRhQ29sbGVjdG9yKHRoaXMuZGV4eWUpO1xuICAgIHB1YmxpYyBhbm55YW5nID0gbmV3IEFubnlhbmcoKTtcbiAgICBwdWJsaWMgb25saW5lID0gbmV3IE9ubGluZSgpO1xuICAgIHB1YmxpYyBkb20gPSBuZXcgRG9tKHRoaXMuYW5ueWFuZywgdGhpcy5vbmxpbmUpO1xuICAgIHB1YmxpYyBjb252ZXJ0ZXIgPSBuZXcgQ29udmVydGVyKHRoaXMuZG9tLCB0aGlzLmFubnlhbmcsIHRoaXMuZGF0YUNvbGxlY3Rvcik7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiBuZXcgQXBwQ2xhc3MoKSk7XG4iXSwibmFtZXMiOlsiZXh0ZW5kU3RhdGljcyIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJkIiwiYiIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fZXh0ZW5kcyIsIl9fIiwidGhpcyIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiY3JlYXRlIiwiaXNGdW5jdGlvbiIsIngiLCJfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MiLCJjb25maWciLCJQcm9taXNlIiwidW5kZWZpbmVkIiwidXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyIsInZhbHVlIiwiRXJyb3IiLCJzdGFjayIsImhvc3RSZXBvcnRFcnJvciIsImVyciIsInNldFRpbWVvdXQiLCJlbXB0eSIsImNsb3NlZCIsIm5leHQiLCJlcnJvciIsImNvbXBsZXRlIiwiaXNBcnJheSIsImxlbmd0aCIsImlzT2JqZWN0IiwidHJ5Q2F0Y2hUYXJnZXQiLCJlcnJvck9iamVjdCIsImUiLCJ0cnlDYXRjaGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ0cnlDYXRjaCIsImZuIiwiVW5zdWJzY3JpcHRpb25FcnJvciIsIl9zdXBlciIsImVycm9ycyIsIl90aGlzIiwiY2FsbCIsIm1hcCIsImkiLCJ0b1N0cmluZyIsImpvaW4iLCJuYW1lIiwidHNsaWJfMS5fX2V4dGVuZHMiLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIl9wYXJlbnQiLCJfcGFyZW50cyIsIl9zdWJzY3JpcHRpb25zIiwiX3Vuc3Vic2NyaWJlIiwiaGFzRXJyb3JzIiwiX2EiLCJpbmRleCIsImxlbiIsInJlbW92ZSIsImZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyIsInN1YiIsImNvbmNhdCIsInB1c2giLCJhZGQiLCJ0ZWFyZG93biIsIkVNUFRZIiwic3Vic2NyaXB0aW9uIiwiX2FkZFBhcmVudCIsInRtcCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25JbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiU3ltYm9sIiwiZm9yIiwiU3Vic2NyaWJlciIsImRlc3RpbmF0aW9uT3JOZXh0Iiwic3luY0Vycm9yVmFsdWUiLCJzeW5jRXJyb3JUaHJvd24iLCJzeW5jRXJyb3JUaHJvd2FibGUiLCJpc1N0b3BwZWQiLCJkZXN0aW5hdGlvbiIsImVtcHR5T2JzZXJ2ZXIiLCJpc1RydXN0ZWRTdWJzY3JpYmVyIiwidHJ1c3RlZFN1YnNjcmliZXIiLCJyeFN1YnNjcmliZXJTeW1ib2wiLCJTYWZlU3Vic2NyaWJlciIsInN1YnNjcmliZXIiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJfcGFyZW50U3Vic2NyaWJlciIsIm9ic2VydmVyT3JOZXh0IiwiY29udGV4dCIsImJpbmQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsIndyYXBwZWRDb21wbGV0ZSIsIm9iaiIsInRvU3Vic2NyaWJlciIsIm5leHRPck9ic2VydmVyIiwib2JzZXJ2YWJsZSIsIm5vb3AiLCJwaXBlRnJvbUFycmF5IiwiZm5zIiwiaW5wdXQiLCJwcmV2IiwiT2JzZXJ2YWJsZSIsInN1YnNjcmliZSIsIl9pc1NjYWxhciIsIl9zdWJzY3JpYmUiLCJsaWZ0Iiwib3BlcmF0b3IiLCJzb3VyY2UiLCJzaW5rIiwiX3RyeVN1YnNjcmliZSIsImZvckVhY2giLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsIlN5bWJvbF9vYnNlcnZhYmxlIiwicGlwZSIsIm9wZXJhdGlvbnMiLCJfaSIsInRvUHJvbWlzZSIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIiwiU3ViamVjdFN1YnNjcmlwdGlvbiIsInN1YmplY3QiLCJvYnNlcnZlcnMiLCJzdWJzY3JpYmVySW5kZXgiLCJTdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3QiLCJoYXNFcnJvciIsInRocm93bkVycm9yIiwiQW5vbnltb3VzU3ViamVjdCIsImNvcHkiLCJzbGljZSIsImFzT2JzZXJ2YWJsZSIsInJlZkNvdW50IiwiUmVmQ291bnRPcGVyYXRvciIsImNvbm5lY3RhYmxlIiwiX3JlZkNvdW50IiwicmVmQ291bnRlciIsIlJlZkNvdW50U3Vic2NyaWJlciIsImNvbm5lY3Rpb24iLCJjb25uZWN0Iiwic2hhcmVkQ29ubmVjdGlvbiIsIl9jb25uZWN0aW9uIiwiQ29ubmVjdGFibGVPYnNlcnZhYmxlIiwic3ViamVjdEZhY3RvcnkiLCJfaXNDb21wbGV0ZSIsImdldFN1YmplY3QiLCJfc3ViamVjdCIsIkNvbm5lY3RhYmxlU3Vic2NyaWJlciIsImhpZ2hlck9yZGVyUmVmQ291bnQiLCJHcm91cEJ5U3Vic2NyaWJlciIsImtleVNlbGVjdG9yIiwiZWxlbWVudFNlbGVjdG9yIiwiZHVyYXRpb25TZWxlY3RvciIsInN1YmplY3RTZWxlY3RvciIsImdyb3VwcyIsImF0dGVtcHRlZFRvVW5zdWJzY3JpYmUiLCJjb3VudCIsImtleSIsIl9ncm91cCIsIk1hcCIsImVsZW1lbnQiLCJncm91cCIsImdldCIsInNldCIsImdyb3VwZWRPYnNlcnZhYmxlIiwiR3JvdXBlZE9ic2VydmFibGUiLCJkdXJhdGlvbiIsIkdyb3VwRHVyYXRpb25TdWJzY3JpYmVyIiwiY2xlYXIiLCJyZW1vdmVHcm91cCIsImRlbGV0ZSIsImdyb3VwU3ViamVjdCIsInJlZkNvdW50U3Vic2NyaXB0aW9uIiwiSW5uZXJSZWZDb3VudFN1YnNjcmlwdGlvbiIsIkJlaGF2aW9yU3ViamVjdCIsIl92YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZ2V0VmFsdWUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiQWN0aW9uIiwic2NoZWR1bGVyIiwid29yayIsInNjaGVkdWxlIiwic3RhdGUiLCJkZWxheSIsIkFzeW5jQWN0aW9uIiwicGVuZGluZyIsImlkIiwicmVjeWNsZUFzeW5jSWQiLCJyZXF1ZXN0QXN5bmNJZCIsInNldEludGVydmFsIiwiZmx1c2giLCJjbGVhckludGVydmFsIiwiZXhlY3V0ZSIsIl9leGVjdXRlIiwiZXJyb3JlZCIsImVycm9yVmFsdWUiLCJhY3Rpb25zIiwiUXVldWVBY3Rpb24iLCJTY2hlZHVsZXIiLCJTY2hlZHVsZXJBY3Rpb24iLCJub3ciLCJEYXRlIiwiQXN5bmNTY2hlZHVsZXIiLCJkZWxlZ2F0ZSIsImFjdGl2ZSIsInNjaGVkdWxlZCIsImFjdGlvbiIsInNoaWZ0IiwiUXVldWVTY2hlZHVsZXIiLCJxdWV1ZSIsImVtcHR5U2NoZWR1bGVkIiwiaXNTY2hlZHVsZXIiLCJzdWJzY3JpYmVUb0FycmF5IiwiYXJyYXkiLCJmcm9tQXJyYXkiLCJzY2FsYXIiLCJyZXN1bHQiLCJvZiIsImFyZ3MiLCJwb3AiLCJ0aHJvd0Vycm9yIiwiZGlzcGF0Y2giLCJOb3RpZmljYXRpb24iLCJraW5kIiwiaGFzVmFsdWUiLCJvYnNlcnZlIiwib2JzZXJ2ZXIiLCJkbyIsImFjY2VwdCIsInRvT2JzZXJ2YWJsZSIsImNyZWF0ZU5leHQiLCJ1bmRlZmluZWRWYWx1ZU5vdGlmaWNhdGlvbiIsImNyZWF0ZUVycm9yIiwiY3JlYXRlQ29tcGxldGUiLCJjb21wbGV0ZU5vdGlmaWNhdGlvbiIsIk9ic2VydmVPblN1YnNjcmliZXIiLCJhcmciLCJub3RpZmljYXRpb24iLCJzY2hlZHVsZU1lc3NhZ2UiLCJPYnNlcnZlT25NZXNzYWdlIiwiUmVwbGF5U3ViamVjdCIsImJ1ZmZlclNpemUiLCJ3aW5kb3dUaW1lIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJfZXZlbnRzIiwiX2luZmluaXRlVGltZVdpbmRvdyIsIl9idWZmZXJTaXplIiwiX3dpbmRvd1RpbWUiLCJuZXh0SW5maW5pdGVUaW1lV2luZG93IiwibmV4dFRpbWVXaW5kb3ciLCJSZXBsYXlFdmVudCIsIl9nZXROb3ciLCJfdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMiLCJldmVudHNDb3VudCIsInNwbGljZUNvdW50IiwidGltZSIsIk1hdGgiLCJtYXgiLCJBc3luY1N1YmplY3QiLCJoYXNOZXh0IiwiaGFzQ29tcGxldGVkIiwibmV4dEhhbmRsZSIsInRhc2tzQnlIYW5kbGUiLCJydW5JZlByZXNlbnQiLCJoYW5kbGUiLCJjYiIsIkltbWVkaWF0ZSIsInNldEltbWVkaWF0ZSIsInRoZW4iLCJjbGVhckltbWVkaWF0ZSIsIkFzYXBBY3Rpb24iLCJBc2FwU2NoZWR1bGVyIiwiYXNhcCIsImFzeW5jIiwiQW5pbWF0aW9uRnJhbWVBY3Rpb24iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIkFuaW1hdGlvbkZyYW1lU2NoZWR1bGVyIiwiYW5pbWF0aW9uRnJhbWUiLCJWaXJ0dWFsVGltZVNjaGVkdWxlciIsIm1heEZyYW1lcyIsIlZpcnR1YWxBY3Rpb24iLCJmcmFtZSIsImZyYW1lVGltZUZhY3RvciIsInNvcnQiLCJzb3J0QWN0aW9ucyIsImEiLCJBcmd1bWVudE91dE9mUmFuZ2VFcnJvciIsIkVtcHR5RXJyb3IiLCJUaW1lb3V0RXJyb3IiLCJNYXBTdWJzY3JpYmVyIiwicHJvamVjdCIsInRoaXNBcmciLCJPdXRlclN1YnNjcmliZXIiLCJub3RpZnlOZXh0Iiwib3V0ZXJWYWx1ZSIsImlubmVyVmFsdWUiLCJvdXRlckluZGV4IiwiaW5uZXJJbmRleCIsImlubmVyU3ViIiwibm90aWZ5RXJyb3IiLCJub3RpZnlDb21wbGV0ZSIsIklubmVyU3Vic2NyaWJlciIsInN1YnNjcmliZVRvUHJvbWlzZSIsInByb21pc2UiLCJnZXRTeW1ib2xJdGVyYXRvciIsIml0ZXJhdG9yIiwic3Vic2NyaWJlVG9JdGVyYWJsZSIsIml0ZXJhYmxlIiwiU3ltYm9sX2l0ZXJhdG9yIiwiaXRlbSIsImRvbmUiLCJyZXR1cm4iLCJzdWJzY3JpYmVUb09ic2VydmFibGUiLCJvYnMiLCJUeXBlRXJyb3IiLCJpc0FycmF5TGlrZSIsImlzUHJvbWlzZSIsInN1YnNjcmliZVRvIiwic3Vic2NyaWJlVG9SZXN1bHQiLCJvdXRlclN1YnNjcmliZXIiLCJOT05FIiwiQ29tYmluZUxhdGVzdFN1YnNjcmliZXIiLCJyZXN1bHRTZWxlY3RvciIsInZhbHVlcyIsIm9ic2VydmFibGVzIiwidG9SZXNwb25kIiwidW51c2VkIiwib2xkVmFsIiwiX3RyeVJlc3VsdFNlbGVjdG9yIiwiTWVyZ2VNYXBTdWJzY3JpYmVyIiwiY29uY3VycmVudCIsImJ1ZmZlciIsIl90cnlOZXh0IiwiX2lubmVyU3ViIiwiaXNoIiwiRm9ya0pvaW5TdWJzY3JpYmVyIiwic291cmNlcyIsImNvbXBsZXRlZCIsImhhdmVWYWx1ZXMiLCJpbm5lclN1YnNjcmlwdGlvbiIsIl9oYXNWYWx1ZSIsIlJhY2VTdWJzY3JpYmVyIiwiaGFzRmlyc3QiLCJaaXBTdWJzY3JpYmVyIiwiaXRlcmF0b3JzIiwiU3RhdGljQXJyYXlJdGVyYXRvciIsIlN0YXRpY0l0ZXJhdG9yIiwiWmlwQnVmZmVySXRlcmF0b3IiLCJzdGlsbFVuc3Vic2NyaWJlZCIsIm5vdGlmeUluYWN0aXZlIiwiY2hlY2tJdGVyYXRvcnMiLCJzaG91bGRDb21wbGV0ZSIsIl90cnlyZXN1bHRTZWxlY3RvciIsIm5leHRSZXN1bHQiLCJpc0NvbXBsZXRlIiwid2luZG93IiwiKm9uZSAqY3VycmVuY3lGcm9tIHRvICpjdXJyZW5jeVRvIiwiQ29tbWFuZE1hdGNoMSIsIipvbmUgKnR3byAqY3VycmVuY3lGcm9tIHRvICpjdXJyZW5jeVRvIiwiQ29tbWFuZE1hdGNoMiIsIipvbmUgKnR3byAqdHdvICpjdXJyZW5jeUZyb20gdG8gKmN1cnJlbmN5VG8iLCJDb21tYW5kTWF0Y2gzIiwiKm9uZV9hbmRfY3VycmVuY3lGcm9tIHRvICpjdXJyZW5jeVRvIiwib25lQW5kQ3VyIiwiY3VycmVuY3lUbyIsIkNvbW1hbmRNYXRjaDAiLCJhbm55YW5nIiwiYWRkQ29tbWFuZHMiLCJjb21tYW5kcyIsImFkZENhbGxiYWNrIiwiYWJvcnQiLCJBbm55YW5nIiwiaXNMaXN0ZW5pbmciLCJzdGFydCIsImF1dG9SZXN0YXJ0IiwiY29udGludW91cyIsImFjdGl2YXRlZCQiLCJjdXJyZW5jeVRvVmFsdWUiLCJjbGVhclZhbHVlIiwiYW1vdW50VmFsdWUiLCJjdXJyZW5jeUZyb21WYWx1ZSIsInJlcGxhY2UiLCJwYXJzZUludCIsImNvbnZlcnREYXRhIiwiYW1vdW50IiwiY3VycmVuY3lGcm9tIiwiY29udmVydFJlcXVzdCQiLCJvbmUiLCJ0d28iLCJ0aHJlZSIsImRvbSIsImRhdGFDb2xsZWN0b3IiLCJjb252ZXJ0IiwiQ29udmVydGVyIiwicmF0ZTEiLCJyYXRlcyIsInJhdGUyIiwiZWxlbWVudHMiLCJpbm5lckhUTUwiLCJ0b0ZpeGVkIiwiZGV4eWUiLCJmZXRjaFJhdGVzIiwiRGF0YUNvbGxlY3RvciIsImdldExhdGVzdFJlc3BvbmNlIiwibGFzdFJlc3BvbmNlIiwibGFzdCIsImlzVmFsaWQiLCJpc0NhY2hlZERhdGFWYWxpZCIsImRhdGFQYXJhbXMiLCJmZXRjaCIsInJlc3BvbnNlIiwianNvbiIsImxhdGVzdFJlc3BvbmNlIiwiY2F0Y2giLCJrZXlzIiwiX2dsb2JhbCIsInNlbGYiLCJnbG9iYWwiLCJleHRlbmQiLCJleHRlbnNpb24iLCJnZXRQcm90byIsImdldFByb3RvdHlwZU9mIiwiX2hhc093biIsImhhc093biIsInByb3AiLCJwcm9wcyIsInByb3RvIiwic2V0UHJvcCIsImZ1bmN0aW9uT3JHZXRTZXQiLCJvcHRpb25zIiwid3JpdGFibGUiLCJkZXJpdmUiLCJDaGlsZCIsImZyb20iLCJQYXJlbnQiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRQcm9wZXJ0eURlc2NyaXB0b3IiLCJfc2xpY2UiLCJlbmQiLCJvdmVycmlkZSIsIm9yaWdGdW5jIiwib3ZlcnJpZGVkRmFjdG9yeSIsImFzc2VydCIsImFycmF5VG9PYmplY3QiLCJleHRyYWN0b3IiLCJuYW1lQW5kVmFsdWUiLCJ0cnljYXRjaGVyIiwib25lcnJvciIsImV4IiwiZ2V0QnlLZXlQYXRoIiwia2V5UGF0aCIsInJ2IiwibCIsInZhbCIsInBlcmlvZCIsImlubmVyT2JqIiwic3Vic3RyIiwic2V0QnlLZXlQYXRoIiwiaXNGcm96ZW4iLCJjdXJyZW50S2V5UGF0aCIsInJlbWFpbmluZ0tleVBhdGgiLCJkZWxCeUtleVBhdGgiLCJrcCIsInNoYWxsb3dDbG9uZSIsIm0iLCJmbGF0dGVuIiwiaW50cmluc2ljVHlwZXMiLCJzcGxpdCIsIm51bSIsInQiLCJmaWx0ZXIiLCJkZWVwQ2xvbmUiLCJhbnkiLCJnZXRPYmplY3REaWZmIiwicHJmeCIsImFwIiwiYnAiLCJpdGVyYXRvclN5bWJvbCIsImdldEl0ZXJhdG9yT2YiLCJOT19DSEFSX0FSUkFZIiwiZ2V0QXJyYXlPZiIsImFycmF5TGlrZSIsIml0IiwiZGVidWciLCJsb2NhdGlvbiIsInRlc3QiLCJocmVmIiwic2V0RGVidWciLCJsaWJyYXJ5RmlsdGVyIiwiTkVFRFNfVEhST1dfRk9SX1NUQUNLIiwiZ2V0RXJyb3JXaXRoU3RhY2siLCJwcmV0dHlTdGFjayIsImV4Y2VwdGlvbiIsIm51bUlnbm9yZWRGcmFtZXMiLCJtZXNzYWdlIiwiZGVwcmVjYXRlZCIsIndoYXQiLCJjb25zb2xlIiwid2FybiIsImRleGllRXJyb3JOYW1lcyIsImlkYkRvbUVycm9yTmFtZXMiLCJlcnJvckxpc3QiLCJkZWZhdWx0VGV4dHMiLCJWZXJzaW9uQ2hhbmdlZCIsIkRhdGFiYXNlQ2xvc2VkIiwiQWJvcnQiLCJUcmFuc2FjdGlvbkluYWN0aXZlIiwiRGV4aWVFcnJvciIsIm1zZyIsIl9lIiwiZ2V0TXVsdGlFcnJvck1lc3NhZ2UiLCJmYWlsdXJlcyIsImYiLCJ2IiwicyIsIk1vZGlmeUVycm9yIiwic3VjY2Vzc0NvdW50IiwiZmFpbGVkS2V5cyIsIkJ1bGtFcnJvciIsIl9zdGFjayIsImVycm5hbWVzIiwiQmFzZUV4Y2VwdGlvbiIsImV4Y2VwdGlvbnMiLCJmdWxsTmFtZSIsIm1zZ09ySW5uZXIiLCJpbm5lciIsIlN5bnRheCIsIlN5bnRheEVycm9yIiwiVHlwZSIsIlJhbmdlIiwiUmFuZ2VFcnJvciIsImV4Y2VwdGlvbk1hcCIsIm1hcEVycm9yIiwiZG9tRXJyb3IiLCJmdWxsTmFtZUV4Y2VwdGlvbnMiLCJub3AiLCJtaXJyb3IiLCJwdXJlRnVuY3Rpb25DaGFpbiIsImYxIiwiZjIiLCJjYWxsQm90aCIsIm9uMSIsIm9uMiIsImhvb2tDcmVhdGluZ0NoYWluIiwicmVzIiwib25zdWNjZXNzIiwicmVzMiIsImhvb2tEZWxldGluZ0NoYWluIiwiaG9va1VwZGF0aW5nQ2hhaW4iLCJtb2RpZmljYXRpb25zIiwicmV2ZXJzZVN0b3BwYWJsZUV2ZW50Q2hhaW4iLCJwcm9taXNhYmxlQ2hhaW4iLCJ0aGl6IiwiSU5URVJOQUwiLCJMT05HX1NUQUNLU19DTElQX0xJTUlUIiwiTUFYX0xPTkdfU1RBQ0tTIiwiWk9ORV9FQ0hPX0xJTUlUIiwibmF0aXZlUHJvbWlzZUluc3RhbmNlQW5kUHJvdG8iLCJGdW5jdGlvbiIsIlAiLCJyZXNvbHZlZE5hdGl2ZVByb21pc2UiLCJuYXRpdmVQcm9taXNlUHJvdG8iLCJyZXNvbHZlZEdsb2JhbFByb21pc2UiLCJuYXRpdmVQcm9taXNlVGhlbiIsIk5hdGl2ZVByb21pc2UiLCJBc3luY0Z1bmN0aW9uIiwicGF0Y2hHbG9iYWxQcm9taXNlIiwic3RhY2tfYmVpbmdfZ2VuZXJhdGVkIiwic2NoZWR1bGVQaHlzaWNhbFRpY2siLCJwaHlzaWNhbFRpY2siLCJNdXRhdGlvbk9ic2VydmVyIiwiaGlkZGVuRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsInNldEF0dHJpYnV0ZSIsImFzYXAkMSIsImNhbGxiYWNrIiwibWljcm90aWNrUXVldWUiLCJuZWVkc05ld1BoeXNpY2FsVGljayIsImlzT3V0c2lkZU1pY3JvVGljayIsInVuaGFuZGxlZEVycm9ycyIsInJlamVjdGluZ0Vycm9ycyIsImN1cnJlbnRGdWxmaWxsZXIiLCJyZWplY3Rpb25NYXBwZXIiLCJnbG9iYWxQU0QiLCJyZWYiLCJ1bmhhbmRsZWRzIiwib251bmhhbmRsZWQiLCJnbG9iYWxFcnJvciIsInBncCIsImVudiIsImZpbmFsaXplIiwidWgiLCJQU0QiLCJudW1TY2hlZHVsZWRDYWxscyIsInRpY2tGaW5hbGl6ZXJzIiwiX2xpc3RlbmVycyIsIm9udW5jYXRjaGVkIiwiX2xpYiIsInBzZCIsIl9QU0QiLCJfc3RhY2tIb2xkZXIiLCJfcHJldiIsIl9udW1QcmV2IiwiX3N0YXRlIiwiaGFuZGxlUmVqZWN0aW9uIiwiZXhlY3V0ZVByb21pc2VUYXNrIiwidGhlblByb3AiLCJtaWNyb1Rhc2tJZCIsInRvdGFsRWNob2VzIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwicG9zc2libGVBd2FpdCIsImRlY3JlbWVudEV4cGVjdGVkQXdhaXRzIiwicHJvcGFnYXRlVG9MaXN0ZW5lciIsIkxpc3RlbmVyIiwibmF0aXZlQXdhaXRDb21wYXRpYmxlV3JhcCIsImxpbmtUb1ByZXZpb3VzUHJvbWlzZSIsInpvbmUiLCJzaG91bGRFeGVjdXRlVGljayIsImJlZ2luTWljcm9UaWNrU2NvcGUiLCJfdGhlbiIsInByb3BhZ2F0ZUFsbExpc3RlbmVycyIsImVuZE1pY3JvVGlja1Njb3BlIiwicmVhc29uIiwiX3Byb21pc2UiLCJvcmlnUHJvcCIsImFkZFBvc3NpYmx5VW5oYW5kbGVkRXJyb3IiLCJsaXN0ZW5lcnMiLCJmaW5hbGl6ZVBoeXNpY2FsVGljayIsImxpc3RlbmVyIiwiY2FsbExpc3RlbmVyIiwicmV0IiwibWFya0Vycm9yQXNIYW5kbGVkIiwiZ2V0U3RhY2siLCJzdGFja3MiLCJsaW1pdCIsImVycm9yTmFtZSIsImZhaWx1cmUiLCJudW1QcmV2Iiwid2FzUm9vdEV4ZWMiLCJjYWxsYmFja3MiLCJ1bmhhbmRsZWRFcnJzIiwiZmluYWxpemVycyIsInJ1bl9hdF9lbmRfb2ZfdGhpc19vcl9uZXh0X3BoeXNpY2FsX3RpY2siLCJmaW5hbGl6ZXIiLCJzb21lIiwiUHJvbWlzZVJlamVjdCIsIndyYXAiLCJlcnJvckNhdGNoZXIiLCJvdXRlclNjb3BlIiwic3dpdGNoVG9ab25lIiwidHlwZSIsImhhbmRsZXIiLCJmaW5hbGx5Iiwib25GaW5hbGx5IiwidGltZW91dCIsIm1zIiwiSW5maW5pdHkiLCJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwidG9TdHJpbmdUYWciLCJzbmFwU2hvdCIsImFsbCIsIm9uUG9zc2libGVQYXJhbGxlbGxBc3luYyIsInJlbWFpbmluZyIsInJhY2UiLCJuZXdQU0QiLCJuZXdTY29wZSIsInVzZVBTRCIsImZvbGxvdyIsInpvbmVQcm9wcyIsInRhc2siLCJhd2FpdHMiLCJlY2hvZXMiLCJ0YXNrQ291bnRlciIsInpvbmVTdGFjayIsInpvbmVFY2hvZXMiLCJ6b25lX2lkX2NvdW50ZXIiLCJwcm9wcyQkMSIsImExIiwiYTIiLCJnbG9iYWxFbnYiLCJQcm9taXNlUHJvcCIsIm50aGVuIiwiZ2V0UGF0Y2hlZFByb21pc2VUaGVuIiwiZ3RoZW4iLCJpbmNyZW1lbnRFeHBlY3RlZEF3YWl0cyIsInNvdXJjZVRhc2tJZCIsInBvc3NpYmxlUHJvbWlzZSIsInJlamVjdGlvbiIsInpvbmVFbnRlckVjaG8iLCJ0YXJnZXRab25lIiwiem9uZUxlYXZlRWNobyIsImJFbnRlcmluZ1pvbmUiLCJjdXJyZW50Wm9uZSIsImVucXVldWVOYXRpdmVNaWNyb1Rhc2siLCJHbG9iYWxQcm9taXNlIiwidGFyZ2V0RW52IiwiYTMiLCJqb2IiLCJvdXRlclpvbmUiLCJvcmlnVGhlbiIsIm9uUmVzb2x2ZWQiLCJVTkhBTkRMRURSRUpFQ1RJT04iLCJldmVudCIsImV2ZW50RGF0YSIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJkaXNwYXRjaEV2ZW50IiwiUHJvbWlzZVJlamVjdGlvbkV2ZW50Iiwib251bmhhbmRsZWRyZWplY3Rpb24iLCJfIiwiZGVmYXVsdFByZXZlbnRlZCIsIkV2ZW50cyIsImN0eCIsImV2cyIsImV2ZW50TmFtZSIsImFkZEV2ZW50VHlwZSIsImNoYWluRnVuY3Rpb24iLCJkZWZhdWx0RnVuY3Rpb24iLCJjZmciLCJzdWJzY3JpYmVycyIsImZpcmUiLCJJbnZhbGlkQXJndW1lbnQiLCJkYk5hbWVzREIiLCJERVhJRV9WRVJTSU9OIiwibWF4U3RyaW5nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwibWF4S2V5IiwiSURCS2V5UmFuZ2UiLCJvbmx5IiwibWluS2V5IiwiSU5WQUxJRF9LRVlfQVJHVU1FTlQiLCJTVFJJTkdfRVhQRUNURUQiLCJjb25uZWN0aW9ucyIsImlzSUVPckVkZ2UiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJoYXNJRURlbGV0ZU9iamVjdFN0b3JlQnVnIiwiaGFuZ3NPbkRlbGV0ZUxhcmdlS2V5UmFuZ2UiLCJkZXhpZVN0YWNrRnJhbWVGaWx0ZXIiLCJEZXhpZSIsImRiTmFtZSIsImRiUmVhZHlSZXNvbHZlIiwiY2FuY2VsT3BlbiIsImhhc0dldEFsbCIsImRlcHMiLCJkZXBlbmRlbmNpZXMiLCJvcHRzIiwiYWRkb25zIiwiYXV0b09wZW4iLCJpbmRleGVkREIiLCJnbG9iYWxTY2hlbWEiLCJfZGJTY2hlbWEiLCJ2ZXJzaW9ucyIsImRiU3RvcmVOYW1lcyIsImFsbFRhYmxlcyIsImlkYmRiIiwiZGJPcGVuRXJyb3IiLCJpc0JlaW5nT3BlbmVkIiwib25SZWFkeUJlaW5nRmlyZWQiLCJvcGVuQ29tcGxldGUiLCJSRUFET05MWSIsIlJFQURXUklURSIsImRiIiwiZGJSZWFkeVByb21pc2UiLCJvcGVuQ2FuY2VsbGVyIiwiYXV0b1NjaGVtYSIsImhhc05hdGl2ZUdldERhdGFiYXNlTmFtZXMiLCJnZXROYXRpdmVHZXREYXRhYmFzZU5hbWVzRm4iLCJWZXJzaW9uIiwidmVyc2lvbk51bWJlciIsIl9jZmciLCJ2ZXJzaW9uIiwic3RvcmVzU291cmNlIiwiZGJzY2hlbWEiLCJ0YWJsZXMiLCJjb250ZW50VXBncmFkZSIsInN0b3JlcyIsInJ1blVwZ3JhZGVycyIsIm9sZFZlcnNpb24iLCJpZGJ0cmFucyIsInRyYW5zIiwiX2NyZWF0ZVRyYW5zYWN0aW9uIiwiX2NvbXBsZXRpb24iLCJyZWplY3RUcmFuc2FjdGlvbiIsIl9yZWplY3QiLCJ0YWJsZU5hbWUiLCJjcmVhdGVUYWJsZSIsInByaW1LZXkiLCJpbmRleGVzIiwib24iLCJwb3B1bGF0ZSIsIm9sZFZlcnNpb25TdHJ1Y3QiLCJVcGdyYWRlIiwiYW55Q29udGVudFVwZ3JhZGVySGFzUnVuIiwib2xkU2NoZW1hIiwibmV3U2NoZW1hIiwiYWRqdXN0VG9FeGlzdGluZ0luZGV4TmFtZXMiLCJkaWZmIiwiZGVsIiwiY2hhbmdlIiwidGFibGUiLCJvbGREZWYiLCJuZXdEZWYiLCJkZWYiLCJyZWNyZWF0ZSIsInNyYyIsIm9sZEluZGV4ZXMiLCJpZHhCeU5hbWUiLCJuZXdJbmRleGVzIiwiaWR4TmFtZSIsIm9sZElkeCIsIm5ld0lkeCIsImdldFNjaGVtYURpZmYiLCJ0dXBsZSIsInN0b3JlIiwib2JqZWN0U3RvcmUiLCJpZHgiLCJhZGRJbmRleCIsImRlbGV0ZUluZGV4Iiwib2JqZWN0U3RvcmVOYW1lcyIsInN0b3JlTmFtZSIsImRlbGV0ZU9iamVjdFN0b3JlIiwiZGVsZXRlUmVtb3ZlZFRhYmxlcyIsInJ1blF1ZXVlIiwiY29udGFpbnMiLCJ1cGRhdGVUYWJsZXNBbmRJbmRleGVzIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJhdXRvSW5jcmVtZW50IiwiYXV0byIsImNyZWF0ZUluZGV4IiwidW5pcXVlIiwibXVsdGlFbnRyeSIsIm11bHRpIiwiVGFibGUiLCJ0YWJsZVNjaGVtYSIsIm9wdGlvbmFsVHJhbnMiLCJzY2hlbWEiLCJfdHgiLCJob29rIiwiY3JlYXRpbmciLCJyZWFkaW5nIiwidXBkYXRpbmciLCJkZWxldGluZyIsIkJ1bGtFcnJvckhhbmRsZXJDYXRjaEFsbCIsInN1cHBvcnRIb29rcyIsImhvb2tlZEV2ZW50UmVqZWN0SGFuZGxlciIsImV2ZW50UmVqZWN0SGFuZGxlciIsImJ1bGtEZWxldGUiLCJpZGJzdG9yZSIsImtleXNPclR1cGxlcyIsImhhc0RlbGV0ZUhvb2siLCJkZWxldGluZ0hvb2siLCJsYXN0SXRlbSIsImhvb2tDdHgiLCJlcnJvckhhbmRsZXIiLCJzdWNjZXNzSGFuZGxlciIsImhvb2tlZEV2ZW50U3VjY2Vzc0hhbmRsZXIiLCJyZXEiLCJfaG9va0N0eCIsIlRyYW5zYWN0aW9uIiwibW9kZSIsInN0b3JlTmFtZXMiLCJfcmVjdWxvY2siLCJfYmxvY2tlZEZ1bmNzIiwiX3Jlc29sdmUiLCJfd2FpdGluZ0ZvciIsIl93YWl0aW5nUXVldWUiLCJfc3BpbkNvdW50Iiwid2FzQWN0aXZlIiwiV2hlcmVDbGF1c2UiLCJvckNvbGxlY3Rpb24iLCJfY3R4Iiwib3IiLCJDb2xsZWN0aW9uIiwid2hlcmVDbGF1c2UiLCJrZXlSYW5nZUdlbmVyYXRvciIsImtleVJhbmdlIiwid2hlcmVDdHgiLCJpc1ByaW1LZXkiLCJyYW5nZSIsImtleXNPbmx5IiwiZGlyIiwiYWxnb3JpdGhtIiwicmVwbGF5RmlsdGVyIiwianVzdExpbWl0IiwiaXNNYXRjaCIsIm9mZnNldCIsInZhbHVlTWFwcGVyIiwiaXNQbGFpbktleVJhbmdlIiwiaWdub3JlTGltaXRGaWx0ZXIiLCJsb3dlclZlcnNpb25GaXJzdCIsInNldEFwaU9uUGxhY2UiLCJvYmpzIiwidGFibGVOYW1lcyIsIml0ZXJhdGUiLCJ3cmFwcGVkRm4iLCJjIiwiY3Vyc29yIiwiY29udGludWUiLCJhZHZhbmNlciIsImNtcCIsImtleTEiLCJrZXkyIiwiYXNjZW5kaW5nIiwiZGVzY2VuZGluZyIsInNpbXBsZUNvbXBhcmUiLCJzaW1wbGVDb21wYXJlUmV2ZXJzZSIsImNvbWJpbmUiLCJmaWx0ZXIxIiwiZmlsdGVyMiIsImoiLCJpbmRleE5hbWVzIiwiaW5kZXhOYW1lIiwiZGV4aWVOYW1lIiwiaW5kZXhTcGVjIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJtYXRjaCIsImZpcmVPbkJsb2NrZWQiLCJldiIsIl92Y0ZpcmVkIiwiU2NoZW1hIiwidmVybm8iLCJ2ZXJzaW9uSW5zdGFuY2UiLCJzdG9yZXNTcGVjIiwiX3BhcnNlU3RvcmVzU3BlYyIsInVwZ3JhZGUiLCJ1cGdyYWRlRnVuY3Rpb24iLCJvdXRTY2hlbWEiLCJpbnN0YW5jZVRlbXBsYXRlIiwidHJpbSIsIkluZGV4U3BlYyIsImNvbXBvdW5kIiwiVGFibGVTY2hlbWEiLCJfYWxsVGFibGVzIiwicGFyZW50VHJhbnNhY3Rpb24iLCJfd2hlblJlYWR5IiwibGV0VGhyb3VnaCIsIm9wZW4iLCJyZXNvbHZlRGJSZWFkeSIsInVwZ3JhZGVUcmFuc2FjdGlvbiIsIk1pc3NpbmdBUEkiLCJyb3VuZCIsIm9uYmxvY2tlZCIsIm9udXBncmFkZW5lZWRlZCIsInRyYW5zYWN0aW9uIiwiX2FsbG93RW1wdHlEQiIsInByZXZlbnREZWZhdWx0IiwiY2xvc2UiLCJkZWxyZXEiLCJkZWxldGVEYXRhYmFzZSIsIk5vU3VjaERhdGFiYXNlIiwicG93Iiwic2FmYXJpTXVsdGlTdG9yZUZpeCIsImRvdHRlZCIsImlkYmluZGV4IiwicmVhZEdsb2JhbFNjaGVtYSIsIm9udmVyc2lvbmNoYW5nZSIsImRibmFtZXMiLCJwdXQiLCJ2aXAiLCJyZWFkeSIsImZpcmVSZW1haW5kZXJzIiwicmVtYWluZGVycyIsImhhc0FyZ3VtZW50cyIsImRvRGVsZXRlIiwiYmFja2VuZERCIiwiaXNPcGVuIiwiaGFzQmVlbkNsb3NlZCIsImhhc0ZhaWxlZCIsImR5bmFtaWNhbGx5T3BlbmVkIiwiYlN0aWNreSIsIl90YWJsZUFyZ3NfIiwic2NvcGVGdW5jIiwiX3RyYW5zYWN0aW9uIiwib25seUlmQ29tcGF0aWJsZSIsIlN1YlRyYW5zYWN0aW9uIiwiZW50ZXJUcmFuc2FjdGlvblNjb3BlIiwidHJhbnNsZXNzIiwicmV0dXJuVmFsdWUiLCJwcm9taXNlRm9sbG93ZWQiLCJkZWNyZW1lbnRvciIsInRocm93IiwiYXdhaXRJdGVyYXRvciIsIlByZW1hdHVyZUNvbW1pdCIsIkludmFsaWRUYWJsZSIsIl90cmFucyIsIndyaXRlTG9ja2VkIiwidGVtcFRyYW5zYWN0aW9uIiwiX2lkYnN0b3JlIiwiTm90Rm91bmQiLCJrZXlPckNyaXQiLCJ3aGVyZSIsImZpcnN0IiwiaW5kZXhPckNyaXQiLCJrZXlQYXRocyIsImVxdWFscyIsImNvbXBvdW5kSW5kZXgiLCJpeCIsImV2ZXJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNpbXBsZUluZGV4IiwiciIsInRvQ29sbGVjdGlvbiIsIm51bVJvd3MiLCJyZXZlcnNlIiwiZmlsdGVyRnVuY3Rpb24iLCJhbmQiLCJlYWNoIiwidG9BcnJheSIsIm9yZGVyQnkiLCJtYXBUb0NsYXNzIiwic3RydWN0dXJlIiwibWFwcGVkQ2xhc3MiLCJhcHBseVN0cnVjdHVyZSIsInJlYWRIb29rIiwiZGVmaW5lQ2xhc3MiLCJrZXlzJCQxIiwiYW55T2YiLCJidWxrUHV0Iiwib2JqZWN0cyIsIm51bU9ianMiLCJldmVudFN1Y2Nlc3NIYW5kbGVyIiwiZWZmZWN0aXZlS2V5cyIsIm8iLCJvYmplY3RMb29rdXAiLCJtb2RpZnkiLCJvYmpzVG9BZGQiLCJrZXlzVG9BZGQiLCJidWxrQWRkIiwibGFzdEFkZGVkS2V5IiwibGFzdEVmZmVjdGl2ZUtleSIsImNyZWF0aW5nSG9vayIsImVmZmVjdGl2ZUtleSIsImtleVRvVXNlIiwidXBkYXRpbmdIb29rIiwidGFyZ2V0IiwidXBkYXRlIiwia2V5T3JPYmplY3QiLCJfbG9jayIsImxvY2tPd25lckZvciIsIl91bmxvY2siLCJfbG9ja2VkIiwiZm5BbmRQU0QiLCJPcGVuRmFpbGVkIiwib25hYm9ydCIsIm9uY29tcGxldGUiLCJiV3JpdGVMb2NrIiwiUmVhZE9ubHkiLCJfcm9vdCIsIndhaXRGb3IiLCJyb290Iiwic3BpbiIsImN1cnJlbnRXYWl0UHJvbWlzZSIsImZhaWwiLCJjb2xsZWN0aW9uT3JXaGVyZUNsYXVzZSIsIlQiLCJjb2xsZWN0aW9uIiwiZW1wdHlDb2xsZWN0aW9uIiwibmV4dENhc2luZyIsImxvd2VyS2V5IiwidXBwZXJOZWVkbGUiLCJsb3dlck5lZWRsZSIsIm1pbiIsImxscCIsImx3cktleUNoYXIiLCJhZGRJZ25vcmVDYXNlQWxnb3JpdGhtIiwibmVlZGxlcyIsInN1ZmZpeCIsInVwcGVyIiwibG93ZXIiLCJjb21wYXJlIiwidXBwZXJOZWVkbGVzIiwibG93ZXJOZWVkbGVzIiwiZGlyZWN0aW9uIiwibmV4dEtleVN1ZmZpeCIsIm5lZWRsZXNMZW4iLCJpbml0RGlyZWN0aW9uIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsIm5lZWRsZUJvdW5kcyIsIm5lZWRsZSIsIm5iIiwiYm91bmQiLCJfb25kaXJlY3Rpb25jaGFuZ2UiLCJmaXJzdFBvc3NpYmxlTmVlZGxlIiwiX2FkZEFsZ29yaXRobSIsImFkdmFuY2UiLCJsb3dlc3RQb3NzaWJsZUNhc2luZyIsImNhc2luZyIsImJldHdlZW4iLCJpbmNsdWRlTG93ZXIiLCJpbmNsdWRlVXBwZXIiLCJhYm92ZSIsImxvd2VyQm91bmQiLCJhYm92ZU9yRXF1YWwiLCJiZWxvdyIsInVwcGVyQm91bmQiLCJiZWxvd09yRXF1YWwiLCJzdGFydHNXaXRoIiwic3RyIiwic3RhcnRzV2l0aElnbm9yZUNhc2UiLCJlcXVhbHNJZ25vcmVDYXNlIiwiYW55T2ZJZ25vcmVDYXNlIiwic3RhcnRzV2l0aEFueU9mSWdub3JlQ2FzZSIsIm4iLCJub3RFcXVhbCIsImluQW55UmFuZ2UiLCJpbmNsdWRlTG93ZXJzIiwiaW5jbHVkZVVwcGVycyIsIm5vbmVPZiIsInJhbmdlcyIsInNvcnREaXJlY3Rpb24iLCJyYW5nZVNvcnRlciIsIm5ld1JhbmdlIiwia2V5SXNCZXlvbmRDdXJyZW50RW50cnkiLCJrZXlJc0JlZm9yZUN1cnJlbnRFbnRyeSIsImNoZWNrS2V5Iiwic3RhcnRzV2l0aEFueU9mIiwiYWRkRmlsdGVyIiwiYWRkUmVwbGF5RmlsdGVyIiwiZmFjdG9yeSIsImlzTGltaXRGaWx0ZXIiLCJjdXJyIiwiZ2V0SW5kZXhPclN0b3JlIiwib3BlbkN1cnNvciIsImlkeE9yU3RvcmUiLCJvcGVuS2V5Q3Vyc29yIiwiaXRlciIsInJlc29sdmVkIiwicmVzb2x2ZWJvdGgiLCJ1bmlvbiIsInByaW1hcnlLZXkiLCJVaW50OEFycmF5IiwiX2l0ZXJhdGUiLCJfcmVhZCIsIl93cml0ZSIsImNsb25lIiwicmF3Iiwic29ydEJ5IiwicGFydHMiLCJsYXN0UGFydCIsImxhc3RJbmRleCIsImdldHZhbCIsIm9yZGVyIiwic29ydGVyIiwiYVZhbCIsImJWYWwiLCJyZWFkaW5nSG9vayIsImdldEFsbCIsIm9mZnNldExlZnQiLCJyb3dzTGVmdCIsInVudGlsIiwiYkluY2x1ZGVTdG9wRW50cnkiLCJkZXNjIiwiZWFjaEtleSIsImVhY2hVbmlxdWVLZXkiLCJlYWNoUHJpbWFyeUtleSIsInByaW1hcnlLZXlzIiwiZ2V0QWxsS2V5cyIsInVuaXF1ZUtleXMiLCJmaXJzdEtleSIsImxhc3RLZXkiLCJkaXN0aW5jdCIsInN0cktleSIsImZvdW5kIiwiY2hhbmdlcyIsIm1vZGlmeWVyIiwib3JpZ0l0ZW0iLCJvYmplY3REaWZmIiwiYWRkaXRpb25hbENoYW5nZXMiLCJudW1LZXlzIiwiYW55dGhpbmdNb2RpZmllZCIsIm9yaWdDaGFuZ2VzIiwiaXRlcmF0aW9uQ29tcGxldGUiLCJmYWlsS2V5cyIsImN1cnJlbnRLZXkiLCJkb1JlamVjdCIsImNoZWNrRmluaXNoZWQiLCJ0aGlzQ29udGV4dCIsImJEZWxldGUiLCJjb3VudFJlcSIsImRlbFJlcSIsIkNIVU5LU0laRSIsInRvdGFsQ291bnQiLCJuZXh0Q2h1bmsiLCJuZXdWZXJzaW9uIiwicGFyc2VUeXBlIiwibWVtYmVyIiwiaG9va1N1Y2Nlc3NIYW5kbGVyIiwiaG9va0Vycm9ySGFuZGxlciIsInN0b3BQcm9wYWdhdGlvbiIsImNhbGxOZXh0Iiwib25TdWNjZXNzIiwic3RlcCIsIm9uRXJyb3IiLCJnZXROZXh0Iiwia2V5UGF0aFNyYyIsImdldERhdGFiYXNlTmFtZXMiLCJ3ZWJraXRHZXREYXRhYmFzZU5hbWVzIiwiZGF0YWJhc2VOYW1lIiwiZXhpc3RzIiwiTm9TdWNoRGF0YWJhc2VFcnJvciIsInByb3BlcnRpZXMiLCJpZ25vcmVUcmFuc2FjdGlvbiIsImdlbmVyYXRvckZuIiwic3Bhd24iLCJjdXJyZW50VHJhbnNhY3Rpb24iLCJwcm9taXNlT3JGdW5jdGlvbiIsIm9wdGlvbmFsVGltZW91dCIsIk11bHRpTW9kaWZ5RXJyb3IiLCJNb2RpZnkiLCJtb3pJbmRleGVkREIiLCJ3ZWJraXRJbmRleGVkREIiLCJtc0luZGV4ZWREQiIsIndlYmtpdElEQktleVJhbmdlIiwic2VtVmVyIiwiZGVmYXVsdCIsIkRCTkFNRVMiLCJsb2NhbFN0b3JhZ2UiLCJwYXJzZSIsImdldEl0ZW0iLCJyZW1vdmVJdGVtIiwicmVzcG9uc2VzIiwiRGV4eWUiLCJyZXNwb25jZU9uZSIsInJlc3BvbmNlVHdvIiwibGF0ZXN0IiwicmVzcG9uY2UiLCJvbmxpbmUiLCJwYXJzZURvbSIsImFkZEV2ZW50TGlzdGVuZXJzIiwiYWN0aXZhdGVkIiwiYWN0aXZhdGVMaXN0ZW5CdXR0b24iLCJzZXRWYWx1ZXMiLCJvbmxpbmUkIiwic3RhdHVzIiwic2V0T25saW5lU3RhdHVzIiwiRG9tIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udmVydEZyb21Eb20iLCJjbGFzc0xpc3QiLCJpdGVtcyIsInVwZGF0ZU9ubGluZVN0YXR1cyIsIk9ubGluZSIsIm9uTGluZSIsInNlcnZpY2VXb3JrZXIiLCJnZXRSZWdpc3RyYXRpb25zIiwicmVnaXN0cmF0aW9ucyIsInNlcnZpY2VXb3JrZXJzIiwicmVnaXN0ZXIiLCJTZXJ2aWNlV29ya2VyQ29udHJvbGxlciIsIkFwcENsYXNzIl0sIm1hcHBpbmdzIjoiYUFnQkEsSUFBSUEsY0FBZ0JDLE9BQU9DLGdCQUN0QixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVDLEVBQUdDLEdBQUtELEVBQUVGLFVBQVlHLElBQ3ZFLFNBQVVELEVBQUdDLEdBQUssSUFBSyxJQUFJQyxLQUFLRCxFQUFPQSxFQUFFRSxlQUFlRCxLQUFJRixFQUFFRSxHQUFLRCxFQUFFQyxLQUV6RSxTQUFnQkUsVUFBVUosRUFBR0MsR0FFekIsU0FBU0ksSUFBT0MsS0FBS0MsWUFBY1AsRUFEbkNMLGNBQWNLLEVBQUdDLEdBRWpCRCxFQUFFUSxVQUFrQixPQUFOUCxFQUFhTCxPQUFPYSxPQUFPUixJQUFNSSxFQUFHRyxVQUFZUCxFQUFFTyxVQUFXLElBQUlILEdDdEJuRixTQUFnQkssV0FBV0MsR0FDdkIsTUFBb0IsbUJBQU5BLEVDRGxCLElBQUlDLHFEQUFzRCxFQUsvQ0MsT0FBUyxDQUtoQkMsYUFBU0MsRUFTVEMsMENBQTBDQyxHQUNsQ0EsSUFDMEIsSUFBSUMsT0FDcUdDLE1BS3ZJUCxvREFBc0RLLEdBRTFERCw0Q0FDSSxPQUFPSixzREN6QmYsU0FBZ0JRLGdCQUFnQkMsR0FDNUJDLFdBQVcsV0FBYyxNQUFNRCxJQ05uQyxJQUVXRSxNQUFRLENBQ2ZDLFFBQVEsRUFDUkMsS0FBTSxTQUFVUixLQUNoQlMsTUFBTyxTQUFVTCxHQUNiLEdBQUlSLE9BQU9HLHNDQUNQLE1BQU1LLEVBR05ELGdCQUFnQkMsSUFHeEJNLFNBQVUsY0NiSEMsUUFBVTdCLE1BQU02QixrQkFBc0JqQixHQUFLLE9BQU9BLEdBQXlCLGlCQUFiQSxFQUFFa0IsUUNBM0UsU0FBZ0JDLFNBQVNuQixHQUNyQixPQUFZLE1BQUxBLEdBQTBCLGlCQUFOQSxF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
